"use strict";function tO173(){var e=tTL(["<div class=\"ztooltip__pointer\"></div>"]);return tO173=function(){return e},e}function tO172(){var e=tTL(["<div class=\"ztooltip__content\">","</div> ",""]);return tO172=function(){return e},e}function tO171(){var e=tTL(["<div class=\"ztooltip\" style='display:none;'>","</div>"]);return tO171=function(){return e},e}function tO170(){var e=tTL([""," ",""]);return tO170=function(){return e},e}function tO169(){var e=tTL(["<div ?aria-label=\"","\" id=\"","\" role=\"splitbutton\" class=\"zbutton--split ","\">","</div>"]);return tO169=function(){return e},e}function tO168(){var e=tTL(["<span class=\"zbutton__text\">","</span>"]);return tO168=function(){return e},e}function tO167(){var e=tTL(["<i class=\"zbutton__icon "," \"> "," </i>"]);return tO167=function(){return e},e}function tO166(){var e=tTL([""," "," ",""]);return tO166=function(){return e},e}function tO165(){var e=tTL(["<button ?aria-label=\"","\" id=\"","\" role=\"","\" ?type=\"","\" class=\"zbutton ","\">","</button>"]);return tO165=function(){return e},e}function tO164(){var e=tTL(["<i class=\"","\">","</i>"]);return tO164=function(){return e},e}function tO163(){var e=tTL(["<span class=\"zswitch__label\">","</span>"]);return tO163=function(){return e},e}function tO162(){var e=tTL(["<span class=\"zswitch__label\">","</span>"]);return tO162=function(){return e},e}function tO161(){var e=tTL(["<div class=\"zswitch__thumb ","\">","</div><div class=\"zswitch__wrapper\"><div class=\"zswitch__statescontainer ","\"><div class=\"zswitch__onstate\">","","</div><div class=\"zswitch__offstate\">","","</div></div></div>"]);return tO161=function(){return e},e}function tO160(){var e=tTL(["<div type=\"input\" ?aria-label=\"","\" ?id=\"","\" ?role=\"","\" class=\"zswitch ","\" ?checked=\"","\">","</div>"]);return tO160=function(){return e},e}function tO159(){var e=tTL([""," "," ",""]);return tO159=function(){return e},e}function tO158(){var e=tTL(["<div class=\"","\"> "," "," </div>"]);return tO158=function(){return e},e}function tO157(){var e=tTL(["<div class=\"","\"> "," "," </div>"]);return tO157=function(){return e},e}function tO156(){var e=tTL(["<div class=\"","\"> <div class=\"zdatetimeselectbox__datetimecontainer\"> "," </div> </div>"]);return tO156=function(){return e},e}function tO155(){var e=tTL(["<li ?class=\"","\" ?valueType=\"","\" id=\"","\" ?style=\"","\">","</li>"]);return tO155=function(){return e},e}function tO154(){var e=tTL(["<div ?class=\"","\"> "," <ul class=\"zdatetimeselectbox__listbox\"> "," </ul> "," </div>"]);return tO154=function(){return e},e}function tO153(){var e=tTL([""," <div class=\"zselectbox__selected\"> <span class=\"zdatetimeselectbox__label zselectbox__text\" aria-placeholder=\"","\"></span> </div> "," "," "," ",""]);return tO153=function(){return e},e}function tO152(){var e=tTL(["<div>","</div>"]);return tO152=function(){return e},e}function tO151(){var e=tTL(["<div class=","> "," "," </div>"]);return tO151=function(){return e},e}function tO150(){var e=tTL([""," ",""]);return tO150=function(){return e},e}function tO149(){var e=tTL([""," ",""]);return tO149=function(){return e},e}function tO148(){var e=tTL([""," ",""]);return tO148=function(){return e},e}function tO147(){var e=tTL([""," "," ",""]);return tO147=function(){return e},e}function tO146(){var e=tTL([""," ",""]);return tO146=function(){return e},e}function tO145(){var e=tTL(["<div class='zdatetimepicker--multipleselectbox'> "," </div >"]);return tO145=function(){return e},e}function tO144(){var e=tTL(["<span class='zdatetimepicker__timelabel'>","</span>"]);return tO144=function(){return e},e}function tO143(){var e=tTL([""," ",""]);return tO143=function(){return e},e}function tO142(){var e=tTL([""," "," "]);return tO142=function(){return e},e}function tO141(){var e=tTL(["<div class=\"","\"> <div class=\"zdatetimeselectbox__datetimecontainer\"> </div> </div>"]);return tO141=function(){return e},e}function tO140(){var e=tTL(["<li ?class=\"","\" ?valueType=\"","\" id=\"","\" ?style=\"","\">","</li>"]);return tO140=function(){return e},e}function tO139(){var e=tTL(["<div ?class=\"","\"> "," <ul class=\"zdatetimeselectbox__listbox\"> "," </ul> "," </div>"]);return tO139=function(){return e},e}function tO138(){var e=tTL([""," <div class=\"zselectbox__selected\"> <span class=\"zdatetimeselectbox__label zselectbox__text\" aria-placeholder=\"","\"></span> </div> "," "," "," ",""]);return tO138=function(){return e},e}function tO137(){var e=tTL(["<div>","</div>"]);return tO137=function(){return e},e}function tO136(){var e=tTL(["<li class='zdatetimepicker__list'> <div class='zdatetimepicker__fromtolabel'> "," </div> <div class='zdatetimepicker zdatetimepicker--calendarsplit'> "," "," </div> </li>"]);return tO136=function(){return e},e}function tO135(){var e=tTL(["<ul class='zdatetimepicker__container'> "," "," </ul>"]);return tO135=function(){return e},e}function tO134(){var e=tTL(["<div class='zdatetimepicker__pointer'></div>"]);return tO134=function(){return e},e}function tO133(){var e=tTL([""," "," "," ",""]);return tO133=function(){return e},e}function tO132(){var e=tTL(["<tr role=\"row\"><td role=\"gridcell\" class=\"zdatetimepicker__weeknumber\">","</td></tr>"]);return tO132=function(){return e},e}function tO131(){var e=tTL(["<table role='grid' class='zdatetimepicker__weeknumbers'> <thead> <tr role=\"row\"> <th class=\"zdatetimepicker__weeknumber\">","</th> </tr> </thead> <tbody> "," </tbody> </table>"]);return tO131=function(){return e},e}function tO130(){var e=tTL(["<div class='zdatetimepicker__titlebar' role='heading'> <span class='zdatetimepicker__title'>","</span> "," </div>"]);return tO130=function(){return e},e}function tO129(){var e=tTL(["",""]);return tO129=function(){return e},e}function tO128(){var e=tTL(["<td role='gridcell' class='","' data-value=\"","\">","</td>"]);return tO128=function(){return e},e}function tO127(){var e=tTL(["<tr role='row'>"]);return tO127=function(){return e},e}function tO126(){var e=tTL(["<div class=\"zdatetimepicker__drilldownview\"> <table role=\"grid\" class=\"zdatetimepicker__drilldowncell\"> <tbody> "," </tbody> </table> </div> </div>"]);return tO126=function(){return e},e}function tO125(){var e=tTL(["<div class='zdatetimepicker__","drilldown zdatetimepicker__monthcontainer' ?style='","'> "," ",""]);return tO125=function(){return e},e}function tO124(){var e=tTL(["<div class=\"zdatetimepicker__rightnav\"> "," "," "," "," </div>"]);return tO124=function(){return e},e}function tO123(){var e=tTL(["<span class='zdatetimepicker__yearnav'> "," </span>"]);return tO123=function(){return e},e}function tO122(){var e=tTL(["<span class='zdatetimepicker__monthnav'> "," </span>"]);return tO122=function(){return e},e}function tO121(){var e=tTL(["<div class=\"zdatetimepicker__monthyearnav ","\"> "," "," </div>"]);return tO121=function(){return e},e}function tO120(){var e=tTL(["<div class=\"zdatetimepicker__leftnav\"> "," "," </div>"]);return tO120=function(){return e},e}function tO119(){var e=tTL(["<div class=\"zdatetimepicker__navbar ","\"> "," "," "," "," "," </div > "]);return tO119=function(){return e},e}function tO118(){var e=tTL(["<span class='zdatetimepicker__secondaryinfo'>","</span>"]);return tO118=function(){return e},e}function tO117(){var e=tTL(["<td role='gridcell' ?class='","' ?data-time='","' ?title='","'> <span class='zdatetimepicker__text'>"," </span> "," </td>"]);return tO117=function(){return e},e}function tO116(){var e=tTL(["<tr> ",""]);return tO116=function(){return e},e}function tO115(){var e=tTL(["<th class=",">","</th>"]);return tO115=function(){return e},e}function tO114(){var e=tTL(["<div class=\"zdatetimepicker__monthcontainer zdatetimepicker__days\" ?style='","'> "," <div class=\"zdatetimepicker__calendar\"> "," <table role=\"grid\" class=","> <thead> <tr role='row' class='zdatetimepicker__week'> "," </tr> </thead> <tbody> "," </tbody> </table> </div> </div>"]);return tO114=function(){return e},e}function tO113(){var e=tTL([""," "," "," "]);return tO113=function(){return e},e}function tO112(){var e=tTL([""," "," "]);return tO112=function(){return e},e}function tO111(){var e=tTL(["<li class='zdatetimepicker__list'> <div class='zdatetimepicker'> "," "," </div> </li>"]);return tO111=function(){return e},e}function tO110(){var e=tTL(["<ul class='zdatetimepicker__container'> "," </ul>"]);return tO110=function(){return e},e}function tO109(){var e=tTL(["<div class='zdatetimepicker__pointer'></div>"]);return tO109=function(){return e},e}function tO108(){var e=tTL([""," "," "," ",""]);return tO108=function(){return e},e}function tO107(){var e=tTL(["<span class='ztokenfield__text' ?title='","'> "," </span>"]);return tO107=function(){return e},e}function tO106(){var e=tTL(["<img src='","' class='ztokenfield__image' />"]);return tO106=function(){return e},e}function tO105(){var e=tTL(["<i class='ztokenfield__image ","'></i>"]);return tO105=function(){return e},e}function tO104(){var e=tTL([""," "," ",""]);return tO104=function(){return e},e}function tO103(){var e=tTL(["",""]);return tO103=function(){return e},e}function tO102(){var e=tTL(["<div class='ztokenfield__token "," ","' tabindex='-1' id='","' .actualData='","' ?style='","'> "," </div>"]);return tO102=function(){return e},e}function tO101(){var e=tTL(["<input type='text' id='","-edit-input' autocomplete=off class='ztokenfield__textbox ztokenfield__editinput' tabindex='0'/>"]);return tO101=function(){return e},e}function tO100(){var e=tTL([" ",""]);return tO100=function(){return e},e}function tO99(){var e=tTL([""," <input type='text' aria-haspopup='true' autocomplete=off role='textbox' aria-expanded='false' aria-owns='","-menu' id='","-input' autocomplete='off' tabindex='","' class='ztokenfield__textbox' ?disabled='","'/> <input type='text' style='","' autocomplete=off tabindex='-1' id='","-copy-helper' />"]);return tO99=function(){return e},e}function tO98(){var e=tTL(["<div>","</div>"]);return tO98=function(){return e},e}function tO97(){var e=tTL(["<input type=text class=\""," ","\">"]);return tO97=function(){return e},e}function tO96(){var e=tTL(["<input ?disabled="," ?tabindex="," class=\"zselectbox__textbox\" ?value="," ?placeholder="," autocomplete=\"off\" />"]);return tO96=function(){return e},e}function tO95(){var e=tTL([""," ",""]);return tO95=function(){return e},e}function tO94(){var e=tTL(["<div class=\"zselectbox__selected\"> "," </div> "," ",""]);return tO94=function(){return e},e}function tO93(){var e=tTL(["<div>"]);return tO93=function(){return e},e}function tO92(){var e=tTL(["<div class='zdropdownlist__commandbar'> "," </div>"]);return tO92=function(){return e},e}function tO91(){var e=tTL(["<div class='zdropdownlist__pointer'></div>"]);return tO91=function(){return e},e}function tO90(){var e=tTL([""," "," "," ",""]);return tO90=function(){return e},e}function tO89(){var e=tTL(["<li class=\"","\" data-ignore-focus=true data-zplaceholder=\"true\" style='height:","px;'></li>"]);return tO89=function(){return e},e}function tO88(){var e=tTL(["<button class=\"","\" ?title=\"","\" tabindex=-1 id=\"","\" on-click=","> "," </button>"]);return tO88=function(){return e},e}function tO87(){var e=tTL(["<div class='"," ","'> <div class=\"","\"> "," </div> <input id=\"","\" ?disabled="," autocomplete=\"off\" type=\"text\" class=\"","\" autocomplete=\"off\"> "," </div> "]);return tO87=function(){return e},e}function tO86(){var e=tTL(["<span class=\"","\">","</span>"]);return tO86=function(){return e},e}function tO85(){var e=tTL(["<div style='display:none;' id="," class=\"","\"> "," </div>"]);return tO85=function(){return e},e}function tO84(){var e=tTL(["<i class=\""," zh-loading\"> <svg class=\"zeffects--rotate\" viewBox=\"0 0 20 20\"> <circle class=\"circle__track\" cx=\"10\" cy=\"10\" r=\"9\" /> <circle class=\"circle__load\" cx=\"10\" cy=\"10\" r=\"9\" /> </svg> </i>"]);return tO84=function(){return e},e}function tO83(){var e=tTL(["",""]);return tO83=function(){return e},e}function tO82(){var e=tTL(["<li id="," class=\"","\"> "," </li>"]);return tO82=function(){return e},e}function tO81(){var e=tTL(["<span class=\"","\">","</span>"]);return tO81=function(){return e},e}function tO80(){var e=tTL(["<img src=\"","\" />"]);return tO80=function(){return e},e}function tO79(){var e=tTL(["",""]);return tO79=function(){return e},e}function tO78(){var e=tTL(["<ul class='","'> "," "," </ul>"]);return tO78=function(){return e},e}function tO77(){var e=tTL(["<ul class='","'> "," </ul>"]);return tO77=function(){return e},e}function tO76(){var e=tTL(["<span class=\"","\" >","</span>"]);return tO76=function(){return e},e}function tO75(){var e=tTL(["<li ?id="," class=\""," "," ","\" data-ignore-focus=true role=\"group\" .itemData=\"","\"> "," </li>"]);return tO75=function(){return e},e}function tO74(){var e=tTL(["<div class='","'>","</div>"]);return tO74=function(){return e},e}function tO73(){var e=tTL(["<span class='","'>","</span>"]);return tO73=function(){return e},e}function tO72(){var e=tTL(["<span class='","'>","</span>"]);return tO72=function(){return e},e}function tO71(){var e=tTL(["<div class='"," ","'>","</div>"]);return tO71=function(){return e},e}function tO70(){var e=tTL([""," <div class=\"","\"> "," "," </div>"]);return tO70=function(){return e},e}function tO69(){var e=tTL(["",""]);return tO69=function(){return e},e}function tO68(){var e=tTL(["<li ?id="," class=\""," ","\" role=\"separator\" data-ignore-focus=true .itemData=\"","\"></li>"]);return tO68=function(){return e},e}function tO67(){var e=tTL(["<div class=\""," ","\"> "," </div>"]);return tO67=function(){return e},e}function tO66(){var e=tTL(["<li ?id="," class=\""," "," "," ","\" role=\"option\" ?aria-disabled=\"","\" ?disabled=\"","\" aria-label=\"","\" aria-value=\"","\" ?name="," ?data-selectable="," ?data-clickable="," ?data-ignore-focus="," .itemData=\"","\"> "," "," "," "," "," </li>"]);return tO66=function(){return e},e}function tO65(){var e=tTL(["<ul style='display:none;' tabindex=-1 class='"," zh-scroll_y'> "," "," "," "," </ul>"]);return tO65=function(){return e},e}function tO64(){var e=tTL([" "," "," "," "," "," "]);return tO64=function(){return e},e}function tO63(){var e=tTL(["<div>","</div>"]);return tO63=function(){return e},e}function tO62(){var e=tTL(["<span class=\"zcolorbutton__preview zh-transparentbg\"><canvas style=\"background-color: ",";\"></canvas></span>"]);return tO62=function(){return e},e}function tO61(){var e=tTL(["<span class=\"zcolorbutton__preview\" style=\"","\">","</span>"]);return tO61=function(){return e},e}function tO60(){var e=tTL(["<span class=\"zcolorbutton__preview zh-nofill\"></span>"]);return tO60=function(){return e},e}function tO59(){var e=tTL([" <button ?disabled="," ?aria-disabled="," role=\"button\" type=\"button\" class=\"zcolorbutton zbutton zbutton--icononly ","\"> "," </button> ",""]);return tO59=function(){return e},e}function tO58(){var e=tTL(["<div>","</div>"]);return tO58=function(){return e},e}function tO57(){var e=tTL(["<div class=\"zcolorpicker__colorfieldcontainer\"> "," "," </div>"]);return tO57=function(){return e},e}function tO56(){var e=tTL(["<button id="," aria-label=\"","\" role=\"button\" type=\"button\" class=\"zcolorpicker__navigatable zcolorpicker__actionbutton zbutton zcolorpicker__morecolorbutton zbutton--menu\"> "," <span class=\"zbutton__text zcolorpicker__text\">","</span> "," </button>"]);return tO56=function(){return e},e}function tO55(){var e=tTL(["<div class=\"zcolorpicker__pointer\"></div>"]);return tO55=function(){return e},e}function tO54(){var e=tTL([""," "," <div class=\"zcolorpicker__showhidecontainer\"> <div class=\"zcolorpicker__default\"> "," "," "," "," "," "," "," "," </div> "," </div> \t"]);return tO54=function(){return e},e}function tO53(){var e=tTL([" <span class=\"zcolorpicker__mapmarker\" style=\"left: ","%; top: ","%;\"> </span>"]);return tO53=function(){return e},e}function tO52(){var e=tTL(["<div class=\"zcolorpicker__pointer\"></div>"]);return tO52=function(){return e},e}function tO51(){var e=tTL([""," "," <div class=\"zcolorpicker__maparea\" ?id=","> "," "," </div> <div class=\"zcolorpicker__colormodecontainer\"> "," <div class=\"zcolorpicker__slidercontainer\"> "," "," </div> </div> "," "," "," "," \t"]);return tO51=function(){return e},e}function tO50(){var e=tTL(["<div class=\"zinputfield__spinbuttonpane\"> "," "," </div>"]);return tO50=function(){return e},e}function tO49(){var e=tTL(["<input class='zinputfield__textbox' tabindex=\"","\" ?aria-valuemin="," ?aria-valuemax="," ?readonly="," ?aria-readonly="," ?disabled="," ?aria-disabled="," ?maxlength=","> "," ",""]);return tO49=function(){return e},e}function tO48(){var e=tTL(["<div class=\"zinputfield ","\" ?title="," tabindex=\"-1\" role=\"spinbutton\" ?style=\"","\" ?id="," >","</div>"]);return tO48=function(){return e},e}function tO47(){var e=tTL(["<span class=\"zselectbox__text\">","</span>"]);return tO47=function(){return e},e}function tO46(){var e=tTL(["<div class='zselectbox__image'><img src=\"","\" /></div>"]);return tO46=function(){return e},e}function tO45(){var e=tTL([""," "," "," ",""]);return tO45=function(){return e},e}function tO44(){var e=tTL(["<span class=\"zselectbox__text zselectbox__placeholder\">","</span>"]);return tO44=function(){return e},e}function tO43(){var e=tTL(["<div class=\"zselectbox__selected\"> "," </div> "," ",""]);return tO43=function(){return e},e}function tO42(){var e=tTL(["<div>","</div>"]);return tO42=function(){return e},e}function tO41(){var e=tTL(["<div ?id="," class=\"zslider ","\"> <div class=\"zslider__track ","\"> "," </div> <div role=\"slider\" class=\"zslider__thumb ","\" style=\"left:","%;\"> "," </div> </div>"]);return tO41=function(){return e},e}function tO40(){var e=tTL(["<li ?data-shade=\"","\" data-palette-name=\"","\" class=\"zcolorpicker__colorpan ","\" tabindex="," ?data-tone-type=\"","\" ?data-theme=\"","\" ?data-tone-percent=\"","\" ?data-zcolor=\"","\" ?data-base-color=\"","\" style=\"background-color:",";\" ?aria-hidden=\"","\" ?aria-selected=\"","\" title=\"","\"></li>"]);return tO40=function(){return e},e}function tO39(){var e=tTL(["<li class=\"zcolorpicker__addcolor\">","</li>"]);return tO39=function(){return e},e}function tO38(){var e=tTL(["<ul> "," </ul>"]);return tO38=function(){return e},e}function tO37(){var e=tTL(["<ul class=\"zcolorpicker__shades\"> "," "," </ul> "]);return tO37=function(){return e},e}function tO36(){var e=tTL(["<div class=\"zcolorpicker__navigatable\"> "," </div>"]);return tO36=function(){return e},e}function tO35(){var e=tTL(["<span class=\"zcolorpicker__paletteheading\"> "," </span>"]);return tO35=function(){return e},e}function tO34(){var e=tTL(["<div ?id="," data-custom=\"","\" class=\"zcolorpicker__palettecontainer ","\" data-palettename=\"","\"> "," <div class=\"zcolorpicker__palette\"> "," </div> </div> "]);return tO34=function(){return e},e}function tO33(){var e=tTL(["<canvas class=\"","\"></canvas>"]);return tO33=function(){return e},e}function tO32(){var e=tTL(["<div class=\"zpopover__pointer\"></div>"]);return tO32=function(){return e},e}function tO31(){var e=tTL(["<div class=\"zpopover__loading\" id=\"zpopover--loader\"> <i class=\"zpopover__icon zh-loading\"> <svg class=\"zpopover__svg zpopover__loader zeffects--rotate\"> <circle class=\"circle__track\"></circle> <circle class=\"circle__load\"></circle> </svg> </i> </div>"]);return tO31=function(){return e},e}function tO30(){var e=tTL(["<div class=\"zpopover__content\"> "," </div>"]);return tO30=function(){return e},e}function tO29(){var e=tTL(["<div class=\"zpopover__action\">","</div>"]);return tO29=function(){return e},e}function tO28(){var e=tTL(["<div role=\"heading\" class=\"zpopover__text\">","</div>"]);return tO28=function(){return e},e}function tO27(){var e=tTL(["<div id=\"zpopover__title\" class=\"zpopover__title ","\"> "," "," </div>"]);return tO27=function(){return e},e}function tO26(){var e=tTL([""," "," ",""]);return tO26=function(){return e},e}function tO25(){var e=tTL(["",""]);return tO25=function(){return e},e}function tO24(){var e=tTL(["<span class='zbutton__text'>","</span>"]);return tO24=function(){return e},e}function tO23(){var e=tTL(["",""]);return tO23=function(){return e},e}function tO22(){var e=tTL(["",""]);return tO22=function(){return e},e}function tO21(){var e=tTL([" "," "," ",""]);return tO21=function(){return e},e}function tO20(){var e=tTL(["",""]);return tO20=function(){return e},e}function tO19(){var e=tTL([" "," "]);return tO19=function(){return e},e}function tO18(){var e=tTL(["",""]);return tO18=function(){return e},e}function tO17(){var e=tTL(["<button ?aria-label=\"","\" ?id=\"","\" ?role=\"","\" ?type=\"","\" tabindex=\"","\" ?title=\"","\" class=\"","\" ?data-action-name="," >","","</button>"]);return tO17=function(){return e},e}function tO16(){var e=tTL(["",""]);return tO16=function(){return e},e}function _get(e,t,a){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var o=_superPropBase(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(a):i.value}},_get(e,t,a||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=_getPrototypeOf(e),null!==e););return e}function tO15(){var e=tTL(["<div class=\"zalertbanner__action\" title=","><button type=\"button\" class=\"zalertbanner__close\">","</button></div>"]);return tO15=function(){return e},e}function tO14(){var e=tTL([" ",""]);return tO14=function(){return e},e}function tO13(){var e=tTL(["<span class=\"zalertbanner__text\">"," ","</span>"]);return tO13=function(){return e},e}function tO12(){var e=tTL(["<div class=\"zalertbanner__table\"></div>"]);return tO12=function(){return e},e}function tO11(){var e=tTL([" "," "," "," "," "," "]);return tO11=function(){return e},e}function tO10(){var e=tTL(["<div class=\"zalertbanner ","\">","</div>"]);return tO10=function(){return e},e}function tO9(){var e=tTL(["<a ?class="," tabindex="," aria-label=",">","</a>"]);return tO9=function(){return e},e}function tO8(){var e=tTL(["",""]);return tO8=function(){return e},e}function tO7(){var e=tTL(["<div class=",">","</div>"]);return tO7=function(){return e},e}function tO6(){var e=tTL(["<div class=","> ","</div>"]);return tO6=function(){return e},e}function tO5(){var e=tTL(["<div class=",">","</div>"]);return tO5=function(){return e},e}function tO4(){var e=tTL([""," "," ",""]);return tO4=function(){return e},e}function tO3(){var e=tTL(["<div class=\"zdatetimepicker__column\"> "," </div>"]);return tO3=function(){return e},e}function tO2(){var e=tTL(["<div class=\"zdatetimepicker__commandbar ","\"> "," </div>"]);return tO2=function(){return e},e}function tO(){var e=tTL(["<i class=\"","\"> "," </i>"]);return tO=function(){return e},e}function tTL(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}}function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,o)}return a}function _objectSpread(e){for(var t=1,a;t<arguments.length;t++)a=null==arguments[t]?{}:arguments[t],t%2?ownKeys(a,!0).forEach(function(t){_defineProperty(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))});return e}function _defineProperties(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){return t&&("object"===_typeof(t)||"function"==typeof t)?t:_assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_getPrototypeOf(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return _setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_setPrototypeOf(e,t)}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}(function(e){var t=Math.max,a=navigator.userAgent.toLowerCase(),o=document.createElement("div"),i=document.createTextNode(" "),l=["_CLASSES","_EVENTS","_SELECTORS","_attrs","_props"];o.appendChild(i);var n=window.ZComponentsConfig&&window.ZComponentsConfig.useWebComponentsSelector,s={pluginPrefix:"z",changeSet:"v5_2_beta_7",buildID:"4094631",isRTL:!1,selector:"data-ctype",version:"v5_2_beta_7",environment:"production",userAgent:a,webComponents:[],webComponentsToInit:[],SVG:{},Templates:{},webComponentsSupport:!1,useWebComponentsSelector:n!==void 0&&n,_animationEnd:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend transitionend",_transitionEnd:"webkitTransitionEnd, otransitionend, oTransitionEnd, msTransitionEnd, transitionend",locale:"en-US",timeZone:null,zIndex:1e3,$window:e(window),$document:e(document),DOMUtil:e,DOMUtilInstance:window.$ZCDOMUtil||e,keys:{},minimizeArray:[],keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38,ALT:18},isEmpty:function(e){return!(e&&Object.keys(e).length)},iterateData:function(e,t){return Array(e).join(0).split(0).map(t)},getKebabCaseKey:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},getID:function(e,t,a,o){return e=e||"",t instanceof this.DOMUtilInstance&&(t=t[0]),t&&t.id||e+"-"+(a?a+"-":"")+Math.round(1e8*Math.random())+(o?"-"+o:"")},_getIconInfo:function(e,t,a,o,i){var l,n;if(i=i||{},t=e||t?t:a,t){var s=t.split(" ");t=s[0],l=s[1]?s.slice(1).join(" "):void 0,e=void 0,n=!0}return i.icon=n||o||e,i.iconClassName=((o||"")+" "+(e||"")).trim(),i.SVGIconClassName=l||i.SVGIconClassName||"",t&&(i.SVGIconId=(0>t.indexOf("#")?"#":"")+t),i},createElement:function(t,a,o){t=t||{};var i="z"+a,l=Object.create(t),n=r.tagNames[i],s=t.tagName,d=s||n[0],c=s||n[1],_=l.appendTo,u=l.mainElement||document.getElementById(l.id);if(u){var p=e(u).data(i),m,h;if(p)return p.container&&(m=p.container[0]),h=p.element[0],l.isCE?h:m?[h,m]:[h]}var g=(l.isCE?c:d)||"div",v=l.id&&document.getElementById(l.id),y=v||document.createElement(g),f=e(y),k=l.customAttributes,b=-1<g.indexOf("-");if(l.id&&(k=k||{},k.id=l.id),k&&f.attr(k),b&&l&&(y._zinitdata=l),l.templateRender||(_=e(_||"body")[0],l.insertBefore?_.parentNode.insertBefore(y,_):_.appendChild(y)),!b&&!o){var C=r[a](f,l);return t.templateRender?C.container&&C.container[0]!==C.element[0]?[C.element[0],C.container[0]]:[C.element[0]]:C.element}return b||e.data(y,"ZCOpts",l),y},OS:{isLinux:function(){return-1<navigator.appVersion.indexOf("Linux")||-1<a.indexOf("Linux")||-1<navigator.platform.indexOf("Linux")},isMac:function(){return /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)},isWindows:function(){return-1<navigator.platform.indexOf("Win")}},_getEvents:function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[];return t.concat(e).filter(function(e,t,a){return a.indexOf(e)===t})},registerComponent:function(t,a,o){var n;o?n=!0:(o=a,a=this.CoreComponent);var d=l.length,c=t.toLowerCase().replace(/^z/,""),_="z"+c,u=a.prototype,p;n&&"object"===_typeof(o)&&(o=this._objectTypeFallback(o,_,a,u));var m=r.tagNames[_],h=m&&m[1]&&this.webComponentsSupport,g=this.useWebComponentsSelector;h&&g&&(o.prototype.isCE=!0);for(var v=o.prototype,y=0,f;y<d;y++)p=l[y],f=p.replace("_",""),"_EVENTS"===p?(v[p]=this._getEvents(v[f],u[f]),v[p]=this._getEvents(v[p],u[p]),v[p].push("beforedestroy")):v[p]=e.extend(!0,"_attrs"===p?{rtl:!1,templateData:null,templateFunc:null,zclassName:null,templateRender:null}:{},u[f]||{},u[p]||{},v[f]||{});if(v._DEFAULTS=e.extend(!0,{},v._attrs,v._props),(this.webComponentsSupport||u.propType||v.propType)&&(v._propType=e.extend(!0,this._getDataInfo(v._DEFAULTS),u.propType||{},u._propType||{},v.propType||{})),h&&(g?o.prototype.isCE=!1:this.register(m[1],o,a,t)),this[t]=o,!this[_]){var k={};if(n){var b=this[u.name];b&&e.extend(k,b.Templates)}this[_]={DEFAULTS:{},Templates:k};var C="create"+t.substr(1);r[C]||(r[C]=function(e){return r.createElement(e,c)})}this[c]=function(a,i){if(a=e(a),1<a.length){for(var l=[],n=0;n<a.length;n++)l[n]=s._createComponent(a[n],i,t,o);return l}return s._createComponent(a,i,t,o)};var D=this.pluginPrefix+c;e.prototype[D]=function(a){var i=this,l=this.length;if(!a||"object"===_typeof(a)){a=a||{};for(var n=0;n<l;n++)s._createComponent(this[n],a,t,o,!0)}else if("string"==typeof a&&0>a.indexOf("_"))for(var r=Array.prototype.slice.call(arguments,1),d=0,c;d<l;d++)c=e(this[d]).data(_),c&&(i=c[a].apply(c,r));else return!1;return i}},_getDataInfo:function(e){var t={};for(var a in e){var o=e[a];o!==void 0&&null!==o&&(t[a]=Array.isArray(o)?"array":_typeof(o))}return t},_defineGetProp:function(e,t,a){Object.defineProperty(e,t,{get:function(){return a}})},_extend:function(t,a){e.each(t.prototype,function(e,o){"function"==typeof o&&(t.prototype[e]=function(){var t=function(){return a.prototype[e].apply(this,arguments)};return function(){return this._super=t,o.apply(this,arguments)}}())})},_createComponent:function(t,a,o,i,l){t=e(t);var n=o.toLowerCase();if(t[0]&&(t[0]===window||t[0].nodeType)){var d;if(t.data(n))return l?t:t.data(n);var c=this._getInitOpts(t,n,a,i),_=new s[o](t,c,a);return"development"===r.environment&&r.handleExceptions&&(_=r.handleExceptions(_)),document.body.contains(t[0])||(t=_.element),t.data((d={},_defineProperty(d,n,_),_defineProperty(d,"componentName",n),d)),_}},_getInitOpts:function(t,a,o,i){var l=r._getOpts(t,i);if(l.override){var n={};for(var s in l)if(0===s.indexOf(a)){var d=s.replace(a,""),c=d[0].toLowerCase()+d.substring(1);n[c]=l[s]}l=n}return e.extend(!0,{},r[a]?r[a].DEFAULTS:{},l,o)},_getOpts:function(t,a){if(t=t instanceof r.DOMUtilInstance?t[0]:t,t){var o=t.tagName||"",i;if(this.webComponentsSupport&&window.customElements?customElements.get(o.toLowerCase()):void 0)t.$c||this._triggerConnectedCallback(t),i=t.$c[t.$c.parentElement?"_subOpts":"_opts"];else if(i=e.data(t,"ZCOpts"),!i&&t.attributes){var l=t.getAttribute("data");l&&(i=s._getObject(l,t,a)),i=this[t.dataset&&!r.Browser.isIE?"_getDataSet":"_getDataAttributes"](t,i||{},a),e.data(t,"ZCOpts",i)}return i||{}}},getOpts:function(){return r._getOpts.apply(r,arguments)},_getObject:function(e,t,a,o){var i=_typeof(e);if("object"===i)return e;e=e||t.getAttribute("data"),e=0>e.indexOf("{")&&"false"!==e?"{ ".concat(e," }"):e;try{e=JSON.parse(e.replace(/'/g,"\""))}catch(t){e=!o||a&&-1<Object.keys(a.prototype._props).indexOf(o)?{}:e}return e},_getDataSet:function(e,t,a){var o=e.dataset,l;for(var n in o)l=o[n],n=this._getCorrectedKey(n),t[n]=this._normalizeValue(n,l,a&&a.prototype,a);return t},_getCorrectedKey:function(e){return e.replace(/(Html|Svg|svg|Hsv|Hsl|Rgb)/g,function(e){return e.toUpperCase()}).replace(/^(OKButton)/i,"OKButton")},_normalizeValue:function(e,t,a,o){if(t){var i=a&&a._propType;if(i&&i[e]){var l=i[e];try{"boolean"===l?t="true"===t||t===e:"array"===l?t=JSON.parse(t):"object"===l?t=s._getObject(t,void 0,o,e):"number"===l?t=parseFloat(t):void 0}catch(a){return t}}else t="true"===t||"false"===t?"true"===t:0>t.indexOf("{")?t:s._getObject(t,void 0,o,e)}return t},_getDataAttributes:function(e,t,a){for(var o=e.attributes,l=o.length,n=0;n<l;n++){var s=o[n].nodeName,d=""===o[n].nodeValue?"true":o[n].nodeValue;"data"!==s&&s.match(/^data-/)&&(s=r._getCamelCaseStr(s.replace(/^data-/,"")),t[s]=this._normalizeValue(n,d,a&&a.prototype,a))}return t},_getCamelCaseStr:function(e){return e.replace(/(-html|-svg|svg|-hsv|-hsl|-rgb)|(-\w)/gi,function(e){return e.replace("-","").toUpperCase()})},_init:function(){if(s.webComponentsSupport){var t=s.webComponentsToInit;t&&t.length&&(t.forEach(function(t){"string"!=typeof t&&t.forEach(function(t){e(t.element).data(t.name,t),t._initComp(),t._appendTemplateContent()})}),s.webComponentsToInit=[])}s.$body=e("body"),s.setProperties()},setProperties:function(){var e=document.documentElement||{},a=document.body||{};s.documentObject={height:t(e.clientHeight,e.scrollHeight,e.offsetHeight,a.offsetHeight,a.scrollHeight),width:t(e.clientWidth,e.scrollHeight,e.offsetHeight,a.offsetWidth,a.scrollWidth)},s.windowObject={height:window.innerHeight,width:window.innerWidth}},_render:function(t,a,o,i,l,n){var s=n.isCE,d=n.skipParent,c=n.container,_=n.refElement,u=!1,p=r[a].Templates;if(t.zElement=!1,o=o||"children",o=s?"WC"+(o[0].toUpperCase()+o.substr(1)):o,!d&&!c){var m=p[s?"WCContainer":"container"];m&&(i=ZT.DOM(m(t)),l?e(i).appendTo(l):_&&e(i).insertAfter(_),u=!0)}else i=i||(d?c||_:_);var h=p[o];return h&&ZT.renderView(h(t),i),u&&(t.zElement=!0,!t.differentAppend&&e(_).hide()),i},_handleFocus:function(t,a){t=e(t);var o=r.keyCode,i=".fs."+a,l="",n=!1,s="blur"+i,d="focus"+i,c="mousedown"+i+" keydown"+i+" keyup"+i,_;t.off(c+" "+s+" "+d).on(c,function(e){t.hasClass("is-disabled")||(e.originalEvent&&"keyup"!==e.type&&(n=document.activeElement!==t[0]),_=e.keyCode,l="mousedown"===e.type?"has-mfocus":"has-kfocus","keydown"===e.type&&_!==o.ENTER&&_!==o.SPACE||"keyup"===e.type&&_!==o.TAB||t.addClass("has-focus "+l))}).on(s,function(){return t.removeClass("has-focus has-mfocus has-kfocus")}).on(d,function(){t.hasClass("is-disabled")||(!n&&t.addClass("has-focus has-kfocus"),n=!1)})},encodeHTML:function(e){return i.nodeValue=e,o.innerHTML},setI18NKeys:function(t,a,o){if("object"===_typeof(t))for(var l in t)this.keys[l]=e.extend({},this.keys[l],t[l]);else this.keys[t]=o?a:e.extend({},this.keys[t],a)},_triggerFunction:function(e,t,a){var o=r._getContext(e);return o&&o.apply(t,a)},_getContext:function(e){if("string"==typeof e){for(var t=window,a=e.split("."),o=0;o<a.length&&t;o++)t=t[a[o]];return t}return e},getI18NText:function(e,t,a){var o;4===arguments.length&&(o=a,a=arguments[3]);var l=s.keys[e]||{},n=l[t]||"";if(""===n&&o&&(n=o[t]),a)for(var r=0;r<a.length;r++)n=n.replace("{"+r+"}",a[r]);return n},create:function(e){var t=e.ctype.replace(e.ctype.charAt(0),"");return this["create"+t.charAt(0).toUpperCase()+t.substring(1)](e)},getRTLBasedDir:function(e,t){return t?e.replace(/(left|right)/,function(e){return"left"===e?"right":"left"}):e},display:function(t,a){if(!r._display){var i=o.cloneNode(),l=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"].map(function(e){return"display:"+e}).join(";");document.body.appendChild(i).setAttribute("style",l),r._display=window.getComputedStyle(i).display,i.parentElement.removeChild(i)}return e(a).css("display",t?"none":r._display),a},Browser:{isMobile:/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(a),isIE:-1<a.indexOf("msie")||-1<a.indexOf(".net"),isEdge:-1<a.indexOf("edge"),isSafari:-1<a.indexOf("safari")&&0>a.indexOf("chrome"),isChrome:-1<a.indexOf("chrome")&&-1<navigator.vendor.indexOf("Google Inc")&&-1===a.indexOf("opr"),isFirefox:-1<a.indexOf("firefox"),getIEVersion:function(){var e=-1;if(r.Browser.isIE){var t=a.match(/MSIE (\d*)/i);t||(t=a.match(/Trident.*rv:(\d*)/i)),t&&(e=parseInt(t[1]))}return e},getFirefoxVersion:function(){var e=-1;return r.Browser.isFirefox&&(e=parseInt(a.match(/Firefox\/(\d*)/i)[1])),e}},_objectTypeFallback:function(t,a,o,i){var l=["name","attrs","props","CLASSES","EVENTS","SELECTORS"];t.name=a;var n=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),t}(o),s=n.prototype;for(var r in t)if(t.hasOwnProperty(r)){var d=t[r],c=s[r],_=void 0,u="function"==typeof d,p=void 0;if(!u){for(var m=i;m&&!(p=m.hasOwnProperty(r));)m=Object.getPrototypeOf(m);p&&(_=Object.getOwnPropertyDescriptor(m,r))}if(u||!p||_.writable)s[r]=d;else{if(p)if("object"===_typeof(d))-1!==l.indexOf(r)&&(Array.isArray(d)?d=c.concat(d):d=e.extend(!0,{},c,d));else if(d===c)continue;this._defineGetProp(s,r,d)}}return this._extend(n,o),t=n,t}};window.ZComponents=s;var r=s;r.Templates.Utilities={},document.addEventListener("DOMContentLoaded",r._init),window.addEventListener("resize",r.setProperties);var d=function(){function t(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),this.element=a,this._I18N={messages:o.messages,labels:o.labels},this._opts=e.extend(!0,{},this._DEFAULTS,o),this._create(a,this._opts),a&&this._defineGetterSetter()}return _createClass(t,[{key:"name",get:function(){return"corecomponent"}}]),_createClass(t,[{key:"_getID",value:function(e,t,a){return r.getID(this.name,e,t,a)}},{key:"_alterBorderRadius",value:function(e,t){return r.alterBorderRadius&&r.alterBorderRadius(_objectSpread({},e,{element:e.element||this.getElement(),forElement:e.forElement||this._opts.forElement}),t)}},{key:"_isValid",value:function(e,t){return-1<this._ALLOWEDVALUES[e].indexOf(t)}},{key:"_addEvents",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getElement();for(var a in e){var o=this._suffixCName(e[a]);o&&t.off(o).on(o,this["_"+a+"Handler"].bind(this))}}},{key:"_suffixCName",value:function(e){var t=this;return e?e.split(" ").reduce(function(e,a){return e+a+"."+t.name+" "},""):"."+this.name}},{key:"_removeEvents",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.getElement();t.off(this._suffixCName(e))}},{key:"_setParentClass",value:function(e){var t=this._data,a=t.parentClass;if(a!==e){var o=this._useParent||!this.container?this.element:this.container;o&&(a&&o.removeClass(a),o.addClass(e)),this._data.parentClass=e}}},{key:"_commonPropSetters",value:function(){this._data={};var t=this._opts,a=this.element[0],o=a.dir||document.body.dir;t.rtl="rtl"===o||t.rtl,t.templateData&&"object"===_typeof(t.templateData)&&e.extend(!0,this._data,t.templateData),this._data.isCE=t.isCE}},{key:"_create",value:function(e,t){this._commonPropSetters(),this.isCE=this.isCE||t.isCE,this._useParent=this.isCE,this._init.apply(this,arguments),this._useParent&&(this.container=e);var a=this._opts,o=this;this._data.parentClass=(a.zclassName||a.className||"")+(a.rtl?" zh-rtl":""),Object.defineProperty(this._data,"className",{set:function(e){o._setParentClass(e||o._data.parentClass)},get:function(){return o._data.parentClass}}),this._initialRender(),this._construct.apply(this,arguments),this._data.rendered=!0,this._bindEvents()}},{key:"_initialRender",value:function(){this._render()}},{key:"_appendEle",value:function(t){if(t&&(t=e(t)[0],t)){var a=this.getElement()[0];t.lastElementChild!==a&&t.appendChild(a)}}},{key:"_init",value:function(){}},{key:"_buildData",value:function(){}},{key:"_postRender",value:function(){}},{key:"_postEachRender",value:function(){}},{key:"_preRender",value:function(e){return e}},{key:"_construct",value:function(){}},{key:"_bindEvents",value:function(){}},{key:"_handleFocus",value:function(e,t){r._handleFocus(e||this.container,this.name,t)}},{key:"_defineGetterSetter",value:function(){var e=Object.keys(this._DEFAULTS),t=e.length,a,o;for(o=0;o<t;o++)a=e[o],this[a]||this._defineProperty(a)}},{key:"_defineProperty",value:function(e){Object.defineProperty(this,e,{set:function(t){this.setAttribute(e,t)},get:function(){return this.getAttribute(e)}})}},{key:"_display",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.element;return r.display(e,t)}},{key:"_dispatchEvent",value:function(t,a,o,i,l){var n=t,s=this.eventPrefix||this.name,d;this.isCE&&(n="z"+n);var c=n||t;i=i||this.element;var _=this._opts[c],u,p;if(o=o||{},o.fromUI=o.fromUI||l,o.element=i,o.container=this.getElement(),o.options=this._opts,o.componentName=s,a=e.Event(a),a.type=(s&&!this.isCE?s+c:c).toLowerCase(),a.originalTarget=a.target,a.target=i,p=a.originalEvent,p)for(u in p)u in a||(a[u]=p[u]);return this.isCE?a=this._dispatchCEEvent(n,o,i,a.originalEvent):(a.detail=o,i.trigger(a,o)),this["on"+c]&&this["on"+c](a,o),i[0]["onlyte"+c]&&i[0]["onlyte"+c](a,o),o=[a].concat(o),this.isCE||(_&&"string"==typeof _?d=r._triggerFunction(_,i[0],o):d="function"==typeof _?_.apply(i,o):void 0),"boolean"==typeof d?d:!a.isDefaultPrevented()}},{key:"_getRTLBasedDir",value:function(e){return r.getRTLBasedDir(e,this._opts.rtl)}},{key:"_getI18NText",value:function(e,t,a){var o=(this._I18N.labels||this._I18N.messages||{})[e];if(!o){var l=this._opts.labels||this._opts.messages,n=this._opts[a]||{},s=r.keys[this.name]||{};o=n[e]||s[e]||l[e]}if(t)for(var d=0;d<t.length;d++)o=o.replace("{".concat(d,"}"),t[d]);return o}},{key:"listen",value:function(e,t){this["on"+(e[0].toUpperCase()+e.substr(1)).replace(this.name,"")]=t}},{key:"getElement",value:function(){return this.container||this.element}},{key:"getAttribute",value:function(e){return this._opts[e]}},{key:"getAttributes",value:function(){return e.extend(!0,{},this._opts)}},{key:"setAttributes",value:function(e){1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.element;for(var t in e)this.setAttribute(t,e[t],!0);this._renderAttrChange()}},{key:"_getStyle",value:function(e){if(e&&"object"===_typeof(e)){var t="";for(var a in e)e[a]&&(t+="".concat(a,":").concat(e[a],";"));return t}return e}},{key:"_setAttribute",value:function(){}},{key:"_getOptVal",value:function(t,a){return t&&"object"===_typeof(t)&&"object"===_typeof(a)?t instanceof Array||a instanceof Array||t instanceof Date||t instanceof RegExp||t instanceof e||t instanceof Element||t===window||t.nodeName?t:e.extend(!0,{},a,t):t}},{key:"_isNotNull",value:function(e){return!this._isNull(e)}},{key:"_isNull",value:function(e){return void 0===e||null===e}},{key:"_render",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts.templateFunc,o=2<arguments.length?arguments[2]:void 0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:this._skipParent;t=t||Object.assign({},this._opts,this._data),t=this._preRender(t);var l=this._opts.templateName||this.name,n=!!r[l].Templates[t.isCE?"WCContainer":"container"];i="boolean"==typeof i?i:!n||t.rendered;var s={isCE:this._data.isCE,skipParent:i,container:this.container?this.container[0]:void 0,refElement:this.element&&!t.differentAppend?this.element[0]:void 0},d=r._render(t,l,a,o,t.differentAppend,s);d&&t.zElement&&(this.container=e(d));var c=this.getElement();return t.attrs&&(o=t.alwaysSetAttrs?c:o?e(o):this._useParent||!this.container?this.element:void 0,o&&o.attr(t.attrs)),this._data.rendered||this._postRender(c,this._opts),this._postEachRender(c,t),d}},{key:"setAttribute",value:function(t,a,o){var i=this,l=this._opts,n=l[t],s=this.getElement(),d;void 0===a&&(a=this._DEFAULTS[t]),("object"!==_typeof(n)||null===n)&&n===a||(a=this._getOptVal(a,n),(this.isCE&&this.element[0]._initialized||!this.isCE||r.useWebComponentsSelector)&&this._setAttribute(t,a),d=s&&!this._stopAttrUpdate,d&&("rtl"===t?(s[a?"addClass":"removeClass"]("zh-rtl"),this._updateClass("zh-rtl",!a||null)):"className"===t||"zclassName"===t?this._updateClass(a,n):"disabled"===t?this._disable(a):"appendTo"===t?this._appendEle(a||"body"):"templateFunc"===t?this._domChanged=!0:"templateData"===t?a?(e.extend(!0,this._data,a),this._domChanged=!0):n&&(Object.keys(n).forEach(function(e){return i._data[e]=null}),this._domChanged=!0):d=!1),this._stopAttrUpdate=!1,d&&(l[t]=a),!o&&this._renderAttrChange())}},{key:"_renderAttrChange",value:function(){this._reInit&&(this._domChanged=!0,this._buildData()),this._domChanged&&this._render(),this._domChanged=this._reInit=!1}},{key:"_setBtnValue",value:function(e,t){var a=t&&t.mainElement;a?r.button(a).setAttributes(e):this._domChanged=!0}},{key:"_setUndefined",value:function(e,t){for(var a=0,o=e.length;a<o;a++)this["_"+e[a]+t]=void 0}},{key:"_disable",value:function(e,t,a){var o=!t;t=t||this.getElement(),a||(o?this._updateClass(e?"is-disabled":"",!e&&"is-disabled"):t[e?"addClass":"removeClass"]("is-disabled")),this._addedByComponent=!0,e?t.attr({"aria-disabled":!0,disabled:!0}):t.removeAttr("aria-disabled disabled"),this._addedByComponent=!1}},{key:"_emptyElement",value:function(e,t){for(;t;){var a=t.nextSibling;e.removeChild(t),t=a}}},{key:"_updateClass",value:function(e,t,a){if(a)a[t?"removeClass":"addClass"](e);else if(this._data){var o=this._data,i=o.className;t?("boolean"==typeof t&&(t=e,e=""),i=i.replace(new RegExp("(?:^|( +)?)"+t+"(?:$|( +)?)","g")," "+e+" ")):i+=" "+e,o.className=i}}},{key:"_destroy",value:function(){}},{key:"destroy",value:function(){if(this.container||this.element){this._dispatchEvent("beforedestroy");var e=this.element,t=this.container,a=t||e;a.off("."+this.name),this._destroy(),t||this._useParent||e.empty(),ZT.removeCacheData(a[0]),e&&e.removeData(this.name).removeData("ZCOpts"),this._data&&this._setParentClass(" "),!this._useParent&&t&&(t.remove(),e[0].style.display=""),this.isCE&&!this._eleRemoval&&this._destroyCE(!0),this.container=this.element=void 0}}},{key:"disable",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this._opts.disabled=e,this._disable(e),this._renderAttrChange()}},{key:"enable",value:function(){this.disable(!1)}},{key:"_removeSpecialChars",value:function(e){return e.replace(/[^a-zA-Z0-9]/g,"")}},{key:"_setProp",value:function(e,t,a){var o=this._getMapping(),i=o[t];if(i){var l=i.split("."),n=l.pop();l.forEach(function(t){e=e[t]=e[t]||{}}),e[n]=a}}},{key:"_getById",value:function(t){return this.container?this.container.find("[id=\""+t+"\"]"):e()}},{key:"_encodeContent",value:function(e,t){return t=this._isNotNull(t)?t:!this._isEncoded(),t?r.encodeHTML(e):e}},{key:"_isEncoded",value:function(){return this._opts.isLabelHTMLEncoded}},{key:"_isAlphaNumericKey",value:function(e){var t=e.keyCode;return!(e.metaKey||e.ctrlKey)&&(186<=t&&192>=t||219<=t&&222>=t||48<=t&&57>=t||65<=t&&90>=t||97<=t&&122>=t||t===r.keyCode.SPACE||t===r.keyCode.DELETE||t===r.keyCode.BACKSPACE)}},{key:"_getItemId",value:function(e,t){var a=e.zitemid;if(!a){var o=this._getUniqueValue(e);o&&(o=this._removeSpecialChars(o+"")),a=o?t+"-"+o:r.getID(this.name,null,t)}return a}},{key:"_escapeQuery",value:function(e){return e.replace(/([',",(,),+,?,>,<,.,|,*,\\,\[,\]])/g,"\\$1")}},{key:"_getCustomContent",value:function(e,t,a){var o=this,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"label",l=4<arguments.length?arguments[4]:void 0;if(t){if("string"==typeof t)return t.replace(/(#?#[^#\n"']+#?#)/g,function(t){var i=t.replace(/#/g,""),n=e[i];return o._isNotNull(n)?(n=o._encodeContent(n,l),a&&(n=o._highlight(n,i)),n):t});if("function"==typeof t)return t(e)}else{var n=this._getMapping(),s=this._encodeContent(this._getProp(e,i),l);return a&&(s=this._highlight(s,n[i])),s}}},{key:"_mapJSONToData",value:function(e,t,a){if(this._isNotNull(t)&&this._isNotNull(e)){t=t.trim().split(".");for(var o=0;o<t.length;o++)e=e[t[o]];return e&&a?this._encodeContent(e):e}}},{key:"_toArr",value:function(t,a){var o=this,i;return t instanceof e&&(i=t.toArray()),i=Array.isArray(t)?t:[t],i.filter(function(e,t){if(o._isNotNull(e)&&(!a||i.indexOf(e)===t))return!0})}},{key:"_isAjaxSource",value:function(e){return e&&(e.URL||e.search)}},{key:"_removeNulls",value:function(e){var t=this;return e.filter(function(e){return t._isNotNull(e)})}},{key:"_getProp",value:function(e,t,a){var o=this._getMapping(),i=o[t];return this._mapJSONToData(e,i,a)}},{key:"_getMapping",value:function(){return this._dataMapping||this._opts.dataMapping}},{key:"_getUniqueValue",value:function(e){if(this._isNotNull(e)){var t;return"object"===_typeof(e)?(t=this._getProp(e,"value"),this._isNotNull(t))?t+"":(t=this._getProp(e,"text"),this._isNotNull(t)?t+"":t):e+""}}},{key:"_getMatchingRegex",value:function(e,t){var a=t.criteria||"contains",o=t.caseSensitive;e=this._escapeQuery(e);var i={contains:"("+e+")",startswith:"(^"+e+")",endswith:"("+e+"$)",equals:"(^"+e+"$)"};return new RegExp(i[a.toLowerCase()],"g"+(o?"":"i"))}},{key:"_getSearchBy",value:function(e){if(e)"string"==typeof e&&(e=e.split(","));else{var t=this._getMapping();e=[t.text]}return e.map(function(e){return e.trim()})}},{key:"_isFunc",value:function(e){return"function"==typeof e}},{key:"_translateEToA",value:function(e){var t=this._opts.locale||"";return"ar"===t||0===t.indexOf("ar-")?(e+"").replace(/[0-9]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+1584)}):e}},{key:"_translateAToE",value:function(e){var t=this._opts.locale||"";return"ar"===t||0===t.indexOf("ar-")?(e+"").replace(/[\u0660-\u0669]/g,function(e){return e.charCodeAt(0)-1632}):e}}]),t}();r.CoreComponent=d,r.tagNames={zalertbanner:["div","z-alertbanner"],zpopover:["div","z-popover"],zbutton:["button","z-button"],zcolorpicker:["div","z-colorpicker"],zadvancedcolorpicker:["div","z-advancedcolorpicker"],zcolorsplitbutton:["div","z-colorsplitbutton"],zlistbox:["div","z-listbox"],zdropdownlist:["div","z-dropdownlist"],zselect:["select","z-select"],zcombobox:["select","z-combobox"],zsuggestfield:["input","z-suggestfield"],ztokenfield:["input","z-tokenfield"],zdatepicker:["div","z-datepicker"],zdateselect:["select","z-dateselect"],zdaterangepicker:["div","z-daterangepicker"],zdatetimeselect:["select","z-datetimeselect"],zdatetimepicker:["div","z-datetimepicker"],ztimeinput:["div","z-timeinput"],ztimefield:["input","z-timefield"],zdatetimerangepicker:["div","z-datetimerangepicker"],ztoggleswitch:["div","z-toggleswitch"],zmenubutton:["button","z-menubutton"],zsplitbutton:["button","z-splitbutton"]},r.alterBorderRadius=function(e,t){var a=e.element,o=e.forElement;if(a.add(o).removeClass("zh-radiusbottomleft zh-radiustopleft zh-radiusbottomright zh-radiustopright zh-radiustop zh-radiusbottom zh-radiusright zh-radiusleft"),!t){var i={right:"left",left:"right",top:"bottom",bottom:"top"},l=e.direction,n=e.offset;if(e.hasSideAlignment&&0>["right-top","right-bottom","left-top","left-bottom"].indexOf(l))a.addClass(l.replace(/([a-z]+)-([a-z]+)/g,function(e,t,a){return"zh-radius"+i[a]+i[t]})),n.left+=0===l.indexOf("left")?1:-1;else{var s=parseInt,r=0,d=0,c=0,_=0;if(o.length&&(r=s(o.css("border-top-left-radius")),d=s(o.css("border-top-right-radius")),c=s(o.css("border-bottom-left-radius")),_=s(o.css("border-bottom-right-radius"))),5>=r&&5>=d&&5>=c&&5>=_){var u,p;0===l.indexOf("top")||0===l.indexOf("bottom")?(l.replace(/(\w+)-(\w+)/g,function(e,t,l){var n=o.outerWidth(),s=a.outerWidth(),r=n<s;n===s?(u=i[t],p=t):(u=i[t]+(r?l:""),p=t+(r?"":l))}),n.top+=0===l.indexOf("top")?1:-1):(/^right(-)?(\w)*$/.test(l)||/^left(-)?(\w)*$/.test(l))&&(l.replace(/^right|left(-)?(\w)*$/g,function(e){u=i[e.split("-")[0]]}),p=i[u]),a.addClass("zh-radius"+u),o.addClass("zh-radius"+p)}else n.top+=2}return n}},r.AJAX={transport:function(t,a,o,i){return e.ajax({url:t.sourceURL,data:t.data,type:t.type,dataType:t.dataType,headers:t.headers||{},success:function(e){a&&a(e)},fail:function(e,t){o&&o(e,t)},error:function(e,t){o&&o(e,t)},always:function(){i&&i()}})}},r.localeInfo={"en-US":{daysAbbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],firstDayOfWeek:0,dateFormat:{short:"M/d/yyyy",medium:"MMM d, yyyy",long:"MMMM d, yyyy",full:"dddd, MMMM d, yyyy"},timeFormat:{short:"h:mm tt",medium:"h:mm:ss tt",long:"hh:mm:ss tt"},dateTimeFormat:{short:"MMM d, yyyy, hh:mm:ss tt",medium:"MMM d, yyyy, hh:mm:ss tt",long:"dddd, MMMM d, yyyy 'at' h:mm tt",full:"dddd, MMMM d, yyyy 'at' h:mm tt"},numberFormat:{thousandSeparator:",",decimalSeparator:"."},currency:{code:"USD",name:"United States Dollar",symbol:"$"}}}})(jQuery),function(e){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)&&(module.exports=function(){return e}())}(ZComponents);var ZEventNameSpacing=function(){function e(){_classCallCheck(this,e),this.functionMaps={}}return _createClass(e,[{key:"addEventListener",value:function(e,t,a){this.functionMaps[t]=a,a&&e.addEventListener(t.split(".")[0],a)}},{key:"removeEventListener",value:function(e,t){this.functionMaps[t]&&(e.removeEventListener(t.split(".")[0],this.functionMaps[t]),delete this.functionMaps[t])}}]),e}(),ZPolyfill={};try{ZPolyfill.WeakMap=WeakMap}catch(e){ZPolyfill.WeakMap=function(e,t){function a(t){l(this,"_",{value:"_@ungap/weakmap"+e++}),t&&t.forEach(o,this)}function o(e){this.set(e[0],e[1])}var i=this,l=t.defineProperty,n=t.hasOwnProperty,s=a.prototype;return s["delete"]=function(e){return i.has(e)&&delete e[i._]},s.get=function(e){return i.has(e)?e[i._]:void 0},s.has=function(e){return n.call(e,i._)},s.set=function(e,t){return l(e,i._,{configurable:!0,value:t}),i},a}(Math.random(),Object)}var ZWeakMap=ZPolyfill.WeakMap,ZCTemplates={nodeRef:new ZWeakMap,templateCache:{},uniqueId:"{zt-".concat((Math.random()+"").slice(2),"}"),attrSuffix:"$zta$",attrRegEx:/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F \x09\x0a\x0c\x0d"'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,Event:new ZEventNameSpacing,renderView:function(e,t){var a=new ZNodeProcessor,o=this.nodeRef,i=o.get(t);i||(a._emptyElement(t,t.firstChild),o.set(t,i=a),i._addPlaceholders(t)),i._setResult(e),i.update()},removeCacheData:function(e){var t=this.nodeRef.get(e);t&&this.nodeRef.set(e,null)},DOM:function(e){var t=new ZNodeProcessor;if(e instanceof ZTemplates)return t._processHTML(e,!0).childNodes[0]},functionList:new ZWeakMap,prevValues:new ZWeakMap,_specialFunc:function(e){return function(){var t=e.apply(void 0,arguments);return ZT.functionList.set(t,!0),t}},_isSpecialFunc:function(e){return"function"==typeof e&&this.functionList.has(e)},html:function(e){for(var t=arguments.length,a=Array(1<t?t-1:0),o=1;o<t;o++)a[o-1]=arguments[o];return new ZTemplates(e,a,"html")},_updateTemplateCache:function(e){var t=this.templateCache,a=t[e.type];a||(a={strings:new ZWeakMap,keys:{}},t[e.type]=a);var o=a.strings.get(e.strings);if(o)return o;var i=e.strings.join(this.uniqueId);return o=a.keys[i],o||(o=new ZNodeTraverser(e,e.getTemplate()),a.keys[i]=o),a.strings.set(e.strings,o),o},_processAttr:function(e,t,a){var o=t[0],i=t.slice(1);if("?"===o)return[new ZConditionalAttributePart(e,i)];return"."===o?new ZPropertyPart(e,i,a)._parts:-1<t.indexOf("on-")?[new ZEventPart(e,t.slice(3))]:new ZAttributeUpdater(e,t,a)._parts},_processTextValue:function(){return new ZNodeProcessor},_isPlainText:function(e){return null===e||"object"!==_typeof(e)&&"function"!=typeof e},_getTemplate:function(){var e=function(){return document.createElement("template")};return"content"in e()?function(t){var a=e();return a.innerHTML=t,a}:function(e){var t=document.createDocumentFragment(),a=document.createElement("div"),o=function(){return a.innerHTML="<table>"+e+"</table>",a.firstChild.firstChild};/^(<td|<th|<tr)/.test(e)?/^<tr/.test(e)?a=o():a=o().firstChild:a.innerHTML=e;for(var i=a.childNodes;i[0];)t.appendChild(i[0]);return t.content=t,t}}()},ZT=ZCTemplates;ZT.placeholder="<!--".concat(ZT.uniqueId,"-->"),ZT.customHTML=ZT._specialFunc(function(e){return function(t){var a=ZT.prevValues.get(t);if(!(a===e&&ZT._isPlainText(e))){var o=ZT._getTemplate(e);t._setResult(document.importNode(o.content,!0)),ZT.prevValues.set(t,e)}}});var ZTemplates=function(){function e(t,a,o){_classCallCheck(this,e),this.strings=t,this.values=a,this.type=o}return _createClass(e,[{key:"_getHTML",value:function(){for(var e=this.strings.length-1,t="",a=0;a<e;a++){var o=this.strings[a],l=!1;t+=o.replace(ZT.attrRegEx,function(e,t,a,o){return l=!0,t+a+ZT.attrSuffix+o+ZT.uniqueId}),l||(t+=ZT.placeholder)}return t+this.strings[e]}},{key:"getTemplate",value:function(){return ZT._getTemplate(this._getHTML())}}]),e}(),ZTemplateUpdater=function(){function e(t){_classCallCheck(this,e),this.template=t,this._parts=[],this._partIndex=this._nodeIndex=0}return _createClass(e,[{key:"_updateNodes",value:function(){var e=document.importNode(this.template._template.content,!0);return this._traverseDOM(e),e}},{key:"_traverseDOM",value:function(e){var t=this.template._parts;for(e=e.firstChild;e&&this._partIndex<t.length;){var a=t[this._partIndex];if(this._nodeIndex===a.index){if("node"===a.type){var o=ZT._processTextValue();o._setRefNodes(e),this._parts.push(o)}else{var i;(i=this._parts).push.apply(i,_toConsumableArray(ZT._processAttr(e,a.name,a.strings)))}this._partIndex++}else this._nodeIndex++,this._traverseDOM(e),e=e.nextSibling}}},{key:"updateValues",value:function(e){for(var t=0,a=this._parts.length,o;t<a;t++)o=this._parts[t],o&&(o._setResult(e[t]),o.update())}}]),e}(),ZAttributeUpdater=function(){function e(t,a,o){_classCallCheck(this,e),this.node=t,this.attrName=a,this.strings=o,this._parts=[];for(var l=0;l<o.length-1;l++)this._parts[l]=this._createPart()}return _createClass(e,[{key:"_createPart",value:function(){return new ZAttributePart(this)}},{key:"_getValue",value:function(){for(var e=this.strings,t="",a=e.length-1,o=0;o<a;o++){t+=e[o];var l=this._parts[o];if(l){var n=l.value;(l.value||0===l.value)&&(t+="string"==typeof n?n:n+"")}}return t+=e[a],t}},{key:"update",value:function(){this.node.setAttribute(this.attrName,this._getValue())}}]),e}(),ZAttributePart=function(){function e(t){_classCallCheck(this,e),this._attrPart=t,this._changed=!1}return _createClass(e,[{key:"_setResult",value:function(e){e!==this.value&&(this.value=e,this._changed=!0)}},{key:"update",value:function(){this._changed&&this._attrPart.update(),this._changed=!1}}]),e}(),ZNodeTraverser=function(){function e(t,a){_classCallCheck(this,e),this._template=a,this._placeholderRegEx=new RegExp("".concat(ZT.uniqueId,"|").concat(ZT.placeholder)),this._index=-1,this._parts=[],this._partIndex=0,this._nodesToBeRemoved=[],this._storeDynamicParts(a,t);for(var o=0,l;o<this._nodesToBeRemoved.length;o++)l=this._nodesToBeRemoved[o],l.parentNode&&l.parentNode.removeChild(l)}return _createClass(e,[{key:"_storeDynamicParts",value:function(e,t){this._traverseDOM(e.content,t)}},{key:"_traverseDOM",value:function(e,t){var a;for(e=e.firstChild;e;){switch(this._index++,a=e,e.nodeType){case 1:if(e.hasAttributes()){for(var o=e.attributes,l=0,n=0;n<o.length;n++)0<=o[n].value.indexOf(ZT.uniqueId)&&l++;for(var s=l;0<s;s--){var r=t.strings[this._partIndex],d=ZT.attrRegEx.exec(r);d&&(d=d[2]);var c=d.toLowerCase()+ZT.attrSuffix,_=e.getAttribute(c),u=_.split(this._placeholderRegEx);this._parts.push({type:"attr",index:this._index,name:d,strings:u}),e.removeAttribute(c),this._partIndex+=u.length-1}}break;case 8:if(e.nodeValue===ZT.uniqueId){var p=e.parentNode,m=e.previousSibling;p&&!m||m!==a||3!==m.nodeType?p.insertBefore(document.createComment(""),e):this._index--,this._parts.push({type:"node",index:this._index++}),this._nodesToBeRemoved.push(e),!e.nextSibling&&p?p.insertBefore(document.createComment(""),e):this._index--,e=a,this._partIndex++}}this._traverseDOM(e,t),e=e.nextSibling}}}]),e}(),ZEventPart=function(){function e(t,a){_classCallCheck(this,e),this.element=t,this.eventName=a}return _createClass(e,[{key:"_setResult",value:function(e){this.currentVal=e}},{key:"update",value:function(){var e=this.currentVal?this.currentVal.handler:null,t=this.value?this.value.handler:null;if(!e&&t&&ZT.Event.removeEventListener(this.element,this.eventName+"."+this.value.namespace,this._handleEvent.bind(this)),e&&!t){var a=this.currentVal.eventNames;a||(a=[this.eventName]);for(var o=0;o<a.length;o++)ZT.Event.addEventListener(this.element,a[o]+"."+this.currentVal.namespace,this._handleEvent.bind(this))}this.value=this.currentVal,this.currentVal={}}},{key:"_handleEvent",value:function(e){this.value&&"function"==typeof this.value.handler&&this.value.handler.call(this.element,e)}}]),e}(),ZPropertyPart=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"_getValue",value:function(){return this._parts[0].value}},{key:"update",value:function(){this.node[this.attrName]=this._getValue()}}]),t}(ZAttributeUpdater),ZConditionalAttributePart=function(){function e(t,a,o){_classCallCheck(this,e),this.node=t,this.attrName=a,this.strings=o}return _createClass(e,[{key:"_setResult",value:function(e){this.currentVal=e}},{key:"update",value:function(){var e=this.currentVal,t=this.node;this.value!==e&&(e?(e="boolean"==typeof e?"":e,t.setAttribute(this.attrName,e)):t.removeAttribute(this.attrName)),this.value=e}}]),e}(),ZNodeProcessor=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"_emptyElement",value:function(e,t,a){for(var o=t,i;o&&o!==a;)i=o.nextSibling,e.removeChild(o),o=i}},{key:"_setResult",value:function(e){this.currentVal=e}},{key:"_addPlaceholders",value:function(e){this.start=e.appendChild(document.createComment("")),this.end=e.appendChild(document.createComment(""))}},{key:"_setRefNodes",value:function(e){this.start=e,this.end=e.nextSibling}},{key:"update",value:function(){for(;ZT._isSpecialFunc(this.currentVal);){var e=this.currentVal;this.currentVal={},e(this)}var t=this.currentVal;ZT._isPlainText(t)?t!==this.value&&this._updateNode(t):t instanceof ZTemplates?this._processHTML(t):t.nodeType?this._insertNode(t):t instanceof Array&&this._processValues(t)}},{key:"_processValues",value:function(t){this.value instanceof Array||(this.value=[],this.remove());var a=this.value,o=t.length,l,n;for(n=0;n<o;n++)l=a[n],l||(l=new e,a.push(l),0===n?l._appendNodePart(this):l._insertAfterPart(a[n-1])),l._setResult(t[n]),l.update();n<a.length&&(a.length=n,this.remove(l&&l.end))}},{key:"_appendNodePart",value:function(e){e._insert(this.start=document.createComment("")),e._insert(this.end=document.createComment(""))}},{key:"_insertAfterPart",value:function(e){e._insert(this.start=document.createComment("")),this.end=e.end,e.end=this.start}},{key:"remove",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.start;this._emptyElement(this.start.parentNode,e.nextSibling,this.end)}},{key:"_insert",value:function(e){this.end.parentNode.insertBefore(e,this.end)}},{key:"_insertNode",value:function(e){this.value===e||(this.remove(),this._insert(e),this.value=e)}},{key:"_updateNode",value:function(e){var t=this.start.nextSibling;e=e||"",t===this.end.previousSibling&&3===t.nodeType?t.textContent=e:this._insertNode(document.createTextNode("string"==typeof e?e:e+"")),this.value=e}},{key:"_processHTML",value:function(e,t){var a=ZT._updateTemplateCache(e),o;if(this.value&&this.value.template===a)this.value.updateValues(e.values);else{var i=new ZTemplateUpdater(a);o=i._updateNodes(),i.updateValues(e.values),t||this._insertNode(o),this.value=i}return o}}]),e}();(function(e){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)&&(module.exports=function(){return e}())})(ZCTemplates),ZComponents.Date=function(e){var t=Math.min,a=e.DOMUtil;return"use strict",{monthsAbbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysAbbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],invalidInput:"Invalid date/time provided. Please provide correct input",century:21,AM:"AM",PM:"PM",timeZone:null,alternateTZNames:{"US/Samoa":"Pacific/Pago_Pago","US/Hawaii":"Pacific/Honolulu","US/Aleutian":"America/Anchorage","US/Alaska":"America/Anchorage","Mexico/BajaNorte":"America/Tijuana","US/Arizona":"America/Phoenix","US/Pacific":"America/Los_Angeles",MST:"America/Phoenix",PST:"America/Los_Angeles","Mexico/BajaSur":"America/Mazatlan",CST6CDT:"America/Chicago","US/Central":"America/Chicago","US/Indiana-Starke":"America/Indiana/Knox","US/East-Indiana":"America/Indiana/Indianapolis","US/Eastern":"America/New_York","US/Michigan":"America/Detroit","America/Argentina/ComodRivadavia":"America/Argentina/Catamarca","America/Nuuk":"America/Godthab",MET:"Europe/Paris",EET:"Europe/Sofia",IST:"Asia/Kolkata","Australia/ACT":"Australia/Sydney","Antarctica/McMurdo":"Pacific/Auckland",AST:"America/Blanc-Sablon",EAT:"Africa/Nairobi",NST:"Pacific/Auckland",PRT:"America/Blanc-Sablon","SystemV/AST4ADT":"America/Blanc-Sablon"},_getNewDate:function(){return this.timeZone?this.changeTZOfDate(new Date,this.timeZone):new Date},_setMonth:function(e,t){var a=e.getDate();if(isNaN(e))return e;for(t-=1,t%=12,e.setMonth(t);0<t&&e.getMonth()!==t;)e.setDate(--a);return e},_parseDateValue:function(e,t,a){if(e){var o=!1,i=[],t,l;if(e instanceof Date)return{date:e,isValid:!0};a.length&&(i=a.slice()),i.unshift(t);for(var n=e,s=e.match(/[^ -/:-@\u5e74\u6708\u65e5[-`{-~\t\n\r]+/g)||[],r=0;r<i.length;r++)if(e=n,l=this.parseDate(e,i[r]),l&&l.isValid){o=!0;break}return o||(l=this.getDateFromOffset(n,l?l.date:void 0,i[0],s)),l}},_getFormattedDate:function(e,t){var a=["yyyy","yy","M","MM","MMM","MMMM","d","dd","ddd","dddd","H","HH","h","hh","m","mm","s","ss"],o,l;if(t){for(var n=0;n<a.length;n++)if(l=a[n],l in e&&!isNaN(e[l])){switch(o=new Date(t),l){case"M":case"MM":case"MMM":case"MMMM":o=this._setMonth(o,e[l]);break;case"yyyy":9999<e[l]?o.setFullYear(9999):o.setFullYear(e[l]);break;case"yy":var s=this.century-1,r=s.toString()+e[l];o.setFullYear(parseInt(r));break;case"d":case"dd":case"ddd":case"dddd":o.setDate(e[l]);break;case"H":case"HH":o.setHours(e[l]);break;case"h":case"hh":o.setHours(e[l]);break;case"m":case"mm":o.setMinutes(e[l]);break;case"s":case"ss":o.setSeconds(e[l]);}isNaN(o)||(t=o)}return o}},_getDateByIntelligence:function(e,t,a){var o=new Date(e),l=e.match(/[-\/. ?]/g)||[],n;if(!isNaN(o))return 1===l.length&&2001===o.getFullYear()&&o.setFullYear(this._getNewDate().getFullYear()),o;var s=a,r=e.match(/:/g),d;if(r){var c=!1,_,u,p;d=r.length;var m=["AM","PM","am","pm"],h;s&&(s[0]&&(s[0]=parseInt(s[0])),s[1]&&(s[1]=parseInt(s[1])),s[2]&&!isNaN(s[2])&&(s[2]=parseInt(s[2])));for(var g=0;g<m.length;g++)if(-1<s.indexOf(m[g])){h=s.indexOf(m[g]);break}if(0===d)c=!0;else if(1===d){if(h&&-1<h){var v=s[h].toUpperCase();if(1<=s[0]&&12>=s[0]&&0<=s[1]&&59>=s[1]){var y=s[0]%12;"AM"===v&&(_=0===y?0:s[0]),"PM"===v&&(_=0===y?12:s[0]+12),u=s[1]}else c=!0}else 0<=s[0]&&23>=s[0]&&0<=s[1]&&59>=s[1]?(_=s[0],u=s[1]):c=!0;}else if(2!==d)c=!0;else if(h&&-1<h){var v=s[h].toUpperCase();if(1<=s[0]&&12>=s[0]&&0<=s[1]&&59>=s[1]&&0<=s[2]&&59>=s[2]){var y=s[0]%12;"AM"===v&&(_=0===y?0:s[0]),"PM"===v&&(_=0===y?12:s[0]+12),u=s[1],p=s[2]}}else 0<=s[0]&&23>=s[0]&&0<=s[1]&&59>=s[1]&&0<=s[2]&&59>=s[1]?(_=s[0],u=s[1],p=s[2]):c=!0;c?n=!0:(e=this._getNewDate(),void 0!==_&&e.setHours(_),void 0!==u&&e.setMinutes(u),void 0===p?e.setSeconds(0):e.setSeconds(p))}else if(l.length){var f=e.split(l[0]),k,b;4===f[0].length?(b=parseInt(f[0]),k=parseInt(f[1])):4===f[1].length&&(k=parseInt(f[0]),b=parseInt(f[1])),void 0!==k&&void 0!==b?(e=this._getNewDate(),e.setFullYear(b),e.setDate(1),e.setMonth(k)):n=!0}else n=!0;if(n)throw new Error(this.invalidInput);return e},_getDate:function(e,t,a,o,i,l){return new Date(e,t,a,o,i,l)},_appendZerosToValue:function(e,t,a){return e=e.toString(),t=t||2,a=t-e.length,a?["","0","00","000","0000"][t].substring(0,a)+e:e},_replaceMatchedText:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],a=2<arguments.length?arguments[2]:void 0;if(e){var o,i;switch(a){case"d":i=e.getDate();break;case"dd":var e=e.getDate();i=(10>e?"0":"")+e;break;case"ddd":i=(t.daysAbbreviated||this.daysAbbreviated)[e.getDay()];break;case"dddd":i=(t.days||this.days)[e.getDay()];break;case"M":i=e.getMonth()+1;break;case"MM":var l=e.getMonth()+1;i=(10>l?"0":"")+l;break;case"MMM":i=(t.monthsAbbreviated||this.monthsAbbreviated)[e.getMonth()];break;case"MMMM":i=(t.months||this.months)[e.getMonth()];break;case"yy":i=this._appendZerosToValue(e.getFullYear()%100);break;case"yyyy":i=this._appendZerosToValue(e.getFullYear(),4);break;case"h":i=e.getHours()%12||12;break;case"hh":var n=e.getHours()%12||12;i=(10>n?"0":"")+n;break;case"H":i=e.getHours();break;case"HH":var n=e.getHours();i=(10>n?"0":"")+n;break;case"m":i=e.getMinutes();break;case"mm":var o=e.getMinutes();i=(10>o?"0":"")+o;break;case"s":i=e.getSeconds();break;case"ss":var s=e.getSeconds();i=(10>s?"0":"")+s;break;case"tt":i=12>e.getHours()?"AM":"PM";break;case"z":case"zz":case"zzz":i=e.toString().split(" ")[5];}return void 0===i?a.slice(1,a.length-1):i}},formatDate:function(e,t,a){var o=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,i=this;return e&&e instanceof Date?t.replace(o,this._replaceMatchedText.bind(this,e,a)):e},parsePattern:function(e){e=e.replace(/(["'])(?:(?=(\\?))\2.)*?\1/g,"");var t=/d(?:d{1,3})?|M(?:M{1,3})?|yy(?:yy)?|h(?:h)?|H(?:H)?|m(?:m)?|s(?:s)|t{2}|z(?:z{1,3})?/g,a=e.replace(t,"\0").split("\0"),o=e.match(t);return!!(a&&a.length&&o&&o.length)&&{dateSeperator:a,dateParts:o}},parseDate:function(e,t){var a={},o,t,l;if(e){if(e instanceof Date)return"string"==typeof t&&0>t.indexOf("s")&&e.setSeconds(0,0),{date:e,isValid:!0};if("string"==typeof e&&("string"!=typeof e||e.length)){var n=function(e){var t=e.slice(0,c[p].length),a=c[p].slice(0,t.length);return t.toLowerCase()===a.toLowerCase()},s=e,r;if(e=s,"string"==typeof t){var d=t.match(/(["'])(?:(?=(\\?))\2.)*?\1/g);d&&(r=d.map(function(e){return e.replace(/'/g,"")})),t=this.parsePattern(t)}var c=e.match(/[^ -/:-@\u5e74\u6708\u65e5[-`{-~\t\n\r]+/g)||[],_;r&&(c=c.filter(function(e){return-1===r.indexOf(e)}));var u=t.dateParts.slice();if(e=new Date,c.length===u.length)for(var p=0;p<u.length;p++)if(o=parseInt(c[p],10),_=u[p],isNaN(o)){if("MMM"===_||"MMMM"===_)"MMM"===_||"MMMM"===_?(l=this.monthsAbbreviated.filter(n),o=this.monthsAbbreviated.indexOf(l[0])+1):void 0,a[_]=o;else if("dddd"===_||"ddd"===_)o=c[-1<u.indexOf("d")?u.indexOf("d"):-1<u.indexOf("dd")],a[_]=o;else if("tt"===_&&("AM"===c[p]||"PM"===c[p])){var m=-1===u.indexOf("hh")?"h":"hh",h=c[u.indexOf(m)],g=parseInt(h),v="PM"===c[p]?12:0;a[m]=0===g%12?v:g+v,a[_]=h}}else if(("yyyy"===_||"yy"===_)&&9999<o&&(c[p]="9999"),!(-1<_.indexOf("d")&&31<o||-1<_.indexOf("M")&&12<o||-1<_.indexOf("y")&&_.length!==c[p].length))a[_]=o;else break;return Object.keys(a).length&&c.length===Object.keys(a).length?(e=this._getFormattedDate(a,e),-1===t.dateParts.indexOf("s")&&-1===t.dateParts.indexOf("ss")&&e.setSeconds(0,0),e={date:e,isValid:!0}):e={date:e,isValid:!1},e}}},getDateFromOffset:function(e,a,o,i){if(a){var l;if(0===e.indexOf("TODAY"))l=e.substring(5);else if(0===e.indexOf("FROM_VALUE"))l=e.substring(10);else return{date:void 0,isValid:!1};var n=/([+-][0-9]+)(DAYS|MONTHS|YEARS|WEEKS)/g,s=n.exec(l),r=a.getDate(),d=a.getMonth(),c=a.getFullYear(),_=a.getHours(),u=a.getMinutes(),p=a.getSeconds();if(!s)try{var m={date:this._getDateByIntelligence(e,o,i),isValid:!0};return m}catch(e){var m={date:void 0,isValid:!1};return m}for(;s;){switch(s[2]||"DAYS"){case"DAYS":r+=parseInt(s[1],10);break;case"WEEKS":r+=7*parseInt(s[1],10);break;case"MONTHS":d+=parseInt(s[1],10),r=t(r,new Date(c,d+1,0).getDate());break;case"YEARS":c+=parseInt(s[1],10),r=t(r,new Date(c,d+1,0).getDate());break;case"HOURS":_+=parseInt(s[1],10);break;case"MINUTES":u+=parseInt(s[1],10);break;case"SECONDS":p+=parseInt(s[1],10);}s=n.exec(l)}a=this._getDate(c,d,r,_,u,p);var h={date:a,isValid:!0};return h}},convertOffsetToValue:function(e){var t=/([+-]{1}([0-9])+$)/g,a=t.exec(e);return a?parseInt(a[0]):0},getUTCDate:function(){return new Date(Date.UTC.apply(Date,arguments))},areDatesEqual:function(e,t){if(e&&t)return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},areTimesEqual:function(e,t){if(e&&t)return e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes()&&e.getSeconds()===t.getSeconds()},isTimeGreater:function(e,t){return e=new Date(+e),e.setFullYear(t.getFullYear()),e.setMonth(t.getMonth()),e.setDate(t.getDate()),+e>+t},isGreater:function(e,t){if(e&&t)return!(e.getTime()<t.getTime())},changeTZOfDate:function(e,t){t=this.alternateTZNames[t]||t;var a=new Intl.DateTimeFormat("en-US",{timeZone:t,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}),o;return e=a.format(e),o=this.parseDate(e,"M/d/yyyy hh:mm:ss"),o.isValid?o.date:void 0}}}(ZComponents),function(e){var t=Math.round,a=e.DOMUtil;e.Helpers={open:function(t,a){return e.ShowHideHandler.show(t,a)},close:function(t){var a=1<arguments.length&&arguments[1]!==void 0?arguments[1]:t.data("zshowhide")||{};return e.ShowHideHandler.hide(t,a)},fixHeight:function(t,o){return e.ShowHideHandler.fixHeight(t,a.extend(!0,{},t.data("zshowhide"),o||{}))},fixGridWidth:function(t,o){return e.ShowHideHandler.fixGridWidth(t,a.extend(!0,{},t.data("zshowhide"),o||{}))},removeScrollClass:function(t){return e.ShowHideHandler.removeScrollCls(t)}},e.ShowHideHandler=function(e,a){'use strict';return{_DEFAULTS:{forElement:void 0,appendTo:void 0,width:void 0,height:void 0,withinPadding:8,isGrid:!1,renderInPlace:!1,position:null,direction:"auto",offset:null,mustBeShown:!1,viewport:null,minWidth:200,displayType:"box",arrowCallback:void 0,alterBorderRadius:!0,scroll:"default",toggle:!0,isSubList:!1,arrowElement:void 0,closeOnBodyClick:!0,cname:"",hideMethodName:"hide",hideEventName:"hide",bodyCls:"zmenu__body",headerCls:"zmenu__header",footerCls:"zmenu__footer",gridCls:"zmenu--thumbnail",mainCls:"zmenu",widthCls:"zmenu__width"},show:function(t,o){t=a(t);var i=a.extend(!0,{},this._DEFAULTS,o),l=t.is(":visible"),n=t.data("forElement")||"",s=a(i.forElement),r=i.isSubList,d=s&&s[0]===n[0],c=i.mustBeShown,_=l&&c,u=i.renderInPlace,p=a(i.appendTo),m=i.onShow;if(d&&l&&!c)return void(i.toggle&&!r&&i.onToggle&&i.onToggle(t));if(c&&this._fetchScrollVal(t),(!u||r)&&!c){var h=(p&&p.length?p:a("body"))[0],g=t[0];h.contains(g)&&-1!==Array.prototype.slice.call(h.childNodes).indexOf(g)||h.appendChild(g)}var v=i.viewport||(p.length?p:void 0);v&&(v="window"===v?e.$window:"document"===v?e.$document:a(v),i.within=v);var y={};if(u)t.addClass("zmenu--inline"),e.display(void 0,t),m&&m(t,i);else if(y=this._calcDimensions(t,i,s,_,r),!y)return;return r&&(y.parent=s),y.direction=y.pos&&y.pos.direction,t.data(y),i.isSubList||this._setFocus(t,i),e.isEmpty(i.animation)||!i.animation.open?(!_&&e.display(void 0,t),i.arrowElement&&i.arrowElement.show(),m&&m(t,i)):i.onShowWithAnimation&&i.onShowWithAnimation(t,i),t.data("zshowhide",i),t.data("zscrEle")&&t.data("zscrEle").scrollTop(t.data("zscrVal")),y},_calcDimensions:function(t,a,o,i,l){var n=a.direction,s=a.position,r=a.isRightClick||"at-cursor"===n;a.closeOnBodyClick&&e.bindDocumentEvents&&e.bindDocumentEvents({isCE:a.isCE,element:a.originalElement||t,container:t,forElement:!r&&o,ctype:a.cname,closeMethodName:a.hideMethodName,closeEvent:a.hideEventName});var d=a.event||{},c=a.beforeShow&&a.beforeShow(t,d,{currentTarget:r?d.target:o});if(!1!==c){i||e.display(void 0,t).css("opacity","0");var _=this.fixWidth(t,a);t.removeClass(a.widthCls),a.isGrid&&this.fixGridWidth(t,a),t.css("height","auto");var u=t.find("."+a.bodyCls),p=!1;u.length&&u.css("height","auto"),a.height&&parseFloat(a.height)<=t.outerHeight()&&(t.outerHeight(parseInt(a.height)),p=!0);var m=(t.attr("class")||"").replace(/zposition--(?:[a-z-])+/g,"").trim(),h={},g;if(s||(h=this.calcPosition(t,a,r,l,d,o),g=m+" zposition--"+(h.actualDirection||n).replace(/-/,""),s=h.elementPosition),g&&t.attr("class",g),this.fixHeight(t,a),this._checkForScroll(t,p,s,_,h.actualDirection||n,a.scroll),a.alterBorderRadius&&!a.arrowElement&&e.alterBorderRadius({element:t,forElement:o,hasSideAlignment:l,offset:s,direction:h.actualDirection||n}),s){if(r){var v=a.rtl;s.top+=v?-2:2,s.left+=v?-2:2}t.css(s)}return i||(e.display(!0,t),t.css("opacity","")),h}},_checkForScroll:function(e,t,a,o,i,l){t=(t||e.hasClass("zh-scroll_y")||e.find(".zh-scroll_y").length)&&"slider"!==l;var n=o.actualWidth,s=o.minW;if(t){var r=0,d=this.scrollWidth||this.getScrollWidth();s?s-n<d+1&&(r=n+d+1-s):r=d,a&&("bottom-right"===i||"top-right"===i)&&(a.left-=r),e.width(e.width()+r)}},getScrollWidth:function(){var e=document.createElement("div"),t=document.querySelector("body");return t.appendChild(e),e.style.cssText="width:50px;height:50px;overflow:scroll;",this._scrollWidth=a(e).width()-e.scrollWidth,t.removeChild(e),this._scrollWidth},_setFocus:function(e,t){clearTimeout(e._focusTimer);var a=t.beforeFocus;(a===void 0||a(e))&&(e._focusTimer=setTimeout(function(){return e.focus()},100))},_fetchScrollVal:function(e){var t=e.find(".zh-scroll_y");t=t.length?t:e;var a=t.scrollTop();e.data("zscrEle",t),e.data("zscrVal",a)},fixGridWidth:function(o,l){var n=parseInt(l.columns),s="."+l.gridCls,r="."+l.bodyCls,d="."+l.mainCls,c=o.find(s),_=o;if(c.length)for(var u=0,p=0,m,h;p<c.length;p++)h=e._getOpts(c[p]),m=h.columns,m&&m>u&&(u=m,_=a(c[p]));if(!n||-1===n){var g=o.closest(d),v=e._getOpts(g);if(n=g.data("isExternalSubmenu")?v.columns:n,!n||-1===n)return}_[0]!==o[0]||o.hasClass(l.gridCls)?_.find(r).length&&(_=o.find(r)):_=o.find(s);for(var y=l.getAllMenuItems(_,!1,!1,!0),f=0,k=0,b;k<n&&k<y.length;k++)b=window.getComputedStyle(y[k]),f+=t(parseFloat(b.width))+t(parseFloat(b.marginLeft))+t(parseFloat(b.marginRight)),e.Browser.isIE&&11>=e.Browser.getIEVersion()&&(f+=t(parseFloat(b.paddingLeft))+t(parseFloat(b.paddingRight))+t(parseFloat(b.borderRightWidth))+t(parseFloat(b.borderLeftWidth)));o.width(f),o.data("width",f)},fixHeight:function(t,o){var i="auto",l=t.find("."+o.bodyCls),n=l.length?l:void 0;t.height(i),n&&n.height(i);var s="auto"===o.direction||"at-cursor"===o.direction,r=t.outerHeight(),d=parseInt(1*t.css("top").split("px")[0]-a(window).scrollTop())||0,c=e.windowObject?e.windowObject.height:a(window).height(),_=o.actualDirection||o.direction,u=o.availableHeight,p=o.isRightClick,m=_&&(0===_.indexOf("bottom")||0===_.indexOf("top"))?p?c:u:c,h=m-r;p&&(d+=2),(d+r>=m&&0>h||!s)&&(i=p?c-d:u);var g=parseInt(o.height);g?i=g>=u?u:g:0<h&&s&&(i=r);var v="slider"===o.scroll&&n,y=v?"zh-overflowhidden":"zh-scroll_y",f=!1;if(r>i){if(f=!0,n){var k=t.find("."+o.headerCls),b=t.find("."+o.footerCls),C=k.length?parseInt(k.outerHeight(!0)):0,D=b.length?parseInt(b.outerHeight(!0)):0,w=parseInt(t.css("padding-top"))+parseInt(t.css("padding-bottom")),S=parseInt(t.css("border-top-width"))+parseInt(t.css("border-bottom-width")),T=S+C+w+(1<b.length?b.length*D:D);n.innerHeight(i-T)}t.outerHeight(i)}v&&o.displayScrollers&&o.displayScrollers(f,t),(n||t)[f?"addClass":"removeClass"](y)},fixWidth:function(e,t){e.addClass(t.widthCls);var a=e.outerWidth(),o;return t.width?(a=parseInt(t.width),e.removeClass(t.widthCls),e.width(a)):t.minWidth&&a<parseInt(t.minWidth)&&"icon"!==t.contentType&&(o=parseInt(t.minWidth),e.removeClass(t.widthCls),e.outerWidth(o-1)),e.width(e.width()+1),{actualWidth:a,minW:o}},calcPosition:function(t,o,i,l,n,s){var r=o.offset,d=o.arrowElement,c=e.Position.get(i&&!l?n:s,t,a.extend(!0,{},{arrow:{element:l?null:d,callback:o.arrowCallback}},o),d||void 0),_;if(o.availableHeight=c.availableHeight,r&&(o.availableHeight-=parseInt(r.top)||0),_=c.elementPosition,o.actualDirection=_.direction=c.actualDirection,c.pos=_,d&&!l){var u=c.arrowPosition;if(r){var p=c.arrowDirection;if("top"===p||"bottom"===p){var m=o.rtl?"right":"left",h=o.rtl?1:-1;void 0!==r.left&&(u[m]+=r.left*h)}else void 0!==r.top&&(u.top-=r.top)}d.css(u)}return r&&(c.pos.top+=parseInt(r.top)||0,c.pos.left+=parseInt(r.left)||0),c},hide:function(t,a){if(t.is(":visible")&&!a.renderInPlace){var o=a.beforeHide&&a.beforeHide();if(!1!==o){var i=t.data("zshowhide")||{};if(i.alterBorderRadius&&e.alterBorderRadius({element:t,forElement:i.forElement},!0),this._fetchScrollVal(t),e.isEmpty(a.animation)||!a.animation.close){e.display(!0,t),this.removeScrollCls(t);var l=a.onHide;l&&l(t,a)}else{var n=a.onHideWithAnimation;n&&n(t,a)}}}},removeScrollCls:function(e){e.removeClass("zh-scroll_y zh-overflowhidden"),e.find(".zh-scroll_y, .zh-overflowhidden").removeClass("zh-scroll_y zh-overflowhidden")}}}(e,a)}(ZComponents),function(e){var t=Math.pow,a=Math.min,o=Math.max,i=Math.round,l=e.DOMUtil;e.ColorUtil={darken:function(e,t){t=this.limit(t,0,1);var o=[{mode:"MODIFY",value:1-t}];return this.hsl(e,{luminance:o})},lighten:function(e,t){t=this.limit(t,0,1);var o=[{mode:"MODIFY",value:1-t},{mode:"OFFSET",value:t}];return this.hsl(e,{luminance:o})},shade:function(e,t){t=this.limit(t,0,1);var o=[{mode:"MODIFY",value:1-t}];return this.rgb(e,{red:o,green:o,blue:o})},tint:function(e,t){t=this.limit(t,0,1);var o=[{mode:"MODIFY",value:1-t},{mode:"OFFSET",value:t}];return this.rgb(e,{red:o,green:o,blue:o})},rgb:function(e,t){return this.modify(e,t,"linearRGB")},tolinearRGB:function(e){return e.map(function(e){if(e/=255,0>e)return 0;if(.0405>=e)return e/12.92;if(1>=e){var a=(e+.055)/1.055;return t(a,2.4)}return 1})},linearRGBtoRGB:function(e){return e.map(function(e){if(0>e)e=0;else if(.0031308>=e)e*=12.92;else if(1>=e){e=1.055*t(e,1/2.4)-.055}else e=1;return i(e*=255)})},modify:function(e,t,a){var o=this,i=this["to".concat(a)](e),l={red:0,green:1,blue:2,luminance:2},n=function(e){var a=l[e];t[e].forEach(function(e){i[a]=o.modifyValue(i[a],e)})};for(var s in t)n(s);return this["".concat(a,"toRGB")](i)},modifyValue:function(e,t){return"MODIFY"===t.mode?e*=parseFloat(t.value):"OFFSET"===t.mode&&(e+=parseFloat(t.value)),e},hsl:function(e,t){return this.modify(e,t,"HSL")},toHSL:function(e){var t=e[0],i=e[1],r=e[2],d=o.apply(Math,_toConsumableArray(e)),c=a.apply(Math,_toConsumableArray(e)),_=0,u;d===c?_=0:d===t?(u=(i-r)/(d-c),_=(60*u+360)%360):d===i?(u=(r-t)/(d-c),_=60*u+120):(u=(t-i)/(d-c),_=60*u+240),_/=360;var p=(d+c)/510,l=0;return l=d===c?0:.5>=p?(d-c)/(2*p):(d-c)/(2-2*p),l/=255,[_,l,p]},HSLtoRGB:function(e){var t=this,a=e[0],o=e[1],n=e[2],l;l=.5>n?n*(1+o):n+o-n*o;var s=2*n-l,r=a;return[r+1/3,r,r-1/3].map(function(e){return 0>e?e+=1:1<e&&(e-=1),e%=1,e=e<1/6?s+6*(l-s)*e:e>=1/6&&.5>e?l:.5<=e&&e<2/3?s+6*(l-s)*(2/3-e):s,i(255*t.limit(e,0,1))})},cmykToRGB:function(e){var t=255*(1-e[0])*(1-e[3]),a=255*(1-e[1])*(1-e[3]),o=255*(1-e[2])*(1-e[3]);return[t,a,o]},rgbToCMYK:function(e){var t=1-e[0]/255,o=1-e[1]/255,i=1-e[2]/255,l=a(t,o,i);t=(t-l)/(1-l),o=(o-l)/(1-l),i=(i-l)/(1-l);return t=isNaN(t)?0:t,o=isNaN(o)?0:o,i=isNaN(i)?0:i,[t,o,i,l]},isDark:function(e){return this.brightness(e)<255*.5},rgbToHex:function(t){var a="#";return t.forEach(function(t){a+=e.ColorUtil.numToHex(t)}),a},rgbToHSV:function(e){var t=e[0]/255,l=e[1]/255,n=e[2]/255,r=a(t,l,n),d=o(t,l,n),c=100*d,_=0,u=0,p=d-r;if(0===d)return u=_=0,[_,u,c];u=100*(p/d);var m=0;p&&(t===d?m=(l-n)/p:l===d?m=2+(n-t)/p:m=4+(t-l)/p),_=60*m,0>_&&(_+=360);var g=i;return _=g(100*_)/100,u=g(100*u)/100,c=g(100*c)/100,[_,u,c]},hsvToRGB:function(e){var a=e[0],o=e[1],l=e[2],n=o/100,s=l/100,d,c,_;d=c=_=0;var u=function(e,t,a){var o=i;d=o(255*e),c=o(255*t),_=o(255*a)};if(0===n)return u(s,s,s),[d,c,_];360===a&&(a=0);var m=a/60,v=Math.floor(m),y=m-v,f=s*(1-n),p=s*(1-n*y),k=s*(1-n*(1-y));return 0===v?u(s,k,f):1===v?u(p,s,f):2===v?u(f,s,k):3===v?u(f,p,s):4===v?u(k,f,s):u(s,f,p),[d,c,_]},numToHex:function(e){var t=parseInt(e).toString(16);return 1===t.length?"0".concat(t):t},hexToNum:function(e){return parseInt(e,16)},brightness:function(e){var t=e[0],a=e[1],o=e[2];return .299*t+.587*a+.114*o},limit:function(e,t,i){return o(a(e,i),t)},getColorInstance:function(t){return new e.Color(t)},REGEX:{colorMode:/^(rgb|rgba|hsl|hsla|hsv|hsva|hex|hex8|cmyk)$/}},e.Color=function(e){return this.init(e),this},e.Color.prototype={init:function(e){this.initialColor=e,e=d(e),e?(this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this.format=e.format,this.colorInFormat=e.colorInFormat,this._valid=!0):this._valid=!1},isValid:function(){return this._valid},colorCodeMapping:{hue:"decimal",saturation:"percent",brightness:"percent",lightness:"percent",rgb:"decimal",cmyk:"percent",opacity:"decimal"},getObject:function(t,a){a=a?l.extend({},this.colorCodeMapping,a):this.colorCodeMapping;var o=[this._r,this._g,this._b],n=i,s=function(e){return n(100*e)/100},r=function(e,t){return"percent"===e?s(100*t)+"%":n(360*t)},d=function(e,t){return"percent"===e?s(100*t)+"%":n(255*t)},c=function(e,t){return"decimal"===e?s(t):n(100*t)+"%"};if(/(hsv)/.test(t)){var _=[];return /(hsv)/.test(this.format)?(_[0]=this.colorInFormat.h,_[1]=this.colorInFormat.s,_[2]=this.colorInFormat.v):(_=e.ColorUtil.rgbToHSV(o),/(hsl)/.test(this.format)&&(_[0]=360*this.colorInFormat.h)),{h:r(a.hue,_[0]/360),s:c(a.saturation,_[1]/100),v:c(a.brightness,_[2]/100),a:c(a.opacity,this._a)}}if(/(hsl)/.test(t)){var u=[];return /(hsl)/.test(this.format)?(u[0]=this.colorInFormat.h,u[1]=this.colorInFormat.s,u[2]=this.colorInFormat.l):(u=e.ColorUtil.toHSL(o),/(hsv)/.test(this.format)&&(u[0]=this.colorInFormat.h/360)),{h:r(a.hue,u[0]),s:c(a.saturation,u[1]),l:c(a.lightness,u[2]),a:c(a.opacity,this._a)}}if(/(cmyk)/.test(t)){var p=[];return /(cmyk)/.test(this.format)?(p[0]=this.colorInFormat.c,p[1]=this.colorInFormat.m,p[2]=this.colorInFormat.y,p[3]=this.colorInFormat.k):p=e.ColorUtil.rgbToCMYK(o),{c:c(a.cmyk,p[0]),m:c(a.cmyk,p[1]),y:c(a.cmyk,p[2]),k:c(a.cmyk,p[3])}}return /(hex)/.test(t)?{hex:e.ColorUtil.rgbToHex(o).replace(/#/,""),a:c(a.opacity,this._a)}:{r:d(a.rgb,o[0]/255),g:d(a.rgb,o[1]/255),b:d(a.rgb,o[2]/255),a:c(a.opacity,this._a)}},getPercentageObject:function(e){var t=this.getObject(e);return /(hsv|hsl)/.test(e)?(t.h=100*(t.h/360)+"%",t.a=100*t.a+"%"):/(rgb)/.test(e)&&(t.r=100*(t.r/255)+"%",t.g=100*(t.g/255)+"%",t.b=100*(t.b/255)+"%",t.a=100*t.a+"%"),t},getColor:function(t,a,o){var i=this.getObject(t,a);if(i){var l=1!==this._a;return(o=void 0===o||o,/^(hsv)/.test(t))?(t=o?l?"hsva":"hsv":t,/^(hsva)/.test(t)?"hsva("+i.h+", "+i.s+", "+i.v+", "+i.a+")":"hsv("+i.h+", "+i.s+", "+i.v+")"):/^(hsl)/.test(t)?(t=o?l?"hsla":"hsl":t,/^(hsla)/.test(t)?"hsla("+i.h+", "+i.s+", "+i.l+", "+i.a+")":"hsl("+i.h+", "+i.s+", "+i.l+")"):/^(cmyk)$/.test(t)?"cmyk("+i.c+","+i.m+","+i.y+","+i.k+")":/^(hex)/.test(t)?(t=o?l?"hex8":"hex":t,/^(hex8)/.test(t)?"#"+i.hex+e.ColorUtil.numToHex(255*this._a):"#"+i.hex):(t=o||!/(rgb)/.test(t)?l?"rgba":"rgb":t,/^(rgba)/.test(t)?"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")":"rgb("+i.r+", "+i.g+", "+i.b+")")}},setAlpha:function(e){this._a=r("a",e)},getAlpha:function(){return this._a},setColor:function(e){this.init(e)}};var n={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},s=function(){var e="(?:"+"[-\\+]?\\d*\\.\\d+%?"+")|(?:"+"[-\\+]?\\d+%?"+")",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",a="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{value:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+a),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+a),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+a),cmyk:new RegExp("cmyk"+a),hex3:/^#?([0-9a-f]{1})([0-9a-f]{1})([0-9a-f]{1})$/,hex6:/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/,hex8:/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/}}(),r=function(t,a){var o=/%/.test(a);return(a=o?parseFloat(a)/100:parseFloat(a),"h"===t)?i(e.ColorUtil.limit(o?360*a:a,0,360)):/(s|v|l)/.test(t)?i(e.ColorUtil.limit(100*a,0,100)):/(c|m|y|k)/.test(t)?i(100*e.ColorUtil.limit(a,0,1))/100:/(r|g|b)/.test(t)?i(e.ColorUtil.limit(o?255*a:a,0,255)):"a"===t?void 0===a||isNaN(a)||0>a||1<a?1:a:void 0},d=function(t){if(t=c(t),"object"===_typeof(t)){var a=t.format,o;if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v"))a=a||"hsva",t.h=r("h",t.h),t.s=r("s",t.s),t.v=r("v",t.v),o=e.ColorUtil.hsvToRGB([t.h,t.s,t.v]);else if(t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l"))a=a||"hsla",t.h=r("h",t.h)/360,t.s=r("s",t.s)/100,t.l=r("l",t.l)/100,o=e.ColorUtil.HSLtoRGB([t.h,t.s,t.l]);else if(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b"))a=a||"rgba",t.r=r("r",t.r),t.g=r("g",t.g),t.b=r("b",t.b),o=[t.r,t.g,t.b];else if(t.hasOwnProperty("c")&&t.hasOwnProperty("m")&&t.hasOwnProperty("y")&&t.hasOwnProperty("k"))a=a||"cmyk",t.c=r("c",t.c),t.m=r("m",t.m),t.y=r("y",t.y),t.k=r("k",t.k),o=e.ColorUtil.cmykToRGB([t.c,t.m,t.y,t.k]);else if(t.hasOwnProperty("hex")){if(a=a||"hex",o=c(t.hex),!o)return;o=[o.r,o.g,o.b]}if(o)return{r:o[0],g:o[1],b:o[2],a:r("a",t.a),format:a,colorInFormat:t}}},c=function(t){if("string"==typeof t||"number"==typeof t){t=t.trim().toLowerCase();var a=!1;if(n[t])t=n[t],a=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0};var o=s.rgb.exec(t);if(o)return{r:o[1],g:o[2],b:o[3],format:"rgb"};if(o=s.rgba.exec(t),o)return{r:o[1],g:o[2],b:o[3],a:o[4],format:"rgba"};if(o=s.hsl.exec(t),o)return{h:o[1],s:o[2],l:o[3],format:"hsl"};if(o=s.hsla.exec(t),o)return{h:o[1],s:o[2],l:o[3],a:o[4],format:"hsla"};if(o=s.hsv.exec(t),o)return{h:o[1],s:o[2],v:o[3],format:"hsv"};if(o=s.hsva.exec(t),o)return{h:o[1],s:o[2],v:o[3],a:o[4],format:"hsva"};if(o=s.cmyk.exec(t),o)return{c:o[1],m:o[2],y:o[3],k:o[4],format:"cmyk"};if(o=s.hex8.exec(t),o)return{r:e.ColorUtil.hexToNum(o[1]),g:e.ColorUtil.hexToNum(o[2]),b:e.ColorUtil.hexToNum(o[3]),a:i(100*(e.ColorUtil.hexToNum(o[4])/255))/100,format:"hex8"};if(o=s.hex6.exec(t),o)return{r:e.ColorUtil.hexToNum(o[1]),g:e.ColorUtil.hexToNum(o[2]),b:e.ColorUtil.hexToNum(o[3]),format:a?"rgba":"hex"};if(o=s.hex3.exec(t),o)return{r:e.ColorUtil.hexToNum(o[1]+o[1]),g:e.ColorUtil.hexToNum(o[2]+o[2]),b:e.ColorUtil.hexToNum(o[3]+o[3]),format:"hex"}}else return Array.isArray(t)?{r:t[0],g:t[1],b:t[2],a:t[3],format:"rgba"}:Object.assign({},t)}}(ZComponents),function(e){function t(t,o){(function(l){var s=o.componentName,r=t.data(s),d,c,_,u;if(r){if(d=o.forElement||n(r._opts.forElement),!d||!d.length)return;_="zmenu"===s?"show":"open",u="zmenu"===s?"hide":"close",c=r.element,r.openHandler?r.openHandler.forElement.push(d):r.openHandler={forElement:[d],closeMethod:u,openMethod:_};var p=r.isCE?"z":s;t.on(p+"beforedestroy."+s,function(){return e.removeOpenListener(s.slice(1),t)}).on(p+"close."+s,function(){return l.splice(l.indexOf(r),1)}),d.off("."+s).data(s,{});var m=d.data(s);if(m.componentName=s,m.openMethod=_,m.element=t,"click"===o.popOn)d.off("mousedown."+s).on("mousedown."+s,function(e){a(n(e.currentTarget)),c.is(":visible")&&i===e.currentTarget?r[u]():(i=e.currentTarget,r[_](o),l.push(r))});else{var h=o.popOn;if(!/focus|mouseover/.test(h))return;var g="mouseover"===h?"mouseenter.":"focusin.",v="mouseover"===h?"mouseleave.":"focusout.";d.off(g+s+" "+v+s).on(g+s,function(e){m._mouseEntered=!0,a(n(e.currentTarget),u),c.is(":visible")||(r[_](o),l.push(r)),clearTimeout(m._mouseLeaveTimeout)}).on(v+s,function(){m._mouseEntered=!1,m._mouseLeaveTimeout=setTimeout(function(){c.is(":visible")&&r[u]()},o.mouseLeaveTime||1500)}),c.off(g+s+" "+v+s).on(g+s,function(){clearTimeout(m._mouseLeaveTimeout)}).on(v+s,function(){setTimeout(function(){m._mouseEntered||r[u]()},100)})}}})(l)}function a(e){for(var t=0,a;t<l.length;t++)a=l[t],a&&a.element.is(":visible")&&!e.closest(a.element).length&&o(e,a.openHandler)&&(a[a.openHandler.closeMethod](),l.splice(t,1),t--)}function o(e,t){for(var a=!1,o=0,l;o<t.forElement.length;o++)if(l=t.forElement[o],e[0]===l[0]){a=!0;break}return!a}var l=[],n=e.DOMUtil,i;e.removeOpenListener=function(e,t){e="z"+e;for(var a=0;a<t.length;a++){var o=n(t[a]),l=o.data(e)&&o.data(e).openHandler;if(l)for(var s=0,r;s<l.forElement.length;s++)r=l.forElement[s],r.off("."+e),r.removeData(e)}},e.addOpenListener=function(e,a){e="z"+e;for(var o=0;o<a.length;o++)a[o].options.componentName=e,t(a[o].element,a[o].options)}}(ZComponents),function(e){var t="zohocomponents__svg";e.loadSVGIcons=function(){var e=document.getElementById(t);if(e||(e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.setAttribute("id",t),e.setAttribute("class","zh-dnone")),"innerHTML"in e)e.innerHTML="<symbol id=\"zc__svg--backward\" viewBox=\"0 0 12 12\" width=\"100%\" height=\"100%\"><polygon points=\"6.6,10.3 2.9,6.5 6.6,2.7 7.4,3.4 4.3,6.5 7.4,9.6\"></polygon></symbol><symbol viewBox=\"0 0 14 14\" width=\"100%\" height=\"100%\" id=\"zc__svg--calendaricon\"> <rect x=\"-22.5\" y=\"3.5\" width=\"13\" height=\"10\"></rect> <path d=\"M-10,4v9h-12V4H-10 M-9,3h-14v11h14V3L-9,3z\"></path> <rect x=\"-20.6\" y=\"1.4\" width=\"1.2\" height=\"3.2\"></rect> <path d=\"M-19.8,1.8v2.5h-0.5V1.8H-19.8 M-19,1h-2v4h2V1L-19,1z\"></path> <rect x=\"-20.6\" y=\"7.4\" width=\"1.2\" height=\"1.2\"></rect> <path d=\"M-19.8,7.8v0.5h-0.5V7.8H-19.8 M-19,7h-2v2h2V7L-19,7z\"></path> <rect x=\"-16.6\" y=\"1.4\" width=\"1.2\" height=\"3.2\"></rect> <path d=\"M-15.8,1.8v2.5h-0.5V1.8H-15.8 M-15,1h-2v4h2V1L-15,1z\"></path> <rect x=\"-12.6\" y=\"1.4\" width=\"1.2\" height=\"3.2\"></rect> <path d=\"M-11.8,1.8v2.5h-0.5V1.8H-11.8 M-11,1h-2v4h2V1L-11,1z\"></path> <rect x=\"-16.6\" y=\"7.4\" width=\"1.2\" height=\"1.2\"></rect> <path d=\"M-15.8,7.8v0.5h-0.5V7.8H-15.8 M-15,7h-2v2h2V7L-15,7z\"></path> <rect x=\"-12.6\" y=\"7.4\" width=\"1.2\" height=\"1.2\"></rect> <path d=\"M-11.8,7.8v0.5h-0.5V7.8H-11.8 M-11,7h-2v2h2V7L-11,7z\"></path> <rect x=\"-20.6\" y=\"10.4\" width=\"1.2\" height=\"1.2\"></rect> <path d=\"M-19.8,10.8v0.5h-0.5v-0.5H-19.8 M-19,10h-2v2h2V10L-19,10z\"></path> <rect x=\"-16.6\" y=\"10.4\" width=\"1.2\" height=\"1.2\"></rect> <path d=\"M-15.8,10.8v0.5h-0.5v-0.5H-15.8 M-15,10h-2v2h2V10L-15,10z\"></path> <rect x=\"-12.6\" y=\"10.4\" width=\"1.2\" height=\"1.2\"></rect> <path d=\"M-11.8,10.8v0.5h-0.5v-0.5H-11.8 M-11,10h-2v2h2V10L-11,10z\"></path> <path d=\"M4,3c0.6,0,1-0.4,1-1V1H3v1C3,2.6,3.4,3,4,3z\"></path> <rect x=\"2\" y=\"7\" width=\"2\" height=\"2\"></rect> <rect x=\"2\" y=\"10\" width=\"2\" height=\"2\"></rect> <rect x=\"6\" y=\"7\" width=\"2\" height=\"2\"></rect> <rect x=\"6\" y=\"10\" width=\"2\" height=\"2\"></rect> <rect x=\"10\" y=\"7\" width=\"2\" height=\"2\"></rect> <rect x=\"10\" y=\"10\" width=\"2\" height=\"2\"></rect> <path d=\"M12.8,2c0,1-0.8,1.8-1.8,1.8S9.2,3,9.2,2H5.8C5.8,3,5,3.8,4,3.8S2.2,3,2.2,2H0v3v9h14V5V2H12.8z M13,13H1V6h12V13z\"></path> <path d=\"M11,3c0.6,0,1-0.4,1-1V1h-2v1C10,2.6,10.4,3,11,3z\"></path> </symbol><symbol viewBox=\"0 0 21.9 21.9\" width=\"100%\" height=\"100%\" id=\"zc__svg--clear\"> <path d=\"M14.1,11.3c-0.2-0.2-0.2-0.5,0-0.7l7.5-7.5c0.2-0.2,0.3-0.5,0.3-0.7s-0.1-0.5-0.3-0.7l-1.4-1.4C20,0.1,19.7,0,19.5,0 c-0.3,0-0.5,0.1-0.7,0.3l-7.5,7.5c-0.2,0.2-0.5,0.2-0.7,0L3.1,0.3C2.9,0.1,2.6,0,2.4,0S1.9,0.1,1.7,0.3L0.3,1.7C0.1,1.9,0,2.2,0,2.4 s0.1,0.5,0.3,0.7l7.5,7.5c0.2,0.2,0.2,0.5,0,0.7l-7.5,7.5C0.1,19,0,19.3,0,19.5s0.1,0.5,0.3,0.7l1.4,1.4c0.2,0.2,0.5,0.3,0.7,0.3 s0.5-0.1,0.7-0.3l7.5-7.5c0.2-0.2,0.5-0.2,0.7,0l7.5,7.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l1.4-1.4c0.2-0.2,0.3-0.5,0.3-0.7 s-0.1-0.5-0.3-0.7L14.1,11.3z\"></path> </symbol><symbol viewBox=\"0 0 16 16\" width=\"100%\" height=\"100%\" id=\"zc__svg--close\"> <rect x=\"1.5\" y=\"7.4\" transform=\"matrix(0.7071 -0.7071 0.7071 0.7071 -3.3137 8)\" class=\"st0\" width=\"13\" height=\"1.1\"></rect> <rect x=\"1.5\" y=\"7.4\" transform=\"matrix(0.7071 0.7071 -0.7071 0.7071 8 -3.3137)\" class=\"st0\" width=\"13\" height=\"1.1\"></rect> </symbol><symbol viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\" id=\"zc__svg--decrement\"> <path class=\"cls-1\" d=\"M11.76,13L24,26.521,37.147,13,41,16.9,24,35,7,16.9Z\"></path> </symbol><symbol viewBox=\"0 0 16 16\" width=\"100%\" height=\"100%\" id=\"zc__svg--downarrow\"> <polygon points=\"3.5,6.5 4.5,5.5 8,9 11.5,5.5 12.5,6.5 8,11\"></polygon> </symbol><symbol viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\" id=\"zc__svg--error\"> <path d=\"M41.2,7.2C31.9-2.2,16.7-2.5,7.3,6.9c-9.5,9.3-9.7,24.5-0.4,33.9c9.3,9.5,24.5,9.7,33.9,0.4C50.3,31.9,50.4,16.8,41.2,7.2z M37.9,38.2C30,46,17.4,45.9,9.7,38S2.1,17.5,10,9.8S30.5,2.1,38.2,10C45.9,17.9,45.8,30.5,37.9,38.2z\"></path> <path d=\"M31.7,17.5l-1.1-1.1c-0.8-0.8-1.7-0.1-2,0.1L24,21l-4.6-4.7c-0.3-0.3-1.1-0.8-1.9,0l-1.1,1.1c-0.8,0.8-0.1,1.7,0.1,2L21,24l-4.7,4.6c-0.9,0.9-0.3,1.6-0.1,1.8l1.3,1.3c0.2,0.2,0.9,0.8,1.8-0.1L24,27l4.6,4.7c0.9,0.9,1.6,0.3,1.8,0.1l1.3-1.3c0.2-0.2,0.8-0.9-0.1-1.8L27,24l4.7-4.6C32,19.1,32.5,18.4,31.7,17.5z\"></path> </symbol><symbol viewBox=\"0 0 12 12\" id=\"zc__svg--fastbackward\" width=\"100%\" height=\"100%\"><polygon points=\"5.6,10.3 1.9,6.5 5.6,2.6 6.3,3.4 3.3,6.5 6.4,9.6\"></polygon><polygon points=\"9.6,10.3 5.9,6.5 9.6,2.6 10.3,3.4 7.3,6.5 10.4,9.6\"></polygon></symbol><symbol viewBox=\"1 0 12 12\" id=\"zc__svg--fastforward\" width=\"100%\" height=\"100%\"><polygon points=\"7.4,10.3 6.7,9.6 9.7,6.5 6.6,3.4 7.4,2.7 11.1,6.5\"></polygon><polygon points=\"3.4,10.3 2.7,9.6 5.7,6.5 2.6,3.4 3.4,2.7 7.1,6.5\"></polygon></symbol><symbol viewBox=\"1 0 12 12\" id=\"zc__svg--forward\" width=\"100%\" height=\"100%\"><polygon points=\"4.4,10.3 3.7,9.6 6.7,6.5 3.6,3.4 4.4,2.7 8.1,6.5\"></polygon></symbol><symbol viewBox=\"1 2 9 9\" width=\"100%\" height=\"100%\" id=\"zc__svg--horizontaldecrement\"> <polygon points=\"6.6,10.3 2.9,6.5 6.6,2.7 7.4,3.4 4.3,6.5 7.4,9.6\"></polygon> </symbol><symbol viewBox=\"1 2 9 9\" width=\"100%\" height=\"100%\" id=\"zc__svg--horizontalincrement\"> <polygon points=\"4.4,10.3 3.7,9.6 6.7,6.5 3.6,3.4 4.4,2.7 8.1,6.5\"></polygon> </symbol><symbol viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\" id=\"zc__svg--increment\"> <path class=\"cls-1\" d=\"M6,32l5,4L24,22,38,36l4-4L24,13Z\"></path> </symbol><symbol viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\" id=\"zc__svg--info\"> <g> <g> <path d=\"M23.9,17.4c1.5,0,2.5-1.1,2.4-2.3c0-1.3-0.9-2.4-2.3-2.4s-2.4,1.1-2.4,2.4C21.6,16.3,22.6,17.4,23.9,17.4z\"></path> <path d=\"M26.2,35.5V21.8c0-1.2-1.4-1.3-1.8-1.3h-0.7c0,0-1.7,0-1.7,1.1v14.3c0,0.3,0.2,0.9,1.3,0.9h1.6C25.3,36.7,26.2,36.5,26.2,35.5z\"></path> </g> <path d=\"M24,0C10.7,0,0,10.7,0,24s10.7,24,24,24s24-10.7,24-24S37.3,0,24,0z M24,44C13,44,4,35,4,24S13,4,24,4s20,9,20,20S35,44,24,44z\"></path> </g> </symbol><symbol viewBox=\"0 0 15 15\" width=\"100%\" height=\"100%\" id=\"zc__svg--search\"> <g id=\"Ellipse_50\" data-name=\"Ellipse 50\" fill=\"none\" stroke=\"gray\" stroke-width=\"1.5\"> <circle cx=\"6\" cy=\"6\" r=\"6\" stroke=\"none\"></circle> <circle cx=\"6\" cy=\"6\" r=\"5.25\" fill=\"none\"></circle> </g> <path id=\"Rectangle_270\" data-name=\"Rectangle 270\" d=\"M0,0H5A1,1,0,0,1,6,1V1A1,1,0,0,1,5,2H0A0,0,0,0,1,0,2V0A0,0,0,0,1,0,0Z\" transform=\"translate(10.757 9.343) rotate(45)\" fill=\"gray\"></path> </symbol><symbol viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\" id=\"zc__svg--success\"> <g> <path d=\"M41.2,7.2C31.9-2.3,16.7-2.5,7.3,6.8c-9.5,9.3-9.7,24.5-0.4,33.9c9.3,9.5,24.5,9.7,33.9,0.4C50.3,31.9,50.4,16.7,41.2,7.2z M37.9,38.2c-7.9,7.7-20.5,7.6-28.2-0.3S2.1,17.4,10,9.7S30.5,2.1,38.2,10C45.9,17.8,45.8,30.5,37.9,38.2z\"></path> <path d=\"M36,19.3L23.1,32.2c-1.1,1.1-2.9,1.1-4,0l-1-1l-4.5-4.6c-0.2-0.2-1-1.1-0.1-2l1.1-1.1c0.8-0.8,1.6-0.3,1.9,0l4.6,4.7l12-11.8c0.2-0.2,1.1-1,2-0.1l1.1,1.1C36.8,18.2,36.3,18.9,36,19.3z\"></path> </g> </symbol><symbol viewBox=\"-2 -2 20 20\" width=\"100%\" height=\"100%\" id=\"zc__svg--tick\"> <polygon points=\"14.6,2.4 4.9,12.1 1.2,8.5 0.4,9.3 4.9,13.8 15.4,3.2 \"></polygon> </symbol><symbol viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\" id=\"zc__svg--warning\"> <g> <path d=\"M47.3,36.6L27.7,2.5c-0.9-1.4-2.4-2.2-3.9-2.1c-1.6,0-2.9,0.9-3.7,2.2L0.7,36.5c-0.9,1.3-1,3-0.2,4.4c0.8,1.5,2.3,2.4,4,2.4h39c1.6,0,3.1-0.8,3.9-2.2C48.2,39.7,48.2,38,47.3,36.6z M43.9,39.2c-0.1,0.1-0.2,0.2-0.4,0.2h-39c-0.3,0-0.4-0.2-0.5-0.3c-0.1-0.2,0-0.3,0-0.4L23.5,4.6c0,0,0.1-0.2,0.3-0.2c0,0,0,0,0,0c0.1,0,0.3,0,0.4,0.2l19.6,34C44,38.8,44,39,43.9,39.2z\"></path> </g> <path d=\"M24.1,28.4L24.1,28.4c-0.8,0-1.3-0.4-1.4-1l-1-10c-0.1-1.1,1-2,2.4-2l0,0c1.4,0,2.5,0.9,2.4,2l-1,10C25.4,27.9,24.9,28.4,24.1,28.4z\"></path> <circle cx=\"24\" cy=\"33.4\" r=\"2\"></circle> </symbol>";else{var a=document.createElement("div");a.innerHTML="<svg><symbol id=\"zc__svg--backward\" viewBox=\"0 0 12 12\" width=\"100%\" height=\"100%\"><polygon points=\"6.6,10.3 2.9,6.5 6.6,2.7 7.4,3.4 4.3,6.5 7.4,9.6\"></polygon></symbol><symbol viewBox=\"0 0 14 14\" width=\"100%\" height=\"100%\" id=\"zc__svg--calendaricon\"> <rect x=\"-22.5\" y=\"3.5\" width=\"13\" height=\"10\"></rect> <path d=\"M-10,4v9h-12V4H-10 M-9,3h-14v11h14V3L-9,3z\"></path> <rect x=\"-20.6\" y=\"1.4\" width=\"1.2\" height=\"3.2\"></rect> <path d=\"M-19.8,1.8v2.5h-0.5V1.8H-19.8 M-19,1h-2v4h2V1L-19,1z\"></path> <rect x=\"-20.6\" y=\"7.4\" width=\"1.2\" height=\"1.2\"></rect> <path d=\"M-19.8,7.8v0.5h-0.5V7.8H-19.8 M-19,7h-2v2h2V7L-19,7z\"></path> <rect x=\"-16.6\" y=\"1.4\" width=\"1.2\" height=\"3.2\"></rect> <path d=\"M-15.8,1.8v2.5h-0.5V1.8H-15.8 M-15,1h-2v4h2V1L-15,1z\"></path> <rect x=\"-12.6\" y=\"1.4\" width=\"1.2\" height=\"3.2\"></rect> <path d=\"M-11.8,1.8v2.5h-0.5V1.8H-11.8 M-11,1h-2v4h2V1L-11,1z\"></path> <rect x=\"-16.6\" y=\"7.4\" width=\"1.2\" height=\"1.2\"></rect> <path d=\"M-15.8,7.8v0.5h-0.5V7.8H-15.8 M-15,7h-2v2h2V7L-15,7z\"></path> <rect x=\"-12.6\" y=\"7.4\" width=\"1.2\" height=\"1.2\"></rect> <path d=\"M-11.8,7.8v0.5h-0.5V7.8H-11.8 M-11,7h-2v2h2V7L-11,7z\"></path> <rect x=\"-20.6\" y=\"10.4\" width=\"1.2\" height=\"1.2\"></rect> <path d=\"M-19.8,10.8v0.5h-0.5v-0.5H-19.8 M-19,10h-2v2h2V10L-19,10z\"></path> <rect x=\"-16.6\" y=\"10.4\" width=\"1.2\" height=\"1.2\"></rect> <path d=\"M-15.8,10.8v0.5h-0.5v-0.5H-15.8 M-15,10h-2v2h2V10L-15,10z\"></path> <rect x=\"-12.6\" y=\"10.4\" width=\"1.2\" height=\"1.2\"></rect> <path d=\"M-11.8,10.8v0.5h-0.5v-0.5H-11.8 M-11,10h-2v2h2V10L-11,10z\"></path> <path d=\"M4,3c0.6,0,1-0.4,1-1V1H3v1C3,2.6,3.4,3,4,3z\"></path> <rect x=\"2\" y=\"7\" width=\"2\" height=\"2\"></rect> <rect x=\"2\" y=\"10\" width=\"2\" height=\"2\"></rect> <rect x=\"6\" y=\"7\" width=\"2\" height=\"2\"></rect> <rect x=\"6\" y=\"10\" width=\"2\" height=\"2\"></rect> <rect x=\"10\" y=\"7\" width=\"2\" height=\"2\"></rect> <rect x=\"10\" y=\"10\" width=\"2\" height=\"2\"></rect> <path d=\"M12.8,2c0,1-0.8,1.8-1.8,1.8S9.2,3,9.2,2H5.8C5.8,3,5,3.8,4,3.8S2.2,3,2.2,2H0v3v9h14V5V2H12.8z M13,13H1V6h12V13z\"></path> <path d=\"M11,3c0.6,0,1-0.4,1-1V1h-2v1C10,2.6,10.4,3,11,3z\"></path> </symbol><symbol viewBox=\"0 0 21.9 21.9\" width=\"100%\" height=\"100%\" id=\"zc__svg--clear\"> <path d=\"M14.1,11.3c-0.2-0.2-0.2-0.5,0-0.7l7.5-7.5c0.2-0.2,0.3-0.5,0.3-0.7s-0.1-0.5-0.3-0.7l-1.4-1.4C20,0.1,19.7,0,19.5,0 c-0.3,0-0.5,0.1-0.7,0.3l-7.5,7.5c-0.2,0.2-0.5,0.2-0.7,0L3.1,0.3C2.9,0.1,2.6,0,2.4,0S1.9,0.1,1.7,0.3L0.3,1.7C0.1,1.9,0,2.2,0,2.4 s0.1,0.5,0.3,0.7l7.5,7.5c0.2,0.2,0.2,0.5,0,0.7l-7.5,7.5C0.1,19,0,19.3,0,19.5s0.1,0.5,0.3,0.7l1.4,1.4c0.2,0.2,0.5,0.3,0.7,0.3 s0.5-0.1,0.7-0.3l7.5-7.5c0.2-0.2,0.5-0.2,0.7,0l7.5,7.5c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l1.4-1.4c0.2-0.2,0.3-0.5,0.3-0.7 s-0.1-0.5-0.3-0.7L14.1,11.3z\"></path> </symbol><symbol viewBox=\"0 0 16 16\" width=\"100%\" height=\"100%\" id=\"zc__svg--close\"> <rect x=\"1.5\" y=\"7.4\" transform=\"matrix(0.7071 -0.7071 0.7071 0.7071 -3.3137 8)\" class=\"st0\" width=\"13\" height=\"1.1\"></rect> <rect x=\"1.5\" y=\"7.4\" transform=\"matrix(0.7071 0.7071 -0.7071 0.7071 8 -3.3137)\" class=\"st0\" width=\"13\" height=\"1.1\"></rect> </symbol><symbol viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\" id=\"zc__svg--decrement\"> <path class=\"cls-1\" d=\"M11.76,13L24,26.521,37.147,13,41,16.9,24,35,7,16.9Z\"></path> </symbol><symbol viewBox=\"0 0 16 16\" width=\"100%\" height=\"100%\" id=\"zc__svg--downarrow\"> <polygon points=\"3.5,6.5 4.5,5.5 8,9 11.5,5.5 12.5,6.5 8,11\"></polygon> </symbol><symbol viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\" id=\"zc__svg--error\"> <path d=\"M41.2,7.2C31.9-2.2,16.7-2.5,7.3,6.9c-9.5,9.3-9.7,24.5-0.4,33.9c9.3,9.5,24.5,9.7,33.9,0.4C50.3,31.9,50.4,16.8,41.2,7.2z M37.9,38.2C30,46,17.4,45.9,9.7,38S2.1,17.5,10,9.8S30.5,2.1,38.2,10C45.9,17.9,45.8,30.5,37.9,38.2z\"></path> <path d=\"M31.7,17.5l-1.1-1.1c-0.8-0.8-1.7-0.1-2,0.1L24,21l-4.6-4.7c-0.3-0.3-1.1-0.8-1.9,0l-1.1,1.1c-0.8,0.8-0.1,1.7,0.1,2L21,24l-4.7,4.6c-0.9,0.9-0.3,1.6-0.1,1.8l1.3,1.3c0.2,0.2,0.9,0.8,1.8-0.1L24,27l4.6,4.7c0.9,0.9,1.6,0.3,1.8,0.1l1.3-1.3c0.2-0.2,0.8-0.9-0.1-1.8L27,24l4.7-4.6C32,19.1,32.5,18.4,31.7,17.5z\"></path> </symbol><symbol viewBox=\"0 0 12 12\" id=\"zc__svg--fastbackward\" width=\"100%\" height=\"100%\"><polygon points=\"5.6,10.3 1.9,6.5 5.6,2.6 6.3,3.4 3.3,6.5 6.4,9.6\"></polygon><polygon points=\"9.6,10.3 5.9,6.5 9.6,2.6 10.3,3.4 7.3,6.5 10.4,9.6\"></polygon></symbol><symbol viewBox=\"1 0 12 12\" id=\"zc__svg--fastforward\" width=\"100%\" height=\"100%\"><polygon points=\"7.4,10.3 6.7,9.6 9.7,6.5 6.6,3.4 7.4,2.7 11.1,6.5\"></polygon><polygon points=\"3.4,10.3 2.7,9.6 5.7,6.5 2.6,3.4 3.4,2.7 7.1,6.5\"></polygon></symbol><symbol viewBox=\"1 0 12 12\" id=\"zc__svg--forward\" width=\"100%\" height=\"100%\"><polygon points=\"4.4,10.3 3.7,9.6 6.7,6.5 3.6,3.4 4.4,2.7 8.1,6.5\"></polygon></symbol><symbol viewBox=\"1 2 9 9\" width=\"100%\" height=\"100%\" id=\"zc__svg--horizontaldecrement\"> <polygon points=\"6.6,10.3 2.9,6.5 6.6,2.7 7.4,3.4 4.3,6.5 7.4,9.6\"></polygon> </symbol><symbol viewBox=\"1 2 9 9\" width=\"100%\" height=\"100%\" id=\"zc__svg--horizontalincrement\"> <polygon points=\"4.4,10.3 3.7,9.6 6.7,6.5 3.6,3.4 4.4,2.7 8.1,6.5\"></polygon> </symbol><symbol viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\" id=\"zc__svg--increment\"> <path class=\"cls-1\" d=\"M6,32l5,4L24,22,38,36l4-4L24,13Z\"></path> </symbol><symbol viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\" id=\"zc__svg--info\"> <g> <g> <path d=\"M23.9,17.4c1.5,0,2.5-1.1,2.4-2.3c0-1.3-0.9-2.4-2.3-2.4s-2.4,1.1-2.4,2.4C21.6,16.3,22.6,17.4,23.9,17.4z\"></path> <path d=\"M26.2,35.5V21.8c0-1.2-1.4-1.3-1.8-1.3h-0.7c0,0-1.7,0-1.7,1.1v14.3c0,0.3,0.2,0.9,1.3,0.9h1.6C25.3,36.7,26.2,36.5,26.2,35.5z\"></path> </g> <path d=\"M24,0C10.7,0,0,10.7,0,24s10.7,24,24,24s24-10.7,24-24S37.3,0,24,0z M24,44C13,44,4,35,4,24S13,4,24,4s20,9,20,20S35,44,24,44z\"></path> </g> </symbol><symbol viewBox=\"0 0 15 15\" width=\"100%\" height=\"100%\" id=\"zc__svg--search\"> <g id=\"Ellipse_50\" data-name=\"Ellipse 50\" fill=\"none\" stroke=\"gray\" stroke-width=\"1.5\"> <circle cx=\"6\" cy=\"6\" r=\"6\" stroke=\"none\"></circle> <circle cx=\"6\" cy=\"6\" r=\"5.25\" fill=\"none\"></circle> </g> <path id=\"Rectangle_270\" data-name=\"Rectangle 270\" d=\"M0,0H5A1,1,0,0,1,6,1V1A1,1,0,0,1,5,2H0A0,0,0,0,1,0,2V0A0,0,0,0,1,0,0Z\" transform=\"translate(10.757 9.343) rotate(45)\" fill=\"gray\"></path> </symbol><symbol viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\" id=\"zc__svg--success\"> <g> <path d=\"M41.2,7.2C31.9-2.3,16.7-2.5,7.3,6.8c-9.5,9.3-9.7,24.5-0.4,33.9c9.3,9.5,24.5,9.7,33.9,0.4C50.3,31.9,50.4,16.7,41.2,7.2z M37.9,38.2c-7.9,7.7-20.5,7.6-28.2-0.3S2.1,17.4,10,9.7S30.5,2.1,38.2,10C45.9,17.8,45.8,30.5,37.9,38.2z\"></path> <path d=\"M36,19.3L23.1,32.2c-1.1,1.1-2.9,1.1-4,0l-1-1l-4.5-4.6c-0.2-0.2-1-1.1-0.1-2l1.1-1.1c0.8-0.8,1.6-0.3,1.9,0l4.6,4.7l12-11.8c0.2-0.2,1.1-1,2-0.1l1.1,1.1C36.8,18.2,36.3,18.9,36,19.3z\"></path> </g> </symbol><symbol viewBox=\"-2 -2 20 20\" width=\"100%\" height=\"100%\" id=\"zc__svg--tick\"> <polygon points=\"14.6,2.4 4.9,12.1 1.2,8.5 0.4,9.3 4.9,13.8 15.4,3.2 \"></polygon> </symbol><symbol viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\" id=\"zc__svg--warning\"> <g> <path d=\"M47.3,36.6L27.7,2.5c-0.9-1.4-2.4-2.2-3.9-2.1c-1.6,0-2.9,0.9-3.7,2.2L0.7,36.5c-0.9,1.3-1,3-0.2,4.4c0.8,1.5,2.3,2.4,4,2.4h39c1.6,0,3.1-0.8,3.9-2.2C48.2,39.7,48.2,38,47.3,36.6z M43.9,39.2c-0.1,0.1-0.2,0.2-0.4,0.2h-39c-0.3,0-0.4-0.2-0.5-0.3c-0.1-0.2,0-0.3,0-0.4L23.5,4.6c0,0,0.1-0.2,0.3-0.2c0,0,0,0,0,0c0.1,0,0.3,0,0.4,0.2l19.6,34C44,38.8,44,39,43.9,39.2z\"></path> </g> <path d=\"M24.1,28.4L24.1,28.4c-0.8,0-1.3-0.4-1.4-1l-1-10c-0.1-1.1,1-2,2.4-2l0,0c1.4,0,2.5,0.9,2.4,2l-1,10C25.4,27.9,24.9,28.4,24.1,28.4z\"></path> <circle cx=\"24\" cy=\"33.4\" r=\"2\"></circle> </symbol></svg>";for(var o=a.childNodes[0].childNodes;o[0];)e.appendChild(o[0])}document.body.appendChild(e)},"complete"===document.readyState?e.loadSVGIcons():document.addEventListener("DOMContentLoaded",e.loadSVGIcons)}(ZComponents),function(e){var t=e.Templates.Utilities;t.icon=function(e){return ZT.html(tO(),e.iconClassName,ZT.customHTML(e.SVGIconId?"<svg class='".concat(e.SVGIconClassName,"' focusable=false > <use xlink:href='").concat(e.SVGIconId,"'></use></svg> </svg>"):""))},t.commandBar=function(e){return ZT.html(tO2(),e.colClass?e.colClass:"",e.cols&&e.cols.length?e.cols.map(function(e){return ZT.html(tO3(),t.commandBarCol(e))}):t.commandBarCol(e))},t.commandBarCol=function(e){return ZT.html(tO4(),e.left&&e.left.length?ZT.html(tO5(),e.leftClass||"zdatetimepicker__commandbaractionsleft",e.left.map(function(e){return t.button(e)})):"",e.center&&e.center.length?ZT.html(tO6(),e.centerClass||"zdatetimepicker__commandbaractionscenter",e.center.map(function(e){return t.button(e)})):"",e.right&&e.right.length?ZT.html(tO7(),e.rightClass||"zdatetimepicker__commandbaractionsright",e.right.map(function(e){return t.button(e)})):"")},t.button=function(t){return ZT.html(tO8(),t.isLink?ZT.html(tO9(),t.className,t.tabindex,t.text,t.text):t.initBtnComp?e.createButton(t):e.zbutton.Templates.container(t))}}(ZComponents),function(e){var t=e.DOMUtil,a=[],o=[],l=function(e){return o[a.indexOf(e)]},i=function t(a,o){var n=l(o);if(!n||!document.documentElement.contains(o))return e.unBindDocumentEvents(o),!1;if(a.closest(n.container.add(n.forElement)).length)return!1;for(var s=n.componentsInContext,r=0;r<s.length;r++)if(!t(a,s[r]))return!1;return!0},n=".zclosehandler",s=e.$window;e.bindDocumentEvents=function(r){var d=n+"-"+Math.floor(1e6*Math.random()),c=r.ctype,_=t(r.element),u=r.container&&t(r.container)||_,p=t(r.forElement),m=r.closeMethodName,h=r.isCE||_.data(c).isCE,g=h?"z":c,v=g+(r.closeEvent||m)+n,y=l(_[0]);if(!(y&&p.is(y.forElement))){e.unBindDocumentEvents(_),a.forEach(function(e){var t=l(e),a=t.componentsInContext.indexOf(_[0]);p.closest(t.container).length?0>a&&t.componentsInContext.push(_[0]):-1<a&&t.componentsInContext.splice(a,1)}),a.push(_[0]);var f={_eventSuffix:d,forElement:p,container:u,ctype:c,closeFn:m,componentsInContext:[]};o.push(f),_.on(v+" "+(g+"beforedestroy"+n),function(){e.unBindDocumentEvents(_)}),f.timer=setTimeout(function(){function a(e){o=i(t(e.target),_[0])}var o;s[0].addEventListener("mousedown",a,!0),s[0].addEventListener("contextmenu",a,!0),f.mousedownHandler=a,s.on("mousedown"+d+" contextmenu"+d,function(a){if(o){var i=t.Event("zclosehandlerbeforehide",{originalEvent:a});_.trigger(i),i.isDefaultPrevented()||e.unBindDocumentEvents(_,!0,a)}})},10)}},e.unBindDocumentEvents=function(r,d,c){var _=a.indexOf(r[0]);if(-1!==_){var u=o[_];clearTimeout(u.timer),r.off(n),s[0].removeEventListener("mousedown",u.mousedownHandler,!0),s[0].removeEventListener("contextmenu",u.mousedownHandler,!0),s.off(u._eventSuffix),a.splice(_,1),o.splice(_,1);for(var p=u.componentsInContext,m=0;m<p.length;m++)e.unBindDocumentEvents(t(p[m]),!0,c);if(a.forEach(function(e){var t=l(e);if(t.componentsInContext.length){var a=t.componentsInContext,o=a.indexOf(r[0]);-1<o&&a.splice(o,1)}}),d){var h=e[u.ctype.replace("z","")](r);h[u.closeFn](c)}}}}(ZComponents),function(e){e.animationHandler=function(t){var a=t.action,o=t.element,i=t.callback,l=t.animation||t["default"],n={slide:{show:"slideDown",open:"slideDown",close:"slideUp",hide:"slideUp"},fade:{show:"fadeIn",open:"fadeIn",close:"fadeOut",hide:"fadeOut"}},s="string"==typeof l,r,d;if(l&&("object"===_typeof(l)||s)){s&&(l={name:l});var c=l[a];if(d=c&&c.duration?c.duration:l.duration,c&&(l=c),"string"==typeof l||l.name?(r=l.name||l,n[r]&&(r=n[r][a])):r=l.className,o.finish?o.finish():o.stop(!0,!0),r)return void("object"===_typeof(r)?o.animate(r,d,i):/^(fadeIn|fadeOut|slideDown|slideUp)$/.test(r)?o[r](d,i):o.removeClass(o.data("zanimationclass")).data("zanimationclass",r).addClass(r).off(e._animationEnd).on(e._animationEnd,function(){i&&i(),o.off(e._animationEnd)}))}i&&i()},e.clearAnimationData=function(t){t.removeClass(t.data("zanimationclass")),t.removeData("zanimationclass"),t.off(e._animationEnd)}}(ZComponents),ZComponents.Position=function(e){function t(){}var a=e.DOMUtil,o=e.$window;e.getScrollWidth=function(){if(!e.scrollBarWidth){var t=document.createElement("div");t.setAttribute("style","width:100px;height:100px;overflow:scroll;");var a=document.querySelector("body");a.appendChild(t),e.scrollBarWidth=t.offsetWidth-t.scrollWidth,a.removeChild(t)}return e.scrollBarWidth},t.resetWinDim=function(){t.winDim=void 0},t.setWinDim=function(){t.winDim={scrollLeft:o.scrollLeft(),scrollTop:o.scrollTop(),height:document.documentElement.clientHeight,width:document.documentElement.clientWidth,docWidth:document.documentElement.scrollWidth,docHeight:document.documentElement.scrollHeight}},t.getWinDim=function(){return t.winDim||t.setWinDim(),t.winDim},t.DEFAULTS={direction:"bottom-left",resetPosition:!0,showWithinTarget:!1,within:o,computeElementDim:!0,computeTargetDim:!0,computeWithinDim:!0,arrow:{minSpace:0,margin:{left:0,top:0},callback:void 0},callbacks:{beforeComputingDir:{dimensionModifier:a.noop,directionModifier:a.noop},beforeComputingPos:{dimensionModifier:a.noop,directionModifier:a.noop}},withinPadding:8,customDimensions:!1,positionAlterable:"flipallfit"},t.calloutPositions={"top-right":"bottom-right","top-left":"bottom-left","bottom-right":"top-right","bottom-left":"top-left",top:"bottom",bottom:"top",left:"right",right:"left","left-top":"right-bottom","left-bottom":"right-top","right-top":"left-bottom","right-bottom":"left-top"},t.regex={relDirections:/^(top|top-right|top-left|bottom|bottom-right|bottom-left|left|left-top|left-bottom|right|right-top|right-bottom|top-left-corner|top-right-corner|bottom-left-corner|bottom-right-corner)$/,withinDirections:/^(top|bottom|left|right|top-left|top-right|bottom-left|bottom-right|center)$/,fit:/^(fit|flipfit|flipallfit|flipsidefit|flipsideallfit|true)$/,flip:/^(flip|flipfit|flipall|flipallfit|flipside|flipsidefit|flipsideall|flipsideallfit|true)$/,flipside:/^(flipside|flipsidefit|flipsideall|flipsideallfit|flipsideonlyfit|true)$/,flipall:/^(flipall|flipallfit|flipsideall|flipsideallfit|true)$/},t.prototype={_getCorrectionOffset:function(e){if(!this.correctionOffset&&(this.correctionOffset={left:0,top:0},/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))){var t=a("body"),o=a("<span>").css({position:"absolute",height:"20px",width:"20px",top:"0px",left:"0px"}).appendTo(t);this.correctionOffset=this._calcOffset(o,e),this.correctionOffset.left=this.correctionOffset.left-parseFloat(t.css("margin-left"))-parseFloat(t.css("border-left-width")),this.correctionOffset.top=this.correctionOffset.top-parseFloat(t.css("margin-top"))-parseFloat(t.css("border-top-width")),o.remove()}return this.correctionOffset},_getDimensions:function(e){if(e.preventDefault)return{width:0,height:0,isEvent:!0,offset:{left:e.pageX,top:e.pageY}};if(e=a(e),9===e[0].nodeType)return{width:e.width(),height:e.height(),offset:{left:0,top:0}};if(e[0]===window)return{width:e.width(),height:e.height(),offset:{left:e.scrollLeft(),top:e.scrollTop()}};var t={width:this._getDimension(e[0],"outerWidth"),height:this._getDimension(e[0],"outerHeight"),offset:this._getOffset(e)};return t},_getOffset:function(t){var a=e.Browser.isSafari&&t[0]instanceof SVGElement,o=this._calcOffset(t,a),i=this._getCorrectionOffset(a);return o.left-=i.left,o.top-=i.top,o},_calcOffset:function(e,t){if(t){var a=e[0].getBoundingClientRect();return{top:a.top+window.pageYOffset,left:a.left+window.pageXOffset}}return e.offset()},_fixDirection:function(e){var a=e.split("-"),o,i,l,n;return(/^(top|bottom)$/.test(a[0])||/^corner$/.test(a[2]))&&(this.callout&&this.callout.callback.call(this,this.callout.element,t.calloutPositions[a[0]]),o=this.floatingElemDim.width+(this.callout?this.callout.width?this.callout.width:this.callout.element.outerWidth():0),i=this.floatingElemDim.height+(this.callout?this.callout.height?this.callout.height:this.callout.element.outerHeight():0),l=this._flip.top.call(this,e,i),e=l.direction,0<l.overTop&&t.regex.flipall.test(this.options.positionAlterable)&&(n=this._flip.left.call(this,"right",o),0>=n.overLeft&&(e=n.direction))),a=e.split("-"),(/^(left|right)$/.test(a[0])||/^corner$/.test(a[2]))&&(this.callout&&this.callout.callback.call(this,this.callout.element,t.calloutPositions[a[0]]),o=this.floatingElemDim.width+(this.callout?this.callout.width?this.callout.width:this.callout.element.outerWidth():0),i=this.floatingElemDim.height+(this.callout?this.callout.height?this.callout.height:this.callout.element.outerHeight():0),l=this._flip.left.call(this,e,o),e=l.direction,0<l.overLeft&&t.regex.flipall.test(this.options.positionAlterable)&&(n=this._flip.top.call(this,"bottom",i),e=n.direction)),e},_fixAlternateDirection:function(e){var t=e.split("-"),a=0,o=0,i,l;return this.targetDim.isEvent&&this.callout&&(a=2*this.callout.width+this.callout.width/2,o=2*this.callout.height+this.callout.height/2),/^(left|right)$/.test(t[1])?(l="left"===t[1]?"right":"left",i=this._flip.left.call(this,l,this.floatingElemDim.width-("corner"===t[0]?0:this.targetDim.width)-o),e=e.replace(t[1],"left"===i.direction?"right":"left")):/^(top|bottom)$/.test(t[1])&&(i=this._flip.top.call(this,t[1],this.floatingElemDim.height-this.targetDim.height-a),e=e.replace(t[1],i.direction)),e},_initCallout:function(e){if(this.options.arrow&&this.options.arrow.element){var o={},i=this.options.arrow.element;if(("string"==typeof i||i instanceof a||i.nodeType)&&(i=a(i),i.length&&(o.element=i)),o.element&&"static"!==o.element.css("position"))return o.centeredToTarget=/^(center|undefined)$/.test(this.options.arrow.direction)&&!this.targetDim.isEvent,o.callback="function"==typeof this.options.arrow.callback?this.options.arrow.callback:"function"==typeof this.options.arrowCallback?this.options.arrowCallback:a.noop,o.direction=t.calloutPositions[e],o.callback.call(this,o.element,o.direction.split("-")[0]),o.height="number"==typeof this.options.arrow.height?this.options.arrow.height:0,o.width="number"==typeof this.options.arrow.height?this.options.arrow.width:0,o.minSpace=this.options.arrow.minSpace,o.margin=this.options.arrow.margin||{left:0,top:0},o;this.options.arrow=void 0}},_getElementHeight:function(){var e=this.options.direction;return this.floatingElemDim.height>this._getAvailableHeight(e)?this._getAvailableHeight(e):this.floatingElemDim.height},_getElementWidth:function(){var e=this.options.direction;return this.floatingElemDim.width>this._getAvailableWidth(e)?this._getAvailableWidth(e):this.floatingElemDim.width},_fitCalloutPosition:function(e,t){var a=e.direction.split("-"),o=a[1],i=0,l=this._getElementWidth(),n=this._getElementHeight(),s;/^(left|right)$/.test(a[1])?s=l-e.width:/^(top|bottom)$/.test(a[1])?s=n-e.height:/^(top|bottom)$/.test(a[0])?(s=l-e.width,o="left"):/^(left|right)$/.test(a[0])&&(s=n-e.height,o="top"),t[o]>s&&(t[o]=s),t[o]<i&&(t[o]=i)},_getCalloutPosition:function(e,t){var a={},o=e.direction.split("-"),i;/^(top|bottom)$/.test(o[0])?(a[o[0]]=-e.height,!o[1]&&(a.left=this.floatingElemDim.width/2-e.width/2-t.left)):/^(left|right)$/.test(o[0])&&(a[o[0]]=-e.width,!o[1]&&(a.top=this.floatingElemDim.height/2-e.height/2-t.top)),/^(left|right)$/.test(o[1])?(i=t.left,"left"===o[1]?(i=-i,a.right="auto"):a.left="auto",this.targetDim.width&&this.floatingElemDim.width>this.targetDim.width?a[o[1]]=this.targetDim.width/2-e.width/2+i:a.left=this.floatingElemDim.width/2-e.width/2):/^(top|bottom)$/.test(o[1])&&(i=t.top,"top"===o[1]?(i=-i,a.bottom="auto"):a.top="auto",this.targetDim.height&&this.floatingElemDim.height>this.targetDim.height?a[o[1]]=this.targetDim.height/2-e.height/2+i:a.top=this.floatingElemDim.height/2-e.height/2);var l="none"!==this.floatingElement.css("box-shadow");return"top"===o[0]?a.top+=parseFloat(this.floatingElement.css("border-top-width"))||l?1:0:"bottom"===o[0]?a.bottom+=parseFloat(this.floatingElement.css("border-bottom-width"))||l?1:0:"right"===o[0]?a.right+=parseFloat(this.floatingElement.css("border-right-width"))||l?1:0:"left"===o[0]&&(a.left+=parseFloat(this.floatingElement.css("border-left-width"))||l?1:0),/^(bottom|top)/.test(e.direction)?a.top=a.bottom="":a.left=a.right="",a},_flip:{top:function(e,t){var a=e.split("-")[0],o={direction:e},i=this._getAvailableHeight(e);if(o.overTop=t-i,0<o.overTop){var l="top"===a?"bottom":"top",n=this._getAvailableHeight(e.replace(a,l));n>i&&(o.direction=e.replace(a,l),o.overTop=t-n)}return o},left:function(e,t){var a=e.split("-"),o={direction:e},i=this._getAvailableWidth(e),l,n;if(o.overLeft=t-i,0<o.overLeft){l=a[0],"corner"===a[2]&&(l=a[1]),n="left"===l?"right":"left";var s=this._getAvailableWidth(e.replace(l,n));s>i&&(o.direction=e.replace(l,n),o.overLeft=t-s)}return o}},_fitPosition:function(e,t){var o=a.extend({},e),i=t.split("-");if(i[1]=void 0===i[1]?/^(top|bottom)$/.test(i[0])?"left":"top":i[1],/^(top|bottom)$/.test(i[1])||this.targetDim.isEvent){var l=this.within.scrollTop-o.top;0<l&&(o.top+=l);var n=o.top+this.floatingElemDim.height-(this.within.scrollTop+this._getAvailableHeight().complete);0<n&&(o.top-=n)}if(/^(left|right)$/.test(i[1])||this.targetDim.isEvent){var s=this.within.scrollLeft-o.left;0<s&&(o.left+=s);var r=o.left+this.floatingElemDim.width-(this.within.scrollLeft+this._getAvailableWidth().complete)+1;0<r&&(o.left-=r)}return o},_calculatePosition:function(e){var o,i,l;if(e&&(l=!0,this.options.direction=e),this.options.callbacks.beforeComputingDir.dimensionModifier(this.targetDim,this.floatingElemDim,this.within,this.options),/corner/.test(this.options.direction)||(this.callout=this._initCallout(this.options.direction)),t.regex.flip.test(this.options.positionAlterable)&&!l&&(this.options.direction=this._fixDirection(this.options.direction)),this.callout&&(this.callout.direction=t.calloutPositions[this.options.direction],this.callout.callback.call(this,this.callout.element,this.callout.direction.split("-")[0]),!this.callout.height&&(this.callout.height=this.callout.element.outerHeight()),!this.callout.width&&(this.callout.width=this.callout.element.outerWidth())),t.regex.flipside.test(this.options.positionAlterable)&&(this.options.direction=this._fixAlternateDirection(this.options.direction)),this.options.callbacks.beforeComputingPos.dimensionModifier(this.targetDim,this.floatingElemDim,this.within,this.options),i=this._fixPosition(this.options.direction),o=a.extend({},i),t.regex.fit.test(this.options.positionAlterable)&&(o=this._fitPosition(i,this.options.direction)),o.top<this.within.scrollTop&&(o.top=this.within.scrollTop),o.left<this.within.scrollLeft&&(o.left=this.within.scrollLeft),this.callout&&t.regex.flipall.test(this.options.positionAlterable)&&!l&&!this.targetDim.isEvent&&void 0!==this.callout.minSpace){var n=this.options.direction.split("-"),s=this._getElementWidth(),r=this._getElementHeight(),d,c,_,u,p;if(d=this.targetDim.offset.left-s+this.callout.width,c=this.targetDim.offset.top-r+this.callout.height,_=this.targetDim.offset.left+this.targetDim.width-this.callout.width,u=this.targetDim.offset.top+this.targetDim.height-this.callout.height,/^(top|bottom)$/.test(n[0])?(o.left<d&&(p="left"),o.left>_&&(p="right")):/^(left|right)$/.test(n[0])&&(o.top<c&&(p="top"),o.top>u&&(p="bottom")),p)return this._calculatePosition(p)}var m={left:o.left-this.finalCorrectionOffset.left,top:o.top-this.finalCorrectionOffset.top};if(this.callout){this.callout.direction=t.calloutPositions[this.options.direction];var h={left:o.left-i.left,top:o.top-i.top};this.callout.position=this._getCalloutPosition(this.callout,h),this._fitCalloutPosition(this.callout,this.callout.position)}return m},_getAvailableHeight:function(e){if(!this.availableHeight)if(this.within.isWindow||this.within.isDocument)this.availableHeight={top:this.targetDim.offset.top-this.within.scrollTop,bottom:this.within.height-(this.targetDim.offset.top+this.targetDim.height-this.within.scrollTop),complete:this.within.height};else{this.availableHeight={},this.availableHeight.top=this.within.offset.top<this.win.scrollTop?this.targetDim.offset.top-this.win.scrollTop:this.targetDim.offset.top-this.within.scrollTop,this.availableHeight.bottom=this.within.offset.top+this.within.height-(this.targetDim.offset.top+this.targetDim.height);var t=this.win.height+this.win.scrollTop-(this.within.offset.top+this.within.height);0>t&&(this.availableHeight.bottom+=t),this.availableHeight.complete=this.availableHeight.top+this.availableHeight.bottom+this.targetDim.height}return e?(e=e.split("-")[0],"top"===e)?this.availableHeight.top:"bottom"===e?this.availableHeight.bottom:this.availableHeight.complete:this.availableHeight},_getAvailableWidth:function(e){if(!this.availableWidth)if(this.within.isWindow||this.within.isDocument)this.availableWidth={left:this.targetDim.offset.left-this.within.scrollLeft,right:this.within.width-(this.targetDim.offset.left+this.targetDim.width-this.within.scrollLeft),complete:this.within.width};else{this.availableWidth={},this.availableWidth.left=this.within.offset.left<this.win.scrollLeft?this.targetDim.offset.left-this.win.scrollLeft:this.targetDim.offset.left-this.within.scrollLeft,this.availableWidth.right=this.within.offset.left+this.within.width-(this.targetDim.offset.left+this.targetDim.width);var t=this.win.width+this.win.scrollLeft-(this.within.offset.left+this.within.width);0>t&&(this.availableWidth.right+=t),this.availableWidth.complete=this.availableWidth.left+this.availableWidth.right+this.targetDim.width}if(!e)return this.availableWidth;var a=e.split("-"),o="corner"===a[2]?a[1]:a[0];return"left"===o?this.availableWidth.left:"right"===o?this.availableWidth.right:this.availableWidth.complete},_fixPosition:function(e){var t=e.split("-"),o=a.extend({},this.targetDim.offset);return"top"===t[0]?o.top-=this.floatingElemDim.height+(this.callout?this.callout.height:0):"bottom"===t[0]?o.top+=this.targetDim.height+(this.callout?this.callout.height:0):"left"===t[0]?o.left-=this.floatingElemDim.width+(this.callout?this.callout.width:0):"right"===t[0]&&(o.left+=this.targetDim.width+(this.callout?this.callout.width:0)),void 0===t[1]?t[0].match(/^left|right$/)?o.top=o.top-this.floatingElemDim.height/2+this.targetDim.height/2:o.left=o.left-this.floatingElemDim.width/2+this.targetDim.width/2:"top"===t[1]?o.top=o.top+this.targetDim.height-this.floatingElemDim.height:"right"===t[1]?o.left=o.left-this.floatingElemDim.width+("corner"===t[2]?0:this.targetDim.width):"left"===t[1]&&"corner"===t[2]&&(o.left+=this.targetDim.width),o},_showHiddenParent:function(e){if(e=a(e),e.is(":hidden"))for(var t=1,o=e;t&&o&&!o.is("body");)"none"===o.css("display")&&(this.hiddenParents.push(o),this.prevStylesOfHiddenParents.push(o.attr("style")||""),o.css({display:"block",position:"absolute",opacity:1,visibility:"hidden"}),t=o.is(":hidden")),o=o.parent()},_resetParent:function(){this.hiddenParents&&this.hiddenParents.length&&(this.hiddenParents.forEach(function(e,t){e.attr("style",this.prevStylesOfHiddenParents[t])}),this.hiddenParents=[],this.prevStylesOfHiddenParents=[])},_getCorrection:function(e){var t=e.css("position"),o=e.parent()[0],i=a("<span>").css({position:t,height:"20px",width:"20px",top:"0px",left:"0px",transform:"none",margin:"0px",display:"",visibility:"hidden"});o.appendChild(i[0]);var l=i.offset();return o.removeChild(i[0]),l},_appendScrollBar:function(){var e=document.createElement("div");e.setAttribute("style","width:100px;height:100px;overflow:scroll;");var t=document.querySelector("body");return t.appendChild(e),e.style.cssText="width:100px;height:100px;overflow:scroll;",e},_getWithinDimensions:function(t){t=t.length?t:o;var a=t[0]===window,i=!!t[0]&&9===t[0].nodeType,l=a||i?{left:0,top:0}:this._getOffset(t)||{left:0,top:0},n=a||i?this.win.scrollLeft:l.left<this.win.scrollLeft?this.win.scrollLeft:l.left,s=a||i?this.win.scrollTop:l.top<this.win.scrollTop?this.win.scrollTop:l.top,r,d,c;if(a?(r=this.win.width,d=this.win.height):i?(r=this.win.docWidth,d=this.win.docHeight):(r=t.outerWidth(),d=t.outerHeight(),c=t),c){var _=c.css("overflow-x"),u=c.css("overflow-y"),p="scroll"===_||("auto"===_||c.is("body")&&"visible"===_)&&r<c[0].scrollWidth,m="scroll"===u||("auto"===u||c.is("body")&&"visible"===u)&&d<c[0].scrollHeight,h;m&&(r-=h=e.getScrollWidth()),p&&(d-=void 0===h?e.getScrollWidth():h)}return{element:t,isWindow:a,isDocument:i,offset:l,scrollLeft:n,scrollTop:s,width:r,height:d}},_getDimension:function(e,t){var o=window.getComputedStyle(e).transform,i,l;if(e instanceof SVGElement&&(l=!0),l||!o||"none"===o){var n=e.getBoundingClientRect();n&&("outerWidth"===t?i=n.width:"outerHeight"===t?i=n.height:void 0)}return(isNaN(i)||!i)&&(i=a(e)[t]()),i},_getPosition:function(o,i,l){l=this.options=a.extend(!0,{},t.DEFAULTS,l);var n=l.direction;t.regex.relDirections.test(l.direction)||(l.direction="bottom-left");var s=l.direction;l.direction=e.getRTLBasedDir(l.direction,l.rtl);var r={prevDirection:n,elementPosition:{left:0,right:0},actualDirection:l.direction,direction:s,arrowPosition:{left:0,right:0}};if(!this._isInDOM(i))return r;if(!l.customDimensions&&!o.preventDefault&&!this._isInDOM(o))return r;this.floatingElement=a(i),l.considerHiddenElements&&(this.hiddenparents=[],this.prevStylesOfHiddenParents=[],!o.preventDefault&&this._showHiddenParent(a(o)),this._showHiddenParent(this.floatingElement));var d=this.floatingElement.attr("style");l.resetPosition&&this.floatingElement.css({top:"-99999px",left:"-99999px",overflow:"hidden"}),this.floatingElemDim=l.computeElementDim?this._getDimensions(this.floatingElement):{};var c=t.getWinDim();this.win={scrollLeft:c.scrollLeft+l.withinPadding,scrollTop:c.scrollTop+l.withinPadding,height:c.height-2*l.withinPadding,width:c.width-2*l.withinPadding},this.targetDim=l.customDimensions?o:l.computeTargetDim?this._getDimensions(o):{},this.within=l.computeWithinDim?this._getWithinDimensions(a(l.within)):{},this.finalCorrectionOffset=this._getCorrection(this.floatingElement),l.resetPosition&&this.floatingElement.attr("style",d);var _=this._calculatePosition();l.considerHiddenElements&&this._resetParent(),r.elementPosition=_||r.elementPosition,r.arrowPosition=this.callout?this.callout.position:r.arrowPosition,r.arrowDirection=t.calloutPositions[l.direction]&&t.calloutPositions[l.direction].split("-")[0],r.actualDirection=l.direction,r.direction=e.getRTLBasedDir(l.direction,l.rtl);var u=l.direction.split("-");return /^(top|bottom)$/.test(u[0])?(r.availableHeight=this._getAvailableHeight(u[0])-(this.callout?this.callout.height:0),r.availableWidth=this._getAvailableWidth(u[0])):/^(left|right)$/.test(u[0])&&(r.availableHeight=this._getAvailableHeight(u[0]),r.availableWidth=this._getAvailableWidth(u[0])-(this.callout?this.callout.width:0)),r},_isInDOM:function(e){return e&&1===e.nodeType&&document.body.contains(e)}},e.debounce=function(e,t,a){var o;return function(){var i=this,l=arguments,n=a&&!o;clearTimeout(o),o=setTimeout(function(){o=null,a||e.apply(i,l)},t),n&&e.apply(i,l)}};var i=e.debounce(t.resetWinDim,250);return window.addEventListener("resize",i),window.addEventListener("scroll",i),{get:function(e,o,i){if(e&&a(o).length){e instanceof a&&(e=e[0]),o instanceof a&&(o=o[0]),i=i||{};var l=new t,n=l._getPosition(e,o,i);return l.options=void 0,n}}}}(ZComponents),function(e,t){var a=Math.ceil,o=Math.abs,i=Math.floor,l=Math.min,n=Math.max,s=Math.round;window.ZAlertBanner=e.AlertBanner={show:function(a){"string"==typeof a&&(a={message:a}),a.createdByShowMethod=!0;var o=e.createAlertBanner(a);a.isCE?o[0].show():e.alertbanner(o).show();var i=t(o).attr("id"),l=i?i+"-banner":e.getID("zalertbanner",o);return t(o).attr("id",l),l},hide:function(a,o){t(a).toArray().forEach(function(t){"Z-ALERTBANNER"===t.tagName?t[0].hide(o):e.alertbanner(t).hide(o)})}};var r=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(){clearTimeout(this._autoHideTimer);var t=e.Browser.getIEVersion(),a=this.element[0].childNodes;this.isCE&&!this._opts.message&&a.length&&(this._data.messageDOM=_toConsumableArray(a)),this._data.isIE=-1!==t&&10>t,this._validate()}},{key:"_validate",value:function(){var t=this._opts,a=this._data,o=t.margin||{},i="_getIcon",l=t.type,n=t.hideDelay,s=t.closeButton;t.hideOnClick=!s&&t.hideOnClick,t.hideDelay=this._hideDelay=parseInt(/(undefined|null)/.test(n)?s?0:5e3:n);var r="inline"===t.display?0:10;if(("number"==typeof o||"string"==typeof o)&&(r=parseInt(o),r=Number.isNaN(o)?0:o,o={}),["left","right","top","bottom"].forEach(function(e){/(undefined|null)/.test(o[e])&&(o[e]=r)}),t.margin=o,a.closeButton=!1,s&&(a.closeButton=e._getIconInfo(t.closeIconClass||t.closeIconClassName,t.closeSVGIconId,"zc__svg--close zalertbanner__svg","zalertbanner__icon"),a.closeText=this._getI18NText("close")),a.icon=t.icon,a.type=l,a.IconClassName=a.IconClass=a.SVGIconId=a.SVGIconClassName=null,t.icon){"custom"===l&&(i="_customIcon");var d=this[i](t,l);e._getIconInfo(d.iconClass,d.SVGIconId,"zc__svg--"+l+" zalertbanner__svg"," zalertbanner__icon",a)}var c=t.message;c&&(c=t.isMessageHTMLEncoded?c:e.encodeHTML(c),a.messageDOM=""),!c&&a.messageDOM&&(c=null),a.message=c}},{key:"_postRender",value:function(){this.container.attr("role","status").hide(),this._opts.createdByShowMethod&&this._handleOpen()}},{key:"_postEachRender",value:function(){var e=this,t=this._opts,a="click."+this.name;t.closeButton&&this.container.find(".zalertbanner__close").off(a).on(a,function(t){return e.hide(!1,t)}),this._data.className="zalertbanner "+("custom"===t.type?"":"zalertbanner--"+t.type)+" "+(t.className||t.zclassName||"")+" "+(t.rtl?"zh-rtl":"")}},{key:"_setStyles",value:function(){var e=this.container[0].style,t=this._opts.width;"none"!==t&&(this.container.css({width:"",display:""}),t?e.width=t:"inline"===this._opts.display&&(e.width=this.container.outerWidth()+1+"px")),"inline"!==this._opts.display&&(e.position=(this._target||this.container.parent()).is("body")?"fixed":"absolute")}},{key:"_bindEvents",value:function(){var e=this._opts,t="click."+this.name;e.hideOnClick&&this.container.off(t).on(t,this.hide.bind(this)),e.pauseOnMouseOver&&e.hideDelay&&this._pauseOnHover()}},{key:"_setHideTimer",value:function(){var e=this._opts.hideDelay;e&&(clearTimeout(this._autoHideTimer),this._startTimer=new Date().getTime(),this._autoHideTimer=setTimeout(this.hide.bind(this),e))}},{key:"_showHandler",value:function(){this._trigger("show"),this._setHideTimer()}},{key:"_closeHandler",value:function(e){this._trigger("hide",e)}},{key:"_trigger",value:function(e,t){return this._dispatchEvent(e,t)}},{key:"show",value:function(){this._trigger("beforeshow")&&(clearTimeout(this._autoHideTimer),this._setStyles(),this._position(),this.container.hide(),this._showHide())}},{key:"_showHide",value:function(t,a,o){var i=this,l=t?void 0:this._opts.animation,n=function(){i._display(a,i.container),a?i._closeHandler(o):i._showHandler()};"object"===_typeof(l)&&!e.isEmpty(l)&&e.animationHandler?this._animate(this.container,l,a?"hide":"show",n):n()}},{key:"hide",value:function(e){this._trigger("beforehide")&&(clearTimeout(this._autoHideTimer),this._showHide(e,!0))}},{key:"_destroy",value:function(){this.container.empty(),clearTimeout(this._autoHideTimer),clearTimeout(this._startTimer),this._animate=this._target=this._opts=void 0}},{key:"_pauseOnHover",value:function(){var e="."+this.name;this.container.on("mouseenter"+e,this._pauseTimer.bind(this)).on("mouseleave"+e,this._setHideTimer.bind(this))}},{key:"_pauseTimer",value:function(){this._startTimer&&(clearTimeout(this._autoHideTimer),this._hideDelay-=new Date().getTime()-this._startTimer,this._startTimer=void 0)}},{key:"_inlinePosition",value:function(){var e=this._opts,t=e.margin,a=e.position,o={};return t.top&&(o["margin-top"]=t.top),t.bottom&&(o["margin-bottom"]=t.bottom),o}},{key:"_getTarget",value:function(e){var t=e.displayAfter||e.displayBefore,a;return t&&(a=e.displayAfter?"insertAfter":"insertBefore"),{target:t||e.displayInside,action:a}}},{key:"_getIcon",value:function(e,t){return{iconClass:e[t+"IconClass"]||e[t+"IconClassName"],SVGIconId:e[t+"SVGIconId"]}}},{key:"_position",value:function(){var e=this._opts,t={left:"",right:"",top:"",bottom:""};this.container.css(t);var a=this._getPosition();for(var o in t)e[o]&&(a[o]=e[o]);this.container.css(a)}},{key:"_getDimension",value:function(e){var t=this.container[e?"outerHeight":"outerWidth"]();return this.container.css({left:"auto",top:"auto"}),t}},{key:"_getPosition",value:function(){var e=this._opts,t=e.margin,a=this._getRTLBasedDir(e.align),o={},i=parseInt(t[this._getRTLBasedDir(a)]);return o=this["_"+e.display+"Position"](a,i),"left"===a?o.left=i:"right"===a?"fixed"===e.display?o.right=i:o.left="calc(100% - ".concat(this._getDimension()+i,"px)"):o.left="calc(50% - ".concat(this._getDimension()/2,"px)"),o}},{key:"_fixedPosition",value:function(e){var t=this._opts,a=t.margin,o=t.position,i={};return /^(top|bottom)$/.test(o)?i[o]=parseInt(a[o]):i.top="calc(50% - "+this._getDimension(!0)/2+"px)",this.container.attr("data-position",o+"-"+e),i}},{key:"_handleOpen",value:function(){var a=this._opts,o={},i="inline"===a.display;i&&(o=this._getTarget(a));var l=o.action||"appendTo",n=t(o.target||a.target);this.container[l](n),this._target=n;var s=n.data("previous-bannerId");if(s){var r=a.animation,d=t("#"+s);d.finish?d.finish():d.stop(!0,!0),d.is(":visible")&&d.length&&(d.is("z-alertbanner")?d[0].hide(!0):e.alertbanner(d).hide(!0),i&&r&&r.show&&(r.show=!1))}n.data("previous-bannerId",this.container[0].id)}},{key:"_closeHandler",value:function(e){var t=this.container,a=this._target,o=this;this._opts&&this._opts.createdByShowMethod?(a.data("previous-bannerId")===t.attr("id")&&a.removeData("previous-bannerId"),this._trigger("hide",e),t&&t.remove(),o._destroy(),o.element.remove()):this._trigger("hide",e)}},{key:"_animate",value:function(t,a,o,i){e.animationHandler({element:t,action:"none"===o||"hide"===o?"hide":"show",callback:i,ctype:this.name,animation:a})}},{key:"_setAttribute",value:function(e,a){var o=this.container,i=o.is(":visible"),l=this._opts,n=!0,s=l[e];/(target)$/.test(e)?("target"===e&&t(this._target).removeData("previous-bannerId"),this._target=void 0,l[e]=a,n=!1):/(icon|closeButton|type|closeIconClassName|closeSVGIconId|IconClassName|SVGIconId|message|isMessageHTMLEncoded)$/.test(e)?(l[e]=a,this._validate(s)):/(display)/.test(e)?(l[e]=a,n=!1,o.css("position",""),i&&(this._setStyles(),this._position())):/(margin|left|right|top|bottom)/.test(e)?(l[e]=a,n=!1,this._validate(),i&&this._position()):/(hideDelay|hideOnClick|pauseOnMouseOver)/.test(e)&&s!==a?(l[e]=a,n=!1,this._validate(),o.off("."+this.name),this._bindEvents()):/(className|zclassName)/.test(e)?(this._updateClass(a,s),l[e]=a):"animation"===e?"object"===_typeof(l.animation)&&"object"===a?t.extend(!0,l.animation,a):l[e]=a:l[e]=a,"message"===e&&this._position(),n&&(this._domChanged=!0)}},{key:"name",get:function(){return"zalertbanner"}},{key:"attrs",get:function(){return{type:"info",icon:null,iconClass:null,SVGIconId:null,errorIconClass:null,errorSVGIconId:null,successIconClass:null,successSVGIconId:null,warningIconClass:null,warningSVGIconId:null,infoIconClass:null,infoSVGIconId:null,message:null,isMessageHTMLEncoded:!1,position:"top",align:"center",hideDelay:null,closeButton:!1,closeSVGIconId:null,closeIconClass:null,display:"fixed",target:"body",displayAfter:null,displayBefore:null,displayInside:null,hideOnClick:!1,left:null,right:null,bottom:null,top:null,width:null,pauseOnMouseOver:!1}}},{key:"props",get:function(){return{margin:null,errorIconClassName:null,successIconClassName:null,warningIconClassName:null,infoIconClassName:null,closeIconClassName:null,iconClassName:null,animation:{},labels:{close:"Close"}}}},{key:"EVENTS",get:function(){return["show","hide","beforeshow","beforehide"]}}]),o}(e.CoreComponent);e.registerComponent("ZAlertBanner",r),function(e){var t=e.zalertbanner.Templates,a=e.Templates.Utilities;t.container=function(e){return ZT.html(tO10(),e.className,e.children&&t.children(e))},t.children=function(e){return ZT.html(tO11(),e.isIE&&ZT.html(tO12()),e.icon&&a.icon(e),e.isIE&&t.closeButton(e),e.type&&ZT.html(tO13(),e.messageDOM,ZT.customHTML(e.message)),!e.isIE&&t.closeButton(e))},t.closeButton=function(e){return ZT.html(tO14(),e.closeButton&&ZT.html(tO15(),e.closeText,a.icon(e.closeButton)))}}(ZComponents);var d=function(t){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,_getPrototypeOf(a).apply(this,arguments))}return _inherits(a,t),_createClass(a,[{key:"_init",value:function(e,t){t.isCE=this.isCE,t.disabled=t.disabled||e[0].disabled,this._data=a.getBtnProps(t,e),this._prevTabIndex=this._data._prevTabIndex,this._skipParent=!this._data.hasInput}},{key:"_initialRender",value:function(){var e=this.element;"custom"!==this._opts.contentType||this._data.innerHTML?this._render():(this.container=e,this._postRender(e,this._opts),this._postEachRender(e,this._data))}},{key:"_postRender",value:function(e){var t=this._data;t.className+=" "+this._opts.cls,this._container=t.hasInput?this.container:e,this._container[0].type=t.type}},{key:"_postEachRender",value:function(){var e=this._data,t=e.icon&&!e.text;this._updateClass(t?"zbutton--icononly":"",t?null:"zbutton--icononly")}},{key:"_handleStates",value:function(){var e=this._opts.disabled,t=this._data;t.attrs.disabled=e,this._disable(e),this.isCE||this._disable(e,this.element),t.hasInput&&(e&&(this._currentTab=this.container.attr("tabindex")),this.container.attr("tabindex",e?-1:this._currentTab),t.attrs.tabIndex=e?-1:this._currentTab),this._dispatchEvent("statechange",{},{button:this.element,disabled:e,fromUI:!1})}},{key:"_bindEvents",value:function(){var t=this,a=this.name,o=this.getElement();this._handleFocus(this._container),o.on("click."+a+" keydown."+a,function(a){var i="keydown"===a.type;o.hasClass("is-disabled")||i&&a.keyCode!==e.keyCode.ENTER&&a.keyCode!==e.keyCode.SPACE||(t._opts.actionInProgress&&t.showProgressIndicator&&t.showProgressIndicator(),t._dispatchEvent("click",a,{button:t.element,fromUI:!0}),i&&a.preventDefault())}).on("mousedown."+a,function(e){if(o.hasClass("is-disabled"))return e.stopImmediatePropagation(),!1}),e.ShortCut&&e.ShortCut.register(this.element)}},{key:"_setAttribute",value:function(e,t){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.getElement(),i=this._opts,l=this._data,n=i[e];if(i[e]=t,"appearance"===e||"size"===e)this._updateClass("zbutton--"+t,"zbutton--"+n),"size"===e&&i.actionInProgress&&(t=""===t.trim()||"default"===t?"medium":t,o.find(".zbutton__loader circle").attr({cx:this._CIRCLEX[t],cy:this._CIRCLEY[t],r:this._CIRCLER[t]}));else if("disabled"===e)this._handleStates();else if("text"===e)this._domChanged=!0,l[e]=t;else if(-1<["iconClassName","iconClass","SVGIconId","defaultSVGIconId"].indexOf(e))i.actionInProgress||a.getIconInfo(i,!0,l),this._domChanged=!0;else if("actionInProgress"===e||"progressIndicator"===e)this._setProgressAttribute(e,t);else if("title"===e){var s=l.attrs||{};s.title=t,l.attrs=s,this._domChanged=!0}this._domChanged&&l.hasInput&&(this._render(l,void 0,this.container[0],this._skipParent),this._domChanged=!1)}},{key:"destroy",value:function(){var e=this.getElement(),t=this._data;t.className=" ",_get(_getPrototypeOf(a.prototype),"destroy",this).call(this),e.text(t.text)}},{key:"name",get:function(){return"zbutton"}},{key:"attrs",get:function(){return{type:"button",appearance:"normal",action:null,actionInProgress:!1,size:"medium",text:null,iconClass:null,SVGIconId:null,disabled:!1,isCustomHTMLEncoded:!0,contentType:"",defaultIconClassName:"",defaultSVGIconId:null}}},{key:"props",get:function(){return{iconClassName:null,progressIndicator:{type:"circular",position:"left",direction:"left-to-right",loadingText:"",value:5}}}},{key:"EVENTS",get:function(){return["click","change","statechange"]}},{key:"compoundAttrs",get:function(){return{disabled:"disabled aria-disabled"}}}],[{key:"getBtnProps",value:function(t,o,i){var l=Object.create(t),n=void 0!==o,s=n&&o[0],r=l.customAttributes||{},d;d=l.text||l.label||"",d||i||!n||(d=s.innerText.trim()),d&&(r["aria-label"]=t.text=l.text=d);var c=n&&"INPUT"===s.tagName;c&&(r["for"]=s.id,l.title=l.title||s.title,l.type=s.type,o.addClass("zh-dnone"),l.hasInput=!0,l.alwaysSetAttrs=!0),r.tabIndex=void 0===r.tabindex?n&&s.tabIndex||0:r.tabindex,t.isCE&&n&&!s.getAttribute("tabindex")&&(r.tabIndex=0),l=a.getIconInfo(l);var _=t.innerHTML;"custom"===t.contentType&&_&&(l.innerHTML=t.isCustomHTMLEncoded?_:e.encodeHTML(_));var u="zbutton  ".concat(l.size?" zbutton--".concat(l.size," "):"zbutton--medium").concat(l.appearance?" zbutton--".concat(l.appearance):" zbutton--normal"," ").concat(l.templateRender?(l.className||"")+(l.icon&&!l.text?" zbutton--icononly":""):"");return l.title&&(r.title=l.title),l._prevTabIndex=r.tabIndex,l.disabled&&(u+=" is-disabled",l.hasInput&&(r.tabIndex=-1)),r["class"]&&(u+=" "+r["class"],delete r["class"]),r.disabled=l.disabled,e.Browser.isFirefox&&52>=e.Browser.getFirefoxVersion()&&(u+=" zbutton--ffsupport"),t.cls=u,l.className=u,r.role=l.role||"button",l.name&&n&&s.name&&(r.name=l.name),l.type=l.type||"button",l.attrs=r,l}},{key:"getIconInfo",value:function(t,a,o){var l=t.iconClassName||t.iconClass||t.SVGIconId||t.defaultSVGIconId,n="";l&&(n=t.defaultIconClassName+" zbutton__icon"),t.defaultIconClassName=n;var s=e._getIconInfo(t.iconClassName||t.iconClass,t.SVGIconId,t.defaultSVGIconId,t.defaultIconClassName,!a&&t);if(a)for(var r=["icon","iconClass","SVGIconId","iconClassName","SVGIconClassName"],d=r.length,c=0,_;c<d;c++)_=r[c],o[_]=s[_];else return s}}]),a}(e.CoreComponent);e.registerComponent("ZButton",d),function(e){var t=e.zbutton.Templates,a=e.Templates.Utilities;t.container=function(e){return ZT.html(tO16(),e.mainElement||ZT.html(tO17(),e.text,e.id,e.role,e.type,e.attrs&&e.attrs.tabIndex||e.tabIndex||0,e.title,e.className,e.attrs&&e.attrs.actionName,e.templateRender?ZT.html(tO18(),t.children(e)):"",e.children&&t.children(e)))},t.children=function(e){return ZT.html(tO19(),e.innerHTML?ZT.html(tO20(),ZT.customHTML(e.innerHTML)):t.defaultChild(e))},t.defaultChild=function(e){return ZT.html(tO21(),e.showProgress&&e.progressInfo.circularLeft?ZT.html(tO22(),t.loader(e.progressInfo)):e.icon&&ZT.html(tO23(),a.icon(e)),e.text&&ZT.html(tO24(),e.text),e.showProgress&&!e.progressInfo.circularLeft&&ZT.html(tO25(),t.loader(e.progressInfo)))}}(ZComponents);var c=function(a){function i(){return _classCallCheck(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,a),_createClass(i,[{key:"_create",value:function(e,t){e.addClass("zh-draggable"),this._handle=t.handle?e.find(t.handle):e,this._handle.addClass("zdraggable "+(t.disabled?"is-disabled":"")),this._bindEvents(),this._prevCursor=this._handle.css("cursor"),this._setCursor(),t.disabled&&this._disable()}},{key:"_setCursor",value:function(e){this._handle.css("cursor",e?this._prevCursor:this._opts.cursor)}},{key:"_bindEvents",value:function(){this._addEvents({mouseDown:"mousedown",docMouseUp:"mouseup contextmenu"},this._handle)}},{key:"_mouseDownHandler",value:function(a){var o=this,i=this._opts;if(!t(a.target).closest(i.ignoreAsHandle).length&&!i.disabled){var l=a.pageX,n=a.pageY;this._delay=window.setTimeout(function(){l===a.pageX&&n===a.pageY&&(o._md=!0,o._mx=a.pageX,o._my=a.pageY,o._scrollPar=o._getScrollPar(o.element),o._scrollOff=o._scrollPar[0]===document?void 0:o._scrollPar.offset(),o._prevPos=o.element["parent"===i.region?"position":"offset"](),o._addEvents({drag:"mousemove",docKeydown:"keydown",docMouseUp:"mouseup contextmenu"},e.$document)),clearTimeout(o._delay),o._delay=void 0},i.dragStartDelay),t("body").addClass("zh-userselectnone")}}},{key:"_dragHandler",value:function(a){var i=this._dragEle||this.element,l=this._opts;if(this._md&&!l.disabled){if(!this._stDispatched){if(l.showGhostOnDrag&&!this._dragEle){var s=i,r=s[0].parentNode;this._dragEle=i=t(i[0].cloneNode(!0)),r.appendChild(i[0]),i.css("position","absolute");var d=s["parent"===l.region?"position":"offset"]();i.css({top:d.top,left:d.left})}i.addClass(l.classNameOnDrag),this._dispatchEvent("start",a),this._stDispatched=!0}var c=this._scrollPar[0],_=a.pageX,u=a.pageY,p=i.outerHeight(),m=i.outerWidth();if(l.autoScrollRegion&&"viewport"!==this._opts.region){var h=e.$document;if(c!==h[0]&&"HTML"!==c.tagName)this._checkScroll("Top",u,p,i),this._checkScroll("Left",_,m,i);else{var g=e.$window,v=l.scrollSensitivity,y=this._prevX?n(o(this._prevY-u),o(this._prevX-_)):l.scrollSpeed,f=h.scrollTop(),k=h.scrollLeft(),b=u-f<v?f-y:g.height()-(u-f)<v?f+y:void 0,C=_-k<v?k-y:g.width()-(_-k)<v?k+y:void 0;void 0!==b&&h.scrollTop(b),void 0!==C&&h.scrollLeft(C),this._prevX=_,this._prevY=u}}var D=i.offset(),w;if(l.region)if("string"!=typeof l.region)"object"===_typeof(l.region)?(w=l.region,D=i.position()):w=l.region;else if("viewport"===l.region)w=[0,0,t(window).width(),t(window).height()];else if("page"===l.region)w=e.$document;else if("parent"===l.region){var S=i.parent().is("body");w=S?e.$document:i.parent(),S||(D=i.position())}var T=!(0<=u-this._my),I=0<=_-this._mx,x=D.top+(c.scrollTop||0)+u+l.cursorOffset.top-this._my,E=D.left+(c.scrollLeft||0)+_+l.cursorOffset.left-this._mx;x=0>x?0:x,E=0>E?0:E;var O,P;w&&w instanceof Array?(x=x<w[1]?w[1]:x,E=E<w[0]?w[0]:E,O=w[2],P=w[3]):(O=w&&w[0].scrollWidth||e.$document.width(),P=w&&w[0].scrollHeight||e.$document.height()),x+p>P&&(x=P-p),E+m>O&&(E=O-m);var M={};"y"!==l.axis&&0<=_&&(M.left=E),"x"!==l.axis&&0<=u&&(M.top=x),i["parent"===l.region?"css":"offset"](M),i.css({right:"",bottom:""}),this._dispatchEvent("drag",a,{isUp:T,isRight:I}),this._mx=_+l.cursorOffset.left,this._my=u+l.cursorOffset.top,a.preventDefault()}}},{key:"_checkScroll",value:function(e,t,a,o){var i=this._scrollPar[0],l=this._scrollOff[e.toLowerCase()],n=i["scroll"+e],s="Top"===e?"Height":"Width",r=i["scroll"+s],d=i["offset"+s],c=this._opts.scrollSensitivity,_=this._opts.scrollSpeed,u=!1,p;l+d-t<c?(p=n+_,u=!0):t-l<c&&(p=n-_);var m=a+(void 0===p?0:p);void 0!==p&&0<=p&&(u?m<=r:0<=m)&&this._updateProp(e,p,a,r,o,u,_)}},{key:"_updateProp",value:function(e,t,a,o,i,l,n){this._scrollPar[0]["scroll"+e]=t;var s=i[0]["offset"+e],r=l?s+n:s-n;(l?r+a<=o:0<=r+a)&&i.css(_defineProperty({},e.toLowerCase(),r))}},{key:"_getScrollPar",value:function(e,a){var o=e.css("position"),i="parent"===this._opts.region,l=a?/(auto|scroll|hidden)/:/(auto|scroll)/,n=e.parents().filter(function(){var a=t(this);return!("parent"!==i&&"absolute"===o&&"static"===a.css("position")||i&&a[0]!==e[0].parentNode)&&l.test(a.css("overflow")+a.css("overflow-y")+a.css("overflow-x"))}).eq(0);return"fixed"!==o&&n.length?n:t(e[0].ownerDocument||document)}},{key:"_docMouseUpHandler",value:function(e){this._md&&!this._opts.disabled&&this._resetValues(e),clearTimeout(this._delay),this._delay=void 0}},{key:"_docKeydownHandler",value:function(t){this._md&&this._opts.cancelOnEscKey&&t.keyCode===e.keyCode.ESCAPE&&(this._revertPos(),this._dispatchEvent("cancel",t))}},{key:"_resetValues",value:function(a,o){this._md=this._stDispatched=!1;var i=this._opts;i.classNameOnDrag&&(this._dragEle||this.element).removeClass(i.classNameOnDrag),a&&this._dispatchEvent("end",a),i.showGhostOnDrag&&this._removeGhost(o),t("body").removeClass("zh-userselectnone"),this._removeEvents("mousemove mouseup contextmenu keydown",e.$document)}},{key:"_removeGhost",value:function(e){if(this._dragEle){if(!e){var t="parent"===this._opts.region,a=this._dragEle[t?"position":"offset"]();this.element[t?"css":"offset"]({top:a.top,left:a.left})}this._dragEle[0].parentNode.removeChild(this._dragEle[0]),this._dragEle=void 0}}},{key:"_revertPos",value:function(){this.element.css({left:this._prevPos.left,top:this._prevPos.top}),this._resetValues(void 0,!0)}},{key:"_dispatchEvent",value:function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=this.element;a.offset=o.offset(),a.position=o.position(),_get(_getPrototypeOf(i.prototype),"_dispatchEvent",this).call(this,e,t,a)}},{key:"destroy",value:function(){var e=this.name;this._md=this._stDispatched=this._mx=this._my=void 0,this._handle.off("."+e).removeClass("zdraggable"),this.element.removeClass("zh-draggable"),this.element.removeData(e),this._setCursor(!0)}},{key:"_disable",value:function(e){_get(_getPrototypeOf(i.prototype),"_disable",this).call(this,e,this._handle),this._handle[e?"removeClass":"addClass"]("zdraggable"),this.element[e?"removeClass":"addClass"]("zh-draggable"),this._setCursor(e)}},{key:"_setAttribute",value:function(e,t){"handle"===e&&(this._handle.off("."+this.name).removeClass("zdraggable"),this._setCursor(!0),this._resetValues(),this._handle=t?this.element.find(t):this.element,this._handle.addClass("zdraggable"),this._setCursor(),this._bindEvents()),this._opts[e]=t}},{key:"name",get:function(){return"zdraggable"}},{key:"props",get:function(){return{cursor:"move",handle:null,ignoreAsHandle:"input,textarea,button,select,option",axis:"both",region:!1,showGhostOnDrag:!1,cursorOffset:{top:0,left:0},classNameOnDrag:"",disabled:!1,dragStartDelay:0,autoScrollRegion:!0,cancelOnEscKey:!0,scrollSpeed:5,scrollSensitivity:20}}},{key:"EVENTS",get:function(){return["start","drag","end","cancel"]}}]),i}(e.CoreComponent);e.registerComponent("ZDraggable",c),e.$document.on("scroll.zpopover",function(t){e.openedPopover&&e.openedPopover._opts.closeOnScroll&&e.openedPopover.element.is(":visible")&&e.openedPopover.close(t)});var _=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(e,a){var o=a.content||"",i="callout"===a.displayType;this._forElement=t(a.forElement),e.attr({"aria-haspopup":"true","aria-expanded":"false",tabindex:e.attr("tabindex")||0}),/^(top|bottom|right|left|top-left|top-right|bottom-left|bottom-right|auto|right-bottom|right-top|left-bottom|left-top|at-cursor)$/.test(a.position)||(a.position="bottom"),this._correctPosition();var l=this._data;l.closeButton=a.closeButton||"modal"===a.type,(a.title||this.isCE||l.closeButton||a.detachable)&&this._setTitleBar(),this._data.callout=i,this._isAjaxContent=a.progressIndicator=o.URL,l.closeButton&&this._handleClose(),this._setContent(o);var n=t(a.appendTo);n.length&&e.appendTo(n)}},{key:"_setContent",value:function(t,a){var o=this._opts,i=this._data,l=this.element;if(!this._isAjaxContent&&t&&(o.content=o.isContentHTMLEncoded?t:e.encodeHTML(t)),!a){var n=this.isCE?l.find("z-pocontent").addClass("zpopover__content"):l[0].childNodes;n.length&&(this.isCE?i.contentEle=n[0]:i.content=_toConsumableArray(n))}(i.content||i.contentEle)&&!a||(i.content=o.content),i.isContentString="string"==typeof i.content}},{key:"_postRender",value:function(e,t){t.detachable&&this._handleDrag(!0);var a=e.find.bind(e);this._titleBar=a(".zpopover__title"),this._contentEle=a(".zpopover__content"),this._data.className+=" zpopover","modal"===t.type&&this._createOverlay(),this._data.closeButton&&this._handleClose(null,!0)}},{key:"_bindEvents",value:function(){this._opts.closeOnEsc&&this._addEvents({keydown:"keydown"})}},{key:"_keydownHandler",value:function(t){t.keyCode===e.keyCode.ESCAPE?(this.close(t),t.stopPropagation()):this._opts.wrapAroundKeyboardNavigation&&t.keyCode===e.keyCode.TAB&&t.stopPropagation()}},{key:"open",value:function(a){var o=this,i=this._opts,l=this.element,n=this._data;if(a=a||{},i.toggle&&"true"===l.attr("aria-expanded"))return void this.close();var s=a.forElement||this._opts.forElement;if(s&&(this._forElement=t(s)),this._overlay&&(this._overlay.show(),this._forElement.addClass("zpopover--target")),e.openedPopover=this,i.detachable&&(n.closeButton=i.closeButton||"modal"===i.type,n.callout="callout"===i.displayType,this._setTitleBar(!0)),"modal"!==i.type&&e.bindDocumentEvents&&i.closeOnBodyClick&&e.bindDocumentEvents({element:l,forElement:this._forElement,ctype:this.name,closeMethodName:"close",closeEvent:"close"}),this._dispatchEvent("beforeopen",{},{forElement:this._forElement})){var r=i.delay;r?(r.openAfter&&(clearTimeout(this._openTimer),this._openTimer=setTimeout(function(){return o._preprocessEle(a)},r.openAfter)),r.closeAfter&&this._autoCloseEle()):(this._preprocessEle(a),e.animationHandler({action:"open",animation:i.animation,callback:this._openHandler.bind(this),element:l,ctype:this.name}))}this._isAjaxContent&&this._makeRequest()}},{key:"_autoCloseEle",value:function(){var e=this,t=this._opts.delay,a=t.openAfter?t.openAfter+t.closeAfter:t.closeAfter;clearTimeout(this._closeTimer),this._closeTimer=setTimeout(function(){return e.close()},a)}},{key:"_preprocessEle",value:function(e){this._display().attr("aria-expanded",!0),this._fixDimensions(),this._positionEle(e)}},{key:"_openHandler",value:function(){var t=this;this._opts.animation||this._display().attr("aria-expanded","true"),this._opts.wrapAroundKeyboardNavigation&&e.FocusHandler?e.FocusHandler.init(this.element,".zpopover__close"):this._dispatchEvent("beforefocus",{},this.element)&&(clearTimeout(this._openTimeout),this._openTimeout=setTimeout(function(){return t.element.focus()},100)),this._dispatchEvent("open",{},{forElement:this._forElement})}},{key:"_fixDimensions",value:function(){var e=this._opts;e.width&&this.element.css("width",e.width+"px");var t=this._contentEle,a=this.element,o=a.find(".zpopover__title"),i;return e.height&&t&&(i=e.height-(o.length?o.outerHeight(!0):0)-(parseInt(t.css("padding-top"))+parseInt(t.css("padding-bottom")))-(parseInt(a.css("border-top-width"))+parseInt(a.css("border-bottom-width"))),t.height(i)),i}},{key:"close",value:function(t){this.element.is(":visible")&&this._dispatchEvent("beforeclose",t)&&(this._opts.delay?this._closeHandler():e.animationHandler({action:"close",callback:this._closeHandler.bind(this),element:this.element,animation:this._opts.animation,ctype:this.name}))}},{key:"_closeHandler",value:function(){e.openedPopover=void 0,this._display(!0).attr("aria-expanded","false"),this._overlay&&(this._overlay.hide(),this._forElement.removeClass("zpopover--target")),this._dispatchEvent("close")}},{key:"_arrowCallback",value:function(e,t){this.element.removeClass("zpopover--top zpopover--bottom zpopover--left zpopover--right").addClass("zpopover--"+t)}},{key:"_positionEle",value:function(){var e=this._opts;e.offset?this.element.css(e.offset):"page-center"!==e.position&&this._setPosition.apply(this,arguments)}},{key:"_correctPosition",value:function(){var e=this._opts.displayType,t=this._opts.position;this._position="box"===e?-1<t.indexOf("-")?t:"top"===t||"bottom"===t?t+"-left":"auto"===t?"bottom-left":t:"auto"===t?"bottom":t}},{key:"repositionPopover",value:function(){var e=this.element;e&&(!e.is(":visible")&&this._display(),this._positionEle())}},{key:"_destroy",value:function(){clearTimeout(this._openTimeout),clearTimeout(this._openTimer),clearTimeout(this._closeTimer),this._titleBar=this._forElement=this._contentEle=null,this._overlay&&this._overlay.remove(),this._overlay=void 0}},{key:"_getPosition",value:function(t){var a=this,o=this.element.find(".zpopover__pointer"),i;if(i=!!o.length&&o,e.Position)return e.Position.get(t?t.event||t.forElement||this._forElement:this._forElement,this.element,{rtl:this._opts.rtl,direction:this._position,positionAlterable:this._opts.positionAlterable,arrow:{element:i,callback:this._arrowCallback.bind(a),margin:{left:-1,top:-1}}})}},{key:"_setPosition",value:function(e){var t=this._opts,a=this.element.find(".zpopover__pointer"),o=this._getPosition(e),i=t.margin;o&&(i&&(o.elementPosition=this._getCorrectedPosition(o.elementPosition),a.length&&(o.arrowPosition=this._getCorrectedPosition(o.arrowPosition,!0))),this.element.css(o.elementPosition),a.length&&a.css(o.arrowPosition))}},{key:"_getCorrectedPosition",value:function(e,t){var a=this._opts.margin,o=t?-1:1,i,l;if("number"==typeof a)i=e.top+o*a,l=e.left+o*a;else{var n=a.left;l=n?e.left+o*n*(this._opts.rtl?-1:1):e.left,i=a.top?e.top+o*a.top:e.top}return e.top=0>i?e.top:i,e.left=0>l?e.left:l,e}},{key:"_createOverlay",value:function(){this._overlay=void 0,t("body").find(".zpopover--overley").remove(),"modal"===this._opts.type&&(this._overlay=t("<div class='zpopover--overley' tabindex='1'></div>").appendTo("body").hide(),this._addEvents({keydown:"overlay"}))}},{key:"_overlayHandler",value:function(t){t.keyCode===e.keyCode.TAB&&t.preventDefault()}},{key:"_setTitleBar",value:function(a){var o=this._opts,i=this._data;i.closeButton&&this._handleClose();var l=o.title||"";if(this.isCE){var n=this.element.find("z-potitle");i.titleEle=n.length?n.addClass("zpopover__text")[0]:void 0}i.titleEle||(l=l instanceof t||"#"===l[0]||"."===l[0]?t(l)[0]:this._opts.isTitleHTMLEncoded?l:e.encodeHTML(l)),"string"==typeof l?i.title=l:i.titleEle=l;var s=!!i.titleEle||!!l,r="";s||i.closeButton||!o.detachable||(s=!1,r="zpopover__draggablearea"),i.titleBar=s||i.closeButton||o.detachable,i.headingClassName=r,a&&(this._render(),this._titleBar=this.element.find(".zpopover__title"),this._handleDrag&&this._handleDrag(o.detachable),i.closeButton&&this._handleClose(!0,!0))}},{key:"_handleClose",value:function(){var e=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],a=1<arguments.length?arguments[1]:void 0,o=this.element.find(".zpopover__close");if(t){var i=this._opts;this._data.closeButton={title:i.closeButtonLabel||this._getI18NText("close"),className:"zpopover__close",defaultIconClassName:"zpopover__icon",iconClassName:i.closeIconClassName,SVGIconId:i.closeSVGIconId,templateRender:!0,mainElement:o[0],defaultSVGIconId:"zc__svg--close zbutton__svg",customAttributes:{tabindex:-1}}}a&&o.on("click."+this.name,function(t){e.close(t)})}},{key:"_handleDrag",value:function(t){var a=this.element,o=this._opts,i=this.element.find(".zpopover__title");t?!a.data("zdraggable")&&e.draggable(a,{handle:i,container:"window",cursor:"default",start:this._onDragStart.bind(this),drag:this._onDrag.bind(this),end:this._onDragEnd.bind(this)}):(e.draggable(a).destroy(),i.removeClass(this._data.headingClassName),this._dragged=this._dragStart=this._dragEnd=!1),this._data.closeButton=this._dragEnd||o.closeButton||"modal"===o.type,this._data.callout="callout"===o.displayType}},{key:"_onDragEnd",value:function(){this._dragEnd=!0,this._dragStart&&this._dragged&&(this._data.headingClassName="",this._setTitleBar(this._data.closeButton=!0),e.unBindDocumentEvents(this.element)),this._fixDimensions(),this._dragged&&(this._dragged=void 0,this._dispatchEvent("dragend"))}},{key:"_onDrag",value:function(){this._dragged=!0,this._dispatchEvent("drag")}},{key:"_onDragStart",value:function(){this._data.closeButton=!!((this._opts.closeButton||"modal"===this._opts.type||this._dragEnd)&&!this._data.headingClassName)&&this._data.closeButton,this._dragEnd=!1,this._data.callout=!1,this._render(),this._dragStart=!0,this._dispatchEvent("dragstart")}},{key:"_makeRequest",value:function(){var a=this._opts.content||{},o=this,i=this._tmpOpts;i.progressIndicator=e._getIconInfo({defaultIconClassName:"zpopover__icon h-loading",iconClassName:i.progressIndicatorIconClassName,SVGIconId:i.progressIndicatorSVGIconId,defaultSVGIconId:"zc__svg--loader zpopover__svg zpopover__loader zeffects--rotate"}),this._updData("zpopover--loader","container"),t.ajax({dataType:a.dataType,type:a.type,URL:a.URL,success:function(e){o._ajaxComplete(!0,e),o._dispatchEvent("contentload")},error:function(){o._ajaxComplete(!1)}})}},{key:"_ajaxComplete",value:function(a,o){var i=this._opts.content,l=a?"success":"fail";this._content="function"==typeof i[l]?i[l](o):o,this._contentEle.append(this._opts.isContentHTMLEncoded?this._content:e.encodeHTML(this._content)),t("#zpopover--loader").remove(),this._fixDimensions(),this._positionEle()}},{key:"_setAttribute",value:function(a,o){var i=this.element,l=this._opts,n=this._data;if(l[a]=o,"height"===a)i.height(l.height),this._fixDimensions();else if("width"===a)i.width(l.width);else if("position"===a)this._correctPosition(),i.is(":visible")&&this._positionEle();else if("closeSVGIconId"===a||"closeIconClassName"===a)this._handleClose(),this._setBtnValue(this._data.closeButton,this._data.closeButton);else if("content"===a){if(this._setContent(o,!0),this.isCE&&i.find("z-pocontent").length)return void i.find("z-pocontent").html(this._data.content);this._isAjaxContent="object"===_typeof(o)&&!(o instanceof t),this._domChanged=!0}else if(-1<["title","closeButton","type","detachable","isTitleHTMLEncoded"].indexOf(a)){if("title"===a&&this.isCE&&i.find("z-potitle").length)return;("closeButton"===a||"type"===a)&&(this._data.closeButton=l.closeButton||"modal"===o,"type"===a&&this._createOverlay()),"detachable"===a&&this._handleDrag(o),this._setTitleBar(!0)}else if("displayType"===a)this._correctPosition(),n.callout="callout"===o,this._domChanged=!0;else if("margin"===a&&i.is(":visible")){var s=i[0],r=this._getCorrectedPosition({left:+s.offsetLeft,top:+s.offsetTop});i.css(r);var d=this.element.find(".zpopover__pointer");d.length&&(r=this._getCorrectedPosition({left:+d[0].offsetLeft,top:+d[0].offsetTop},!0),d.css(r))}else"closeOnEsc"===a?o?this._bindEvents():i.off("keydown."+this.name):"forElement"===a?this._forElement=t(o):"closeOnBodyClick"===a?o||e.unBindDocumentEvents(i):"offset"===a&&this.element.css(o)}},{key:"name",get:function(){return"zpopover"}},{key:"attrs",get:function(){return{type:"modeless",title:"",displayType:"callout",position:"auto",closeButton:!1,closeOnBodyClick:!0,closeOnEsc:!0,closeOnScroll:!1,toggle:!1,positionAlterable:!0,removeOnClose:!1,detachable:!1,height:null,width:null,closeSVGIconId:null,closeIconClass:null,progressIndicatorIconClass:null,progressIndicatorSVGIconId:null,wrapAroundKeyboardNavigation:!1,forElement:null,content:null,appendTo:null,isContentHTMLEncoded:!1,isTitleHTMLEncoded:!1}}},{key:"props",get:function(){return{closeIconClassName:null,progressIndicatorIconClassName:null,innerHTML:null,margin:null,offset:null,delay:null,animation:null,messages:{close:"Close"}}}},{key:"EVENTS",get:function(){return["beforeopen","open","beforeclose","close","dragstart","drag","dragend","beforefocus","contentload"]}}]),o}(e.CoreComponent);e.registerComponent("ZPopover",_),function(e){var t=e.zpopover.Templates;t.children=function(t){return ZT.html(tO26(),t.titleBar&&ZT.html(tO27(),t.headingClassName,t.titleEle||t.title&&ZT.html(tO28(),ZT.customHTML(t.title)),t.closeButton&&ZT.html(tO29(),e.createButton(t.closeButton))),t.contentEle||ZT.html(tO30(),t.progressIndicator?ZT.html(tO31()):t.isContentString?ZT.customHTML(t.content):t.content),t.callout&&ZT.html(tO32()))}}(ZComponents);var u=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(e,t){this._fromInit=!0,this._id=this._getID(),this._namespace=".zcolorbase",t.value=t.value||e[0].value,this._setInitial(),this._fromInit=!1}},{key:"_postEachRender",value:function(){var e=this._data,t=this._opts;if(!e.rendered||this._domChanged){var a=t.width||!this._useParent&&this.element[0].style.width;a&&(this.container[0].style.width=isNaN(a)?a:a+"px")}this._storeRef(e,t),this._setClassName(e,t),this._updateElementValue(e,t),this._reopen&&(this._open(),this._reopen=!1)}},{key:"_preRender",value:function(){return this._setRenderData(this._data,this._opts,this.element),this._data}},{key:"_setRenderData",value:function(t,a,o){var i=this._selectedInstance;t.opened=this._opened,t.nofill=!a.icon&&this._noFill,t.color=i.getColor();var l=t.attrs=t.attrs||{};if(l["aria-label"]=this._getI18NText("aria-label").replace(/#value#/g,i.getColor("hexa")),!t.rendered||this._domChanged){var n=t.colorMode=a.colorModel;e.ColorUtil.REGEX.colorMode.test(n)||(t.colorModel=this._getClrInstance(a.value).format,a.colorModel="auto"),t.alwaysSetAttrs=!0,t.pickerId=a.pickerId,t.disabled=a.disabled||o[0].disabled,l.tabindex=!t.disabled&&(a.tabIndex||o[0].tabIndex),t.rtl=a.rtl,t.stroke="stroke"===a.appliedFor,t.icon=t.arrow=t.previewStyleAttr=!1,a.icon&&e._getIconInfo(a.iconClassName||a.iconClass,a.SVGIconId,null,null,t.icon={}),this.isCE||(l.title=o.attr("title")),a.arrowIcon&&(t.arrow={disabled:t.disabled,rtl:t.rtl,isCE:this.isCE},this._setArrowData(t,a))}(t.stroke||t.icon)&&(t.previewStyleAttr=this._getStyle({"border-color":t.color,"border-style":a.previewBorderStyle||"solid","border-width":a.previewBorderWidth||(t.icon?"0px 0px 2px 0px":"3px")})),this._setTogglerData(l,a)}},{key:"_setArrowData",value:function(t,a){var o=this._CLASSES;e._getIconInfo(a.arrowIconClassName||a.arrowIconClass,a.arrowSVGIconId,"zc__svg--downarrow "+o.ARROWSVGICON,(o.ICON||"")+" "+(o.ARROW||""),t.arrow)}},{key:"_setTogglerData",value:function(e,t){Object.assign(e,{"aria-owns":t.pickerId,"aria-haspopup":!0,"aria-expanded":this._opened})}},{key:"_setClassName",value:function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",o=this._CLASSES,i=function(e){e&&(a+=" "+e)};i(o.CONTAINER),i(t.zclassName||t.className),this._opened&&i(o.ACTIVE),e.disabled&&i("is-disabled"),e.rtl&&i("zh-rtl"),e.className=a}},{key:"_bindEvents",value:function(){this._addEvents({focus:"focusin",blur:"focusout",click:"click"},this.container),this._addEvents({toggleBtnClick:"mousedown",toggleBtnKeydown:"keydown"},this._toggler)}},{key:"_toggleBtnClickHandler",value:function(e){e.button||this._togglePicker(e)}},{key:"_toggleBtnKeydownHandler",value:function(t){var a=t.keyCode,o=e.keyCode;(a===o.ENTER||a===o.SPACE||a===o.DOWN&&this._data.arrow)&&(this._togglePicker(t),a===o.DOWN&&t.preventDefault())}},{key:"_focusHandler",value:function(e){clearTimeout(this._blurTimer),this._focussed||this._trigger("focus",e),this._focussed=!0}},{key:"_blurHandler",value:function(e){var t=this;clearTimeout(this._blurTimer),this._blurTimer=setTimeout(function(){t._focussed=!1,t._trigger("blur",e)})}},{key:"_clickHandler",value:function(e){this._opts.disabled||this._trigger("click",e)}},{key:"_storeRef",value:function(e){if(!e.rendered||this._domChanged){this._previewBox=!1;var t=this._CLASSES,a=this.container,o=a.find("."+t.PREVIEW);o.length&&(this._previewBox=o),this._toggler=a}}},{key:"_setInitial",value:function(){var e=this._opts,t=this._getClrInstance(e.value);"none"===e.value||"transparent"===e.value||t.isValid()||(e.value=this._DEFAULTS.value),this._setValue(e.value)}},{key:"_getClrInstance",value:function(t){return e.ColorUtil.getColorInstance(t)}},{key:"_setPickerAttributes",value:function(a){var o=this._opts,i=this._data,l=this._currentClrField,n=i.picker,s="colorpicker",r="createColorPicker";if("advanced"===o.pickerType&&(s="advancedcolorpicker",r="createAdvancedColorPicker"),!n){var d=o.pickerId||"picker-"+this._id;n=i.picker=_objectSpread({},{noColorButtonLabel:this._getI18NText(i.stroke?"noStroke":"noColor"),forElement:this._opts.forElement||this.container},{},o.pickerOptions||{},{},{valueColorModel:o.colorModel,type:"popup",rtl:o.rtl,locale:o.locale,isCE:o.isCE,id:d,ctype:s,beforedestroy:this._pickerDestroyHandler.bind(this)}),this._toggler.attr("aria-owns",d)}var c=this._picker=t("#"+n.id);if(n.value=this._noFill?"transparent":this.getValue(),c&&c.length){var _=this._getPickerName();if(_){var u=e[_](c);if(this._opened||u.close(a),s===_){if(o.pickerId){if(o.resetPickerOptions&&(n=t.extend(!0,{},u._DEFAULTS,n)),"colorpicker"===_){var p=n.advancedPickerOptions=n.advancedPickerOptions||{};p.currentColorField=l}else n.currentColorField=l;u.setAttributes(n)}else this._updateAdvPicker&&(u.setAttributes(n),this._updateAdvPicker=!1);return}this._destroyPicker()}}this._picker=c=t(e[r](n)),n.instance=e[s](c)}},{key:"_pickerDestroyHandler",value:function(){this._picker=this._opened=!1,this._updateUI()}},{key:"_destroyPicker",value:function(){if(this._picker){var e=this._picker;this._callPickerMethod("destroy"),this.isCE&&e.remove()}}},{key:"_bindPickerEvents",value:function(){var e=this,t=this._picker,a="z"+this._data.picker.ctype,o=this.isCE?"z":a,i="."+this.name+"."+a;t.off(i),["select","pick","close","beforeClose","open","beforeOpen","colorPanMouseOver","colorPanMouseOut","colorPanClick","focus"].forEach(function(a){t.on(o+a.toLowerCase()+i,e._pickerCallback.bind(e,e["_"+a+"Handler"]))})}},{key:"_pickerCallback",value:function(e,t){var a=t.detail;t=t.originalEvent,this.isCE&&(a=t.detail,t=t.originalEvent),e.call(this,t,a)}},{key:"_colorPanMouseOverHandler",value:function(e,t){this._trigger("colorpanmouseover",e,t)}},{key:"_colorPanMouseOutHandler",value:function(e,t){this._trigger("colorpanmouseout",e,t)}},{key:"_colorPanClickHandler",value:function(e,t){this._trigger("colorpanclick",e,t)}},{key:"_openHandler",value:function(e,t){this._opened=!0,this._updateUI(),this._trigger("pickeropen",e,t)}},{key:"_beforeOpenHandler",value:function(){}},{key:"_closeHandler",value:function(e,t){this._opened=!1,this._currentClrField=t.options.currentColorField,this._updateUI(),e&&e.currentTarget!==document?this.setFocus(e):this._blurHandler(e),this._removeEvents("",this._picker),this._trigger("pickerclose",e,t)}},{key:"_beforeCloseHandler",value:function(e,t){return this._trigger("beforepickerclose",e,t)}},{key:"_open",value:function(e){this._trigger("beforepickeropen",e)&&(this._setPickerAttributes(e),this._bindPickerEvents(),this._callPickerMethod("open",void 0,e))}},{key:"_close",value:function(e){this._opened&&this._callPickerMethod("close",e)}},{key:"_selectHandler",value:function(e,t){this._opened&&t.fromUI&&this._trigger("select",e,t)}},{key:"_pickHandler",value:function(e,t){this._opened&&t.fromUI&&(this._setValue(t.rgb,e,t,!1),this._trigger("pick",e,t))}},{key:"_setValue",value:function(e,t,a){var o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],i="none"===e||"transparent"===e,l=this._getClrInstance(i?"transparent":e);if(l.isValid()){var n=this._selectedInstance&&this._selectedInstance.getColor();this._selectedInstance=l,this._noFill=a&&a.noColorButtonClick||i,this._updateUI();var s=l.getColor();n!==s&&(this._opened&&o?this._callPickerMethod("setValue",s):this._updateAdvPicker=o,this._trigger("change",t,a))}}},{key:"_updateElementValue",value:function(e,t){t.value=this._noFill?"transparent":this._selectedInstance.getColor(e.colorMode,void 0,"auto"===this._opts.colorModel)}},{key:"_trigger",value:function(e,t,a){if(!this._fromInit){var o=this._selectedInstance,i=this._picker;return a=a||{},a.value=a.color=this.getValue(),a.rgb=o.getColor(),a.opacity=o.getAlpha(),a.colorData=o.getObject(this._data.colorMode),a.picker=i&&i[0],t=t&&t.originalEvent?t.originalEvent:void 0,this._dispatchEvent(e,t,a,void 0,!!t)}return!0}},{key:"_togglePicker",value:function(e){this._opts.disabled||(this._opened?(!e||"keydown"!==e.type)&&this._close(e):this._open(e))}},{key:"_callPickerMethod",value:function(t,a,o){e[this._getPickerName()](this._picker)[t](a,o)}},{key:"_getPickerName",value:function(){var e=this._picker.data();return e.zcolorpicker?"colorpicker":e.zadvancedcolorpicker?"advancedcolorpicker":void 0}},{key:"_updateUI",value:function(){this._data.rendered&&!this._domChanged&&this._render()}},{key:"_disable",value:function(e){this._domChanged=!0,_get(_getPrototypeOf(o.prototype),"_disable",this).call(this,e),this.closePicker()}},{key:"_setAdvAttribute",value:function(e,t){var a=this._opts;/^(pickerId|pickerType|pickerOptions|appliedFor|rtl|locale|forElement|colorModel)$/.test(e)?(a[e]=t,this._reopen=this._opened,this._domChanged=this._updateAdvPicker=!0,"pickerId"===e&&this.closePicker(),this._data.picker=!1):/^(icon|iconClassName|iconClass|SVGIconId|arrowIconClassName|arrowIconClass|arrowSVGIconId|previewBorderWidth|previewBorderStyle|tabIndex|width)$/.test(e)&&(a[e]=t,this._domChanged=!0)}},{key:"_setAttribute",value:function(e,t){var a;return this._addedByComponent=!0,"value"===e?(this._domChanged=!0,this.setValue(t)):a=this._setAdvAttribute(e,t),this._addedByComponent=!1,a}},{key:"setFocus",value:function(e){this._trigger("beforefocus",e)&&this._toggler.focus()}},{key:"openPicker",value:function(e){this._open(e)}},{key:"closePicker",value:function(e){this._close(e)}},{key:"getValue",value:function(){return this._opts.value}},{key:"setValue",value:function(e,t){this._setValue(e,t)}},{key:"_destroy",value:function(){this._destroyPicker(),clearTimeout(this._focusTimer),clearTimeout(this._blurTimer),this.element.empty()}},{key:"name",get:function(){return"zcolorbase"}},{key:"attrs",get:function(){return{value:"rgba(0,0,0,1)",colorModel:"auto",pickerId:null,pickerType:"basic",forElement:null,disabled:!1,appliedFor:"fill",arrowIconClass:null,arrowSVGIconId:null,previewBorderStyle:null,previewBorderWidth:null,resetPickerOptions:!1,icon:!1,width:null,iconClass:null,SVGIconId:null,rtl:null,locale:null,tabIndex:null}}},{key:"props",get:function(){return{iconClassName:null,arrowIconClassName:null,pickerOptions:{},labels:{noStroke:"No Stroke",noColor:"No Fill","aria-label":"Current selected color is #value#"}}}},{key:"CLASSES",get:function(){return{CONTAINER:"zcolorbase",ACTIVE:"is-active",PREVIEW:"zcolorbutton__preview",ICON:"zbutton__icon",ARROW:"zcolorfield__arrow"}}},{key:"EVENTS",get:function(){return["change","select","pick","beforepickeropen","pickeropen","beforepickerclose","pickerclose","colorpanmouseover","colorpanmouseout","colorpanclick","beforefocus","focus","blur","click"]}}]),o}(e.CoreComponent);e.registerComponent("ZColorBase",u);var p=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(e,t){this._fromInit=!0,this._appendEle(this._opts.appendTo),this._id=this._getID(),this._namespace="."+this.name,this._validate(t),this._setInitial(),this._fromInit=!1,this._changedAttrs=[]}},{key:"_isAttrChanged",value:function(e){var t=this._changedAttrs;return!this._data.rendered||-1<t.indexOf("all")||-1<t.indexOf(e)}},{key:"_setMainEle",value:function(t){var a=this;t=this._toArr(t);var o=!1;t.forEach(function(t){if(t&&!t.mainElement){var i=a._getById(t.id);t.mainElement=i[0],o="button"===t.ctype,o||(t.instance=e[t.ctype](i)),t.container=o?i:t.instance.getElement()}})}},{key:"_destroyComp",value:function(a){if(a){var o=t("#"+a.id,this.element);o.length&&(!this.isCE&&e[a.ctype](o).destroy(),o.remove())}}},{key:"_getById",value:function(e){return t("#"+e,this.element)}},{key:"_getID",value:function(e){var t=e?e+"-"+this._id:_get(_getPrototypeOf(o.prototype),"_getID",this).call(this);return t.replace(/\s/g,"")}},{key:"_validateCount",value:function(e){return n(+e||0,0)}},{key:"_getCanvasContext",value:function(e){var t=e.querySelector("canvas");return t.getContext("2d")}},{key:"_preRender",value:function(){var e=this._data,t=this._opts;return e.rgb=this._currentColor,e._inPreRender=!0,this._setRenderData(e,t,this.element),e._inPreRender=!1,e}},{key:"_setRenderData",value:function(e,t,a){if(e.rtl=t.rtl,e.closeOnSelect=t.closeOnSelect,!e.rendered||this._domChanged){e.id=this._id;var o=a.attr("tabindex");void 0===o&&(o=0),e.attrs={tabindex:o,title:a[0].title}}var i=this._isAttrChanged.bind(this);i("displayType")&&(e.hasCallout="callout"===t.displayType),i("title")&&(t.title||e.title)&&this._setTitleBarData(e,t)}},{key:"_getRTLBasedPercent",value:function(e){return this._opts.rtl?100-e:e}},{key:"_postEachRender",value:function(t,a){this._storeRef(a,this._opts,t),(!a.rendered||this._domChanged)&&(this._setClassName(a),this._setDimension(),this._reopen&&(e.unBindDocumentEvents(this.element),this._reopen=!1,this.open(null,null,!1)),a.dragged&&this._hideCallout())}},{key:"_setDimension",value:function(){this._opened||this._display(),this._updateDim(),!this._opened&&this._floating&&this._display(!1)}},{key:"_setClassName",value:function(e){e.className=" "+this._CLASSES.CONTAINER+(this._opts.rtl?" zh-rtl":"")}},{key:"_storeRef",value:function(e,a,o){var i=this._isAttrChanged.bind(this);i("displayType")&&(this._callout=!1,e.hasCallout&&(this._callout=t(this.element[0].querySelector(".zcolorpicker__pointer")))),i("title")&&(this._titleBar=!1,a.title&&this._storeTitleBarRef(e,a,o)),(i("draggable")||i("title"))&&(a.draggable||e.draggableIns)&&this._initDraggable(e,a,o),this._selectedPan=o.find("."+this._CLASSES.COLORBOX+".is-selected")}},{key:"_validate",value:function(e){this._floating="inline"!==e.type;var t=this._getClrInstance(e.value);"none"===e.value||"transparent"===e.value||t.isValid()||(e.value=this._DEFAULTS.value),this._setClrMode(e.value)}},{key:"_bindEvents",value:function(){this._addEvents({keydown:"keydown"}),this._colorPanEventHandler&&this._addEvents({colorPanEvent:"click mouseover mouseout"},this._container||this.container),this._addEvents({focus:"focusin",blur:"focusout"})}},{key:"_focusHandler",value:function(e){clearTimeout(this._blurTimer),this._focussed||this._trigger("focus",e),this._focussed=!0}},{key:"_blurHandler",value:function(e){var t=this;clearTimeout(this._blurTimer),this._blurTimer=setTimeout(function(){t._focussed=!1,t._trigger("blur",e)})}},{key:"_closeClickHandler",value:function(e){this.close(e)}},{key:"_setInitial",value:function(){this._setValue(this._opts.value)}},{key:"_arrowCallback",value:function(e,t){this.element.removeClass("zcolorpicker--top zcolorpicker--bottom zcolorpicker--left zcolorpicker--right").addClass("zcolorpicker--"+t)}},{key:"_getTitle",value:function(e,t){return e.title||t.getColor("hex").toUpperCase()}},{key:"_hideCallout",value:function(){this._data.hasCallout&&this._display(!1,this._callout)}},{key:"_onDragStart",value:function(){this._data.dragged=!0,this._hideCallout()}},{key:"_keydownHandler",value:function(t){var a=t.keyCode,o=document.activeElement,i=o.tagName;"LI"===i?(a===e.keyCode.ENTER||a===e.keyCode.SPACE)&&o.click():a===e.keyCode.ENTER&&"INPUT"===i&&this._onSubmit(t)}},{key:"_toArr",value:function(e){return Array.isArray(e)?e:[e]}},{key:"_getClrInstance",value:function(t){return e.ColorUtil.getColorInstance(t)}},{key:"_getPosition",value:function(a){return e.Position.get(t(this._opts.forElement),this.element,a)}},{key:"_setPosition",value:function(){var a=this._opts,o=this.element;if(a.offset)return void o.css(a.offset);if(e.Position){var i=a.positionAlterable,l=t(a.forElement),n=this._lastPosition||a.position;if(l.length){"auto"===n&&(n="callout"===a.displayType?"bottom":"bottom-left",i=!0),i=i||"fit";var s={rtl:a.rtl,direction:n,within:a.viewport||a.appendTo,positionAlterable:i,arrow:{element:this._callout,callback:this._arrowCallback.bind(this)}},r=this._getPosition(s);if(r&&r.elementPosition){var d=r.elementPosition;if(a.margin){var c=+a.margin.top||0,_=+a.margin.left||0,u=r.direction.split("-");"top"===u[0]?d.top-=c:"bottom"===u[0]?d.top+=c:"right"===u[0]?d.left+=_:"left"===u[0]&&(d.left-=_)}o.css(d),this._callout&&this._callout.css(r.arrowPosition),this._lastPosition=r.direction}}}}},{key:"_setGradientColors",value:function(e,t){t=t.slice(0);for(var a=s(100*(1/(t.length-1)))/100,o=0;1<t.length;)e.addColorStop(o,t.shift()),o+=a;e.addColorStop(1,t.shift())}},{key:"_limit",value:function(e,t,a){return n(l(e,a),t)}},{key:"_setClrMode",value:function(e){var t=this._opts;if(this._colorMode=t.valueColorModel,!this._REGEX.colorMode.test(this._colorMode)){var a=this._getClrInstance(e||t.value);this._colorMode=a.format,t.valueColorModel="auto"}}},{key:"_updateUI",value:function(e){!this._data._inPreRender&&(this._mustRender||this._data.rendered&&!this._domChanged)&&(this._render(),e&&this._setDimension())}},{key:"_updateSelectedColor",value:function(){this._selectedInstance=this._getClrInstance(this._colorInstance.getObject()),this._selectedInstance.initialColor=this._colorInstance.initialColor,this._opts.value=this._noFill?"transparent":this._colorInstance.getColor(this._colorMode,void 0,"auto"===this._opts.valueColorModel)}},{key:"_dragStartHandler",value:function(t){t.button||(this._onPickerDragged(t),this._trigger("dragstart",t),this._addEvents({drag:"mousemove touchmove",dragStop:"mouseup touchend"},e.$document))}},{key:"_dragHandler",value:function(e){this._onPickerDragged(e),this._trigger("drag",e),"touchmove"!==e.type&&e.preventDefault()}},{key:"_dragStopHandler",value:function(t){this._onPickerDragged(t),this._removeEvents("mousemove touchmove mouseup touchend",e.$document),this._trigger("dragstop",t)}},{key:"_display",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length?arguments[1]:void 0;(t||this.element)[0].style.display=e?"":"none"}},{key:"_animate",value:function(a,o,i,l){var n=this,s=function(){n._display("close"!==i),l&&l()};if(o&&e.animationHandler&&!t.isEmptyObject(o)){e.animationHandler({element:a,action:i,animation:o,callback:s})}else s()}},{key:"setFocus",value:function(e){var t=this;this._trigger("beforefocus",e)&&-1!==this.element.attr("tabindex")&&(clearTimeout(this._focusTimer),this._focusTimer=setTimeout(function(){t.element[0].focus()},100))}},{key:"_onOpen",value:function(e){this._opened=!0,this._opts.closeOnBodyClick&&this._bindBodyClick(),this.setFocus(e),this._addedByComponent=!0,this.element.attr("aria-hidden",!1),this._addedByComponent=!1,this._bindDocEvents(),this._trigger("open",e)}},{key:"open",value:function(e,t){var a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(this._floating&&this._trigger("beforeopen",t)){this._opened=!1;var o=this._opts;e&&this.setAttributes(e),this._setPosition(),this._widthSet||this._setDimension(),this._animate(this.element,!!a&&o.animation,"open",this._onOpen.bind(this,t))}}},{key:"_bindDocEvents",value:function(){this._addEvents({docKeydown:"keydown"},e.$document)}},{key:"_unBindDocEvents",value:function(){this._removeEvents("",e.$document)}},{key:"_docKeydownHandler",value:function(t){t.keyCode===e.keyCode.ESCAPE&&this.close(t)}},{key:"_onClose",value:function(e){var a=this._data;this._opened=this._lastPosition=!1,this._unBindDocEvents(),clearTimeout(this._focusTimer),a.dragged=!1,a.hasCallout&&this._display(!0,this._callout),a.closeButton&&t(a.closeButton.mainElement).removeClass("has-focus"),this.element.attr("aria-hidden",!0),this._trigger("close",e)}},{key:"_destroy",value:function(){this._removeEvents("",e.$document),this.element.removeClass(this._CLASSES.CONTAINER).removeAttr("style").empty(),clearTimeout(this._fieldChangeTimer),clearTimeout(this._focusTimer),clearTimeout(this._blurTimer)}},{key:"_trigger",value:function(e,a,o){if(!this._fromInit){var i=this._colorMode,l=this._selectedInstance,n=this._colorInstance;a=a&&a.preventDefault?a:void 0,o=o||{},o.value=o.color=this.getValue(),o.rgb=l.getColor(),o.opacity=l.getAlpha(),o.colorData=l.getObject(i),o.currentValue=n.getColor(i),o.currentRGB=n.getColor(),o.currentOpacity=n.getAlpha(),o.currentColorData=n.getObject(i),o.otherData={};var s=this._selectedPan;return s.length&&(o.otherData.colorPan=s,s=t(s[0]),s.attr("data-shade")&&(o.otherData.isShade=!0,o.otherData.baseColor=s.attr("data-base-color"),o.otherData.toneType=s.attr("data-tone-type"),o.otherData.tonePercent=s.attr("data-tone-percent")),o.otherData.theme=s.attr("data-theme")),this._dispatchEvent(e,a,o,void 0,!!a)}return!0}},{key:"getValue",value:function(){return this._opts.value}},{key:"setValue",value:function(e,t){this._setValue(e,t,null,!0)}},{key:"close",value:function(e){this._floating&&this._opened&&this._trigger("beforeclose",e)&&this._animate(this.element,this._opts.animation,"close",this._onClose.bind(this,e))}},{key:"_setAttribute",value:function(e,t){return"value"===e?void(this._domChanged=!0,this.setValue(t)):this._setAdvAttr(e,t)}},{key:"_addPalettes",value:function(e,t,a){var o=this,i=this._data;a=a||"palettes";var l=[],n="customColorLibraries"===a;e&&(e=this._toArr(e),e.forEach(function(e){e.isCustom=n;var t=o._getPaletteTemplateData(e);t&&l.push(t)}),this._addToObject(i[a],l,t),i.rendered&&this._updatePalettes(a))}},{key:"_colorPanEventHandler",value:function(e){var a=e.target,o=t(a);if(o.is(".".concat(this._CLASSES.COLORBOX))){var i=e.type,l="click"===i,n=this._getColorPanData(a);l&&this._setValue(a.style.backgroundColor,e),this._trigger("colorpan"+i,e,n),l&&this._data.closeOnSelect&&this.close(e)}}},{key:"_getPaletteTemplateData",value:function(e){if("object"===_typeof(e)){var t=e.name||e.heading;if(t&&!this._getPalette(t)){var a={heading:e.heading,name:t,className:e.className,id:e.id||this._getID(t),hasTones:e.hasTones,tones:e.tones,maxColorsCount:this._validateCount(e.maxColorsCount),isCustom:e.isCustom,paletteData:e};return a.colors=this._getPaletteColors(a,e.colors),this._spliceColors(a),a}}}},{key:"_getPaletteColors",value:function(e,t){var a=this,o=[];return t&&this._toArr(t).forEach(function(t){var i=t;("string"==typeof t||Array.isArray(t))&&(t={color:t});var l=a._getClrInstance(t.color);l.isValid()&&o.push({orgObject:i,theme:t.theme,rgb:l.getColor(),title:a._getTitle(t,l),paletteId:e.id,paletteName:e.name,tabindex:a._data.attrs.tabindex,tones:e.hasTones?a._getTones(l,t.tones||e.tones,t):void 0})}),o}},{key:"_spliceColors",value:function(e){var t=this._opts.paletteColumns,a=e.colors,o=e.colorChunks=[];if(a.length||e.isCustom){var l=e.maxColorsCount;if(l&&a.length>l){var n=l-a.length;a.splice(n),e.paletteData.colors.splice(n)}if(a=_toConsumableArray(a),e.isCustom){var s=e.addBtn=this._getAddBtnData(e);a.push(s)}if(t)for(var r=0;r<a.length;r+=t)o.push(a.slice(r,r+t));else o.push(a)}}},{key:"_addToObject",value:function(e,t,a){void 0===a?e.push.apply(e,_toConsumableArray(t)):e.splice.apply(e,[a,0].concat(_toConsumableArray(t)))}},{key:"_getPalette",value:function(e){var t=this._data,a=function(t){return t.name===e},o=e;return"string"==typeof e&&(o=t.palettes.find(a),!o&&t.customColorLibraries&&(o=t.customColorLibraries.find(a))),o}},{key:"_getColorPanData",value:function(e){return{colorpan:e,colorpanData:{color:this._getClrInstance(e.getAttribute("data-zcolor")).getColor(this._colorMode)}}}},{key:"_updateClrSelection",value:function(e){var t=this;e.forEach(function(e){e.selected=e.rgb===t._currentColor,e.tones&&t._updateClrSelection(e.tones)})}},{key:"_getThumbData",value:function(t){if(t){var a=t.thumbIconClassName,o=t.thumbSVGIconId,i;return(o||a)&&e._getIconInfo(a,o,"","",i={}),i}}},{key:"_getThumb",value:function(e){return t(e.querySelector("."+this._CLASSES.SLIDERTHUMB))}},{key:"_getBaseObj",value:function(e){return{ctype:e,isCE:this.isCE,rtl:this._opts.rtl,templateRender:!0,locale:this._opts.locale}}},{key:"name",get:function(){return"zcolorpickerbase"}},{key:"attrs",get:function(){return{value:"rgba(0,0,0,1)",valueColorModel:"auto",paletteColumns:10,isTitleHTMLEncoded:!1,title:"",closeButton:!1,closeIconClass:null,closeSVGIconId:null,closeOnSelect:!0,closeOnBodyClick:!0,position:"auto",forElement:null,displayType:"box",type:"popup",draggable:!1,appendTo:null,viewport:null,rtl:null,positionAlterable:null,locale:null}}},{key:"props",get:function(){return{offset:null,margin:null,closeIconClassName:null,labels:{close:"Close"},animation:null}}},{key:"CLASSES",get:function(){return{CONTAINER:"zcolorpicker",RTL:"h-rtl",FLIPY:"h-flipY",ICON:"zcolorpicker__icon",TEXT:"zcolorpicker__text",TITLEBAR:"zcolorpicker__titlebar",CLOSE:"zcolorpicker__close",PALETTE:"zcolorpicker__palette",WITHSHADES:"zcolorpicker__shades",COLORBOX:"zcolorpicker__colorpan",ACTIVE:"is-selected",DISABLED:"is-disabled",NUMBERFIELD:"zcolorpicker__numberfield",COLORFIELD:"zcolorpicker__colorfield",SLIDER:"zslider",SLIDERTHUMB:"zslider__thumb"}}},{key:"EVENTS",get:function(){return["change","select","pick","beforeopen","open","beforeclose","close","colorpanmouseover","colorpanmouseout","colorpanclick","beforefocus","focus","blur","dragstart","drag","dragstop"]}},{key:"_REGEX",get:function(){return{position:/^(bottom-right|bottom-left|top-right|top-left|top|bottom|left|right|center|auto|right-bottom|right-top|left-bottom|left-top)$/,colorMode:e.ColorUtil.REGEX.colorMode}}}]),o}(e.CoreComponent);e.registerComponent("ZColorPickerBase",p),function(e){var t=e.zcolorpickerbase.Templates;t.canvas=function(e){return ZT.html(tO33(),e.rtl?"zh-flipY":"")},t.palette=function(a){var o=a.colorChunks.length&&ZT.html(tO34(),a.id,a.isCustom,a.className||"",a.name,a.heading&&ZT.html(tO35(),a.heading),a.colorChunks.map(function(o){return a.hasTones?ZT.html(tO36(),o.map(function(e){return ZT.html(tO37(),t.colorpan(e),e.tones.map(function(e){return t.colorpan(e)}))})):ZT.html(tO38(),o.map(function(a){return a.addBtn?ZT.html(tO39(),e.zbutton.Templates.container(a)):t.colorpan(a)}))}));return o},t.colorpan=function(e){return ZT.html(tO40(),e.isShade,e.paletteName,e.selected?"is-selected":"",e.tabindex,e.toneType,e.theme,e.tonePercent,e.rgb,e.baseColor,e.rgb,e.hidden,e.selected,e.title)};var a=e.Templates.Utilities;t.slider=function(e){return ZT.html(tO41(),e.id,e.className||"",e.opacity?"zcolorpicker__transparentbg":"",t.canvas(e),e.thumbIcon?"":"zslider__circlethumb",e.left,e.thumbIcon&&a.icon(e.thumbIcon))}}(ZComponents);var m=e.keyCode,h=[m.HOME,m.PAGE_UP],g=[m.END,m.PAGE_DOWN],v=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_create",value:function(e){this._prevSKey="",this._bindEvents(e)}},{key:"_bindEvents",value:function(e){var t=this;this._addEvents({keyDown:"keydown",blur:"focusout",itemFocus:"click"},e);var a=this._opts,o=this.name,i=a.hoverClassName;a.handleHover&&e.on("mouseenter."+o,a.items,function(o){a.focusItemOnItemMouseover&&(t._mouseEntered=!0),t._mouseHoverHandler(o,!0),t._dispatchEvent("mouseenter",o,{item:i&&e.find("."+i)})}).on("mouseleave."+o,a.items,function(o){a.focusItemOnItemMouseover&&(t._mouseEntered=!1),t._dispatchEvent("mouseleave",o,{item:i&&e.find("."+i)}),t._mouseHoverHandler(o)})}},{key:"moveFocus",value:function(t){var a=t.keyCode===e.keyCode.ENTER||t.keyCode===e.keyCode.SPACE;if(a||this._opts.keyNavigation)return this._keyDownHandler(t)}},{key:"_mouseHoverHandler",value:function(e,a,o){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},l=t(e.target),n="keydown"===e.type,s=this._opts,r=this._opts.items;if(l=l.is(r)?l:l.closest(r),!!l.length){var d=this.element,c=n||s.focusItemOnItemMouseover,_=s.hoverClassName,u=s.focusClassName,p=n?this._getCurrItem(d,s):d.find("."+_);if(!p||!a||p[0]!==l[0]){a&&p&&!n&&p.removeClass(_);var m=!0;if(c&&(m=this["_"+(a?"":"un")+"focus"](l,s,e,i)),!1!==m&&a&&p&&p.removeClass((s.focusItemOnItemMouseover?_+" ":"")+(c?u:"")),(!n||!1!==m&&s.focusItemOnItemMouseover)&&l[(a?"add":"remove")+"Class"](_),this.element.data("prevHover",p),o){var h="onMouse"+(a?"Enter":"Leave");s[h]&&s[h](e,l)}}return!0}}},{key:"_itemFocusHandler",value:function(e){var a=this._opts,o=t(e.target),i=a.items,l=o.is(i)?o:o.closest(i);if(l&&l.length){var n=this.element.find("."+a.focusClassName);n.length&&this._unfocus(n,a,e),this._focus(l,a,e)}}},{key:"_keyDownHandler",value:function(e){var a=e.keyCode,o=this._opts,i=this.element,l={},n=t(e.target),s=n.closest(this._opts.inputSelectors).length,r=s&&n.is("input"),d=!0;if(!s||r){var c=i.find(o.items),_=o.keyNavigation,u=c.length,p=o.direction,v=(Object.keys(m).find(function(e){return m[e]===a})||"").replace("_","").toLowerCase(),y="down"===v,f="up"===v,k="right"===v,b="left"===v,C="horizontal"===p,D="vertical"===p,w=this._getCurrItem(i,o),S=!1,T=D?y:C&&w.length?k:y||k,I=D?f:C&&w.length?b:f||b,x;if(1<w.length&&(w=t(w[T?w.length-1:0])),!(r&&-1===["up","down","enter"].indexOf(v))){o.focusItemOnItemMouseover&&this._mouseEntered&&this._bindMouseMove(),(o.selectOnEnterKey&&"enter"===v||o.selectOnSpaceKey&&"space"===v)&&(this._enterKeyHandler&&this._enterKeyHandler(e,w),l.isEnterKey="enter"===v,l.isSpaceKey="space"===v,d=!1),l.key=v;var E=f||y||k||b;E&&(l["is"+v[0].toUpperCase()+v.slice(1)+"Key"]=!0);var O=e.metaKey||e.ctrlKey;if(!O&&(T||I)&&_){if(!w||!w.length)x=t(c[T?0:c.length-1]);else if("both"===p){var P=c.index(w),M=w[I?"prevAll":"nextAll"](o.items);x=this._gridNavigation&&this._gridNavigation(e,w,v,M,P,f,y,b,k)}else{var V=c.index(w);V+=T?1:-1,(0>V||V===u)&&(o.wrapAround?V=T?0:u-1:V+=T?-1:1),x=c[V]}}else if("escape"===v)l.isEscapeKey=!0;else if(_&&(0<=h.indexOf(a)||O&&I))x=c[0],S=!0;else if(_&&(0<=g.indexOf(a)||O&&T))x=c[u-1],S=!0;else{if("tab"===v)return this._blurHandler(e);_&&o.characterKeyFocus&&this._callSearch&&"enter"!==v&&"space"!==v&&(x=this._callSearch(e.key,e,w))}return x=t(x),x.length&&(o.scrollToView&&this._scrollToView(x,i,O&&I,O&&T),e.target=x,d=this._mouseHoverHandler(e,!0,!0)),l.item=w,l.nextItem=x,this._dispatchEvent("keydown",e,l),E&&this._dispatchEvent("arrowkeydown",e,l),!(_&&!r&&(this._isNonModKey(e)||S))&&d}}}},{key:"_bindMouseMove",value:function(){var e=this.element,a="."+this.name,o=this._opts;e.on("mousemove"+a,function(i){var l=t(i.target).closest(o.items);l&&l.length&&l.trigger("mouseenter"),e.off("mousemove"+a)})}},{key:"_focus",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts,a=2<arguments.length?arguments[2]:void 0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=t.focusClassName;if(i&&!e.hasClass(i))return o.item=e,!1!==this._dispatchEvent("beforefocusmove",a,o)&&(e.addClass(i+(!a&&t.focusItemOnItemMouseover?" "+t.hoverClassName:"")),this._dispatchEvent("focusmove",a,o),!0)}},{key:"_unfocus",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts,a=t.focusClassName;a&&e.hasClass(a)&&e.removeClass(a)}},{key:"focusItem",value:function(e,t){var a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];a&&this._opts.scrollToView&&this._scrollToView(e,this.element),this._focus(e,this._opts,t)}},{key:"_getCurrItem",value:function(e,t){var a=e.find(t.items),o=t.focusItemOnItemMouseover,i=o?"hover":"focus",l=a.filter("."+t[i+"ClassName"]);return!l.length&&o&&t.focusClassName&&(l=a.filter("."+t.focusClassName)),l}},{key:"_isNonModKey",value:function(t){return!t.ctrlKey&&!t.metaKey&&!t.shiftKey&&!t.altKey&&t.keyCode!==e.keyCode.ESCAPE}},{key:"_blurHandler",value:function(e){if(document.activeElement!==this.element[0]&&this._dispatchEvent("beforeblur",e)){var a=this.element,o=this._opts,i=o.hoverClassName,l=o.focusClassName,n=e&&e.relatedTarget;n&&t(n).closest(this.element).length||a.find((i?"."+i:"")+(i?",":"")+"."+l).removeClass(i+" "+l),this._dispatchEvent("blur",e)}}},{key:"_scrollToView",value:function(e,t,a,o){var i=this._opts.scrollableEle||(t.find(".zh-scroll_y").length?t.find(".zh-scroll_y"):t.find(".zh-overflowhidden").length?t.find(".zh-overflowhidden"):t),l=!e[0].previousElementSibling,s=!l&&!e[0].nextElementSibling;if(a=a||l,this.element.is(":visible")&&i[0].contains(e[0])){o=o||s;var r=a?0:o?i[0].scrollHeight:0;if(!a&&!o){var d=e.offset().top-i.offset().top,c=i[0].scrollTop;r=0>d?c+d:n(c,d+c+e.outerHeight(!0)-i.outerHeight())}i.scrollTop(r)}}},{key:"setAttribute",value:function(e,t){this._opts[e]=t}},{key:"destroy",value:function(){var e=this.name;this.element.off("."+e).removeData(e),this.element.removeData("prevHover"),this.element=void 0}},{key:"_callSearch",value:function(e,t,a){var o=!1,i=+new Date;return e=e.toLowerCase(),this._prevKTime&&700<i-this._prevKTime?(o=this._prevSKey===e,this._prevSKey=e):this._prevSKey+=e,this._prevKTime=i,this._itemSearch(o,t,a)}},{key:"_itemSearch",value:function(e,a,o){var i=this._opts,l=this.element.find(i.items);if(l=l.filter("[data-"+i.keyMatchAttribute+"^=\""+this._prevSKey+"\"]"),l.length){if(e){var n=l.toArray().indexOf(o[0]);return n+=1,n>=l.length&&(n=0),t(l[n])}return t(l[0])}}},{key:"name",get:function(){return"zkeyboardnavigation"}},{key:"props",get:function(){return{direction:"vertical",hoverClassName:"on-hover",focusClassName:"has-focus",items:"",wrapAround:!1,scrollToView:!0,handleHover:!0,selectOnEnterKey:!0,selectOnSpaceKey:!0,characterKeyFocus:!0,keyMatchAttribute:"label",focusItemOnItemMouseover:!0,keyNavigation:!0,inputSelectors:"input, textarea, div[contentEditable]"}}},{key:"EVENTS",get:function(){return["beforefocusmove","focusmove","mouseenter","mouseleave","keydown","arrowkeydown","blur"]}}]),o}(e.CoreComponent);e.registerComponent("ZKeyboardNavigation",v);var y=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_create",value:function(e,a){this._opts=t.extend(!0,{},this._opts,a.keyNavigationOptions||{}),_get(_getPrototypeOf(o.prototype),"_create",this).call(this,e,a)}},{key:"_bindEvents",value:function(e){_get(_getPrototypeOf(o.prototype),"_bindEvents",this).call(this,e),this._addEvents({mouseDown:"mousedown",mouseUp:"mouseup",keyUp:"keyup"},e)}},{key:"_keyUpHandler",value:function(e){e.shiftKey||this.element.removeClass("zh-userselectnone")}},{key:"_keyDownHandler",value:function(e){var a=e.keyCode,i=this.element,l=this._opts,n=this._getCurrItem(i,l),s=e.shiftKey,r=t(e.target),d=r.closest(this._opts.inputSelectors).length;if(!d)if(!this._shiftPressed&&s&&16===a){var c=i.find("."+l.selectedClassName),_=c.length;this._shiftPressed=_&&1===_?c:l.focusItemOnItemMouseover?this._lastSelItem:n;var u=window.getSelection();(!u.containsNode||u.containsNode(i[0],!0))&&u.removeAllRanges(),i.addClass("zh-userselectnone")}else s||(this._shiftPressed=void 0);return!d&&l.multiple&&(e.metaKey||e.ctrlKey)&&65===a?void(e.preventDefault(),this.selectAllItems(!0)):_get(_getPrototypeOf(o.prototype),"_keyDownHandler",this).call(this,e)}},{key:"_enterKeyHandler",value:function(e,t){if(t.hasClass(this._opts.hoverClassName)||t.hasClass(this._opts.focusClassName))return e.target=t,this._handleSelection(t,void 0,e),!1}},{key:"_mouseDownHandler",value:function(e){this._dispatchEvent("beforemousedown",e)&&(this._md=!0,this._mdy=e.pageY,this._mdx=e.pageX,this._mdEle=t(e.target).closest(this._opts.items),!e.shiftKey&&(this._shiftPressed=void 0),this.element.addClass("zh-userselectnone"),this._bindMouseDrag&&this._bindMouseDrag())}},{key:"_mouseMoveHandler",value:function(e){if(this._md){var a=t(e.target),o=this._opts,i=o.focusClassName,l=o.selectedClassName,n=a.closest(o.items);if(n.length){var s=n.hasClass(l);n[(s?"toggle":"add")+"Class"](l+" "+i)}e.preventDefault()}}},{key:"_mouseUpHandler",value:function(a){if(this._dispatchEvent("beforemouseup",a)){this.element.off("mousemove."+this.name),this._md=!1,3===a.which&&this._dispatchEvent("contextmenu",a);var o=t(a.target),i=this._opts,l=o.closest(i.items);if(!l.length)return;if(this._mdEle&&l[0]===this._mdEle[0]&&(this._mdEle=void 0),this._handleSelection(l,i,a),this._scrollToView(l,this.element),this._mdEle=this._mdy=this._mdx=void 0,!this._shiftPressed){this.element.removeClass("zh-userselectnone");var n=window.getSelection();if(e.Browser.isIE){var s=document.activeElement;t(s).closest(i.inputSelectors).length||n.removeAllRanges()}else(!n.containsNode||n.containsNode(this.element[0],!0))&&n.removeAllRanges()}}}},{key:"_handleSelection",value:function(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts,i=2<arguments.length?arguments[2]:void 0,l=3<arguments.length?arguments[3]:void 0,n=4<arguments.length?arguments[4]:void 0,s=5<arguments.length?arguments[5]:void 0,r=6<arguments.length?arguments[6]:void 0,d=o.selSelector;if(!d||t(i.target).closest(d).length){var c=this.element,_=o.focusClassName,u=o.selectedClassName;if(o.multiple&&o.selectOnFocus&&"keydown"!==i.type&&!(i.metaKey||i.ctrlKey||i.shiftKey)&&this._clearAll(i,a,!0),o.multiple&&"keydown"!==i.type){var p=o.allowDragToSelect&&this._mdEle||o.allowShiftSelection&&this._shiftPressed&&this._shiftPressed.hasClass(u);if(p)return this._selectMultipleItems(i,o,a,n)}var m=c.find("."+u).toArray();o.multiple||l||!m.length||m[0]===a[0]||this._deselect(t(m[0]),o,i,a);var h=i.keyCode===e.keyCode.DOWN,g="keydown"===i.type&&(n||h)?a.data("selectOnUp"):void 0,v=a.hasClass(u)&&(void 0===g||(n?!g:g)),y=(o.toggle||i.ctrlKey||i.metaKey||i.shiftKey)&&v&&!r&&(!this._shiftPressed||a[0]!==this._shiftPressed[0]),f=this._focus(s||a,o,i,{ahead:y?"deselect":"select"});!1!==f&&_&&c.find("."+_).not(s||a).removeClass(_+(o.focusItemOnItemMouseover?" "+o.hoverClassName:"")),y?this._deselect(a,o,i,a):!a.hasClass("is-selected")&&(i.shiftKey&&(!this._shiftPressed||!this._shiftPressed.hasClass(u))&&(this._shiftPressed=a),this._select(a,o,n,i)),this._dispatchEvent("change",i,{item:a})}}},{key:"_select",value:function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts,o=2<arguments.length?arguments[2]:void 0,i=3<arguments.length?arguments[3]:void 0,l=4<arguments.length?arguments[4]:void 0,n=a.selectedClassName;if(!t.hasClass(n)){var s={item:t};this._dispatchEvent("beforeselect",i,s)&&(a.selectOnFocus&&!l&&this._focus(t,a,i),t.addClass(n),this._lastSelItem=t,(o||!o&&(!i||"keydown"!==i.type||!i.shiftKey&&i.keyCode===e.keyCode.DOWN))&&t.data("selectOnUp",o),this._dispatchEvent("select",i,s))}}},{key:"_deselect",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts,a=2<arguments.length?arguments[2]:void 0,o=3<arguments.length?arguments[3]:void 0,i=t.selectedClassName;if(e.hasClass(i)){var l={item:e,relatedItem:o};this._dispatchEvent("beforedeselect",a,l)&&(e.removeClass(i),e.removeData("selectOnUp"),this._lastSelItem&&this._lastSelItem[0]===e[0]&&(this._lastSelItem=void 0),this._dispatchEvent("deselect",a,l))}}},{key:"selectItem",value:function(e,t){var a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],o=3<arguments.length?arguments[3]:void 0;a&&this._opts.scrollToView&&this._scrollToView(e,this.element),this._select(e,this._opts,void 0,t,o)}},{key:"deSelectItem",value:function(e,t){this._deselect(e,void 0,t)}},{key:"selectAllItems",value:function(e){this._changeAll(!1,!0);var a=this._opts,o=a.focusClassName;if(e&&o){var i=this.element.find(a.items);this.element.find("."+o).removeClass(o+(a.focusItemOnItemMouseover?" "+a.hoverClassName:"")),this._focus(t(i[i.length-1]),a)}}},{key:"deselectAllItems",value:function(){this._changeAll(!0)}},{key:"_changeAll",value:function(e,a){for(var o=this.element.find(this._opts.items),l=o.length,n=0;n<l;n++)this["_"+(e?"de":"")+"select"](t(o[n]),void 0,void 0,void 0,a)}},{key:"_mouseHoverHandler",value:function(e,a,i){var l=this._opts,n="keydown"===e.type&&l.selectOnFocus;if(_get(_getPrototypeOf(o.prototype),"_mouseHoverHandler",this).call(this,e,a,i,{ahead:n?t(e.target).hasClass(l.selectedClassName)?"deselect":"select":void 0}),n)return this._selectOnKeyNav(e,l)}},{key:"_getCurrItem",value:function(e,t){var a=e.find(t.items),o=t.focusItemOnItemMouseover,i={};return o&&(i=a.filter("."+t.hoverClassName)),i.length||(i=t.focusClassName&&a.filter("."+t.focusClassName),!i.length&&!o&&(i=a.filter("."+t.selectedClassName))),i}},{key:"setAttribute",value:function(e,t){if("keyNavigationOptions"===e)for(var a=["direction","wrapAround","characterKeyFocus"],o=a.length,l=0,n;l<o;l++)n=a[l],void 0!==t[n]&&(this._opts[n]=t[n]);this._opts[e]=t}},{key:"destroy",value:function(){this.element.removeClass("zh-userselectnone"),_get(_getPrototypeOf(o.prototype),"destroy",this).call(this)}},{key:"_selectMultipleItems",value:function(e,a,o,l){var n=this.element.find(a.items).toArray(),s=this._mdEle||this._shiftPressed,r=a.selectedClass,d=this.element.find("."+a.focusClassName),c,_;if(this._prevEle&&this._prevEle[0]===s[0]){var u=n.indexOf(s[0]),p=n.indexOf(this._lastFocused[0]),m=n.indexOf(o[0]),h=p<u&&m>u||p>u&&m<u,g=p>u&&m>u&&m<p;if(h||p<u&&m<u&&m>p||g){for(var v=h?p<u?p:u+1:g?m:p,y=h?p<u?u:p+1:g?p+1:m,f=v;f<y;f++)this._deselect(t(n[f]),a,e,o);c=u,_=m}else if(u===m)for(var k=p<u?p:u+1,b=p<u?u:p+1,C=k;C<b;C++)this._deselect(t(n[C]),a,e,o);else c=n.indexOf(s[0]),_=n.indexOf(o[0])}else c=n.indexOf(s[0]),_=n.indexOf(o[0]);var D=!1;if(c<_)n=n.splice(c,_-c+1),D=!0;else{var w=c;c=_,_=w,n=n.splice(c,_-c+1)}var S=n.filter(function(e){if(!t(e).hasClass(r))return e}),T=S.length;(this._mdEle&&this._movingUp||this._shiftPressed&&!D)&&(S=S.reverse());for(var I=0;I<T;I++)this._select(t(S[I]),a,l,e,!0);var x=t((T?S:n)[T?T-1:n.length-1]);x.length&&(d&&d.length&&this._unfocus(d,a,e),this._focus(x,a,e),this._lastFocused=x),T&&this._dispatchEvent("rangeselect",e,{selList:t(S)}),this._prevEle=s,this._dispatchEvent("change",e,{item:o})}},{key:"_bindMouseDrag",value:function(){var e=this.element,a=this._opts,o=this,i=a.keyNavigationOptions.direction,l="."+this.name,n,s;e.on("mousemove"+l,function(r){n=t(r.target),s=n.closest(a.items),s.length&&o._mdEle&&s[0]===o._mdEle[0]||(o._movingUp="vertical"===i&&r.pageY<=o._mdy||"horizontal"===i&&r.pageX<=o._mdx,e.off("mousemove"+l))})}},{key:"_selectOnKeyNav",value:function(a,o){var i=o.selectedClassName,l=t(a.target),n=o.items;l=l.is(n)?l:l.closest(n);var s=o.multiple&&(a.shiftKey||a.ctrlKey||a.metaKey),r=a.keyCode,d=r===e.keyCode.UP,c=!1;s||(this._clearAll(a,l),c=!0),!this._shiftPressed&&s&&(this._shiftPressed=l[d?"next":"prev"](o.items));var _=l.hasClass(i),u=this.element.data("prevHover"),p=u&&u.hasClass(i),m=p&&u.data("selectOnUp"),h=!_&&p&&m&&!d,g=!_&&p&&!m&&d,v;if(s&&(_&&p||h||g)){if(m){if(d)return!s;v=l,l=u}else{if(!d)return!s;v=l,l=u}(h||g)&&(this._handleSelection(l,o,a,s,d,v,c),l=v)}return this._handleSelection(l,o,a,s,d,v,c),!s}},{key:"_clearAll",value:function(e,a,o){var l=this._opts,n=this.element.find("."+l.selectedClassName).toArray(),s=n.indexOf(a[0]);!o&&-1<s&&n.splice(s,1);var r=n?n.length:0;if(r){var d={list:n,item:a};if(this._dispatchEvent("beforereset",e,d)){for(var c=0,_;c<r;c++)_=t(n[c]),this._deselect(_,l,e,a);this._dispatchEvent("reset",e,d)}}}},{key:"name",get:function(){return"zselectable"}},{key:"props",get:function(){return{multiple:!1,selectedClassName:"is-selected",selectOnFocus:!1,selectOnEnterKey:!0,selectOnSpaceKey:!0,allowDragToSelect:!0,allowShiftSelection:!0,keyNavigation:!0,keyNavigationOptions:{direction:"vertical",wrapAround:!1,characterKeyFocus:!0}}}},{key:"EVENTS",get:function(){return["beforeselect","select","beforedeselect","deselect","contextmenu","reset","beforereset","change"]}}]),o}(e.ZKeyboardNavigation);e.registerComponent("ZSelectable",e.ZKeyboardNavigation,y);var f=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(e,t){this._fromInit=!0,this._useParent=!1,this._elementId=e[0].id||this._getID(),this._listID=t.menuId||this._elementId+"-listbox",this._selected=[],["disabled","multiple","placeholder"].forEach(function(a){t[a]=t[a]||e[0][a]}),t.multiple&&this._initMultiple(),this._initDS(),this._setInitial(),this._savePrev()}},{key:"_savePrev",value:function(){this._lastValues=this._opts.value}},{key:"_getPrev",value:function(){return this._lastValues}},{key:"_createListBox",value:function(){var t=this._getListSettings(),a=this._opts.depCompClassNames.dropdownlist,o=a.toLowerCase(),i=e["create"+a](t),l=this.listInstance=e[o](i);this.ajaxSource=l.ajaxSource,this.staticData=l.staticData,this._listbox=l.getElement(),this._bindListEvents()}},{key:"_setListBoxAttrs",value:function(e){var t=this.listInstance;e=e||this._getListSettings(),t.setAttributes(e),this.ajaxSource=t.ajaxSource,this.staticData=t.staticData}},{key:"_preRender",value:function(){var e=this._opts,t=this._data;(!this._data.rendered||this._domChanged)&&this._onAttrChange(t,e);var a=t.attrs;return a["aria-expanded"]=this._opened,this._setValueData(e,t),this._data}},{key:"_onAttrChange",value:function(t,a){var o=this.element;t.alwaysSetAttrs=!0,t.clearButton=a.clearButton,t.disabled=a.disabled,t.multiple=a.multiple,t.placeholder=a.placeholder||this._getI18NText("placeholder"),t.isCustom="custom"===a.contentType,t.hasText=t.hasIcon=!1,t.isCustom||(t.hasText=-1<a.contentType.indexOf("text"),t.hasIcon=-1<a.contentType.indexOf("image")),t.width=this._getWidth(a.width),t.tabindex=t.disabled?null:a.tabindex||o.attr("tabindex")||0,t.attrs={style:t.width?"width:"+t.width:void 0,title:o.attr("title"),"aria-disabled":a.disabled,"aria-haspopup":"listbox","aria-owns":this._listID,"aria-required":!1,id:this._elementId+"-container",role:this.ARIA_ROLES.CONTAINER,tabindex:t.tabindex},this._opts.multiple&&(t.attrs["aria-multiselectable"]=this._opts.multiple),e._getIconInfo(a.arrowIconClassName||a.arrowIconClass,a.arrowSVGIconId,"#zc__svg--downarrow zselectbox__arrow","zselectbox__icon zselectbox__arrowicon",t.arrow={})}},{key:"_setValueData",value:function(e,t){var a=this._selected;t.label=t.icon=t.noSelection=t.innerHTML=null,t.clearButton&&this._setClrBtnData(e,t),a.length?this._setContentData(a,e,t):t.noSelection=!0}},{key:"_setContentData",value:function(e,t,a){if(t.multiple)a.label=this._getLabelForMultiple(e);else{var o=this._getData(e[0]);a.isCustom?a.innerHTML=this._getCustomContent(o,t.template||o.zinnerHTML||o.innerHTML):this._setIconTextData(o,a),a.attrs["aria-activedescendant"]=o.zitemid}}},{key:"_setIconTextData",value:function(t,a){a.hasText&&(a.label=this._getRenderText(t)),a.hasIcon&&(t.image?a.image=t.image:e._getIconInfo(this._getProp(t,"iconClassName"),this._getProp(t,"SVGIconId"),null,this._CLASSES.ICON,a.icon={}))}},{key:"_getRenderText",value:function(e){return this._getLabel(e)}},{key:"_getLabel",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return this._getProp(e,"label",t)}},{key:"_postRender",value:function(){this._storeRef(),this._createListBox(),this._fromInit=!1,this._trigger("init")}},{key:"_storeRef",value:function(){this._data.clearButton&&this._storeClrBtn()}},{key:"_postEachRender",value:function(){this._domChanged&&this._storeRef(),this._setTitle(),this._setClassName()}},{key:"_setClassName",value:function(){var e=this._opts,t=this._CLASSES,a=t.CONTAINER+" "+(this.element.attr("class")||"")+" "+(e.className||e.zclassName||"");if("image"===e.contentType?a+=" "+t.ICONONLY:"image-text"===e.contentType&&(a+=" "+t.ICONTEXT),e.rtl&&(a+=" zh-rtl"),e.disabled)a+=" "+t.DISABLED;else if(this._isFocussed()&&(a+=" "+t.FOCUS,this._opened||this._active)){var o=this._listbox&&this._listbox.data("direction");a+=" "+t.ACTIVE+" "+(o&&(0===o.indexOf("top")?t.DROPUP:t.DROPDOWN))}this._data.clearButton&&(a+=" zselectbox--withclear",this._hideClrBtn()),this._data.className=a}},{key:"_isFocussed",value:function(){var e=document.activeElement;if(e)return e=t(e),e[0]===this.container[0]||this._opened&&this.listInstance.isFocussed()||this.container.find(e).length}},{key:"_setTitle",value:function(){var e=this._data,t=this._opts,a="";if(!e.noSelection&&!e.isCustom){var o=this.container[0].querySelector("."+this._CLASSES.TEXT);("image"===t.contentType||o&&o.clientWidth<o.scrollWidth)&&(a=this._opts.multiple?e.label:this._getLabel(this._getData(this._selected[0]),!1))}this.container[0].title=a}},{key:"_isNotNull",value:function(e){return _get(_getPrototypeOf(o.prototype),"_isNotNull",this).call(this,e)&&(!!this._opts.considerEmptySpacedValue||!/^\s*$/.test(e))}},{key:"_getWidth",value:function(e){if(e=e||this.element[0].style.width,e)return isNaN(e)?e:e+"px"}},{key:"_getListSettings",value:function(){var e=this,a=this._opts,o=a.search,i=a.dropdownList,l=i.checkedIcon;this._isCheckBoxType=l=l||a.multiple&&!this._isNotNull(a.checkedIcon);var n=_objectSpread({},a.dataMapping),s={id:this._listID,multiple:a.multiple,selectionLimit:a.selectionLimit,forElement:this.container,rtl:a.rtl,search:o,dataMapping:n,moreResultsAction:o.moreResultsAction,showNoResultsMessage:o.showNoResultsMessage,searchFieldOptions:i.searchFieldOptions||{}};return t.extend(s,i),void 0===s.focusSelectedItemOnOpen&&(s.focusSelectedItemOnOpen=!a.multiple),s.className=(s.className||"")+" "+this._CLASSES.MENU.CLASSNAME,s.contentType=s.contentType||a.contentType,s.checkedIcon=l,s.template=s.template||a.template,s.position=s.position||s.direction,s.positionAlterable=s.positionAlterable||"auto"===s.position&&"flipsidefit",(this._fromInit||this._resetValue||!this._dsInited)&&(s.value=this._getReselectValue()),["showSearchField","filterByCSSSelector","lazyLoading","viewPerPage","sort","sortBy","sortOrder","customSorter","cacheData","isResponseFiltered","serverSearch","customSearch","messages"].forEach(function(e){return s[e]=a[e]}),["itemClick","itemHover","itemFocus","beforeUpdate","update","noResults","beforeSearch","searcherror","searchsuccess","change","select","deselect","beforeSelect","beforeDeselect","input"].forEach(function(t){return s[t.toLowerCase()]=e["_"+t+"Handler"].bind(e)}),["BeforeOpen","BeforeClose","Open","Close","BeforeKeyDown"].forEach(function(t){return s[t.toLowerCase()]=e["_list"+t+"Handler"].bind(e)}),s.beforefocus=function(t){e._opts.showSearchField||(t.preventDefault(),e.container.focus())},n.text=n.label,n.groupLabel=n.optgroupLabel,n.label=n.optgroupLabel=null,this.ajaxSource||(n.value="zitemid"),s.focusFirstItemOnOpen=s.search.focusFirstResult,this._dsInited||(t.extend(!0,s,this._listDSAPI),this._dsInited=!0),s}},{key:"_inputHandler",value:function(e,t){e=e.originalEvent,this._trigger("input",e,t)}},{key:"_searcherrorHandler",value:function(e,t){e=e.originalEvent,this._trigger("searcherror",e,t)}},{key:"_searchsuccessHandler",value:function(e,t){e=e.originalEvent,this.staticData&&(this._dataFetched=!0,this._updateData(t.results,!0)),this._trigger("searchsuccess",e,t)}},{key:"_beforeSearchHandler",value:function(e,t){return e=e.originalEvent,this._trigger("beforesearch",e,t)}},{key:"_noResultsHandler",value:function(e,t){return e=e.originalEvent,this._trigger("noresults",e,t)}},{key:"_beforeUpdateHandler",value:function(e,t){e=e.originalEvent,this._trigger("beforedropdownlistupdate",e,t)}},{key:"_updateHandler",value:function(e,t){e=e.originalEvent,this._trigger("dropdownlistupdate",e,t)}},{key:"_bindListEvents",value:function(){this._addEvents({listBlur:"focusout"},this._listbox)}},{key:"_listBlurHandler",value:function(){this._blurHandler()}},{key:"_listBeforeCloseHandler",value:function(e){return e=e.originalEvent,this._isFocussed()&&this._setFocus(!1,!0),this._trigger("beforedropdownlistclose",e)}},{key:"_listBeforeOpenHandler",value:function(e){if(e=e.originalEvent,this.listInstance.setAttribute("minWidth",this.container[0].offsetWidth),!this._opened)return this._trigger("beforedropdownlistopen",e)}},{key:"_listBeforeKeyDownHandler",value:function(t){var a=t.originalEvent;a&&a.keyCode===e.keyCode.TAB&&a.preventDefault()}},{key:"search",value:function(e,t){t.searchQuery=e,this.listInstance.open(t)}},{key:"_listCloseHandler",value:function(e){e=e.originalEvent,this._opened=!1,this._setClassName(),this._setExpandAttr(),this._trigger("dropdownlistclose",e)}},{key:"_focusList",value:function(){var e=this;clearTimeout(this._focusListTimer),this._focusListTimer=setTimeout(function(){e.listInstance.setFocus()},100)}},{key:"_listOpenHandler",value:function(e){e=e.originalEvent;var t=this._opened;this._opened=!0,this._setClassName(),this._focusList(),this._setExpandAttr(),t||this._trigger("dropdownlistopen",e)}},{key:"_setExpandAttr",value:function(){this._opened?this.container.attr("aria-expanded",this._opened):this.container.removeAttr("aria-expanded")}},{key:"_getSelectionFromDS",value:function(){var e=this._dataSource.options,t=this._opts,a=function(e){return e.selected};return t.multiple?e.filter(a):e.find(a)}},{key:"_isOptionSelectable",value:function(e){return(this._opts.allowDisabledOptionsForSelection||!e.disabled)&&(this._opts.allowHiddenOptionsForSelection||!e.hidden)&&!e.separator}},{key:"_setInitial",value:function(){var e=this,t=this._opts,a=this._isNotNull(t.value)?t.value:t.selectedValue;if(this._isNull(a)){var o=this._dataSource.options;if(o.length){var i=t.selectedIndex;null===i?(a=this._getSelectionFromDS(),!t.multiple&&!a&&(a=o.find(function(t){return e._isOptionSelectable(t)}))):-1<parseInt(i)&&(a=this._getDataAt(i))}}this.isCE||(this.element[0].selectedIndex=-1),a=this._toArr(a),a.length&&(t.multiple?t.selectionLimit&&(a=a.splice(-1*t.selectionLimit)):a=[a[0]]),this._allowTagCreation=!0,a.map(function(t){t=e._getSelectableOption(t),t&&(e._selected.push(t),e._addedByComponent=!0,t.selected=!0,e._addedByComponent=!1)}),this._allowTagCreation=!1,this._updateValues()}},{key:"_getDataAt",value:function(e){var t=this;return this._toArr(e).map(function(e){return t._dataSource.options[e]})}},{key:"_initDS",value:function(){if(this.ajaxSource=void 0,!this._dsInited){var e=this._opts,t=this._initialDS=this._getDataSource(),a=e.dataSource,o=e.options;this._dataFetched=!0,this.ajaxSource=this._isAjaxSource(e.dataSource),Array.isArray(o)&&(o=JSON.parse(JSON.stringify(o)),t=t.concat(o)),a&&a.URL&&(this._dataFetched=!1),this._updateData(t)}}},{key:"_updateData",value:function(e,t){this._isGrouped=!1;var a=this._dataSource=this._splitDS(e),o=a.header,i=a.footer;t&&(o=this._listDSAPI.headerItems,i=this._listDSAPI.footerItems),this._listDSAPI={items:a.body,headerItems:o,footerItems:i,dataSource:this._opts.dataSource},this._updateLocalDS()}},{key:"_getListType",value:function(){return this._opts.dropdownList.contentType||this._opts.contentType}},{key:"_getDatas",value:function(e){var t=this;return e.map(function(e){return t._getData(e)})}},{key:"_getData",value:function(e){if(!e.optData){var t=e.getAttribute("data-zitemid");e.optData=this._dataSource.options.find(function(e){return e.zitemid===t})}return e.optData}},{key:"_genTagData",value:function(a,o){var i=this;return a.map(function(a){var l=e._getOpts(a);l.id=a.id;var n,s;if(l.separator||(a.tagName.toLowerCase()===i._SELECTORS.OPTGROUP?(n=!0,s=a.label):(s=a.textContent.trim()||a.label||"",l.selected=l.selected||a.selected),l.disabled=l.disabled||a.disabled,l.label=i._isNotNull(l.label)?l.label:s),i._setProp(l,"label",l.label),i._setProp(l,"value",a.value),n&&i._setProp(l,"optgroupLabel",l.label),l.className=l.className||a.className,l.hidden=a.hasAttribute("hidden"),l.title=a.getAttribute("title"),l.style=a.getAttribute("style"),!l.zitemid){var r;r=l.id?i.name+"-"+i._listID+"-option-"+l.id:i._getID(null,i._listID+"-option"),l.zitemid=r}if(i._mapReqData(l,n,o),n){var d=i._getValidSubOptions(t(a));(!i.isCE||d[0]._initialized)&&(l.options=i._genTagData(d,l))}return l.zpopulated=!0,i._addedByComponent=!0,i._updateOptionAttrs(a,l),i._addedByComponent=!1,i.isCE&&!i._opts.isLyteComponent&&a.saveParentIns(i.element),a.optData=l,l})}},{key:"_getItemId",value:function(e){return _get(_getPrototypeOf(o.prototype),"_getItemId",this).call(this,e,this._listID)}},{key:"_bindEvents",value:function(){this._addEvents({focus:"focusin",containerBlur:"focusout",keyDown:"keydown",click:"click"}),this._addEvents({mouseDown:"mousedown"},this._arrowTarget),this._handleFocus(this.container)}},{key:"_clickHandler",value:function(){this._opened&&this._focusList()}},{key:"_focusHandler",value:function(e){this._setClassName(),this._trigger("focus",e)}},{key:"_keyDownHandler",value:function(t){var a=this._opts;if(!a.disabled){if(this._opened)return this.listInstance.handleKeyCode(t);var o=e.keyCode,i=t.keyCode;switch(i){case o.SPACE:return this._open(t),void t.preventDefault();case o.ENTER:return void this._open(t);case o.DOWN:case o.UP:return this._open(),void t.preventDefault();default:this._isAlphaNumericKey(t)&&(a.showSearchField?i!==o.DELETE&&i!==o.BACKSPACE&&this.search(String.fromCharCode(i),{event:t,updateField:!1}):a.selectOnCharPress&&this._selectItemOnKeydown(t));}}}},{key:"_mouseDownHandler",value:function(e){this._opts.disabled||e.button||(this[this._opened?"_close":"_open"](e,!0),e.preventDefault())}},{key:"_containerBlurHandler",value:function(e){this._blurHandler(e)}},{key:"_blurHandler",value:function(e){clearTimeout(this._focusoutTimer),this._focusoutTimer=setTimeout(this._afterBlur.bind(this,e))}},{key:"_afterBlur",value:function(e){this.container&&!this._isFocussed()&&(this._close(e),this._setClassName(),this._trigger("blur",e))}},{key:"_itemClickHandler",value:function(e){var t=e.detail;e=e.originalEvent;var a=t.item,o=t.itemData;t={menuitem:a,optionData:o},(o.isHeader||o.isFooter)&&this.isCE&&this._trigger("addoptionclick",e,t),this._trigger("optionclick",e,t)}},{key:"_beforeSelectHandler",value:function(e,t){var a=e.detail;e=e.originalEvent;var o=a.itemData,i=t?"select":"deselect";return a={optionData:o,menuitem:a.item},this._trigger("before"+i,e,a)}},{key:"_beforeDeselectHandler",value:function(e){return this._beforeSelectHandler(e,!1)}},{key:"_selectHandler",value:function(e,t){var a=e.detail;e=e.originalEvent;var o=a.itemData,i=t?"select":"deselect";return a={optionData:o,menuitem:a.item},this._setValueFromHandler(o,e,t),this._trigger(i,e,a)}},{key:"_changeHandler",value:function(e){var t=e.detail;e=e.originalEvent,this._updateView();var a=t.itemData;return t={optionData:a,menuitem:t.item,previousValue:this._getPrev()},this._savePrev(),this._trigger("change",e,t)}},{key:"_deselectHandler",value:function(e){return this._selectHandler(e,!1)}},{key:"_setValueFromHandler",value:function(e,t,a){return this[a?"_selectOption":"_deselectOption"](e,t)}},{key:"_itemHoverHandler",value:function(e){var t=e.detail;e=e.originalEvent;var a=t.itemData;return this._trigger("optionhover",e,{item:t.item,optionData:a})}},{key:"_itemFocusHandler",value:function(){}},{key:"_getOptionForData",value:function(e,t){var a=!0;if(this._dataFetched){var o=this._getMatchData(e);o?e=o:a=!1}var i=this._getOptionByZItemId(this._getItemId(e));return!i&&this._allowTagCreation&&(a?i=this._addOptionTag(e):this._opts.acceptNewValues&&(i=this._acceptNewValues(e,t))),i}},{key:"_getOptionByZItemId",value:function(e){return this.element.find("[data-zitemid=\""+e+"\"]")[0]}},{key:"_getMatchData",value:function(e){var t=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._dataSource.options,o="value";if("object"===_typeof(e))for(var l=["zitemid","id"],n=0;n<l.length;n++){var s=l[n],r=this._getProp(e,s);if(this._isNotNull(r)){o=s,e=r;break}}else e+="";return a.find(function(a){var i=t._getProp(a,o)+""===e;return i})}},{key:"_getValidSubOptions",value:function(e,t){var a=this._SELECTORS,o=[a.OPTION];return t&&o.push(a.OPTGROUP),this.isCE&&(o.push.apply(o,[a.OPTIONSEPARATOR,a.ADDOPTION]),e.is(this.element)&&o.push.apply(o,[a.OPTIONSHEADER,a.OPTIONSFOOTER,a.OPTIONSBODY])),e.children(o.join(",")).toArray()}},{key:"_getDataSource",value:function(){var e=this,a=this._getValidSubOptions(this.element,!0);if(this.isCE){var o=this._SELECTORS,i=[],l=new RegExp("(".concat(o.OPTIONSHEADER,"|").concat(o.OPTIONSFOOTER,"|").concat(o.OPTIONSBODY,")"),"i");if(a.forEach(function(a){l.test(a.tagName)?i.push.apply(i,_toConsumableArray(e._getValidSubOptions(t(a),!0))):i.push(a)}),!i.length||!i[0]._initialized)return[];a=i}return this._genTagData(a.filter(function(e){return!e.getAttribute("data-ztemp")}))}},{key:"_splitDS",value:function(e){var t=this,a={body:[],header:[],footer:[]};return e.forEach(function(e){e=t._getCompleteData(e),e.isFooter?a.footer.push(e):e.isHeader?a.header.push(e):(a.body.push(e),e.options&&(t._isGrouped=!0))}),a}},{key:"_dataModifyHandler",value:function(){this._updateLocalDS(),this._setListBoxAttrs(_objectSpread({},this._listDSAPI,{},{value:this._getValueToSet(this._selected)})),this._render()}},{key:"_getReselectValue",value:function(){return this._getValueToSet(this.getValue(!0))}},{key:"_updateLocalDS",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._dataSource,a=t.options=[];t.body.forEach(function(t){t.options?(a.push.apply(a,_toConsumableArray(t.options)),e._isGrouped=!0):a.push(t)}),this._dataSource=t,this._listDSAPI.dataStructure=this._isGrouped?"nested":"flat"}},{key:"_selectOption",value:function(e,t){this._allowTagCreation=!0;var a=this._getSelectableOption(e,t);this._allowTagCreation=!1;var o=this._opts;this._addedByComponent=!0,o.multiple||(this._selected=[]),a.selected=!0,this._selected.push(a),this._addedByComponent=!1,this._updateValues()}},{key:"_deselectOption",value:function(e){var t=this._getMatchedOptions(e)[0];if(this._selected.length){if(!t){var a=this._getItemId(e);t=this._selected.find(function(e){return e.getAttribute("data-zitemid")===a})}if(t){var o=this._selected.indexOf(t);this._addedByComponent=!0,t.selected=!1,this._addedByComponent=!1,-1!==o&&this._selected.splice(o,1)}}this._updateValues()}},{key:"_updateValues",value:function(){var e=this,t=this._opts;if(this._selected.length){t.selectedValue=t.value=[],t.selectedIndex=[];var a=this._getDatas(this._selected);this._selected.forEach(function(o,i){var l=e._getProp(a[i],"value");t.value.push(l),t.selectedIndex.push(e._dataSource.options.indexOf(a[i]))}),t.multiple||(t.value=t.selectedValue=t.value[0],t.selectedIndex=t.selectedIndex[0])}else t.value=t.selectedValue=t.multiple?[]:"",this._addedByComponent=!0,t.selectedIndex=this.element[0].selectedIndex=-1,this._addedByComponent=!1;this._updateView(!0)}},{key:"_updateView",value:function(e){clearTimeout(this._renderTimer),!this._data.rendered||this._skipRender||this._domChanged||(e?this._renderTimer=setTimeout(this._render.bind(this)):this._render())}},{key:"_trigger",value:function(e,t,a){if(!this._fromInit){a=a||{},a.dropdownList=this.getDropdownList(),a.selectedValue=a.value=this._opts.value||"",a.selectedIndex=this._opts.selectedIndex;var o=a.optionData;return o&&(a.optionData=o=_objectSpread({},o),o.element=this._getOptionByZItemId(o.zitemid)),this._dispatchEvent(e,t,a,void 0,!!t)}return!0}},{key:"_getMatchedOptions",value:function(e){var t=this,a=this._toArr(e,!0).map(function(e){return t._getMatchedOption(e)});return this._removeNulls(a)}},{key:"_getValidVal",value:function(e){return e instanceof t&&(e=e[0]),e}},{key:"_getMatchedOption",value:function(e,t){if(e=this._getValidVal(e),this._isNotNull(e))return e.nodeType?this._contains(e)&&e:this._getOptionForData(e,t)}},{key:"_getMatchDataForUpdate",value:function(e,t,a){if(e=this._getValidVal(e),this._isNotNull(e))return e.nodeType?e.optData:this._getMatchData(e,a||this._dataSource[t?"body":"options"])}},{key:"_contains",value:function(e){return this.element[0].contains(e)}},{key:"_isSelected",value:function(e){return-1!==this._selected.indexOf(e)}},{key:"_setValue",value:function(e,t){this.listInstance.setValue(this._getValueToSet(e,t&&t.event),t)}},{key:"_getValueToSet",value:function(e,t){var a=this,o=[];return e=this._toArr(e),e.forEach(function(e){a._allowTagCreation=!0;var i=a._getSelectableOption(e,t);a._allowTagCreation=!1,i&&o.push(i.optData)}),o}},{key:"_desetValue",value:function(e,t){e=this._toArr(e);for(var a=[],o=0,l;o<e.length;o++)l=this._getSelectableOption(e[o],t),l&&this._isSelected(l)&&a.push(l.optData);this.listInstance.deselect(a,t)}},{key:"_getSelectableOption",value:function(e,t){var a=this._getMatchedOption(e,t);if(a){var o=a.optData;return o.selectable&&this._isOptionSelectable(o)&&a}}},{key:"_addOptionTag",value:function(e){e=this._getCompleteData(e);var a=t("<"+this._SELECTORS.OPTION+"/>").attr({selected:e.selected,id:e.id,value:this._getProp(e,"value")})[0];return this._updateOptionAttrs(a,e,!0),a.optData=e,this.isCE?this._appendTag(a):this.element.append(a),a}},{key:"_updateOptionAttrs",value:function(e,a,o){this._addedByComponent=!0;var i={"data-zitemid":a.zitemid};o&&(i["data-ztemp"]=!0),a.isHeader&&(i["data-is-header"]=!0),a.isFooter&&(i["data-is-footer"]=!0),t(e).attr(i),this._addedByComponent=!1}},{key:"_getCompleteData",value:function(e,t,a){var o=this;if(e.nodeType)return this._genTagData([e],a)[0];if(/(number|string)/.test(_typeof(e))){var i={};this._setProp(i,"label",e),e=i}return this._mapReqData(e,t,a),e.options&&(e.options=e.options.map(function(t){return o._getCompleteData(t,!1,e)})),e}},{key:"_mapReqData",value:function(e,t,a){var o=e,i=this._getListType();o.zitemid=this._getItemId(e);var l=this._getProp(e,"label");l=this._isNotNull(l)?l+"":"";var n=this._getProp(e,"value");n=this._isNotNull(n)?n+"":l,this._setProp(e,"label",l),this._setProp(e,"value",n);var s=Object.keys(e);return-1===s.indexOf("label")&&(e.label=l),o.selectable=!1,(o.isHeader||o.isFooter)&&(o.custom=!0),a?(o.groupName=this._getProp(a,"value"),o.hidden=a.hidden||e.hidden,o.disabled=a.disabled||e.disabled):(o.options||t)&&(o.options=o.options||[]),o.isOptGroup||o.separator||o.isHeader||o.isFooter||(o.title=e.title,void 0===o.title&&(o.title="image"===i?o.label:void 0),o.selectable=!0,o.selected=e.selected),o}},{key:"_close",value:function(e){this.listInstance.close(e)}},{key:"_open",value:function(e){this.search("",{event:e,updateField:!1})}},{key:"_setFocusFn",value:function(e){!e&&this._opened?this._focusList():this.container.focus()}},{key:"_setFocus",value:function(e,t){this._trigger("beforefocus")&&this._setFocusFn(t)}},{key:"_selectItemOnKeydown",value:function(e){var t=this,a=this._opts;if(this.staticData&&!a.multiple){var o=a.selectedIndex;a.sortOptions?this.listInstance.DSInstance.fetch(function(a){if(-1<o){var i=t._dataSource.options[o].zitemid;a.find(function(e,t){if(e.zitemid===i)return o=t,!0})}t._selectNextMatchingItem(e,a,o)}):this._selectNextMatchingItem(e,this._dataSource.options,o)}}},{key:"_selectNextMatchingItem",value:function(e,t,a){var o=this;if(t.length){var i=a+1,l=e.key,n=new Date().getTime();if(this._prevKey){var s=n-this._prevTimeStamp;300>s&&this._prevKey!==l&&(l=this._prevKey+l,i--)}if(this._prevTimeStamp=n,this._prevKey=l,0<=i){var r=function e(a,i){for(var l=a,n;l<i;l++)if(n=t[l],!n.hidden&&!n.disabled&&o._getProp(n,"label").match(d))return n;return a&&e(0,a)},d=this._getMatchingRegex(l,{criteria:"startswith",caseSensitive:!1}),c=r(i,t.length);c&&this._setValue(c)}}}},{key:"_setAttribute",value:function(e,t){this._addedByComponent=!0,"selectedIndex"===e?this._setAttribute("value",this._getDataAt(t)):"value"===e||"selectedValue"===e?(this._domChanged=!0,this.setValue(t,{clearOtherValues:!0})):this._setAdvAttribute.apply(this,arguments),this._addedByComponent=!1}},{key:"setFocus",value:function(){this._opts.disabled||this._setFocus(!0)}},{key:"close",value:function(){this._close()}},{key:"open",value:function(){this._opts.disabled||(this.setFocus(),this._open())}},{key:"setValue",value:function(e,t){this._setValue(e,t)}},{key:"deselectAllOptions",value:function(e){this.listInstance.deselectAll(e)}},{key:"deselectOption",value:function(){this._desetValue.apply(this,arguments)}},{key:"getData",value:function(e){return this._getDatas(e)}},{key:"getValue",value:function(e){return e?this.getData(this._selected):this._opts.value}},{key:"getOptions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"body",t=this._dataSource;return"header"===e?t.header:"footer"===e?t.footer:"body"===e?t.body:t.header.concat(t.body).concat(t.footer)}},{key:"refresh",value:function(){this._dsInited=!1,this._buildData()}},{key:"_buildData",value:function(){var e=this,t=!this._dsInited;if(this._initDS(),this._setListBoxAttrs(),t){var a=[];this._selected.forEach(function(t){var o=e._getOptionByZItemId(t.getAttribute("data-zitemid"));o&&a.push(o)}),this._selected=a}this._render(),this._domChanged=this._resetValue=!1}},{key:"clearCache",value:function(){this.listInstance.clearCache()}},{key:"getDropdownList",value:function(){return this._listbox[0]}},{key:"_destroy",value:function(){clearTimeout(this._renderTimer),clearTimeout(this._focusoutTimer),clearTimeout(this._focusListTimer),this.listInstance.destroy(),this._listbox.remove(),this.element.find("[data-ztemp]").remove(),this._removeEvents("",this._arrowTarget)}},{key:"_initMultiple",value:function(){var e=this._opts;this.element[0].multiple=!0;var t=e.selectedIndex;isNaN(parseInt(t))||(e.selectedIndex=(t+"").split(","));var a=this._isNotNull(e.value)?e.value:e.selectedValue;"string"==typeof a&&(e.value=a.split(e.delimiter)),this._data.hasText=!0}},{key:"_getLabelForMultiple",value:function(e){var t=this;if(!this.ajaxSource){var a=this._dataSource.options.filter(function(e){return!e.separator}),o=a.every(function(e){t._skipTagCreation=!0;var a=t._getOptionForData(e);return t._skipTagCreation=!1,a&&a.selected});if(o)return this._getI18NText("allOptionsSelected")}return e.map(function(e){return t._mapJSONToData(t._getData(e),t._opts.dataMapping.label)}).join(", ")}},{key:"getValues",value:function(e){return e?this.getValue():_toConsumableArray(this._opts.value)}},{key:"setValues",value:function(e,t){return t?void this.setAttribute("value",e):this.setValue(e)}},{key:"_setClrBtnData",value:function(e,t){if(!t.rendered||this._domChanged){var a=e.clearButtonIconClassName||e.clearButtonIconClass;t.clearButton={iconClassName:a,SVGIconId:e.clearButtonSVGIconId||!a&&"zc__svg--clear",className:this._CLASSES.CLEARBUTTON,disabled:e.disabled,templateRender:!0,rtl:this.rtl,isCE:this.isCE,title:this._getI18NText("clear"),customAttributes:{tabindex:-1}}}}},{key:"_storeClrBtn",value:function(){var e=this._data.clearButton.mainElement=t(this.container[0].querySelector(".".concat(this._CLASSES.CLEARBUTTON)));this._bindClrBtn(e)}},{key:"_bindClrBtn",value:function(e){this._addEvents({clrBtnMouseDown:"mousedown"},e)}},{key:"_clrBtnMouseDownHandler",value:function(e){e.button||(this.deselectAllOptions(e),e.stopPropagation(),e.preventDefault(),this._setFocus())}},{key:"_hideClrBtn",value:function(){var e=this._data;e.clearButton.mainElement[0].style.display=e.noSelection||e.disabled?"none":""}},{key:"_addOption",value:function(t,a,o,i){var l=this;t=this._toArr(t);var n=this.isCE?"Z-OPTGROUP":"OPTGROUP";t=t.map(function(t){var a;if(!i&&t.nodeType){var o=t.parentElement;o&&o.tagName===n&&(a=e._getOpts(o))}return l._getCompleteData(t,i,a)});var s=t[0].isHeader?"header":t[0].isFooter?"footer":"body";this.ajaxSource&&"body"===s||this[!i&&this._isGrouped&&"body"===s?"_addOptionToGroup":"_addOptionDirectly"](t,a,o,s)}},{key:"_addOptionDirectly",value:function(e,t,a,o){var i=this._dataSource[o],l;"number"==typeof t?l=t:a&&(l=i.indexOf(this._getMatchDataForUpdate(a,null,i)),"after"===t&&l++),this._addDatasAt(e,i,l)}},{key:"_addDatasAt",value:function(e,t,a){void 0===a||-1===a?t.push.apply(t,_toConsumableArray(e)):t.splice.apply(t,[a,0].concat(_toConsumableArray(e)))}},{key:"_getOptionType",value:function(e){return /(header|footer)/.test(e)?e:"body"}},{key:"_removeOptionsAt",value:function(e,t,a){var o=this;if(!this.ajaxSource||"header"===a||"footer"===a){e=e.filter(function(t,a){return-1<t&&e.indexOf(t)===a}),e.sort(function(e,t){return t-e}),a=this._getOptionType(a);var i=this._dataSource[a];e.forEach(function(e){if(o._isGrouped&&!t&&"body"===a){var l=o._dataSource.options[e];if(e=void 0,l){var n=o._getGroupAndIndex(l);e=n.index,i=n.items}}o._removeDataAt(e,i)})}}},{key:"_removeDataAt",value:function(e,a){if(void 0!==e&&-1<e&&!this._opts.acceptNewValues){var o=this._getOptionByZItemId(a[e].zitemid),i=a[e];i.selected&&this.deselectOption(i),o&&t(o).remove(),a.splice(e,1)}}},{key:"_removeOption",value:function(e,t,a){var o=this;a=this._getOptionType(a);var i=t?this._dataSource.body:"body"===a?this._dataSource.options:this._dataSource[a];e=this._toArr(e);var l=e.map(function(e){return i.indexOf(o._getMatchDataForUpdate(e,t,i))});this._removeOptionsAt(l,t,a)}},{key:"removeAllOptions",value:function(e){var t=this._dataSource;"header"===e||"footer"===e?this.removeOption(t[e]):!this.ajaxSource&&(this.deselectAllOptions(),this.element.empty(),this._opts.options=[],this._dsInited=!1,this._buildData())}},{key:"addOption",value:function(e,t,a){this._addOption(e,t,a),this._dataModifyHandler()}},{key:"addOptionAt",value:function(e,t,a){this._addOption(e,t,a),this._dataModifyHandler()}},{key:"removeOption",value:function(e,t){this._isNotNull(e)?(this._removeOption(e,void 0,t),this._dataModifyHandler()):this.removeAllOptions(t)}},{key:"removeOptionAt",value:function(e,t){this._removeOptionsAt(this._toArr(e),null,t),this._dataModifyHandler()}},{key:"_addOptionToGroup",value:function(e,t,a){var o,i;if("number"==typeof t){if(a)o=t,i=this._getMatchDataForUpdate(a,!0).options;else{var l=this._dataSource.options[t];if(l){var n=this._getGroupAndIndex(l);o=n.index,i=n.items}}}else if(a)if("append"===t)i=this._getMatchDataForUpdate(a,!0).options;else{var s=this._getMatchDataForUpdate(a);if(s){var r=this._getGroupAndIndex(s);o=r.index,i=r.items,"after"===t&&o++}}this._addDatasAt(e,i,o)}},{key:"removeOptGroup",value:function(e){this._removeOption(e,!0),this._dataModifyHandler()}},{key:"addOptGroup",value:function(e,t){this._addOption(e,"before",t,!0),this._dataModifyHandler()}},{key:"_getGroupAndIndex",value:function(e){var t=this._getMatchDataForUpdate(e.groupName,!0);return{items:t.options,index:t.options.indexOf(e)}}},{key:"_acceptNewValues",value:function(e,t){var a={newOptionData:e},o=this._opts.newValuePattern;return(!o||o.test("string"==typeof e?e:this._mapJSONToData(e,this._opts.dataMapping.label)))&&this._trigger("newvalueadd",t,a)?this._addOptionTag(a.newOptionData):void this._setPrevValue(t)}},{key:"disableOptions",value:function(e){this.setOptionAttributes(e,"disabled",!0)}},{key:"enableOptions",value:function(e){this.setOptionAttributes(e,"disabled",!1)}},{key:"_disable",value:function(e){e&&this.close(),this.element[0].disabled=!!e,this._domChanged=!0}},{key:"_setOptionAttribute",value:function(e,t,a){var o=this;if(e){var i=!1;if("options"===t)e.options=a,this._getCompleteData(e);else if("value"===t||"label"===t)e[t]=a,i=!0;else if("disabled"===t||"hidden"===t)e[t]=a,i=!0,e.options&&e.options.forEach(function(e){return o._setOptionAttribute(e,t,a)});else{if("selected"===t)return void(a?this._setValue(e):this.deselectOption(e));e[t]=a}var l=this._getOptionForData(e);l&&i&&(l[t]=a),this._updateDataVar=!0}}},{key:"setOptionAttributes",value:function(e,a,o){var i=this;this._addedByComponent=!0,this._updateDataVar=!1,this._ajaxSource||(this._toArr(e).forEach(function(e){var l=i._getMatchDataForUpdate(e,null,i._isGrouped?i._dataSource.body.concat(i._dataSource.options):null);if("object"===_typeof(a)&&!t.isEmptyObject(a))for(var n in a)i._setOptionAttribute(l,n,a[n]);else i._setOptionAttribute(l,a,o)}),this._updateDataVar&&this._dataModifyHandler()),this._addedByComponent=!1}},{key:"_setAdvAttribute",value:function(e,t){var a=this._opts;switch(e){case"acceptNewValues":case"newValuePattern":case"selectOnCharPress":a[e]=t;break;case"arrowIconClassName":case"arrowSVGIconId":case"clearButton":case"placeholder":case"width":a[e]=t,this._domChanged=!0;break;case"multiple":this.element[0].multiple=t,a[e]=t,this._reInit=this._resetValue=!0;break;case"selectionLimit":a[e]=t,this._reInit=this._resetValue=!0;break;case"options":case"dataSource":{this.element.find("[data-zitemid]:not([data-is-header]):not([data-is-footer])").remove(),a[e]=t,this._reInit=!0,this._dsInited=!1}break;case"dataMapping":a[e]=t,this._reInit=!0,this._dsInited=!1;break;case"isResponseFiltered":case"serverSearch":case"cacheData":case"viewPerPage":case"lazyLoading":case"filterByCSSSelector":case"sort":case"sortBy":case"sortOrder":case"customSorter":case"customSearch":case"contentType":case"dropdownList":case"showSearchField":case"search":case"rtl":case"template":a[e]=t,this._reInit=!0;break;default:a[e]=t;}}},{key:"_updateMenuAttribute",value:function(e,t){this._menu&&this._menuInstance.setAttribute(e,t)}},{key:"name",get:function(){return"zselect"}},{key:"attrs",get:function(){return{multiple:!1,selectionLimit:0,selectedIndex:null,selectedValue:null,value:null,placeholder:null,disabled:!1,contentType:"text",template:null,arrowIconClass:"",arrowSVGIconId:"",selectOnCharPress:!0,sort:!1,sortBy:null,sortOrder:"asc",width:null,isLabelHTMLEncoded:!1,cacheData:!0,isResponseFiltered:!0,serverSearch:!1,acceptNewValues:!1,newValuePattern:!1,showSearchField:!1,clearButton:!1,clearButtonSVGIconId:"",clearButtonIconClass:"",lazyLoading:!1,filterByCSSSelector:!1,viewPerPage:10,dataStructure:"flat",delimiter:void 0,considerEmptySpacedValue:!1,allowHiddenOptionsForSelection:!1,allowDisabledOptionsForSelection:!1}}},{key:"props",get:function(){return{customSorter:null,customSearch:null,arrowIconClassName:"",clearButtonIconClassName:"",options:[],dataSource:{},dropdownList:{focusFirstItemOnOpen:!0,focusSelectedItemOnOpen:void 0,focusItemOnItemMouseover:!0,selectOnKeyNavigation:!1,hideCheckbox:!0,characterKeyFocus:!0,selectOnTabPress:!0,contentType:void 0,template:void 0,height:void 0,width:void 0,appendTo:void 0,direction:"auto",viewport:void 0,checkedIcon:void 0,checkedIconClassName:void 0,checkedSVGIconId:void 0,loaderIconClassName:void 0,loaderSVGIconId:void 0,positionAlterable:!1,virtualization:!1},search:{delay:150,criteria:"contains",caseSensitive:!1,minKeywordLength:0,by:"label",focusFirstResult:!0,highlightKeyword:!1,maxKeywordLength:0,showNoResultsMessage:!0,searchIncrementsInCache:!1},messages:{allOptionsSelected:"All Selected",noResults:"No results found",serverError:"Server request failed. Please try again later.",clear:"Clear",moreAction:"See more results",placeholder:"Select"},dataMapping:{id:"id",label:"label",value:"value",informativeText:"informativeText",iconClassName:"iconClassName",SVGIconId:"SVGIconId",options:"options",optgroupLabel:null,zitemid:"zitemid"},depCompClassNames:{dropdownlist:"DropdownList"}}}},{key:"propType",get:function(){return{selectedIndex:"number"}}},{key:"ARIA_ROLES",get:function(){return{CONTAINER:"listbox"}}},{key:"SELECTORS",get:function(){var e=this.isCE;return{OPTION:e?"z-option":"option",OPTGROUP:e?"z-optgroup":"optgroup",OPTIONSBODY:"z-selectbody",OPTIONSHEADER:"z-selectheader",OPTIONSFOOTER:"z-selectfooter",OPTIONSEPARATOR:"z-optionseparator",ADDOPTION:"z-addoption"}}},{key:"CLASSES",get:function(){return{CONTAINER:"zselectbox",ICON:"zselectbox__icon",ICONTEXT:"zselectbox--icontext",ICONONLY:"zselectbox--icononly",TEXT:"zselectbox__text",DROPUP:"zselectbox--top",DROPDOWN:"zselectbox--bottom",ACTIVE:"is-active",FOCUS:"has-focus",DISABLED:"is-disabled",CLEARBUTTON:"zselectbox__clearbutton",MENU:{CLASSNAME:"zmenu--selectmenu",ITEM:"zmenu__item",BODY:"zmenu__body"}}}},{key:"EVENTS",get:function(){return["init","beforedropdownlistopen","dropdownlistopen","beforedropdownlistclose","dropdownlistclose","beforechange","change","select","deselect","beforeselect","beforedeselect","itemclick","optionclick","optionhover","addoptionclick","blur","beforefocus","focus","noresults","beforedropdownlistupdate","dropdownlistupdate","newvalueadd","beforesearch","searcherror","searchsuccess"]}}]),o}(e.CoreComponent);e.registerComponent("ZSelect",f),function(e){var t=e.zselect.Templates,a=e.Templates.Utilities;t.container=function(e){return ZT.html(tO42(),e.children&&t.children(e))},t.children=function(t){var o=ZT.html(tO43(),t.noSelection?ZT.html(tO44(),t.placeholder):ZT.html(tO45(),ZT.customHTML(t.innerHTML||""),t.image&&ZT.html(tO46(),t.image),t.icon&&a.icon(t.icon),t.label&&ZT.html(tO47(),ZT.customHTML(t.label))),t.clearButton&&e.createButton(t.clearButton),a.icon(t.arrow));return o}}(ZComponents);var k=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(e,t){var a=this.isCE,o=this._data,i=t.width,l=e.attr("title");if(l&&!a&&(t.title=l),"none"===i)t.width=null;else{var n=parseInt(i)||e.outerWidth();o.width=n,parseInt(n)&&(o.style="width:"+o.width+"px")}o.tabindex=e[0].getAttribute("tabindex")||0,o.attrs={tabindex:-1};o.spinButtons="none"!==t.spinButtons,o.spinButtons&&this._getSpinBtnProps(),o.clearButton="none"!==t.clearButton,o.clearButton&&this._getClearBtnProps(),a||(o.id=this._getID(e)+"-container"),this._addedByComponent=this.isCE}},{key:"_postRender",value:function(){var e=this._data,t=this._opts,a=t.readonly,o=(a||t.disabled?" is-disabled":"")+(a?" is-readonly":"");e.className+=" zinputfield "+o,this._input=this.container.find(".zinputfield__textbox"),t.placeholder&&this._input.attr("placeholder",t.placeholder),this._addedByComponent=!this.isCE}},{key:"_postEachRender",value:function(){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._data,t=e.modifiedAttr,a=this._opts,o=e.spinButtons;e.clearButton&&(!t||"clearButton"===t)&&this._updateClearBtn(),(!t||-1<["spinButtons","spinButtonsOrientation"].indexOf(t))&&(o?this._updateSpinButtons():this._data.className+=" zinputfield--spinbtnnone"),t&&"spinButtonsType"===t&&(this._input=this.container.find(".zinputfield__textbox"),this._bindEvents(),this._updateSpinButtons(),this._setValue(this._opts.value)),!o||e.isVertical||t&&0!==t.indexOf("spinButtons")||(this._data.className+=" zinputfield--split"),e.clearButton&&"always"===a.clearButton&&(!t||"clearButton"===t)&&(this._data.className+=" zinputfield--withclrbtn",(!a.value||a.readonly||a.disabled)&&this._toggleBtnDisplay(!0,!0)),(e.spinButtons||e.clearButton)&&this._bindContainerEvents(),e.modifiedAttr=void 0}},{key:"_toggleBtnDisplay",value:function(e,t,a){var o=a?this._clearButton.add(this._buttonPane):t?this._clearButton:this._buttonPane;o[e?"addClass":"removeClass"]("zh-dnone")}},{key:"_bindContainerEvents",value:function(){this._addEvents({containerHover:"mouseenter mouseleave",containerFocusIn:"focusin"})}},{key:"_containerHoverHandler",value:function(e){var t=this._opts,a=this._data;if(!t.readonly&&!t.disabled){var o="mouseenter"===e.type,i=!o&&this.container.hasClass("has-focus"),l=this._opts,n=a.clearButton&&"focus"===l.clearButton,s=a.spinButtons&&"focus"===l.spinButtons;(n||s)&&this._input.val().length&&!i&&(o?this._data.className+=(n?" zinputfield--withclrbtn":"")+(s?" zinputfield--spinbtnonfocus":""):this._updateClass("",(n?"zinputfield--withclrbtn":"")+(s?(n?"|":"")+"zinputfield--spinbtnonfocus":"")),this._toggleBtnDisplay(!o,n,n&&s,e.type))}}},{key:"_containerFocusInHandler",value:function(e){e.stopPropagation()}},{key:"resetWidth",value:function(){this.isCE||this.container.outerWidth(this.element.outerWidth())}},{key:"focus",value:function(){this._input.focus()}},{key:"_getBtnProps",value:function(t,a,o){var i=this._opts,l=this._getI18NText(t);return e.ZButton.getBtnProps({className:o,templateRender:!0,defaultIconClassName:"zinputfield__icon",iconClassName:i[t+"ButtonIconClass"]||i[t+"ButtonIconClassName"],SVGIconId:i[t+"ButtonSVGIconId"],defaultSVGIconId:a+" zbutton__svg zinputfield__svg",customAttributes:{tabindex:-1,"aria-label":l,title:l}})}},{key:"_destroy",value:function(){var t=this.name;this._input.off(".".concat(t)),this._input=this._clearButton=this._buttons=this._buttonPane=void 0,this.isCE&&this.element.removeClass(this._data.className).empty(),e.$document.off(".".concat(t))}},{key:"_setAttribute",value:function(e,t){var a=this.container,o=this._opts,i=this._input;if("title"===e)a[0].setAttribute("title",t);else if("placeholder"===e)i.attr("placeholder",t);else if("width"===e)a.outerWidth(t);else if("maxLength"===e)i[t?"attr":"removeAttr"]("maxlength",t);else if(-1<e.indexOf("clearButton"))this._domChanged=!0,this._handleClearBtn(e,t,o);else if(/incrementButton|decrement|spinButtons/g.test(e))this._domChanged=!0,this._handleSpinBtns(e,t,o);else if("readonly"===e){this._updateClass(t?"is-readonly is-disabled":"",t?"":"(is-readonly"+(o.disabled?"":"|is-disabled")+")"),t?i.attr({readonly:!0,"aria-readonly":!0}):i.removeAttr("readonly aria-readonly")}else if("required"===e){var l=this._opts.value;l||this._setInitialValue()}}},{key:"_disable",value:function(e){_get(_getPrototypeOf(o.prototype),"_disable",this).call(this,e,void 0,!e&&this._opts.readonly);var t=this._input;e?t.attr({disabled:!0,"aria-disabled":!0}):t.removeAttr("disabled aria-disabled")}},{key:"_getClearBtnProps",value:function(){this._data.clearButtonProps=this._getBtnProps("clear","zc__svg--clear","zinputfield__clearbutton",this._clearButton&&this._clearButton[0])}},{key:"_updateClearBtn",value:function(){var e=this._clearButton=this.container.find(".zinputfield__clearbutton"),t=this._data.clearButtonProps;"focus"===this._opts.clearButton&&this._toggleBtnDisplay(!0,!0),t.mainElement=e[0],e.attr(t.attrs),this._bindClearBtnEvents()}},{key:"_bindClearBtnEvents",value:function(){var e=this._clearButton;this._addEvents({cBtnMouse:"mousedown mouseup",cBtnClick:"click"},e)}},{key:"_cBtnMouseHandler",value:function(e){this._mouseDown="mousedown"===e.type}},{key:"_cBtnClickHandler",value:function(){var e=this._opts;e.disabled||e.readonly||(e._lastValue=e.value,this._input.val("").focus(),this._toggleBtnDisplay(!0,!0))}},{key:"_handleClearBtn",value:function(e,t,a){var o=this._data;a[e]=t,o.clearButton="none"!==a.clearButton,o.clearButton?(this._getClearBtnProps(),"clearButton"===e&&(o.modifiedAttr=e)):(this._updateClass("","zinputfield--withclrbtn"),this._clearButton=void 0)}},{key:"_getSpinBtnProps",value:function(){var e=this._data,t=this._opts,a=t.spinButtonsOrientation||t.spinButtonsType,o=this._getBtnProps.bind(this),i=this._getSpinIconInfo.bind(this),l,n;e.isVertical="vertical"===a||"together"===a,e.attrs.role="spinbutton",l=i("increment",e.isVertical),n=i("decrement",e.isVertical),e.incrementProps=o("increment",l[0],l[1],this._buttons&&this._buttons[0]),e.decrementProps=o("decrement",n[0],n[1],this._buttons&&this._buttons[1])}},{key:"_getSpinIconInfo",value:function(e,t){var a="zc__svg--"+(t?"":"horizontal")+e+(t?"":" zh-arrowicon"),o="zinputfield__spinbutton"+("increment"===e?" zh-up":" zh-down");return[a,o]}},{key:"_updateSpinButtons",value:function(){var e=this._opts,a=e.spinButtons,o=this.container,i=this._data;this._buttonPane=o.find(".zinputfield__spinbuttonpane"),this._buttons=o.find(".zinputfield__spinbutton");var l=+i.isVertical,n;n=i.incrementProps.mainElement=this._buttons[+!l],t(n).attr(i.incrementProps.attrs),n=i.decrementProps.mainElement=this._buttons[l],t(n).attr(i.decrementProps.attrs),this._toggleBtnDisplay("focus"===a&&!0),this._bindSpinButtonEvents()}},{key:"_handleSpinBtns",value:function(e,t,a){var o=this._data;a[e]=t,"spinButtonsType"===e&&"focus"===a.spinButtons&&(a.spinButtons="always"),o.spinButtons=t="none"!==a.spinButtons,this._updateClass("","zinputfield--split|zdatetimefield|zdatetimefield--buttonsonhover|zinputfield--spinbtnonfocus|zinputfield--spinbtnnone"),-1<["spinButtons","spinButtonsType","spinButtonsOrientation"].indexOf(e)&&(o.modifiedAttr=e),t?this._getSpinBtnProps():this._buttons=this._buttonPane=void 0}},{key:"name",get:function(){return"zinputfield"}},{key:"attrs",get:function(){return{min:null,max:null,spinButtons:"always",locale:null,clearButton:"focus",clearButtonSVGIconId:null,clearButtonIconClass:null,width:null,value:null,spinButtonsType:"together",incrementButtonSVGIconId:null,incrementButtonIconClass:null,decrementButtonIconClass:null,decrementButtonSVGIconId:null,spinEventTriggerDelay:0,disabled:!1,readonly:!1}}},{key:"props",get:function(){return{incrementButtonIconClassName:null,decrementButtonIconClassName:null,clearButtonIconClassName:null,labels:{increment:"Increment Value",decrement:"Decrement Value",clear:"Clear"}}}},{key:"EVENTS",get:function(){return["focus","blur","change","spin","spinstart","spinend"]}}]),o}(e.CoreComponent);e.registerComponent("ZInputField",k),function(e){var t=e.zinputfield.Templates,a=e.zbutton.Templates.container;t.container=function(e){return ZT.html(tO48(),e.className,e.title,e.style,e.id,e.children&&t.children(e))},t.children=function(e){return ZT.html(tO49(),e.tabindex,e.min,e.max,e.readonly,e.readonly,e.disabled,e.disabled,e.maxLength,e.clearButton&&a(e.clearButtonProps),e.spinButtons&&ZT.html(tO50(),e.isVertical?a(e.incrementProps):a(e.decrementProps),e.isVertical?a(e.decrementProps):a(e.incrementProps)))}}(ZComponents);var b=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_setDimension",value:function(){this._widthSet||_get(_getPrototypeOf(o.prototype),"_setDimension",this).apply(this,arguments)}},{key:"_updateDim",value:function(){if(!this.element[0].style.width){var e=this._opts.width||this._swatch[0].offsetWidth;e&&(this.element[0].style.width=isNaN(e)?e:e+"px",this._widthSet=!0)}}},{key:"_storeRef",value:function(e,a){var i=this._isAttrChanged.bind(this);_get(_getPrototypeOf(o.prototype),"_storeRef",this).apply(this,arguments),e.rendered||(this._swatch=this._getById(e.swatchId),this._swatchContext=this._getCanvasContext(this._swatch[0]),this._swatchThumb=t(this._swatch[0].querySelector(".zcolorpicker__mapmarker")),this._bar=this._getById(e.swatchBar.id),this._barContext=this._getCanvasContext(this._bar[0]),this._barThumb=this._getThumb(this._bar[0])),i("opacity")&&(this._opacityBar=this._opacityContext=this._opacityThumb=!1,a.opacity&&this._storeOpacityRef(e)),i("colorPreview")&&e.colorPreview&&a.previousColorInPreview&&this._bindPreview(e.colorPreview),i("commandBar")&&e.commandBar&&this._storeCmdBarRef(e.commandBar),(i("palette")||this._paletteChanged)&&(this._paletteChanged=!1,a.palettes&&a.customColorLibraries&&this._storeCustomLibRef(e,a)),a.colorFields&&this._storeClrFieldRef(e.colorFields)}},{key:"_postEachRender",value:function(e,t){_get(_getPrototypeOf(o.prototype),"_postEachRender",this).apply(this,arguments),t.markerIcon&&this._swatch.find(".zcolorpicker__mapmarker").css({left:t.x+"%",top:t.y+"%"}),this._paintPicker(this._axisProps.x,this._axisProps.y,this._axisProps.z),t.opacity&&this._paintOpacity(),t.colorFields&&this._setClrFieldValues(t.colorFields),this._changedAttrs=[]}},{key:"_setRenderData",value:function(t,a){_get(_getPrototypeOf(o.prototype),"_setRenderData",this).apply(this,arguments);var i=this._isAttrChanged.bind(this);if(i("swatchBars")&&(t.swatchId=this._getID("swatch"),t.swatchBar={id:this._getID("swatchbar"),className:"zcolorpicker__slider",rtl:t.rtl},this._vertical="vertical"===a.barOrientation),i("marker")){t.markerIcon=!1;var l=a.mapMarkerIconClass||a.mapMarkerIconClassName,n=a.mapMarkerSVGIconId;(l||n)&&e._getIconInfo(l,n,"","zcolorpicker__mapmarker",t.markerIcon={})}i("opacity")&&(a.opacity||t.opacity)&&this._setOpacityData(t,a),i("commandBar")&&(!a.immediateCommit||t.commandBar)&&this._setCmdBarData(t,a),i("swatch")&&(t.swatchBar.thumbIcon=this._getThumbData(a.slider),this._configurePickerMethods(a)),i("palette")&&(a.palettes||t.palettes||t.customColorLibraries)&&this._setPaletteData(t,a),i("colorField")&&(a.colorFields||t.colorFields)&&this._setClrFieldData(t,a),(a.colorPreview||t.colorPreview)&&this._setPreviewData(t,a),a.palettes&&this._updateSelection(t,a),t.colorFields&&this._saveFieldValues(t.colorFields,a),this._updatePickerPositionInData(t,a)}},{key:"_bindEvents",value:function(){_get(_getPrototypeOf(o.prototype),"_bindEvents",this).apply(this,arguments);this._addEvents({swatchDrag:"mousedown touchstart"},this._swatch),this._addEvents({swatchPickerDrag:"mousedown touchstart"},this._bar)}},{key:"_swatchDragHandler",value:function(e){this._dragStartHandler(e,"swatch")}},{key:"_swatchPickerDragHandler",value:function(e){this._dragStartHandler(e,"swatchbar")}},{key:"_dragStartHandler",value:function(e,t){if(!e.button){var a,i;"swatch"===t?(i=this._swatch,a=this._swatchThumb):"swatchbar"===t?(i=this._bar,a=this._barThumb):(i=this._opacityBar,a=this._opacityThumb),this._activeContainer={picker:a,type:t,offset:i.offset(),height:i.height(),width:i.width()},_get(_getPrototypeOf(o.prototype),"_dragStartHandler",this).call(this,e),this.setFocus()}}},{key:"_onPickerDragged",value:function(e){"touchmove"!==e.type&&e.preventDefault();var t=this._activeContainer,a,o,i;if(-1<["touchstart","touchmove","touchend"].indexOf(e.type)){var l=e.originalEvent;i=(e.changedTouches||l.changedTouches)[0]}var n=i||e;a=n.pageX-t.offset.left,o=t.width;var s=100*this._limit(a/o,0,1);a=n.pageY-t.offset.top,o=t.height;var r=100*this._limit(a/o,0,1),d=this._data;"swatch"===t.type?(d.x=s,d.y=r):d["opacity"===t.type?"o":"z"]=this._vertical?r:s;var c=this._getColorFromCoords();this._skipPickerData=!0,this._setValue(c,e),this._skipPickerData=!1}},{key:"_getCoordsFromColor",value:function(e){var t=this._colorInstance.getPercentageObject(e.boxSelectionTypeDefaultColorModel.toLowerCase());return{x:this._getRTLBasedPercent(parseFloat(t[this._axisProps.x[0]])),y:parseFloat(t[this._axisProps.y[0]]),z:this._getRTLBasedPercent(parseFloat(t[this._axisProps.z[0]])),o:this._getRTLBasedPercent(parseFloat(t.a))}}},{key:"_updatePickerPositionInData",value:function(e,t){if(e.vertical=this._vertical,!this._skipPickerData){var a=this._getCoordsFromColor(t);e.x=a.x,e.y=100-a.y,e.z=a.z,e.o=a.o}if(e.swatchBar.left=e.z,t.opacity){var o=e.opacitySlider;o.left=e.o,o.vertical=this._vertical}}},{key:"_configurePickerMethods",value:function(e){"HSL"===e.boxSelectionTypeDefaultColorModel?(this._paintPicker=this._HSLUtils.paintPicker.bind(this),this._axisProps=this._HSLUtils.getXYProps(e.boxSpectrumHSLColorModel)):(this._paintPicker=this._HSVUtils.paintPicker.bind(this),this._axisProps=this._HSVUtils.getXYProps(e.boxSpectrumHSVColorModel))}},{key:"_onSubmit",value:function(e){this._onOkButtonClick(e)}},{key:"_onOkButtonClick",value:function(e){this.setValue(this._currentColor,e,{triggerChange:!0},!0),this._trigger("ok",e),this.close(e)}},{key:"_onCancelButtonClick",value:function(e){this._revertColor(e),this._trigger("cancel",e),this.close(e)}},{key:"_onBackButtonClick",value:function(e){this._trigger("back",e)}},{key:"_revertColor",value:function(e,t){this.setValue(t||this._selectedInstance.getObject(),e)}},{key:"_setHueStops",value:function(e){this._setGradientColors(e,this._hueColors)}},{key:"_fillCanvas",value:function(e,t){e.fillStyle=t,e.fill()}},{key:"_clearCanvas",value:function(){var e=this._swatchContext,t=this._barContext;e.beginPath(),t.beginPath(),e.clearRect(0,0,e.canvas.width,e.canvas.height),t.clearRect(0,0,t.canvas.width,t.canvas.height),e.rect(0,0,e.canvas.width,e.canvas.height),t.rect(0,0,t.canvas.width,t.canvas.height)}},{key:"_createGradient",value:function(e,t){return t?e.createLinearGradient(0,e.canvas.height,0,0):e.createLinearGradient(0,0,e.canvas.width,0)}},{key:"_setValue",value:function(e,t,a,o){var i=this._getClrInstance("none"===e||"transparent"===e?"transparent":e);if(this._opts.opacity||i.setAlpha(1),i.isValid()){i.initialColor=e;var l=this._currentColor;this._colorInstance=i;var n=this._currentColor=this._colorInstance.getColor(),s;(this._fromInit||o||this._opts.immediateCommit&&(!t||!/^(mousedown|mousemove|znumberfieldspin|znumberfieldinput)$/.test(t.type)))&&(this._fromInit||n!==this._selectedInstance.getColor())&&(this._updateSelectedColor(),s=!0),(!this._opts.immediateCommit||o||this._fromInit)&&(this._previousInstance=this._selectedInstance),this._updateUI(),l!==n&&this._trigger("select",t),(s||a&&a.triggerChange)&&this._trigger("pick",t),s&&this._trigger("change",t)}}},{key:"_getColorFromCoords",value:function(){var e=this._axisProps,t=this._data,a={},o=this._getRTLBasedPercent.bind(this);return a[e.x[0]]=o(t.x)+"%",a[e.y[0]]=100-t.y+"%",a[e.z[0]]=o(t.z)+"%",a.a=o(t.o)+"%",a}},{key:"_onClose",value:function(e){this._revertColor(e),_get(_getPrototypeOf(o.prototype),"_onClose",this).call(this,e)}},{key:"setDimension",value:function(){this._setDimension()}},{key:"_destroy",value:function(){var e=this._data;e.colorFields&&this._destroyClrFields(),e.commandBar&&this._destroyCmdBar(e.commandBar),this._paintPicker=void 0,_get(_getPrototypeOf(o.prototype),"_destroy",this).apply(this,arguments)}},{key:"name",get:function(){return"zadvancedcolorpicker"}},{key:"attrs",get:function(){return{opacity:!0,mapMarkerIconClass:null,mapMarkerSVGIconId:null,colorPreview:!0,previousColorInPreview:!0,colorFields:!0,defaultColorField:"hex",currentColorField:"hex",opacityFieldType:"percent",palettes:!1,paletteColumns:0,addIconClass:null,addSVGIconId:null,immediateCommit:!1,closeOnSelect:!1,OKButtonLabel:null,OKButtonClass:null,cancelButtonLabel:null,cancelButtonClass:null,hideCancelButton:!1,backButton:!0,backButtonLabel:null,backButtonClass:null,boxSelectionTypeDefaultColorModel:"HSV"}}},{key:"props",get:function(){return{slider:null,mapMarkerIconClassName:null,addIconClassName:null,OKButtonClassName:null,cancelButtonClassName:null,backButtonClassName:null,colorFieldsList:null,colorFieldSelect:{width:"none",dropdownList:{viewport:window}},palettesList:null,customColorLibraries:null,commandBar:{leftColumn:null,centerColumn:null,rightColumn:{commands:["cancel","OK"]}},boxSpectrumHSVColorModel:{xAxis:"saturation",yAxis:"value"},boxSpectrumHSLColorModel:{xAxis:"hue",yAxis:"saturation"},labels:{close:"Close",addcolor:"Add Color",HSV:"HSV",RGB:"RGB",HSL:"HSL",CMYK:"CMYK",HEX:"HEX",opacityField:"A",hexField:"HEX",hueField:"H",saturationField:"S",valueField:"V",lightnessField:"L",redField:"R",greenField:"G",blueField:"B",cyanField:"C",magentaField:"M",yellowField:"Y",keyField:"K",ok:"OK",cancel:"Cancel",back:"Back"}}}},{key:"CLASSES",get:function(){return{CONTAINER:"zcolorpicker zcolorpicker--advanced"}}},{key:"EVENTS",get:function(){return["cancel","back","ok","beforecolorpanadd","colorpanadd","beforecolorpanremove","colorpanremove","colorfieldlistchange"]}},{key:"_MODEPROPS",get:function(){return{hsv:["h","s","v"],rgb:["r","g","b"],hex:["hex"],hsl:["h","s","l"],cmyk:["c","m","y","k"]}}},{key:"PROP_EXP",get:function(){return{h:"hue",s:"saturation",v:"value",l:"lightness",r:"red",g:"green",b:"blue",a:"opacity",hex:"hex",c:"cyan",m:"magenta",y:"yellow",k:"key"}}},{key:"_hueColors",get:function(){return["rgba(255, 0, 0, 1)","rgba(255, 255, 0, 1)","rgba(0, 255, 0, 1)","rgba(0, 255, 255, 1)","rgba(0, 0, 255, 1)","rgba(255, 0, 255, 1)","rgba(255, 0, 0, 1)"]}}]),o}(e.ZColorPickerBase);e.registerComponent("ZAdvancedColorPicker",e.ZColorPickerBase,b),function(e){var t=e.zadvancedcolorpicker.Templates,a=e.zcolorpickerbase.Templates,o=e.Templates.Utilities;t.children=function(e){var i=ZT.html(tO51(),e.hasCallout&&ZT.html(tO52()),e.title&&a.title(e),e.swatchId,a.canvas(e),e.markerIcon?o.icon(e.markerIcon):ZT.html(tO53(),e.x,e.y),e.colorPreview&&t.colorPreview(e.colorPreview),a.slider(e.swatchBar),e.opacitySlider&&a.slider(e.opacitySlider),e.colorFields&&t.colorFields(e.colorFields),e.palettes&&e.palettes.map(function(e){return a.palette(e)}),e.customColorLibraries&&e.customColorLibraries.map(function(e){return a.palette(e)}),e.commandBar&&t.commandBar(e.commandBar));return i}}(ZComponents);var C=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_onSubmit",value:function(e){this.close(e)}},{key:"_setAlpha",value:function(e,t){var a=this._colorInstance.getObject();a.a=e,this._trigger("beforefocus",t)&&this._data.opacityField.container.find("input").focus(),this._setValue(a,t)}},{key:"_setRenderData",value:function(t,a){_get(_getPrototypeOf(o.prototype),"_setRenderData",this).apply(this,arguments),t.closeOnSelect=!a.opacity&&a.closeOnSelect;var i=this._isAttrChanged.bind(this);if(i("noColorButton")&&(t.noColorBtn&&this._getById(t.noColorBtn.id).off(),t.noColorBtn=!1,a.noColorButton&&(t.noColorBtn={id:this._getID("nocolorbtn"),label:a.noColorButtonLabel||this._getI18NText("noColor")},e._getIconInfo(a.noColorIconClassName||a.noColorIconClass,a.noColorSVGIconId,"zc__svg--zcolorpicker-nocolor","zcolorpicker__icon",t.noColorBtn.icon={}))),i("defaultColorButton")&&(t.defaultColor&&this._getById(t.defaultColor.id).off(),t.defaultColor=!1,a.defaultColorButton)){var l=this._getClrInstance(a.defaultValue);t.defaultColor={id:this._getID("defaultcolorbtn"),label:a.defaultColorButtonLabel||this._getI18NText("defaultColor"),rgb:l.isValid()?l.getColor():this._DEFAULTS.defaultValue}}i("advancedPicker")&&(a.advancedPicker||t.advancedPicker)&&this._setMoreClrsData(a,t),i("colorField")&&(a.colorField||t.colorField)&&this._setClrFieldData(t,a),i("opacity")&&(a.opacity||t.opacity)&&this._setOpacityData(t,a),i("palette")&&this._setPaletteData(t,a),a.colorField&&(t.colorField.rgb=t.rgb),t.opacity&&this._setOpacityLeft(t),this._updateSelection(t,a)}},{key:"_setAdvPickerData",value:function(e,a){var o=this,i=e.advancedPickerOptions,l=t.extend(!0,{},this._getBaseObj("advancedcolorpicker"),this._DEFAULTS.advancedPickerOptions,i,{isFromPicker:!0,type:"inline",hideCancelButton:!0,immediateCommit:!1,closeButton:!1,palettes:!1,value:e.value,valueColorModel:e.valueColorModel,colorFieldSelect:{dropdownList:{appendTo:this.element}}});l.id||(l.id=this._getID("advancedpicker")),["Ok","Cancel","Back","Select","ColorfieldListChangeHandler"].forEach(function(e){l[e.toLowerCase()]=o._advPickerCallback.bind(o,o["_advPicker"+e+"Handler"])}),a.advancedPicker?a.advancedPicker.instance.setAttributes(l):a.advancedPicker=l}},{key:"_advPickerCallback",value:function(e,t){var a=t.detail;a.fromUI&&(t=t.originalEvent,e.call(this,t,a))}},{key:"_postEachRender",value:function(e,t){_get(_getPrototypeOf(o.prototype),"_postEachRender",this).apply(this,arguments),t.colorField&&this._updateColorField(),t.opacity&&this._updateOpacityValues(),this._changedAttrs=[]}},{key:"_storeRef",value:function(e,a){_get(_getPrototypeOf(o.prototype),"_storeRef",this).apply(this,arguments);var i=this.element,l=this._isAttrChanged.bind(this);if(e.rendered||(this._showHideContainer=t(this.element[0].querySelector(".zcolorpicker__showhidecontainer")),this._container=this._basicPicker=t(this.element[0].querySelector(".zcolorpicker__default")),this._borderThickness=i.outerHeight()-i.height()||0),l("colorField")&&(this._colorBox=!1,a.colorField&&this._storeClrFieldRef(e.colorField,a)),l("opacity")&&(this._opacityCanvasContext=this._opacitySlider=!1,a.opacity&&this._storeOpacityRef(e,a)),l("advancedPicker")&&(this._advPicker=!1,a.advancedPicker&&this._storeAdvPickerRef(e,a)),l("noColorButton")&&a.noColorButton){var n=this._getById(e.noColorBtn.id);this._addEvents({noClrClick:"click"},n)}if(l("defaultColorButton")&&a.defaultColorButton){var s=this._getById(e.defaultColor.id);this._addEvents({defaultClrClick:"click"},s)}}},{key:"_makeSeen",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e.css("visibility",t?"visible":"hidden")}},{key:"_makeUnSeen",value:function(e){this._makeSeen(e,!1)}},{key:"_storeOpacityRef",value:function(e){var t=this._opacitySlider=this._getById(e.opacitySlider.id);this._opacityCanvasContext=this._getCanvasContext(t[0]),this._setMainEle(e.opacityField),this._addEvents({dragStart:"mousedown touchstart"},t)}},{key:"_validate",value:function(e){_get(_getPrototypeOf(o.prototype),"_validate",this).apply(this,arguments),e.paletteColumns=this._validateCount(e.paletteColumns),e.otherUsedColorsHasLimit&&(e.otherUsedColorsLimit=this._validateCount(e.otherUsedColorsLimit)),e.defaultValue||(e.defaultValue=e.value)}},{key:"_noClrClickHandler",value:function(e){this._setValue("none",e,{noColorButtonClick:!0}),this._data.closeOnSelect&&this.close(e)}},{key:"_defaultClrClickHandler",value:function(e){this._setValue(this._opts.defaultValue,e,{defaultColorButtonClick:!0}),this._data.closeOnSelect&&this.close(e)}},{key:"_onPickerDragged",value:function(e){"touchmove"!==e.type&&e.preventDefault();var t=this._opacitySlider.offset(),a;if(-1<["touchstart","touchmove","touchend"].indexOf(e.type)){var o=e.originalEvent;a=(e.changedTouches||o.changedTouches)[0]}var i=a||e,l=i.pageX-t.left,n=this._opacitySlider.width(),r=100*this._limit(l/n,0,1);r=this._getRTLBasedPercent(r),this._setAlpha(s(r)/100,e)}},{key:"_updateColorField",value:function(){if(this._colorBox&&!this._skipClrFieldUpdate){var e=this._colorInstance.getColor(this._data.colorField.colorMode,void 0,!1);this._colorBox.val(e),this._colorBox.attr("aria-value",e),this._updateColorBoxTitle()}}},{key:"_onOpen",value:function(){_get(_getPrototypeOf(o.prototype),"_onOpen",this).apply(this,arguments),this._updateColorBoxTitle()}},{key:"_updateColorBoxTitle",value:function(){if(this._colorBox&&this._opened){var e=this._colorBox[0];e.title=e.clientWidth<e.scrollWidth?this._colorBox[0].value:""}}},{key:"_fieldChangeHandler",value:function(e){var t=this;clearTimeout(this._fieldChangeTimer),this._fieldChangeTimer=setTimeout(function(){var a=t._colorBox.val();t._updateColorBoxTitle();var o=t._getClrInstance(a);t._skipClrFieldUpdate="input"===e.type,o.isValid()?t._setValue(o.getObject(),e):t._updateColorField(),t._skipClrFieldUpdate=!1})}},{key:"_calcDimension",value:function(){var e=0;this._titleBar&&(e=this._titleBar.outerHeight()),this._showHideContainer[0].style["max-height"]="calc(100% - "+e+"px)";var t=this._basicPicker[0].offsetWidth;this._pickerWd=t?t+"px":"";var a=this._basicPicker[0].offsetHeight;this._pickerHt=a?a+e+"px":"",this._advPickerWd=this._advPickerHt=0;var o=this._advPicker;if(o){this._data.advancedPicker.instance.setDimension();var i=o.width(),l=o.height();this._advPickerWd=i?i+"px":"",this._advPickerHt=l?l+e+"px":""}}},{key:"_updateDim",value:function(){this._widthSet=!1,this.element.is(":visible")&&(this._setPickerDim("",""),this._calcDimension(),this._advPickerVisible?this._setPickerDim(this._advPickerWd,this._advPickerHt):this._setPickerDim(this._pickerWd,this._pickerHt),this._widthSet=!0)}},{key:"_setPaletteData",value:function(e,t){e.palettes=[],e.defaultPalette=[],e.otherUsedColors=e.standardPalette=!1,this._setDefaultPaletteData(),t.standardColors&&this._setStandardPaletteData(),this._addPalettes(t.otherPalettes),t.otherUsedColors&&this._setRecentColorsPalette()}},{key:"_setStandardPaletteData",value:function(){var e=this._opts,t=this._getPresetColors(e.standardColorsPalette);t&&(this._data.standardPalette=this._getPaletteTemplateData({heading:e.standardColorsHeading||this._getI18NText("standardColorsHeading"),name:"standardcolors",colors:t.colors}))}},{key:"_setDefaultPaletteData",value:function(){var e=this._opts,t="custom"===e.defaultPaletteType&&e.customPalette;if(!t){var a=this._getPresetColors("preset");t={colors:a.colors,hasTones:!0,tones:a.tones}}t.heading=t.heading||e.defaultPaletteHeading||this._getI18NText("defaultColorsHeading"),t.name="themecolors",this._data.defaultPalette=this._getPaletteTemplateData(t)}},{key:"_setPickerDim",value:function(e,t){this.element.css({width:e,height:t})}},{key:"_getPresetColors",value:function(e){return this.presetPalettes[e]}},{key:"_updatePalettes",value:function(){this._opts.otherPalettes=this._data.palettes.map(function(e){return e.paletteData}),this._updateUI(!0)}},{key:"_advPickerCancelHandler",value:function(e){this.close(e)}},{key:"_advPickerBackHandler",value:function(e){this._switchToBasic(e)}},{key:"_focusMoreColors",value:function(){this._getById(this._data.moreColorBtn.id).focus()}},{key:"_advPickerOkHandler",value:function(e,t){this._setValue(t.rgb,e,t,!0),this._floating?this.close(e):this._addToRecentColors(e)}},{key:"_advPickerColorfieldListChangeHandler",value:function(e,t){this._trigger("colorfieldlistchange",e,t)}},{key:"_advPickerSelectHandler",value:function(e,t){this._setValue(t.currentRGB,e,t,!1,!0)}},{key:"_addToRecentColors",value:function(e){var t=this._opts;!t.otherUsedColors||this._noFill||this._defaultColor||this._selectedPan.length||!this._trigger("beforeotherusedcoloradd",e)||(t.otherUsedColorsList=this._addColors(this._data.otherUsedColors,this._selectedInstance.getColor(),t.otherUsedColorsHasLimit?0:void 0),this._trigger("otherusedcoloradd",e))}},{key:"_triggerChange",value:function(e,t){this._avoidPickTrigger||((this._fromInit||this._currentColor!==this._selectedInstance.getColor())&&(this._updateSelectedColor(),this._trigger("change",e,t)),this._trigger("pick",e,t))}},{key:"_triggerSelect",value:function(e,t,a){t!==this._currentColor&&this._trigger("select",e,a)}},{key:"_updateSelection",value:function(e){var t=this,a=_toConsumableArray(e.palettes);a.push(e.defaultPalette),e.standardPalette&&a.push(e.standardPalette),e.otherUsedColors&&a.push(e.otherUsedColors),a.forEach(function(e){return t._updateClrSelection(e.colors)})}},{key:"_setAdvancedPickerValue",value:function(e){this._opts.advancedPicker&&(this._data.advancedPicker.instance.setAttributes({value:e}),this._advPicker.removeClass("zcolorpicker"))}},{key:"_setValue",value:function(e,t,a,o,i){var l="none"===e||"transparent"===e,n=this._getClrInstance(l?"rgba(0,0,0,0)":e);if(n.isValid()){n.initialColor=e;var s=this._currentColor;this._colorInstance=n,this._currentColor=n.getColor(),this._noFill=a&&a.noColorButtonClick||l,this._defaultColor=a&&a.defaultColorButtonClick,i||(this._mustRender=!0,this._updateUI(),this._mustRender=!1),this._triggerSelect(t,s,a),i||(this._triggerChange(t,a),this._advPickerVisible&&this._setAdvancedPickerValue(n.getObject()),(o||this._fromInit)&&this._addToRecentColors(t))}}},{key:"_moreClrClickHandler",value:function(){this._advPickerVisible=!0,this._setAdvancedPickerValue(this._currentColor),this._setPickerDim(this._advPickerWd,this._advPickerHt),this._makeSeen(this._advPicker),this._setTransitionMargin("-"+this._pickerWd),this._reposition()}},{key:"_switchToBasic",value:function(){this._advPickerVisible&&(this._advPickerVisible=!1,this._setPickerDim(this._pickerWd,this._pickerHt),this._makeSeen(this._basicPicker),this._setTransitionMargin(0),this._opened?this._reposition():this._makeUnSeen(this._advPicker),this._updateColorBoxTitle())}},{key:"_addTransitionEvents",value:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],a=this._showHideContainer;t?this._addEvents({pickerSwitch:e._transitionEnd},a):this._removeEvents("",a)}},{key:"_setTransitionMargin",value:function(e){this._basicPicker.css(this._opts.rtl?"margin-right":"margin-left",e)}},{key:"_pickerSwitchHandler",value:function(e){this._showHideContainer.is(t(e.currentTarget))&&(this._advPickerVisible?(this._makeUnSeen(this._basicPicker),this._data.advancedPicker.instance.setFocus()):(this._opened&&this._focusMoreColors(),this._setAdvancedPickerValue(this._selectedInstance.getObject()),this._makeUnSeen(this._advPicker),this._avoidPickTrigger=!0,this._setValue(this._selectedInstance.initialColor,e),this._avoidPickTrigger=!1),this._addTransitionEvents(!1),this._addTransitionClass(!1))}},{key:"_updateCurrentColor",value:function(){this._colorInstance=this._selectedInstance,this._currentColor=this._colorInstance.getColor()}},{key:"_addTransitionClass",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.element[e?"addClass":"removeClass"]("zcolorpicker--transition")}},{key:"_reposition",value:function(){!this._data.dragged&&this._floating&&(this._addTransitionEvents(),this._addTransitionClass(),this._setPosition())}},{key:"_onClose",value:function(e){this._opened=!1,this._avoidPickTrigger=!0,this._switchToBasic(e),this._setValue(this._selectedInstance.initialColor,e,null,!0),this._setAdvancedPickerValue(this._selectedInstance.getObject()),_get(_getPrototypeOf(o.prototype),"_onClose",this).apply(this,arguments),this._avoidPickTrigger=!1}},{key:"_getPosition",value:function(e){var t=this;e.computeElementDim=!1;var a=this._borderThickness,i=parseInt(this._advPickerHt),l=parseInt(this._advPickerWd),s=parseInt(this._pickerHt),r=parseInt(this._pickerWd);return e.callbacks={beforeComputingDir:{dimensionModifier:function(e,o){var d,c;t._advPickerVisible?(d=l,c=i):(d=n(l,r),c=n(i,s)),o.width=d+a,o.height=c+a}},beforeComputingPos:{dimensionModifier:function(e,o){t._advPickerVisible||(o.width=r+a,o.height=s+a)}}},_get(_getPrototypeOf(o.prototype),"_getPosition",this).call(this,e)}},{key:"_destroy",value:function(){this.isCE||(this._destroyPicker(),this._destroyComp(this._data.opacityField)),_get(_getPrototypeOf(o.prototype),"_destroy",this).apply(this,arguments)}},{key:"_destroyPicker",value:function(){this._advPicker&&(this._data.advancedPicker.instance.destroy(),this._advPicker=void 0)}},{key:"name",get:function(){return"zcolorpicker"}},{key:"attrs",get:function(){return{defaultValue:"rgba(0,0,0,1)",defaultColorButton:!0,defaultColorButtonLabel:null,noColorButton:!0,noColorButtonLabel:null,noColorIconClass:null,noColorSVGIconId:null,defaultPaletteHeading:null,defaultPaletteType:"preset",standardColors:!0,standardColorsHeading:null,standardColorsPalette:"ms-office",colorField:!1,opacity:!1,opacityFieldType:"percent",advancedPicker:!0,advancedPickerButtonLabel:null,advancedPickerIconClass:null,advancedPickerSVGIconId:null,advancedPickerArrowIconClass:null,advancedPickerArrowSVGIconId:null,otherUsedColors:!0,otherUsedColorsHasLimit:!0,otherUsedColorsLimit:10,otherUsedColorsHeading:null,closeOnSelect:!0}}},{key:"props",get:function(){return{customPalette:null,otherPalettes:[],otherUsedColorsList:[],advancedPickerOptions:{commandBar:{leftColumn:{commands:["back"]},rightColumn:{commands:["cancel","OK"]},middleColumn:!1}},noColorIconClassName:null,advancedPickerIconClassName:null,advancedPickerArrowIconClassName:null,colorFieldOptions:{colorMode:"auto",readonly:!1,preview:!0},opacitySlider:{thumbIconClassName:null,thumbSVGIconId:null},labels:{noColor:"No Fill",defaultColor:"Default Color",defaultColorsHeading:"Preset Colors",standardColorsHeading:"Standard Colors",otherUsedColorsHeading:"Other Used Colors",advancedPicker:"More Colors",colorField:"Color Field",opacityField:"Opacity Field"}}}},{key:"EVENTS",get:function(){return["beforeotherusedcoloradd","otherusedcoloradd","colorfieldlistchange"]}}]),o}(e.ZColorPickerBase);e.registerComponent("ZColorPicker",e.ZColorPickerBase,C),function(e){var t=e.zcolorpicker.Templates,a=e.Templates.Utilities,o=e.zcolorpickerbase.Templates;t.children=function(i){var l=ZT.html(tO54(),i.hasCallout&&ZT.html(tO55()),i.title&&o.title(i),i.noColorBtn&&t.noColorBtn(i),i.defaultColor&&t.defaultColorBtn(i),i.defaultPalette&&o.palette(i.defaultPalette),i.standardPalette&&o.palette(i.standardPalette),i.palettes&&i.palettes.map(function(e){return o.palette(e)}),i.otherUsedColors&&o.palette(i.otherUsedColors),i.advancedPicker&&ZT.html(tO56(),i.moreColorBtn.id,i.moreColorBtn.label,a.icon(i.moreColorBtn.icon),i.moreColorBtn.label,a.icon(i.rightArrow)),(i.colorField||i.opacity)&&ZT.html(tO57(),i.colorField&&t.colorField(i.colorField),i.opacity&&t.opacity(i)),i.advancedPicker&&e.createAdvancedColorPicker(i.advancedPicker));return l}}(ZComponents);var D=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_bindEvents",value:function(){_get(_getPrototypeOf(o.prototype),"_bindEvents",this).call(this);var e=this.container.find("button");this._handleFocus(t(e[0])),this._handleFocus(t(e[1])),this._addEvents({previewClick:"mousedown"},t(e[0]))}},{key:"_setRenderData",value:function(e,t,a){t=_objectSpread({},t,{},{arrowIcon:!0,tabindex:-1}),_get(_getPrototypeOf(o.prototype),"_setRenderData",this).call(this,e,t,a)}},{key:"_setArrowData",value:function(t,a){var o=a.arrowSVGIconId,i;o||(i=a.arrowIconClassName||a.arrowIconClass,!i&&(o="zc__svg--downarrow")),o&&(o+=" "+this._CLASSES.ARROWSVGICON),t.arrow=e.ZButton.getBtnProps(_objectSpread({},t.arrow,{},{id:this._id+"arrow",templateRender:!0,iconClassName:i,SVGIconId:o,defaultIconClassName:this._CLASSES.ARROW}))}},{key:"_setTogglerData",value:function(e,t){e=this._data.arrow.customAttributes={},_get(_getPrototypeOf(o.prototype),"_setTogglerData",this).call(this,e,t),e.zclassName="zcolormenubutton",this._toggler&&this._toggler[this._opened?"addClass":"removeClass"]("is-selected")}},{key:"_toggleBtnClickHandler",value:function(e){e.button||(this._trigger("arrowclick",e,{arrowClick:!0}),_get(_getPrototypeOf(o.prototype),"_toggleBtnClickHandler",this).call(this,e))}},{key:"_previewClickHandler",value:function(e){this.closePicker(e)}},{key:"_storeRef",value:function(e){if(!e.rendered||this._domChanged){_get(_getPrototypeOf(o.prototype),"_storeRef",this).apply(this,arguments);var t=e.arrow;this._toggler=t.mainElement=this.container.find("."+this._CLASSES.ARROW).parent()}}},{key:"name",get:function(){return"zcolorsplitbutton"}},{key:"CLASSES",get:function(){return{ARROW:"zcolorfield__arrow",ARROWSVGICON:"zbutton__svg zbutton__splitarrow",CONTAINER:"zcolorsplitbutton zbutton--split zbutton--splitnormal",ACTIVE:"is-selected"}}},{key:"EVENTS",get:function(){return["arrowclick"]}}]),o}(e.ZColorBase);e.registerComponent("ZColorSplitButton",e.ZColorBase,D),function(e){var t=e.zcolorsplitbutton.Templates,a=e.Templates.Utilities;t.container=function(e){return ZT.html(tO58(),e.children&&t.children(e))},t.children=function(t){var o=ZT.html(tO59(),t.disabled,t.disabled,t.disabled?"is-disabled":"",t.nofill?ZT.html(tO60()):t.icon||t.stroke?ZT.html(tO61(),t.previewStyleAttr,t.icon&&a.icon(t.icon)):ZT.html(tO62(),t.color),e.zbutton.Templates.container(t.arrow));return o}}(ZComponents);var w=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(e,t){this._data.classes=this._CLASSES,this._id=e[0].id=this._getID(e),this._namespace="."+this.name,"DIV"===e[0].tagName?(this._skipParent=!0,this._useParent=!0):(e[0].style.display="none",this._useParent=!1),this._fromInit=!0,this._DOMChanges={},this.params={},this._wheelEvents="onwheel"in document||9<=document.documentMode?"wheel":"mousewheel",this._imgErrHandlerRef=this._imgErrHandler.bind(this),this._selectedItems=[],this.isCE||"SELECT"!==this.element[0].tagName||(["disabled","multiple"].forEach(function(a){t[a]=t[a]||e[0][a]}),e[0].multiple=t.multiple),this._docMouseUpHandler=this._onDocMouseUp&&this._onDocMouseUp.bind(this),this._setNoResultsData(),this._initVars(),this._parseHTML(),this._initDS(),this._setInitValues(),this._savePrev(),this._afterPropInit()}},{key:"_afterPropInit",value:function(){this._reorderble=this._grippyIconData=!1;var t=this._opts;!t.reorderable||t.multiple&&!this._checkboxPattern&&t.allowDragToSelect||!this.staticData||this.params.query||this._lazyLoadData||this.inputField||(this._reorderble=!0,t.grippyIcon&&e._getIconInfo(t.grippyIconClassName,t.grippySVGIconId,"#zc__svg--grippy-listbox",this._CLASSES.itemicon,this._grippyIconData={}))}},{key:"_parseHTML",value:function(){this._htmlTagData=!1,this._htmlHeaderItems=[],this._htmlFooterItems=[],!this._useParent&&this._parseHTMLInput&&this._parseHTMLInput()}},{key:"_setInitValues",value:function(){var e=this._opts,t=e.value;this._isNotNull(t)||(t=[],e.items&&!this.ajaxSource&&e.items.forEach(function(e){e.selected&&t.push(e)})),e.value=[],this._setValues(t)}},{key:"_initVars",value:function(){var a=this._opts;if(this._freshRequest=!0,this._actionBtns=!1,this.inputField=void 0,this._highlightData=void 0,this._searchable=void 0,this._showSearchField=a.showSearchField,this._showSearchField)this._setSearchFieldData(),this._searchable=!0;else if(this._data.searchBox=void 0,a.searchField){var o=t(a.searchField);o.length&&(this.inputField=o,this._searchable=!0)}this._showCheckedIcon=a.checkedIcon,this._checkboxPattern=a.multiple&&"checkbox"===a.multiSelectInterfacePattern,this._showCheckBox=this._checkboxPattern&&!a.hideCheckbox,this._selectOnFocus=!(this._checkboxPattern&&a.hideCheckbox)&&(a.multiple&&!this._checkboxPattern||(void 0===a.selectOnKeyNavigation?!a.multiple&&!this._searchable:a.selectOnKeyNavigation)),this._toggleOnItemClick=!this._checkboxPattern||a.hideCheckbox||!this._selectOnFocus,this._focusOnHover=a.focusItemOnItemMouseover,this._htmlTagData||this._assignDM(),this._isGrouped=!!this._dataMapping.groupLabel,this._checkedIconData={},this._setContentProps(a.contentType);var i=a.actionButtons.actions;i&&i.length&&this._setActionBtns(i),e._getIconInfo(a.checkedIconClassName||a.checkedIconClass,a.checkedSVGIconId,"#zc__svg--tick",this._CLASSES.checkedicon,this._checkedIconData)}},{key:"_bindEvents",value:function(){this._addEvents({focusIn:"focusin",blur:"focusout",mousedown:"mousedown",keydown:"keydown",click:"click"}),this.container.on("click."+this.name,"."+this._CLASSES.checkboxWrapper,this._checkboxClickHandler.bind(this))}},{key:"_keydownHandler",value:function(e){if(this._trigger("beforekeydown",e))return this._keydownActions(e)}},{key:"_keydownActions",value:function(e){var t=this._navInstance.moveFocus(e);return this._trigger("keydown",e),t}},{key:"_imgErrHandler",value:function(e){var a=e.target;if("IMG"===a.tagName){var o=this._getItemEventData(this._getClosestItem(t(a)));o.imageElement=a;var i=o.itemMappedData.image;this._trigger("imageerror",e,o);var l=o.itemMappedData;l.image!==i&&(l.ignoreRender=!0,l.hasImageURL=!0,this._render(l,"imageLayout",a.parentNode,!0))}}},{key:"_mousedownHandler",value:function(){this._actionBtnClicked||this._focussed||(this._focussed=!0),this._actionBtnClicked=!1}},{key:"_clickHandler",value:function(){this._actionBtnClicked=!1}},{key:"_getClosestItem",value:function(e){var t=e.closest("."+this._CLASSES.item);return t.length?t:void 0}},{key:"_itemSelectHandler",value:function(a){var o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],i=a.detail.item;if(a=a.originalEvent,!this._dragging){var l=!0;if(a){var n;if("mouseup"===a.type){if(a.isDefaultPrevented())return!1;n=this._getClosestItem(t(a.target))}else if("keydown"===a.type){var s=a.keyCode,r=e.keyCode;this._selectOnFocus||s===r.ENTER||s===r.SPACE?n=this.getFocussed():l=!1}n?n.data("selectable")&&this._isValidClick(a,o,i)&&(l=!1):l=!1}else i.data("selectable")&&(l=!1);if(!l)return this._selectItem(i,o,a)}return!1}},{key:"_isValidClick",value:function(){return!this._opts.multiple||this._isValidMultiSelectClick.apply(this,arguments)}},{key:"_isCheckboxClick",value:function(e){var a=e&&t(e.target),o=this._CLASSES;if(a&&(a.hasClass(o.checkboxlabel)||a.hasClass(o.checkbox)||a.hasClass(o.checkboxWrapper)))return!0}},{key:"_checkboxClickHandler",value:function(e){e.preventDefault()}},{key:"_itemClickHandler",value:function(e,t,a){var o=a.itemMappedData;if(!o.disabled){var i=this._getItemEventData(t);if(!o.selectable){if(o.moreresults){var l=this._opts.moreResultsAction;"function"==typeof l&&l(),this._trigger("moreactionclick",e,i)}this._focusEle(t,e)}this._trigger("itemclick",e,i)}}},{key:"_getItemEventData",value:function(e,t){return t=t||this._getStoredData(e),{item:e.length&&e[0],itemMappedData:t,itemData:t.originalData}}},{key:"_focusInHandler",value:function(e){var t=this._focussed;this._focussed=this._focusCallbackCalled=!0,t||this._blurTimer||this._focusLastFocussed(this._opts.focusFirstItem,e),this._trigger("focus",e)}},{key:"_focusLastFocussed",value:function(e,a){var o=this._opts.focusSelectedItem,i=(this._domChanged||this._considerLastFocussed)&&this.getFocussed();if(i||(e?!this._domChanged&&(i=this.getFirstValidItem()):o&&(i=this._listBody.find("."+this._CLASSES.selected).first()[0])),i)return i=t(i),this._focusEle(i,a),i}},{key:"_blurHandler",value:function(e){var t=this;clearTimeout(this._blurTimer),document.activeElement!==this.container[0]&&(this._focussed=!1,this._blurTimer=setTimeout(function(){t._focussed||t._focusOutHandler(e),t._blurTimer=!1}))}},{key:"_focusOutHandler",value:function(e){this._focussed=this._lastFocussedItem=!1,this._setFocusClass(this.getFocussed(),!1),this._updateFieldClass(),this._removeDocEvent(),this._trigger("blur",e)}},{key:"_updateFieldClass",value:function(){this._showSearchField&&this.inputField[this.inputField[0]===document.activeElement?"addClass":"removeClass"](this._CLASSES.focussed)}},{key:"_focusItemHandler",value:function(e,t){if(this._focussed&&this._isFocussableItem(e)){var a=this._getItemEventData(e);if(this._trigger("beforeitemfocus",t,a)){var o=this._getStoredData(e);if(o.clickable)return this.inputField&&this._autofill(e,o,t),this._lastFocussed!==o.id&&this._unFocusItem(),this._lastFocussed=o.id,this._lastFocussedItem=e,this._considerLastFocussed=!t||"mouseenter"!==t.type,this._setFocusClass(e),this._trigger("itemfocus",t,a),!0}}return this._focussed||(this._unFocusItem(),this.setFocus(t)),!1}},{key:"_unFocusItem",value:function(){var e=this.getFocussed();e&&this._setFocusClass(e,!1),this._lastFocussed=void 0}},{key:"_getStoredData",value:function(e){return e.length&&e[0].itemData}},{key:"_updateData",value:function(e){this._getById(e.id)[0].itemData=e}},{key:"_postRender",value:function(){this._updateRenderedView()}},{key:"_fixHtWd",value:function(){var e=this._opts.height||this.element[0].style.height,t=this._opts.width||this.element[0].style.width;e&&(this.container[0].style.height=this._getCorrectedPx(e)),t&&(this.container[0].style.width=this._getCorrectedPx(t))}},{key:"_getCorrectedPx",value:function(e){return"none"===e?"":"".concat(e).concat(isNaN(e)?"":"px")}},{key:"_updateRenderedView",value:function(){var t=this._data,a=this._opts;this._fromInit&&this.container[0].addEventListener("error",this._imgErrHandlerRef,!0),t.className=this._getClass(),this._fixHtWd(),this._storeRef(),this.inputField&&this._bindInputFieldEvents(),this._showSearchField&&this._updateClearBtn();var o=this._opts.tabindex;a.disabled?this.container.removeAttr("tabindex"):this.container.attr({tabindex:this._isNotNull(o)?o:this._opts.showSearchField?-1:0}),this._addEvents({scroll:"scroll"},this._listBody);var i=this._getOptsForSelectableUtil();this._navInstance?this._navInstance.setAttributes(i):(this._navInstance=e.selectable(this.container,i),this.container.off("keydown.zselectable")),this._fromInit=!1}},{key:"_getOptsForSelectableUtil",value:function(){var e=this,t=this._opts,a=this._CLASSES,o={items:".".concat(a.item,"[data-zplaceholder=\"true\"], .").concat(a.item,"[data-clickable=true]:not(.").concat(a.disabled,")"),multiple:t.multiple,toggle:this._checkboxPattern,focusItemOnItemMouseover:this._focusOnHover,selectOnFocus:this._selectOnFocus,selectOnEnterKey:t.selectOnEnterKey,selectOnSpaceKey:t.selectOnSpaceKey,allowDragToSelect:t.allowDragToSelect&&!this._checkboxPattern,keyNavigation:t.keyNavigation,allowShiftSelection:t.allowShiftSelection,keyNavigationOptions:{direction:"vertical",wrapAround:!this._lazyLoadData&&t.wrapAround,characterKeyFocus:t.characterKeyFocus,keyMatchAttribute:"zkeymatchlabel"},select:function(){},beforeselect:function(t){return e._itemSelectHandler(t,!0)},beforedeselect:function(t){return e._itemSelectHandler(t,!1)},deselect:function(){},beforeblur:function(){return!1},beforereset:function(a){var o=a.detail.item;return a=a.originalEvent,!(e._dragging||!o.data("selectable")||t.multiple&&"mouseup"===a.type&&e._checkboxPattern&&(!e._selectOnFocus||e._isCheckboxClick(a)))},change:function(t){e._triggerChange(t,t.detail.item)},reset:function(t){var a=t.detail.item;return t=t.originalEvent,e._clearSelection(t,a[0].itemData)},beforefocusmove:function(t){var a=t.detail.item,o=t.detail.ahead;if(t=t.originalEvent,t&&"mouseup"===t.type){if(t.isDefaultPrevented())return!1;e._focussed||(e._focussed=!0,e.setFocus(t))}return("select"!==o||e._canFocusMove(a,t))&&e._focusItemHandler(a,t)},focusmove:function(){},mouseenter:function(t){var a=t.detail.item;e._isFocussableItem(a)&&(e._itemInHover=a,e._trigger("itemhover",t,e._getItemEventData(a)))},mouseleave:function(){e._itemInHover=!1},beforemouseup:function(){return!e._actionBtnClicked},beforemousedown:function(){return!e._actionBtnClicked}};return this._styleBasedFilter&&(o.items+=":visible"),o}},{key:"_isFocussableItem",value:function(e){return e&&e.length&&e.attr("data-clickable")}},{key:"_canFocusMove",value:function(t,a){if(t&&t.length&&a&&this._opts.multiple&&this._selectOnFocus&&!this._checkLimit()&&"keydown"===a.type&&a.shiftKey){var o=e.keyCode,i=a.keyCode;if(i===o.DOWN||i===o.UP)return!1}return!0}},{key:"_postEachRender",value:function(){this._domChanged&&this._updateRenderedView(),this._newAddedItems=this._getDomsForData(this._newAddedJSON),this._setVisibility(this._data.orgEvent),(this._domChanged||!this._data.rendered||this._updateMidHt)&&this._fixMidHt(),this._manageReorderable(),this._bindScrollToLazyLoad(),this._updateCustomAttrs(),this._updateStates(this._data.orgEvent),this._data.orgEvent=void 0}},{key:"_show",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];e&&e[0]&&(e[0].style.display=t?"":"none")}},{key:"_hide",value:function(e){return this._show(e,!1)}},{key:"_setVisibility",value:function(){var e=this._data,t=this._CLASSES;e.className=this._getClass();var a=this._noResultsEle,o=this._loaderEle,i=this._listBody,l=this.container;l.removeAttr("data-loading").removeAttr("data-noresults"),this._loading?(o[e.loader.fullloader?"addClass":"removeClass"](t.fullloader),this._show(o),this._show(i),this._hide(a),this.container.attr("data-loading",!0)):(o&&o.removeClass(t.fullloader),this._noResults?(this._hide(i),this._show(a),this.container.attr("data-noresults",!0)):(this._hide(o),this._hide(a),this._show(i))),e.className=this._getClass()}},{key:"_fixMidHt",value:function(){var e=this,a=0,o=this._CLASSES,i=_toConsumableArray(this.container[0].children),l=[],n=[];i.forEach(function(e){e=t(e),e.hasClass(o.body)||e.hasClass(o.noresults)||e.hasClass(o.loader)?l.push(e[0]):!e.attr("data-floating")&&n.push(e[0])}),n.forEach(function(e){a+=e.offsetHeight||0}),this._childHt="calc(100% - "+a+"px)",l.forEach(function(t){t.style.height=e._childHt})}},{key:"_updateCustomAttrs",value:function(){var e=this._data.items,t=this._prevItems;if(e.length)for(var a=0;a<e.length;a++){var o=t&&t[a]&&t[a].customAttributes,l=e[a].customAttributes,n={},s=!1;if(o){if(o===l)continue;for(var r in o)n[r]=null;s=!0}l&&(Object.assign(n,l),s=!0),s&&this._getById(e[a].id).attr(n)}this._prevItems=_toConsumableArray(e)}},{key:"_getDomsForData",value:function(e){var t=this;return e&&e.map(function(e){return t._getById(e.id)[0]})}},{key:"_updateStates",value:function(e){var a=this,o=this._newAddedItems||this._getDomsForData(this._data.items),l=this._CLASSES;return this._itemInHover&&!this.container.find(this._itemInHover).length&&(this._itemInHover=void 0),o.forEach(function(e){var o=t(e),n=a._getStoredData(o),s=a._selectedItems;if(n.selectable){for(var r=0,d;r<s.length;r++)s[r].id===n.id&&(s[r]=n,n.selected=d=!0);a._addSelectDataToItem(o,!!d),n.checkbox&&(o.find("."+l.checkbox)[0].checked=d),n.actionButtons&&a._bindActionBtns(o,n)}}),this._setFocusAfterStateUpdate(o,e),o}},{key:"_addSelectDataToItem",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(e.attr("data-selectable")){var a=this._CLASSES;t?e.addClass(a.selected):e.removeClass(a.selected),e.attr("aria-selected",t)}else e.removeAttr("aria-selected")}},{key:"_setFocusAfterStateUpdate",value:function(e,t){var a=!this._lazyLoaded||this._virtualization;if(a&&e.length&&this._focussed){var o=this.getFocussed(),i=this._lastFocussed&&this._lastFocussedItem;if(this._fromSearch||this._newlyLoadingData?(this._considerLastFocussed=!1,o=this._focusLastFocussed(this.inputField?this._opts.search.focusFirstResult:void 0,t)):this._focusEle(o,t),i&&(!o||i[0]!==o[0])&&i.removeClass(this._CLASSES.focussed+" "+this._CLASSES.hover),this._itemInHover){var l=this._itemInHover;this._itemInHover=void 0,l.trigger("mouseenter")}}}},{key:"_setFocusClass",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(e){var a=this._CLASSES.focussed;this._focusOnHover&&(a+=" "+this._CLASSES.hover),t||e.removeClass(a)}}},{key:"_storeRef",value:function(){var e=this._CLASSES,t=this._data,a=this.container;this._noResultsEle=this._loaderEle=void 0,this._showSearchField&&(this.inputField=this._getById(t.searchBox.id)),this._listBody=a.find("."+e.body),this._listHeader=a.find("."+e.header),this._listFooter=a.find("."+e.footer),t.noResults&&(this._noResultsEle=this._getById(t.noResults.id)),t.loader&&(this._loaderEle=this._getById(t.loader.id));var o=this._opts.searchFieldOptions.placeholder;this.inputField&&o&&this.inputField.attr("placeholder",o)}},{key:"_bindScrollToLazyLoad",value:function(){this._freshRequest&&this._lazyLoadData&&(this.params.totalPages>this.params.pageIndex||this.params.moreServerPages)&&this._bindScroll()}},{key:"_selectItem",value:function(e){var t=this,a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=2<arguments.length?arguments[2]:void 0,i=this._CLASSES,l;a=!!a,e.id&&(l=e,e=this._getById(l.id)),e.length&&(l=this._getStoredData(e));var n=this._isSelectedItem(l);if(l.selectable&&n!==a){!e.length&&this._dsInit&&this.DSInstance.getData(l.originalData,function(e){e&&(l=t.getItemData(e))});var s=a?"select":"deselect";if(this._trigger("before"+s,o)){if(!a)this._removeFromSelection(l,o);else if(!this._addToSelection(l,o))return!1;this._addSelectDataToItem(e,!!a),l.selected=a,this._showCheckBox&&e.length&&(e[0].querySelector("."+i.checkbox).checked=a),a&&this.inputField&&this._setFieldValue(e,l,o),this._trigger(s,o,this._getItemEventData(e,l)),this._changed=!0}else return!1}return l.selectable}},{key:"_triggerChange",value:function(t,a){t=t&&t.originalEvent;var o={};if(a&&a.length&&(o=this._getItemEventData(a)),this._changed){var i=this._selectedItems.map(function(e){return e.id});this.container&&this.container.attr("aria-activedescendant",i.join(",")),o.previousValue=this._prevValues,this._trigger("change",t,o),this._savePrev()}if(t){var l=e.keyCode,n=t.keyCode,s=t.type;t&&o.item&&("mouseup"===s||"keydown"===s&&(n===l.ENTER||n===l.SPACE))&&this._itemClickHandler(t,a,o)}this._changed=!1}},{key:"_savePrev",value:function(){this._prevValues=_toConsumableArray(this._opts.value)}},{key:"values",value:function(){return this._selectedItems}},{key:"_initialRender",value:function(){this._search(),this._data.rendered||this._replaceBodyItems([])}},{key:"_setContentProps",value:function(e){/^(image-text|image-text-desc|text-desc|text|custom|image)$/.test(e)||(e="text"),this._isCustom=-1<e.indexOf("custom"),this._hasImage=this._hasIcon=!1,this._isCustom||(this._hasText=-1<e.indexOf("text"),this._hasDesc=-1<e.indexOf("desc"),-1<e.indexOf("image")&&(this._hasIcon=!(this._hasImage=this._dataMapping.image)))}},{key:"_assignDM",value:function(){this._dataMapping=_objectSpread({},this._opts.dataMapping)}},{key:"_initDS",value:function(){var e=this._opts,t=this._data;this.DSInstance||(t.loader=this._loading=!1),t.items=[],this._datasource=[],this._groupsIncluded=[],this._dataLoaded=!1,this._groupHeads=[],t.headerItems=t.footerItems=t.moreAction=t.virtualHeightBelow=t.virtualHeightAbove=void 0;var a=e.dataSource,o=e.items;if(this._dsInit=this.staticData=!1,this.ajaxSource=this._isAjaxSource(a),this.ajaxSource||o&&o.length){this._dsInit=this.staticData=!0;var i={callbacks:{}};this.ajaxSource?this._bindAjaxEvents(i.callbacks):"nested"===e.dataStructure&&(o=this._flattenData(o)),this._virtualization=!1,!e.filterByCSSSelector||this.ajaxSource||e.search.highlightKeyword||this._isGrouped?(this._lazyLoadData="auto"!==e.height&&e.lazyLoading,e.virtualization&&(this._virtualization=this._lazyLoadData=!0),this._styleBasedFilter=!1,this._filterFn=this._filterByAddRemoval):(this._lazyLoadData=!1,this._styleBasedFilter=!0,this._filterFn=this._filterListViaStyles),i.search=e.search,i.filters=e.filters,["sort","sortBy","sortOrder","customSorter","serverSearch","isResponseFiltered","cacheData","customSearch"].forEach(function(t){i[t]=e[t]}),this._viewPerPage=this._lazyLoadData?this._isNotNull(e.viewPerPage)?e.viewPerPage:10:0,i.maxResults=this._viewPerPage,i.searchIncrementsInCache=e.search.searchIncrementsInCache,i.dataMapping=this._dataMapping,i.callbacks.update=this._onDSUpdate.bind(this),i.allowDuplicateValues=e.allowDuplicateItems,this.DSInstance?this.DSInstance.setAttributes(i):(this._lastScrollTop=0,i.dataSource=a,i.data=o,this.DSInstance=this._initDSInstance(i)),(this.DSInstance._serverSearch||this.DSInstance._serverPaging)&&(this.staticData=!1),this.ajaxSource&&this._setLoaderData()}}},{key:"_preRender",value:function(e){var t=this._data;if(e.ignoreRender)return Object.assign({},this._opts,t,e);var a=this._opts,o=this._DOMChanges,i=t.moreAction;return o&&Object.keys(o).length&&this._replaceMovedItems(),this._DOMChanges={},(!t.rendered||this._domChanged)&&(t.attrs={role:"listbox","aria-multiselectable":!!a.multiple}),a.moreResultsAction?this._noResults?t.moreAction=void 0:this._setMoreResults():(!t.rendered||this._domChanged)&&this._setHeaderFooterItems&&this._setHeaderFooterItems(),this._updateMidHt=!!i!=!!this._data.moreAction,t}},{key:"getItemData",value:function(t,a,o,i){var l=_objectSpread({},this._getBasicItemData(t),{},{name:a,separator:t.separator,heading:o,custom:"custom"===t.contentType,view:{},selectable:!1});if("object"!==_typeof(t)){var n=t;t={},t.separator||this._setProp(t,o?"groupLabel":"text",n)}l.normalisedData=t;var s=l.customAttributes=_objectSpread({},t.customAttributes||{});return o?this._setHeadingData(l):!t.separator&&this._setViewData(l,i),this._updateItemClass(l),t.style&&(s.style=t.style),this._isNotNull(t.title)&&(s.title=t.title),e.isEmpty(s)&&delete l.customAttributes,l}},{key:"_getBasicItemData",value:function(e){return{id:this._getItemId(e),originalData:e,normalisedData:e,zlistitem:!0,selectable:!0}}},{key:"_setKeyValue",value:function(e,t,a){a=!this._isEncoded()&&a;var o=this._getProp(e.normalisedData,t,a);e[t]=o}},{key:"_isEncoded",value:function(){return this._opts.isTextHTMLEncoded}},{key:"_setHeadingData",value:function(t){this._setKeyValue(t,"groupLabel"),t.disabled=this._opts.disabled;var a=this._opts.groupHeadingTemplate;a?t.view.innerHTML=this._getCustomContent(t,this._opts.groupHeadingTemplate,!0,"text"):t.view.text=this._highlight(e.encodeHTML(t.groupLabel),this._dataMapping.groupLabel)}},{key:"_updateItemClass",value:function(e){var t=e.originalData.className||"",a=e.customAttrs;a&&a.className&&(function(e){t+=" "+e}(a.className),delete a.className),e.className=t}},{key:"_afterFilter",value:function(e,t){if(this._newlyLoadingData=!1,this._freshRequest){var a;if(this._styleBasedFilter)a=this.getFirstItem();else{var o=t&&t.addedItems;a=o&&o.length}if(a)this._hideNoResults(void 0,e);else return void this._showNoResults(e)}this._opts.search.highlightKeyword&&!this._noResults&&this._styleBasedFilter&&this._highlightInList(),this._itemsRendered&&this._setScrollTop(),this._itemsRendered=!0,this._triggerUpdate(e,t)}},{key:"_hideNoResults",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length?arguments[1]:void 0;this._noResults=!1,this._status="ok",e&&this._setVisibility(t)}},{key:"_showNoResults",value:function(e){var t={query:this.params.query};this._trigger("noresults",e,t)&&this._showWarning("noResults",e)}},{key:"_showWarning",value:function(e,t){var a=e.toLowerCase(),o={params:this.params,status:a};this._noResults=!0,this._status=a;var i=this._getText(e),l="noResults"===e&&this._customNoResultsHTML;return this._customNoResultsHTML&&this._showHideCustomNoResults(l),this._data.noResults.innerHTML=l?null:i,this._styleBasedFilter&&this._data.rendered&&(!this._domChanged||!this._reInit)&&this._renderView(),this._hideAllItems(t),this._noResultsEle.attr("data-warning",a),this._triggerUpdate(t,o)}},{key:"_hideAllItems",value:function(e){return this._styleBasedFilter&&this._data.rendered?this._hideItemsUsingCSS():void this._replaceBodyItems([],void 0,e)}},{key:"_getMsg",value:function(e){return this._getI18NText(e)}},{key:"_getClass",value:function(){var e=this._CLASSES,t=e.container,a=function(e){t+=" "+e};return this._loading&&a(e.listwithloader),this._opts.className&&a(this._opts.className),this._opts.rtl&&a(e.rtl),this._opts.disabled&&a(e.disabled),this._showCheckBox||this._showCheckedIcon?(this._showCheckBox&&(a(e.withcheckbox),"right"===this._opts.checkboxPosition&&a(e.listwithcheckboxRight)),this._showCheckedIcon&&(a(e.withcheckedicon),"right"===this._opts.checkedIconPosition&&a(e.listwithcheckediconRight))):a(e.withoutcheckeditem),this._actionBtns&&"contextual"===this._opts.actionButtons.displayType&&a(e.listwithactionbtnsvisible),this._opts.showSearchField&&a(e.withsearchfield),this._isCustom?a(e.listwithcustom):(this._hasIcon?a(e.withicon):this._hasImage&&a(e.listwithimage),this._hasDesc&&a(e.withhint),"image"===this._opts.contentType&&a(e.listwithicononly)),this._reorderble&&a(e.reorderable),t}},{key:"_getBool",value:function(e){if(!0===e||"true"===e)return!0}},{key:"_setCheckboxData",value:function(e){this._showCheckedIcon&&(e.checkedIconPosition=this._opts.checkedIconPosition,e.checkedIcon=this._checkedIconData),this._showCheckBox&&(e.checkbox=!0,e.checkboxId="zcheckbox-"+e.id,e.checkboxPosition=this._opts.checkboxPosition)}},{key:"_setViewData",value:function(e,t){var a=e.view,o=e.normalisedData,i=e.customAttributes;e.hidden=o.hidden,e.disabled=o.disabled||this._opts.disabled;var l=this._isNotNull(o.selectable)?this._getBool(o.selectable):!t;e.selectable=l,e.disabled||(e.clickable=l||!this._isNotNull(o.clickable)||this._getBool(o.clickable)),l&&(this._setCheckboxData(e),e.actionButtons=this._actionBtns,e.grippyIcon=this._grippyIconData);var n=t&&!l;this._styleBasedFilter&&this._searchable&&!n&&this._getAttrForCSSFilter(o,i);var s=i["data-label"]||this._mapJSONToData(o,this._dataMapping.text,!1);if(a.ariaLabel=s||"",a.ariaValue=this._getProp(o,"value")||a.ariaLabel,o.custom||this._isCustom)a.innerHTML=this._getCustomContent(o,o.zinnerHTML||o.innerHTML||this._opts.template,!0,"text"),e.custom=!0;else{var r=this._setKeyValue.bind(this,e);(this._hasIcon||this._hasImage)&&this._setImageData(e),this._hasText&&(r("text",!0),a.text=n?e.text:this._highlight(e.text,this._dataMapping.text),i["data-label"]=s,this._opts.characterKeyFocus&&(i["data-zkeymatchlabel"]=s&&s.toLowerCase())),this._hasDesc&&(r("informativeText",!0),a.description=n?e.informativeText:this._highlight(e.informativeText,this._dataMapping.informativeText))}}},{key:"_triggerUpdate",value:function(e,t){return this._trigger("listupdate",e,t)}},{key:"_triggerBeforeUpdate",value:function(e,t){return this._trigger("beforelistupdate",e,t)}},{key:"_highlight",value:function(e,t){return e&&this.params.query&&this._opts.search.highlightKeyword&&(e=this._highlightValidKey(e,t)),e}},{key:"getFirstItem",value:function(e){var a=this;return this.container.find(".".concat(this._CLASSES.item,"[data-selectable]")).toArray().find(function(o){var i=t(o);return(!e||i.is(e))&&(!a._styleBasedFilter||"none"!==i.css("display"))})}},{key:"getFirstValidItem",value:function(){return this.getFirstItem(":not(."+this._CLASSES.disabled+")")}},{key:"_scrollHandler",value:function(e){this._considerScrollForLazyLoad?this._scrollHandlerToLoadPage(e):this._lastScrollTop=this._listBody[0].scrollTop}},{key:"_focusInputField",value:function(){this.inputField.focus()}},{key:"getFocussed",value:function(){if(this._lastFocussed){var e=this._getById(this._lastFocussed);return e.length?e:void 0}}},{key:"_trigger",value:function(e,t,a){return!!this._fromInit||(a=a||{},a.value=this.getValue(),a.initialized=!this._fromInit,this._dispatchEvent(e,t,a,void 0,!!t))}},{key:"_getItemJSON",value:function(e,t){var a=this;return this._isGrouped&&!t?this._getItemJSONForGroupedData(e):e.map(function(e){return a.getItemData(e)})}},{key:"_addBodyItems",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],a=2<arguments.length?arguments[2]:void 0,o=e,i;if(t&&e.length){var l;(l=this._datasource).push.apply(l,_toConsumableArray(e)),o=this._getItemJSON(e)}(i=this._data.items).push.apply(i,_toConsumableArray(o)),this._lazyLoaded=!0;var n=this._renderView(o,a);return this._lazyLoaded=!1,n}},{key:"_renderView",value:function(e,t){return this._data.orgEvent=t,this._newAddedJSON=e,this._render(),this._data.rendered=!0,this._domChanged=!1,this._newAddedItems}},{key:"_replaceBodyItems",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],a=2<arguments.length?arguments[2]:void 0,o=e;t&&e.length&&(this._datasource=_toConsumableArray(e),o=this._getItemJSON(e)),this._data.items=o;var i=this._renderView(o,a);return i}},{key:"_getKeyID",value:function(e){return"z"+this._id+"-"+e}},{key:"_loadDataSource",value:function(e,t){var a=this;this._dsInit?this.fetchData(this.params,function(o){var i=o.results;delete o.results,a.params=_objectSpread({},a.params,{},o);var l={results:i,params:_objectSpread({},a.params)};a._triggerBeforeUpdate(t,l),e(l.results,t)}):e([])}},{key:"_getItemId",value:function(e){return _get(_getPrototypeOf(o.prototype),"_getItemId",this).call(this,e,this._id)}},{key:"_removeStyle",value:function(){this.styletag&&(this._opts.search.highlightKeyword&&this._highlightInList(void 0,!0),this.styletag.remove(),this.styletag=void 0)}},{key:"_manageReorderable",value:function(){this._reorderble&&!this._opts.disabled?this._initSortable():this._destroySortable()}},{key:"_initDSInstance",value:function(t){return new e.ZDatasourceHandler(null,t)}},{key:"_setScrollTop",value:function(){this._listBody[0].scrollTop=this._lastScrollTop}},{key:"_destroySortable",value:function(){this._grippyIconData=!1,this._listBody.data("zsortable")&&e.sortable(this._listBody).destroy()}},{key:"_getText",value:function(t){var a=e.encodeHTML(this._getMsg(t)),o="query",i=this.params.query;return"minKeywordLength"===t&&(o="minKeywordLength",i=this._opts.search.minKeywordLength),a=a.replace(new RegExp("#".concat(o,"#"),"g"),"<b class=\"zh-bold\">"+(i||"")+"</b>"),a}},{key:"_destroyDSIns",value:function(){this._removeStyle(),this._lazyLoadData&&this._unbindScroll(),this._dsInit=!1,this.DSInstance&&(this.DSInstance.destroy(),this.DSInstance=void 0)}},{key:"_detachInputEv",value:function(){this.inputField&&this._removeEvents("",this.inputField)}},{key:"_reSearch",value:function(){this._skipScrollTopReset=!this._dataReset,this.params.previousQuery=void 0,this._search(this.params.query,{setItemFocus:!1}),this._skipScrollTopReset=!1}},{key:"_isSelectedItem",value:function(e){return!!this._selectedItems.find(function(t){return t.id===e.id})}},{key:"_clearSelection",value:function(e,t){var a=this,o=_toConsumableArray(this._selectedItems);t&&(t=this._toArr(t),o=o.filter(function(e){return!t.find(function(t){var o=t.originalData&&t.zlistitem?t.id:a._getItemId(t);return o===e.id})})),o.forEach(function(t){a._selectItem(t,!1,e)})}},{key:"_addToSelection",value:function(e,t){return this._checkLimit()?(this._isSelectedItem(e)||(this._opts.multiple?this._selectedItems.push(e):(this._clearSelection(t,e),this._selectedItems=[e]),this._updateValues()),!0):void this._trigger("selectionlimitexceeded",t,{valueToBeSelected:e.originalData})}},{key:"_updateValues",value:function(){this._opts.value=this._selectedItems.map(function(e){return e.originalData})}},{key:"_removeFromSelection",value:function(e){for(var t=this._selectedItems,a=0;a<t.length;a++)if(t[a].id===e.id){t.splice(a,1),this._updateValues();break}}},{key:"_checkLimit",value:function(){var e=+this._opts.selectionLimit;if(!e||isNaN(e)||e>this._selectedItems.length)return!0}},{key:"_setValues",value:function(e,t){var a=this;t=t||{};var o=t.clearOtherValues,i=t.event;this._changed=!1,e=this._toArr(e),o&&this._clearSelection(i,e),e.forEach(function(e){e=a._getBasicItemData(e),a._selectItem(e,!0,i)}),this._triggerChange(i)}},{key:"_removeDocEvent",value:function(){this._docMouseUpHandler&&document.removeEventListener("mouseup",this._docMouseUpHandler,!0)}},{key:"_destroy",value:function(){this.container[0].removeEventListener("error",this._imgErrHandlerRef,!0),clearTimeout(this._searchTimer),clearTimeout(this._focusTimer),clearTimeout(this._blurTimer),this._detachInputEv(),this._removeDocEvent(),this._navInstance&&(this._navInstance.destroy(),this._navInstance=void 0),"SELECT"!==this.element[0].tagName||this.element.attr("multiple")||(this.element[0].multiple=!1),this._destroyDSIns(),this.container.empty()}},{key:"_focusCallback",value:function(e,t,a){if(this._focussed){var o="string"==typeof e?e:e[0].id;e=this._getById(o),e&&e.length&&(e.removeClass(this._CLASSES.focussed),this._focusItemUsingNavInstance(e,t,a))}}},{key:"_focusEle",value:function(e,t,a,o){clearTimeout(this._focusTimer),e&&e.length&&(o?this._focusCallback(e,t,a):this._focusTimer=setTimeout(this._focusCallback.bind(this,e,t,a)))}},{key:"_focusItemUsingNavInstance",value:function(e,t){var a=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];this._navInstance.focusItem(e,t,a)}},{key:"_focusItem",value:function(e,a,o,i){e&&(1===e.nodeType?this._focusEle(t(e),a,o,i):this._focusEle(this._getItemId(e),a,o,i))}},{key:"_onDSUpdate",value:function(e){this.params.previousQuery=void 0,this.ajaxSource||(this._opts.items=e.results),this._reSearch()}},{key:"_refresh",value:function(e){this._detachInputEv(),this._destroyDSIns(),this._initVars(),e&&(this._htmlTagData&&(this._opts.items=[]),this._parseHTML()),this._initDS(),this._afterPropInit(),this._reSearch()}},{key:"_getItem",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(this._isNotNull(e)&&this.staticData){if(e.nodeType)return e.hasClass(this._CLASSES.item)?e.itemData.originalData:e.optData;var o=a&&this._getHeaderFooterItem&&this._getHeaderFooterItem(e);return!o&&t&&(o=this.DSInstance.getData(o)),o}}},{key:"focusItem",value:function(e,t,a){this.setFocus(a),this._focusItem(e,a,t)}},{key:"unfocusItem",value:function(){this._unFocusItem()}},{key:"setValue",value:function(e,t){this._setValues(e,t)}},{key:"getValue",value:function(){var e=this._opts.value;return Array.isArray(e)?_toConsumableArray(e):e}},{key:"deselect",value:function(e,t){var a=this;this._changed=!1,e=this._toArr(e),e.forEach(function(e){a._selectItem(a._getBasicItemData(e),!1,t)}),this._triggerChange(t)}},{key:"deselectAll",value:function(e){this._changed=!1,this._clearSelection(e),this._triggerChange(e)}},{key:"refresh",value:function(){this._domChanged=!0,this._refresh(!0),this._domChanged=!1}},{key:"setFocus",value:function(e){this._trigger("beforefocus",e)&&(this._focusCallbackCalled=!1,this.container.focus(),!this._focusCallbackCalled&&this._focusInHandler(e))}},{key:"getItem",value:function(e){this._getItem(e)}},{key:"handleKeyCode",value:function(e){return this._keydownHandler(e)}},{key:"isFocussed",value:function(){return this._focussed}},{key:"fetchData",value:function(){var e;return(e=this.DSInstance).fetch.apply(e,arguments)}},{key:"clearCache",value:function(){this.params.previousQuery=void 0,this._dataLoaded=!1,this._dsInit&&this.DSInstance.clearCache(),this._reSearch()}},{key:"getSearchField",value:function(){return this.inputField}},{key:"_setImageData",value:function(t){var a=this;t.hasImage=!0;var o=t.view;["SVGIconId","iconClassName","image","textIcon"].forEach(function(e){a._setKeyValue(t,e,!1)});var i=t.textIcon;if(this._hasIcon){var l=t.SVGIconId,n=t.iconClassName;if(n||l||!i)return o.icon={},void e._getIconInfo(n,l,"",this._CLASSES.itemicon,o.icon)}else if(this._hasImage&&t.image)return o.hasImageURL=!0,void(o.image=t.image);o.textIcon=i}},{key:"search",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t.fromSearchMethod=!0,t.delay?this._searchWithDelay(e,t):this._search(e,t)}},{key:"searchWithDelay",value:function(){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.fromSearchMethod=!0,this._searchWithDelay.apply(this,arguments)}},{key:"_searchWithDelay",value:function(e){var t=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};clearTimeout(this._searchTimer);var o=[e,a];a.delay?this._searchTimer=setTimeout(function(){t._search.apply(t,o)},a.delay):this._search.apply(this,o)}},{key:"_search",value:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o;if(this.inputField){if(a.fromSearchMethod&&!1!==a.updateField){var i=this.inputField.val();i!==e&&this.inputField.val(e)}o=this.inputField[0],this._showSearchField&&this._updateClearBtn()}if(!this._isNotNull(e)&&o&&(e=o.value),e&&a.searchOnCurPos&&o){var l=o.selectionStart,n=o.selectionEnd;l!==n&&(l=e.length-1),e=e.substring(0,l)}a=t.extend({},this._opts.search,a),e=e||"",a.trimWhitespace&&(e=e.trim()),this.params.query=this._opts.query=e,this._trigger("beforesearch",a.event,{params:this.params,searchOptions:a})&&this._filterData(a.event,a)}},{key:"_filterData",value:function(e,t){var a=this._opts,o=this.params;this._opts.query=o.query;var i=this._checkQueryLength(o.query,t);return this._fromSearch=!this._isNotNull(t.setItemFocus)||t.setItemFocus,!t.force&&a.cacheData&&o.query===o.previousQuery?void this._updateStates(e):void(this.params.previousQuery=this.params.query,this._hideNoResults(!1),this._freshRequest=!0,!this._skipScrollTopReset&&(this._lastScrollTop=0),this._skipScrollTopReset=!1,this._dsInit&&i?this._filterFn(e):i?this._showNoResults(e):(o.previousQuery=void 0,this._showWarning("minKeywordLength",e)),this._fromSearch=!1,this._newlyLoadingData=this._loading)}},{key:"_checkQueryLength",value:function(e,t){var a=t.minKeywordLength;return!a||!this._searchable||e.length>=a}},{key:"_filterByAddRemoval",value:function(e){this.params.pageIndex=1,this._scroll={},this._groupsIncluded=[],this.DSInstance._serverPaging&&(this.params.serverPageIndex=0,this.params.moreServerPages=!0),this._unbindScroll&&this._unbindScroll(),this._virtualization?this._showVirtualData(e):this[this._lazyLoadData?"_loadFirstPage":"_loadDataSource"](this._addDataToMenu.bind(this),e)}},{key:"_addDataToMenu",value:function(e,t){var a={results:e,params:this.params};e=a.results,a.addedItems=this[this._freshRequest?"_replaceBodyItems":"_addBodyItems"](e,!0,t),this._afterFilter(t,a,!this._freshRequest)}},{key:"_setNoResultsData",value:function(){this._setCustomNoResults(),this._data.noResults={id:this._getKeyID("noresults"),noresults:!0}}},{key:"_setCustomNoResults",value:function(){var e=t(this._opts.customNoResultsHTML);e.length&&(this._customNoResultsHTML=e,this._showHideCustomNoResults())}},{key:"_showHideCustomNoResults",value:function(e){var t=this._customNoResultsHTML;t[e?"show":"hide"](),t.appendTo(e?this._noResultsEle:"body")}},{key:"_isValidMultiSelectClick",value:function(e){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=2<arguments.length?arguments[2]:void 0,i=e.target,l=this._isCheckboxClick(e),n=this._opts.selectorToIgnoreSelection;if(!l&&n&&t(i).is(n))return!1;if(!this._selectOnFocus)return!!(this._toggleOnItemClick||l);if(!a){if(this._toggleOnItemClick||l)return!0;if(o[0]===i||o.find(i).length)return!1}return!0}},{key:"selectAll",value:function(e){var t=this;this._opts.multiple&&this.staticData&&this.fetchData(function(a){t._setValues(a.results,{event:e})})}},{key:"setValues",value:function(){this._opts.multiple&&this.setValue.apply(this,arguments)}},{key:"getValues",value:function(){return this.getValue()}},{key:"_setHeaderFooterItems",value:function(){var e=this,t=(this._opts.headerItems||[]).concat(this._htmlHeaderItems),a=(this._opts.footerItems||[]).concat(this._htmlFooterItems);if(t&&t.length||a&&a.length){var o=[],i=[];t&&(o=t.map(function(t){return e.getItemData(t,null,null,"header")})),a&&(i=a.map(function(t){return e.getItemData(t,null,null,"footer")})),this._data.headerItems=o.length&&o,this._data.footerItems=i.length&&i}else this._data.headerItems=this._data.footerItems=void 0}},{key:"_getHeaderFooterItem",value:function(e){for(var t=(this._opts.headerItems||[]).concat(this._htmlHeaderItems),a=(this._opts.footerItems||[]).concat(this._htmlFooterItems),o=t.concat(a),l=this._getUniqueValue(e),n=0,s;n<o.length;n++)if(s=o[n],l===this._getUniqueValue(s))return s}},{key:"_bindInputFieldEvents",value:function(){var t=this._opts.searchFieldOptions;if(t.handleEvents){this.inputField.off("."+this.name);var a={fieldFocus:"focus",fieldBlur:"blur",fieldKeydown:"keydown",inputMouseup:"mouseup",inputKeyup:"keyup"};e.Browser.isIE&&(a.paste="paste"),this._addEvents(a,this.inputField),this.inputField.on((e.Browser.isIE?"keyup":"input")+"."+this.name,this._inputHandler.bind(this))}}},{key:"_fieldKeydownHandler",value:function(t){var a=t.keyCode,o=e.keyCode;this._opts.searchFieldOptions.preventUPDOWNKeysDefault&&(a===o.UP||a===o.DOWN)&&t.preventDefault(),a===o.ESCAPE&&t.preventDefault(),this._showSearchField||this._keydownHandler(t)}},{key:"_fieldFocusHandler",value:function(e){this._updateFieldClass(),this._showSearchField||this._focusInHandler(e)}},{key:"_fieldBlurHandler",value:function(e){this._updateFieldClass(),this._showSearchField||this._blurHandler(e)}},{key:"_inputHandler",value:function(t){e.Browser.isIE&&t.target!==document.activeElement||t.target.disabled||"input"!==t.type&&!this._isAlphaNumericKey(t)||this._inputChangeHandler(t)}},{key:"_inputChangeHandler",value:function(e){var t=e.target.value;this._trigger("input",e,{pasteAction:"input"===e.type&&e.originalEvent&&"insertFromPaste"===e.originalEvent.inputType})&&this._searchWithDelay(t,{event:e,delay:this._opts.search.delay})}},{key:"_inputKeyupHandler",value:function(t){if(this._opts.searchFieldOptions.filterBasedOnCurPos){var a=e.keyCode,o=t.keyCode;-1<[a.LEFT,a.RIGHT,a.HOME,a.END].indexOf(o)&&this._searchBasedOnCurPos(t)}}},{key:"_searchBasedOnCurPos",value:function(e,t){e.button||this._searchWithDelay(void 0,{event:e,delay:t||this._opts.search.delay,searchOnCurPos:!0})}},{key:"_inputMouseupHandler",value:function(e){this._opts.searchFieldOptions.filterBasedOnCurPos&&this._searchBasedOnCurPos(e)}},{key:"_pasteHandler",value:function(e){var t=this;clearTimeout(this._searchTimer),e.target.disabled||(this._searchTimer=setTimeout(function(){t._trigger("input",e,{pasteAction:!0})&&t._searchWithDelay(void 0,{event:e,delay:t._opts.search.delay})}))}},{key:"_setFieldValue",value:function(e,t,a,o){if(t.selectable&&(o||this._opts.searchFieldOptions.updateOnSelect)){var i=this._getItemEventData(e,t);o&&(i.autoCompleted=!0),this._trigger("beforesearchfieldupdate",a,i)&&(this.inputField[0].value=this._getProp(t.normalisedData,"text"),this._trigger("searchfieldupdate",a,i))}}},{key:"_autofill",value:function(t,a,o){o&&"keydown"===o.type&&(o.keyCode===e.keyCode.UP||o.keyCode===e.keyCode.DOWN)&&!this._selectOnFocus&&this._opts.searchFieldOptions.autoComplete&&this._setFieldValue(t,a,o,!0)}},{key:"_setSearchFieldData",value:function(){var t=this,a=this._opts.searchFieldOptions,o=this._CLASSES,i=this._data.searchBox={disabled:this._opts.disabled,id:this._getKeyID("searchbox")};e._getIconInfo(a.iconClassName,a.SVGIconId,"#zc__svg--search",o.searchicon,i.icon={}),a.clearButton&&(i.clearButtonId=this._getKeyID("clearbutton"),e._getIconInfo(a.clearButtonIconClassName||a.clearButtonIconClass,a.clearButtonSVGIconId,"#zc__svg--clear",o.clearbuttonicon,i.clearButton={}),i.clearButtonTitle=this._getMsg("clear"),i.clearFn={handler:function(){var e=t.inputField.val();e&&t.inputField.val("").trigger("input"),t._focusInputField()},namespace:this.name})}},{key:"_updateClearBtn",value:function(){var e=this._data.searchBox.clearButtonId;if(e){var t=this._getById(e);t[0].style.display=this.inputField.val()?"":"none"}}},{key:"_bindScroll",value:function(){this._addEvents({wheel:this._wheelEvents},this._listBody),this._considerScrollForLazyLoad=!0}},{key:"_unbindScroll",value:function(){this._removeEvents(this._wheelEvents,this._listBody),this._considerScrollForLazyLoad=!1}},{key:"_wheelHandler",value:function(){this._scrolledOnKeyDown=!1}},{key:"_scrollHandlerToLoadPage",value:function(e){var t=this,a=this._listBody[0].scrollTop;if(this._lastScrollTop=a,!this._loading){this._freshRequest=!1;var o=this._lastScrollTop>a,i=this._listBody[0].offsetHeight,l=!o&&a+i+5>this._listBody[0].scrollHeight;this._scroll={isBackwards:o,exceeded:l,menuHt:i},this._virtualization?this._showVirtualData(e):l&&this._getNextPage(function(a){return t._addDataToMenu(a,e)})}}},{key:"_noMorePageHandler",value:function(e){this._virtualization?this._updateVirtualData(e):this._unbindScroll()}},{key:"_getNextPage",value:function(e,t){var a=this,o=this.params;if(!this._firstRequest)if(o.pageIndex<o.totalPages)o.pageIndex++;else if(o.moreServerPages)o.pageIndex=1,o.serverPageIndex++;else{if(this._results){var i=this._results;this._results=void 0,e(i)}return void this._noMorePageHandler(t)}this._firstRequest=!1,this._loadDataSource(function(i){o=a.params,a._results=(a._results||[]).concat(i);var l=a._results.length;if(a._dsInit&&l<a._viewPerPage&&(o.moreServerPages||o.pageIndex<o.totalPages))a._getNextPage(e,a._results);else{var n=a._results;a._results=void 0,e(n,t)}},t)}},{key:"_loadFirstPage",value:function(e,t){this._firstRequest=!0,this._getNextPage(e,t)}},{key:"_getHighlightData",value:function(e){var t=this._opts.search;if(!this._highlightData){var a=this._getSearchBy(t.by),o,i,l;if(this.DSInstance._isJSONSource){var n=this._dataMapping,s=n.text,r=n.groupLabel,d=n.informativeText;o=-1<a.indexOf(s),i=-1<a.indexOf(r),l=-1<a.indexOf(d)}this._highlightData={includeText:o,includeTitle:i,includeDesc:l}}return this._highlightData.pattern=this._getMatchingRegex(e,t),this._highlightData}},{key:"_highlightValidKey",value:function(t,a){var o=this._opts.search,i=this.params.query,l=this._getMatchingRegex(e.encodeHTML(i),o),n=o.fieldsToHighlight;return n=n&&n.length?Array.isArray(n)?n:n.split(","):this._getSearchBy(o.by),-1===n.indexOf(a)?t:this._highlightContent(t,l)}},{key:"_highlightContent",value:function(e,t){return e.replace(t,"<b class='zh-bold'>$1</b>")}},{key:"_flattenData",value:function(e){var t=this._dataMapping;return this._isGrouped=!0,this._groupHeads=this._groupHeads||[],t.groupLabel=t.groupLabel||"groupLabel",e=this._restructData(e,null,this._opts.dataMapping.groupLabel||t.text),e}},{key:"_restructData",value:function(e,t,a){var o=this,i=[],l=this._dataMapping,n=l.options;return e.forEach(function(e){var l=e[n];l?(o._groupHeads.push(e),o._setProp(e,"groupLabel",o._mapJSONToData(e,a)),i=i.concat(o._restructData(l,e))):(t&&(o._setProp(e,"groupLabel",o._getProp(t,"groupLabel")),e.hidden=e.hidden||t.hidden,e.disabled=e.disabled||t.disabled),i.push(e))}),i}},{key:"_getItemJSONForGroupedData",value:function(e){var t=this,a=[];return e.forEach(function(e){var o=t._getProp(e,"groupLabel"),i=o=t._isNotNull(o)?o:"",l=t._groupsIncluded,n=l[l.length-1],s;n&&n.groupLabel===o?i=n:(t._groupHeads.length&&(i=t._groupHeads.find(function(e){return o===e.label})||""),i=t.getItemData(i,null,!0),o&&a.push(i),t._groupsIncluded.push(i)),s=i.id;var r=t.getItemData(e,s);a.push(r)}),a}},{key:"_calcItemHts",value:function(){this._ht[0]||(this._ht[0]=this._getItemHt(this._listBody[0].querySelector("[data-selectable=true]"))),this._isGrouped&&!this._ht[1]&&(this._ht[1]=this._getItemHt(this._listBody[0].querySelector("[role=group]")))}},{key:"_getItemHt",value:function(e){return e?t(e).outerHeight(!0):0}},{key:"_cacheData",value:function(e){this._cachedData.push({raw:e,processed:this._getItemJSON(e)})}},{key:"_getPagedItems",value:function(e){return this._cachedData[e-1]}},{key:"_calcHt",value:function(e){var t=this;this._calcItemHts();var a=0,o=this._getPagedItems(e);return o&&o.processed.forEach(function(e){a+=t._ht["itemgroup"===e.itemType?1:0]}),a}},{key:"_showVirtualData",value:function(e){var t=this,a={},o=this._updateVirtualData.bind(this,e,a),i=function(i){a.results=i,i=a.results,i.length?(t._cacheData(i),o()):t._freshRequest&&t._afterFilter(e,a)};this._freshRequest?(this._cachedData=[],this._startPage=this._endPage=null,this._ht=[0,0],this._loadFirstPage(i,e)):this._scroll.exceeded?this._getNextPage(i):o()}},{key:"_updateVirtualData",value:function(e,t){var a=0,o=0,l=this._opts.maxPage,n=1,s=this._cachedData.length,r=s;if(s>l)for(var d=0,c=this._lastScrollTop+40*(this._scroll.isBackwards?-1:1);n<s;){if(d+=this._calcHt(n),c<d){r=n;for(var _=d,u;r<s&&(u=c+this._scroll.menuHt,!(u<_));)_+=this._calcHt(r),r++;break}a=d,n++}if(n<this._startPage||r>this._endPage){for(var p=r+1;p<=s;p++)o+=this._calcHt(p);this._startPage=n,this._endPage=r;var m=[];this._datasource=[],this._data.virtualHeightAbove=a;for(var h=n;h<=r;h++){var g=this._getPagedItems(h),v;m.push.apply(m,_toConsumableArray(g.processed)),(v=this._datasource).push.apply(v,_toConsumableArray(g.raw))}this._data.virtualHeightBelow=o,t=t||{},t.addedItems=this._replaceBodyItems(m,!1,e),this._afterFilter(e,t)}}},{key:"_showLoader",value:function(){var e={params:this.params,loading:!0};this._loading=!0;var t=this._loaderData.fullloader=this._freshRequest;return t?this._replaceBodyItems([]):this._loaderEle?this._setVisibility():this._renderView([]),this._triggerUpdate({},e)}},{key:"_setLoaderData",value:function(){var t=this._data,a=this._opts,o=a.loaderIconClassName,i=this._loaderData={},l=a.loaderSVGIconId;i.icon=void 0,(o||l)&&(i.icon=e._getIconInfo(o,l,"#zc__svg--loader zeffects--rotate",this._CLASSES.loader+" zh-loading",t.loader={})),i.id=this._getKeyID("loader"),this._data.loader=this._loaderData}},{key:"_removeLoader",value:function(){this._loading=!1}},{key:"_bindAjaxEvents",value:function(e){e.requeststart=this._onReqStart.bind(this),e.requestend=this._onReqEnd.bind(this),e.requesterror=this._onReqErr.bind(this)}},{key:"_onReqStart",value:function(e){this._showLoader(),this._trigger("requeststart",null,e)}},{key:"_onReqEnd",value:function(e){this._removeLoader(),this._trigger("searchsuccess",null,e)}},{key:"_onReqErr",value:function(e){this._removeLoader(),this._showWarning("serverError"),this._trigger("searcherror",null,{response:e})}},{key:"_setInnerAttr",value:function(e,t){var a=this._propResetter;"contentType"===e||"multiSelectInterfacePattern"===e||"hideCheckbox"===e||"checkboxPosition"===e||"checkedIcon"===e||"checkedIconClassName"===e||"checkedSVGIconId"===e||"checkedIconPosition"===e||"toggleOnItemClick"===e||"searchFieldOptions"===e||"actionButtons"===e||"template"===e||"focusItemOnItemMouseover"===e||"selectOnKeyNavigation"===e||"disabled"===e||"reorderable"===e?a.vars=!0:"searchField"===e||"showSearchField"===e?a.vars=a.search=!0:"dataMapping"===e?(a.vars=!0,this._dataMapping.groupLabel!==t.groupLabel&&(a.ds=!0)):"multiple"===e?a.vars=a.values=!0:"isGrouped"===e||"lazyLoading"===e||"virtualization"===e||"maxPage"===e||"viewPerPage"===e||"filterByCSSSelector"===e||"serverSearch"===e||"customSearch"===e||"sort"===e||"sortBy"===e||"sortOrder"===e||"customSorter"===e||"cacheData"===e||"filters"===e?a.ds=!0:"items"===e||"dataSource"===e||"dataStructure"===e?(this._internal||(this._htmlTagData=this._flatted=void 0),this._destroyDSIns(),a.ds=!0):"search"===e?a.vars=a.ds=!0:"allowDragToSelect"===e||"keyNavigation"===e||"moreResultsAction"===e||"allowShiftSelection"===e||"height"===e||"width"===e||"headerItems"===e||"footerItems"===e?this._domChanged=!0:"characterKeyFocus"===e?a.rebuildItems=!0:"loaderIconClassName"===e||"loaderSVGIconId"===e?(this._domChanged=!0,this._data.loader&&this._setLoaderData()):"value"===e||"selectionLimit"===e?this._domChanged=a.values=!0:"messages"===e?a.search=!0:"query"===e?(this.params.query=t,a.search=!0):"customNoResultsHTML"===e?this._setCustomNoResults():void 0}},{key:"_setAttribute",value:function(e,t){var a=this._propResetter;a||(a=this._propResetter={}),this._opts[e]=t,this._setInnerAttr(e,t),(a.vars||a.ds||a.values||a.rebuildItems||a.search||a.rebuildHeaderFooterItems)&&(this._reInit=!0)}},{key:"_buildData",value:function(){this._dataReset=!this.DSInstance;var e=this._propResetter||{};if(clearTimeout(this._searchTimer),(e.ds||e.search)&&(this.params.previousQuery=void 0),e.vars&&e.ds?this._refresh():e.vars?(this._detachInputEv(),this._initVars(),this._afterPropInit(),e.search?this._reSearch():this._rebuildItems()):e.ds?(this._initDS(),this._afterPropInit(),this._reSearch()):e.search?this._reSearch():e.rebuildItems&&this._rebuildItems(),this._propResetter={},this._dataReset=!1,e.values){var t=this._opts.value;t&&(t=this._toArr(t),1<t.length&&(this._opts.multiple?this._opts.selectionLimit&&t.splice(this._opts.selectionLimit):t.splice(1))),this._setValues(t,{clearOtherValues:!0})}}},{key:"_rebuildItems",value:function(e){this._rebuilt=!0,this._groupsIncluded=[],this._setHeaderFooterItems(),this._data.items=this._getItemJSON(this._datasource),e||this._renderView(),this._rebuilt=!1}},{key:"_setItemAttribute",value:function(e,t,a,o){var i=e;if(e.nodeType&&(i=e.optData,e.tagName===this._SELECTORS.OPTGROUP&&(o=!0)),i){if("selected"===t)return void this[a?"setValue":"deselect"](i);var l=this._getItem(i,!1);if(l)return l[t]=a,void this._rebuildItems();this.DSInstance.setItemAttribute(i,t,a,o)}}},{key:"setItemAttributes",value:function(e,a,o,i){var l=this,n;this.staticData&&this._toArr(e).forEach(function(e){if(l._skipRender=!0,e)if("object"===_typeof(a)&&!t.isEmptyObject(a))for(var s in a)l._setItemAttribute(e,s,a[s],i);else l._setItemAttribute(e,a,o,i);n||l._skipRender||(n=!0)}),n&&this._renderView(),this._skipRender=!1}},{key:"_setMoreResults",value:function(){var e=this._CLASSES;this._data.moreAction={id:this._getKeyID("moreresults"),custom:!0,className:e.moreresults,disabled:this._opts.disabled,moreresults:!0,clickable:!0,view:{innerHTML:"<span class="+e.text+">"+this._getText("moreAction")+"</span>"}}}},{key:"name",get:function(){return"zlistbox"}},{key:"attrs",get:function(){return{contentType:"text",multiple:!1,selectionLimit:0,multiSelectInterfacePattern:"checkbox",hideCheckbox:!1,checkboxPosition:"left",checkedIcon:!1,checkedIconClassName:null,checkedSVGIconId:null,checkedIconPosition:"left",template:null,groupHeadingTemplate:null,selectorToIgnoreSelection:null,showSearchField:!1,searchField:null,loaderIconClassName:void 0,loaderSVGIconId:void 0,lazyLoading:!1,virtualization:!1,viewPerPage:null,serverSearch:!1,customSearch:null,cacheData:!0,sort:!1,sortBy:null,sortOrder:"asc",customSorter:null,reorderable:!1,grippyIcon:!0,grippyIconClassName:null,grippySVGIconId:null,customNoResultsHTML:null,focusItemOnItemMouseover:!1,selectOnKeyNavigation:void 0,selectOnEnterKey:!0,characterKeyFocus:!0,keyNavigation:!0,value:null,wrapAround:!0,height:null,width:null,allowDragToSelect:!0,moreResultsAction:!1,disabled:!1,allowDuplicateItems:!0,filterByCSSSelector:!1,maxPage:3,isGrouped:!1,focusFirstItem:!1,selectOnSpaceKey:!0,focusSelectedItem:!0,allowShiftSelection:!0,query:"",isTextHTMLEncoded:!1}}},{key:"props",get:function(){return{appendTo:null,headerItems:[],footerItems:[],items:[],dataSource:{},dataMapping:{text:"text",value:"value",informativeText:"informativeText",iconClassName:"iconClassName",textIcon:"textIcon",SVGIconId:"SVGIconId",options:"options",zitemid:"zitemid"},actionButtons:{actions:[],displayType:"contextual-mouseover",position:"bottom"},callbacks:{},searchFieldOptions:{placeholder:"",iconClassName:void 0,SVGIconId:void 0,clearButton:!1,clearButtonIconClassName:void 0,clearButtonSVGIconId:void 0,handleEvents:!0,filterBasedOnCurPos:!1,preventUPDOWNKeysDefault:!0},search:{by:"text",searchIncrementsInCache:!1,trimWhitespace:!0,highlightKeyword:!1,fieldsToHighlight:null,minKeywordLength:0,focusFirstResult:!0,criteria:"contains"},messages:{noResults:"No results found",moreAction:"See more results",serverError:"Server request failed. Please try again later",minKeywordLength:"Please enter #minKeywordLength# or more characters",clear:"Clear"},filters:null}}},{key:"propType",get:function(){return{selectOnFocus:"boolean",filters:"array",viewPerPage:"number"}}},{key:"tagNames",get:function(){return{ITEM:"z-listboxitem",GROUP:"z-listboxgroup",BODY:"z-listboxbody",HEADER:"z-listboxheader",FOOTER:"z-listboxfooter",SEPARATOR:"z-listboxseparator"}}},{key:"SELECTORS",get:function(){var e=this.tagNames;return{OPTION:this.isCE?e.ITEM:"option",OPTGROUP:this.isCE?e.GROUP:"optgroup",OPTIONSBODY:e.BODY,OPTIONSHEADER:e.HEADER,OPTIONSFOOTER:e.FOOTER,OPTIONSEPARATOR:e.SEPARATOR}}},{key:"EVENTS",get:function(){return["focus","beforefocus","blur","beforeselect","select","beforedeselect","deselect","change","itemclick","beforeitemfocus","itemfocus","itemhover","moreactionclick","selectionlimitexceeded","beforesearch","searchsuccess","searcherror","noresults","beforelistupdate","listupdate","imageerror","dragstart","drag","dragend","beforekeydown","keydown","beforesearchfieldupdate","searchfieldupdate"]}},{key:"CLASSES",get:function(){return{container:"zlistbox",icon:"zlistbox--withicon",listwithloader:"zlistbox--loading",withicon:"zlistbox--withicon",withhint:"zlistbox--withdesc",withcheckbox:"zlistbox--withcheckbox",withcheckedicon:"zlistbox--withcheckedindication",withsearchfield:"zlistbox--withsearchfield",icononly:"zlistbox--icononly",icontext:"zlistbox--iconwithtext",listwithcustom:"zlistbox--withcustomitem",listwithcheckboxRight:"zlistbox--checkboxright",listwithcheckediconRight:"zlistbox--checkedindicationright",listwithactionbtnsvisible:"zlistbox--actionbuttonvisible",withoutcheckeditem:"zlistbox--withoutcheckeditem",listwithicononly:"zlistbox--icononly",listwithimage:"zlistbox--withimage",reorderable:"zlistbox--reorderable",text:"zlistbox__text",hint:"zlistbox__description",body:"zlistbox__body",header:"zlistbox__header",footer:"zlistbox__footer",item:"zlistbox__item",itemgroup:"zlistbox__itemgroup",itemgrouplabel:"zlistbox__grouplabel",loader:"zlistbox__loader",loadericon:"zlistbox__loadericon",fullloader:"zlistbox__fullloader",actionbuttonsWrapper:"zlistbox__actions",actionbutton:"zlistbox__action",separator:"zlistbox__separator",checkediconWrapper:"zlistbox__checkedindication",checkedicon:"zlistbox__checkedicon",checkboxWrapper:"zlistbox__checkbox",checkbox:"zlistbox__inputcheckbox",checkboxlabel:"zlistbox__checkboxlabel",avatar:"zlistbox__avatar",icondiv:"zlistbox__image",itemicon:"zlistbox__icon",content:"zlistbox__content",textIconWrapper:"zlistbox__imagetext",moreresults:"zlistbox__moreresults",noresults:"zlistbox__noresults",noresultstext:"zlistbox__noresultstext",search:"zlistbox__search",searchcontainer:"zlistbox__searchiconcontainer",searchicon:"zlistbox__searchicon",searchfield:"zlistbox__searchfield",clearbuttonicon:"zlistbox__clearicon",clearbutton:"zlistbox__clearbutton",grippyicon:"zlistbox__grippy",hoverable:"is-hoverable",disabled:"is-disabled",hover:"on-hover",focussed:"has-focus",selected:"is-selected",rtl:"zh-rtl"}}},{key:"isIE9",get:function(){return 9===e.Browser.getIEVersion()}}]),o}(e.CoreComponent);e.registerComponent("ZListBox",w),function(e){var t=e.zlistbox.Templates,a=e.Templates.Utilities;t.container=function(e){return ZT.html(tO63(),e.children&&t.children(e))},t.children=function(e){var a=e.classes,o=ZT.html(tO64(),e.searchBox&&t.searchField(e.searchBox,a),e.headerItems&&t.headerLayout(e,a),e.items&&t.constructBody(e,a),e.noResults&&t.noresultsLayout(e.noResults,a),(e.footerItems||e.moreAction)&&t.footerLayout(e,a));return o},t.constructBody=function(e,a){var o=ZT.html(tO65(),a.body,e.virtualHeightAbove&&t.virtualHolder(e.virtualHeightAbove,a),e.items.map(function(e){return t.item(e,a)}),e.virtualHeightBelow&&t.virtualHolder(e.virtualHeightBelow,a),e.loader&&t.loader(e.loader,a));return o},t.item=function(e,a){var o=e.separator?t.separator(e,a):e.heading?t.heading(e,a):t.defaultItem(e,a);return o},t.defaultItem=function(e,a){var o=ZT.html(tO66(),e.id,a.item,e.className,e.disabled?"is-disabled":"",e.clickable?"":"zlistbox__item--nonselectable",e.disabled?"true":"",e.disabled?"true":"",e.view.ariaLabel,e.view.ariaValue,e.name,e.selectable?"true":"",e.clickable?"true":"",e.clickable?"":"true",e,e.grippyIcon&&t.grippyIcon(e,a),e.checkbox&&t.checkbox(e,a),e.checkedIcon&&t.checkedIcon(e,a),t.content(e,a),e.actionButtons&&t.actionButtons(e.actionButtons,a));return o},t.grippyIcon=function(e,t){var o=ZT.html(tO67(),t.icondiv,t.grippyicon,a.icon(e.grippyIcon));return o},t.separator=function(e,t){var a=ZT.html(tO68(),e.id,t.separator,e.className,e);return a},t.content=function(e,a){var o=e.custom?ZT.html(tO69(),ZT.customHTML(e.view.innerHTML||"")):ZT.html(tO70(),e.hasImage&&ZT.html(tO71(),a.icondiv,e.textIcon?a.textIconWrapper:"",t.imageLayout(e.view,a)),a.content,e.view.text&&ZT.html(tO72(),a.text,ZT.customHTML(e.view.text)),e.view.description&&ZT.html(tO73(),a.hint,ZT.customHTML(e.view.description)));return o},t.checkedIcon=function(e,t){var o=ZT.html(tO74(),t.checkediconWrapper,a.icon(e.checkedIcon));return o},t.heading=function(e,t){var a=ZT.html(tO75(),e.id,t.itemgroup,e.className,e.disabled?"is-disabled":"",e,e.view.text?ZT.html(tO76(),t.itemgrouplabel,ZT.customHTML(e.view.text)):ZT.customHTML(e.view.innerHTML||""));return a},t.headerLayout=function(e,a){var o=ZT.html(tO77(),a.header,e.headerItems.map(function(e){return t.item(e,a)}));return o},t.footerLayout=function(e,a){var o=ZT.html(tO78(),a.footer,e.footerItems&&e.footerItems.map(function(e){return t.item(e,a)}),e.moreAction&&t.item(e.moreAction,a));return o},t.imageLayout=function(e,t){t=e.classes||t;var o=ZT.html(tO79(),e.hasImageURL?ZT.html(tO80(),e.image||"invalid.jpg"):e.icon?a.icon(e.icon):ZT.html(tO81(),t.icon,e.textIcon));return o},t.loader=function(e,a){var o=ZT.html(tO82(),e.id,a.loader,t.loaderIcon(e,a));return o},t.loaderIcon=function(e,t){var o=ZT.html(tO83(),e.icon?a.icon(e.icon):ZT.html(tO84(),t.loadericon));return o},t.noresultsLayout=function(e,t){var a=ZT.html(tO85(),e.id,t.noresults,e.innerHTML?ZT.html(tO86(),t.noresultstext,ZT.customHTML(e.innerHTML)):"");return a},t.searchField=function(e,t){var o=ZT.html(tO87(),t.search,e.disabled?t.disabled:"",t.searchcontainer,a.icon(e.icon),e.id,e.disabled?"true":"",t.searchfield,e.clearButton&&ZT.html(tO88(),t.clearbutton,e.clearButtonTitle,e.clearButtonId,e.clearFn,a.icon(e.clearButton)));return o},t.virtualHolder=function(e,t){var a=ZT.html(tO89(),t.item,e);return a}}(ZComponents);var S=function(o){function i(){return _classCallCheck(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,o),_createClass(i,[{key:"_create",value:function(){var e=this._opts;this._dataMapping=e.dataMapping,this._maxResults=e.maxResults;var t=e.dataSource;this._promiseObj=void 0,this.params={},this._cachedData={},this._filterFn=this._filterStaticSource,this._staticData=!0,this._isAjaxSource(t)&&this._initAjaxSource(t)}},{key:"_setDataSource",value:function(e){this._sorted=!1,this._dataSource=e,this._orgData=_toConsumableArray(e),e.length&&(this._isJSONSource="object"===_typeof(e[0]),this._opts.inPlaceSorting&&(this._dataSource=this._organizeResults(e)))}},{key:"_organizeResults",value:function(e){if(e&&e.length&&!this._sorted){if(this._sorted=!0,this._opts.sort)return this._sortResults(e);if(this._isGrouped())return this._organizeGroupedData(e)}return e}},{key:"_getTotalPages",value:function(){return this._maxResults?a(this._totalFilteredData.length/this._maxResults):this._totalFilteredData.length?1:0}},{key:"_clone",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"_getFilteredData",value:function(){var e=this,t=this.params.query,a=this._dataSource||[];return a.length?this._isFunc(this._opts.matcher)?a.filter(function(a){return e._opts.matcher(t,a)}):t||this._opts.filters||this._filters?this._filterData(t,a):a.filter(function(e){return!e.hidden}):a}},{key:"_isGrouped",value:function(){return this._dataMapping.groupLabel&&this._isJSONSource}},{key:"_trigger",value:function(e,t){var a=this._opts.callbacks[e];return!a||a(t)}},{key:"_fetch",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=1<arguments.length?arguments[1]:void 0,o=2<arguments.length?arguments[2]:void 0;"function"==typeof t&&(a=t,o=a,t={});var i=this.params;return t.query=t.query?t.query:"",i.previousQuery=i.query,i.query=t.query,this._serverPageIndex=t.serverPageIndex||1,this._pageIndex=t.pageIndex,this._filters=t.filters,new Promise(function(t,l){e._resolvePromise=function(o){e._ajaxSource&&(o.serverPageIndex=i.pages,o.moreServerPages=e._moreServerPages),a&&a(o),t(o)},e._rejectPromise=function(e){o&&o(e),l(e)},e._filterFn()})["catch"](function(t){if("abort"!==t)throw t})}},{key:"_filterStaticSource",value:function(){this._dataSource||this._setDataSource(this._opts.data),this._totalFilteredData=this._filteredData=this._organizeResults(this._getFilteredData()),this._totalPages=this._getTotalPages(),this._sendDataToUser()}},{key:"_sendDataToUser",value:function(){return this._maxResults?this._resolvePageData():void this._resolvePromise({query:this.params.query,results:this._clone(this._filteredData)})}},{key:"_abortAjaxReq",value:function(){this._ajaxRequest&&(this._ajaxRequest.abort(),this._ajaxRequest=void 0)}},{key:"fetch",value:function(){return this._fetch.apply(this,arguments)}},{key:"destroy",value:function(){this._abortAjaxReq()}},{key:"clearCache",value:function(){this.clearCachedQuery(),this._dataSource=this._orgData=this._sorted=this._filters=void 0,this._abortAjaxReq()}},{key:"_getData",value:function(e){var t=this._dataSource;if(t.length)for(var a=this._getUniqueValue(e),o=0,l;o<t.length;o++)if(l=t[o],a===this._getUniqueValue(l))return l}},{key:"clearCachedQuery",value:function(){this._cachedData={}}},{key:"setCachedData",value:function(e){this._dataSource=e,this._isJSONSource="object"===_typeof(e[0])}},{key:"getData",value:function(e,t,a){var o=this;this._staticData&&(this._dataSource||!this._ajaxSource||a)&&this._fetch(function(){var a=o._getData(e);t(a?_objectSpread({},a):null)})}},{key:"_sortResults",value:function(e){var t=this._opts;if(e=e.slice(),this._isFunc(t.customSorter))return t.customSorter(e);if(this._offset="desc"===t.sortOrder?-1:1,this._isJSONSource){var a=this._dataMapping;this._sortField=t.sortBy?(t.sortBy+"").split(","):[a.text||a.label];var o=this._isGrouped();o&&-1===this._sortField.indexOf(a.groupLabel)?e=this._sortGroupedData(e):(e.sort(this._sortJSONData.bind(this)),o&&(e=this._organizeGroupedData(e)))}else e.sort(this._sortFn.bind(this));return this._offset=this._sortField=void 0,e}},{key:"_toLC",value:function(e){return"string"==typeof e?e.toLowerCase():e}},{key:"_sortFn",value:function(e,t){var a=!this._isNotNull(e),o=!this._isNotNull(t),i;return a&&o?i=0:a?i=-1:o?i=1:e.localeCompare?i=e.localeCompare(t):(e=this._toLC(e),t=this._toLC(t),i=e>t?1:e<t?-1:0),i*this._offset}},{key:"_sortJSONData",value:function(e,t){for(var a=0;a<this._sortField.length;a++){var o=this._sortField[a],l=this._sortFn(this._mapJSONToData(e,o),this._mapJSONToData(t,o));if(l)return l}}},{key:"_sortGroupedData",value:function(e){var t=this._getGroupedData(e);for(var a in e=[],t){var o;(o=e).push.apply(o,_toConsumableArray(t[a].sort(this._sortJSONData.bind(this))))}return e}},{key:"_resolvePageData",value:function(){var e=this._pageIndex;return e&&this._totalPages&&!(e<=this._totalPages)?void this._rejectPromise(this._opts.messages.pageIndexExceed):this._resolvePromise({query:this.params.query,pageIndex:e,results:this._clone(this._getPageData(e,this._totalFilteredData)),totalPages:this._totalPages})}},{key:"_getPageData",value:function(e,t){var a=this._maxResults;if(e){var o=a*(e-1);return t.slice(o,o+a)}return t}},{key:"_organizeGroupedData",value:function(e){var t=this._getGroupedData(e),a=[];for(var o in t)a.push.apply(a,_toConsumableArray(t[o]));return a}},{key:"_getGroupedData",value:function(e){var t=this,a={};return e.forEach(function(e){var o=t._mapJSONToData(e,t._dataMapping.groupLabel);o=o||"",a[o]||(a[o]=[]),a[o].push(e)}),a}},{key:"_initAjaxSource",value:function(){this._ajaxSource=!0,this._filterFn=this._filterAjaxSource,this._opts.serverSearch?this._serverSearch=!0:this._opts.isResponseFiltered=!1,this._serverPaging=this._opts.dataSource.paginated,this._staticData=!(this._serverSearch||this._serverPaging)}},{key:"_filterAjaxSource",value:function(){var e=this,t=function(){e._filterCurrentAjaxData(),e._sendDataToUser()},a=this.params,o=this._dataSource&&a.query===a.previousQuery&&a.pages===this._serverPageIndex&&this._opts.cacheData;if(o)return void this._sendDataToUser();var i=this._getDataFromCache(a.query);if(i)this._setDataSource(i);else if(this._serverSearch||this._serverPaging||!this._dataSource||!this._opts.cacheData)return this._initAjaxCall(t,function(t){e._rejectPromise(t)});t()}},{key:"_filterCurrentAjaxData",value:function(){var e=this._opts,t=this._getDataFromCache(this.params.query);this._filteredData=this._dataSource,t||(!e.isResponseFiltered&&(this._filteredData=this._getFilteredData(this.params.query)),this._cacheResponse(this._filteredData),this._filteredData=this._organizeResults(this._filteredData)),this._totalFilteredData=this._filteredData,this._totalPages=this._getTotalPages()}},{key:"_initAjaxCall",value:function(t,a){var o=this,i=this._opts.dataSource;this._serverPaging&&(this.params.pages=this._serverPageIndex);var l=this._getParams();this._trigger("requeststart",{params:l});var n=function(e){o._ajaxRequest=void 0,o._onAjaxSucess(e),t&&t(e)},s=function(e,t){o._ajaxRequest=void 0,o._onAjaxFail(e,t),a&&a(t)},r={params:l};if(!i.search){var d=_objectSpread({},i);d.success=d.error=void 0;var c=d.queryParam;d.sourceURL=this._isFunc(d.URL)?d.URL(l):d.URL,d.data=this._isFunc(c)?c(l):c,r.ajaxSettings=d}this._trigger("requeststart",r),this._abortAjaxReq(),this._promiseObj=i.search?i.search(r.params):this._ajaxRequest=e.AJAX.transport(r.ajaxSettings);var _=this;(function(e){e.then(function(t){e===_._promiseObj&&n(t)},function(t,a){e===_._promiseObj&&s(t,a)})})(this._promiseObj)}},{key:"_getParams",value:function(){return t.extend({},this.params)}},{key:"_onAjaxSucess",value:function(e){var t=this._opts,a=t.dataSource,o;a.success?(o=a.success(e,this._getParams()),e=o.results||[]):e.results&&(o=e,e=o.results||[]),this._moreServerPages=this._serverPaging&&o.more;var i={results:e};this._trigger("requestend",i),this._setDataSource(i.results)}},{key:"_onAjaxFail",value:function(e,t){if("abort"!==e.statusText){var a=this._opts.dataSource.error;a&&a.apply(void 0,arguments),this._trigger("requesterror",{params:this._getParams(),jqXHR:e,exception:t})}}},{key:"_cacheResponse",value:function(e){this._serverSearch&&this._opts.cacheData&&!this._serverPaging&&(this._cachedData[this.params.query]=e)}},{key:"_getDataFromCache",value:function(e){return e in this._cachedData?this._cachedData[e]:1<e.length&&this._opts.searchIncrementsInCache?this._getDataFromCache(e.slice(0,-1)):void 0}},{key:"_removeItems",value:function(e,t,a,o){var l=this;this._staticData&&this._fetch(function(){var n=l._dataSource;if(n.length)if(e){if(e.length){e=l._toArr(e);for(var s=function(t){var a=l._getUniqueValue(n[t]);e.find(function(e){return l._getUniqueValue(e)===a})&&(n[t]=null)},r=0;r<n.length;r++)s(r);l._reassignData(n)}}else if(!t)a?a.length&&(a=l._toArr(a),a.forEach(function(e){for(var t=0,a;t<n.length;t++)a=n[t],e===l._getProp(a,"groupLabel")&&(n[t]=void 0)}),l._reassignData(n)):o&&(n=[],l._reassignData(n));else if(t.length){t=l._toArr(t);for(var r=0;r<n.length;r++)-1!==t.indexOf(r)&&(n[r]=null);l._reassignData(n)}})}},{key:"_addItems",value:function(e,t,a){var o=this;this._staticData&&this._fetch(function(){var i=o._dataSource;i&&(e=o._toArr(e),a&&e.forEach(function(e){e[o._dataMapping.groupLabel]=a}),null===t||isNaN(t)||0>t||t>=i.length?i.push.apply(i,_toConsumableArray(e)):i.splice.apply(i,[t,0].concat(_toConsumableArray(e))),o._reassignData(i))})}},{key:"_setItemAttribute",value:function(e,t,a,o){var i=this;this._staticData&&this._fetch(function(){var l=i._dataSource;if(l&&l.length){if(o)l.forEach(function(o){var l=i._getProp(o,"groupLabel");e===l&&(o[t]=a)});else{var n=i._getData(e);n&&(n[t]=a)}i._reassignData(l)}})}},{key:"_reassignData",value:function(e){e=e.filter(function(e){return e}),this.clearCachedQuery(),this._setDataSource(e),this._trigger("update",{results:this._clone(e)})}},{key:"removeItems",value:function(e){this._removeItems(e)}},{key:"removeItemsAt",value:function(e){this._removeItems(null,e)}},{key:"removeGroups",value:function(e){this._removeItems(null,null,e)}},{key:"removeAllItems",value:function(){this._removeItems(null,null,!0)}},{key:"addItems",value:function(e,t){this._addItems(e,null,t)}},{key:"addItemsAt",value:function(e,t,a){this._addItems(e,t,a)}},{key:"setGroupAttribute",value:function(e,t,a){this._setItemAttribute(e,t,a,!0)}},{key:"setItemAttribute",value:function(e,t,a){this._setItemAttribute(e,t,a)}},{key:"setAttributes",value:function(e){var a,o;Object.keys(e).forEach(function(e){"data"===e||"dataSource"===e?a=!0:"sort"===e||"sortBy"===e||"sortOrder"===e?o=!0:void 0}),t.extend(!0,this._opts,e),a?(this.clearCache(),this._create()):(this._maxResults=this._opts.maxResults,this.clearCachedQuery(),o&&(this._sorted=!1,this._orgData&&this._setDataSource(this._orgData)))}},{key:"_filterData",value:function(e,t){var a=this,o=this._opts.customSearch;if(this._isFunc(o))return o.apply(void 0,arguments);var i=[],l=this._opts.search,n=this._getMatchingRegex(e,l);if(this._isJSONSource){var s=this._getSearchBy(l.by),r=[];i=t.filter(function(t){if(!t.hidden){var o=a._mapJSONToData(t,a._dataMapping.value);if(a._opts.allowDuplicateValues||-1===r.indexOf(o)){var i=s.map(function(t){return{field:t,value:e,criteria:l.criteria,caseSensitive:l.caseSensitive}}),n=[a._filters||a._opts.filters||[]];n.push({logic:"or",filters:i});var d=a._doesMatchFilters(t,n);if(d)return r.push(o),!0}}})}else i=t.filter(function(e){return n.lastIndex=0,n.test(e)});return i}},{key:"_doesMatchFilters",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._opts.filters,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"and";if(t.logic)return this._doesMatchFilters(e,t.filters,t.logic);for(var o=0;o<t.length;o++){var l=t[o],n=void 0;if(l.logic)n=this._doesMatchFilters(e,l.filters,l.logic);else if(Array.isArray(l))n=this._doesMatchFilters(e,l);else{var s=this._getMatchingRegex(l.value,{criteria:l.criteria,caseSensitive:l.caseSensitive}),r=this._mapJSONToData(e,l.field);s.lastIndex=0,n=s.test(r)}if(n){if("or"===a)return!0;}else if("and"===a)return!1}return"and"===a}},{key:"name",get:function(){return"zdatasourcehandler"}},{key:"attrs",get:function(){return{id:null,data:[],dataSource:null,allowDuplicateValues:!0,cacheData:!0,searchIncrementsInCache:!1,isResponseFiltered:!0,maxResults:null,inPlaceSorting:!0,matcher:null,dataMapping:{},sort:!0,sortBy:null,sortOrder:"asc",customSorter:null,callbacks:{},filters:null,search:{criteria:"contains"},messages:{pageIndexExceed:"PageIndex exceeds the total pages."}}}}]),i}(e.CoreComponent);e.registerComponent("ZDatasourceHandler",S);var T=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(e,a){var i=this._opts,l=this._data;l.attrs=l.attrs||{},l.attrs.role="dropdown",this._userOptions=t.extend({},a),this._validateOpts(),this._constructTitleBar(),(i.commandBar||this._defaultCBar)&&this._constructBtns(),_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments)}},{key:"_constructTitleBar",value:function(){var e=this._opts,t=this._data;t.title=e.title,t.close=e.closeButton?this._getCloseProps():null}},{key:"_validateOpts",value:function(){var e=this._opts,a=this._userOptions,o=a.selectOnKeyNavigation,i=a.focusItemOnItemMouseover,l=this._isSingle=!this._opts.multiple;this._forElement=e.forElement&&t(e.forElement),this._data.isCallout="callout"===e.displayType,e.selectOnKeyNavigation=null===o&&null===i?l:o,e.focusItemOnItemMouseover=null===i&&null===o?!l:i,e.focusFirstItemOnOpen&&(e.search.focusFirstResult=!0),this._defaultCBar=null,!e.commandBar&&(e.doneButton||e.resetButton||e.clearButton)&&this._setDefaultCBar(),e.handleFocusNavigation=null===e.handleFocusNavigation?!!(e.commandBar||this._defaultCBar):e.handleFocusNavigation}},{key:"_initialRender",value:function(){this._initialized?this._search():this._renderView([])}},{key:"_postRender",value:function(){_get(_getPrototypeOf(o.prototype),"_postRender",this).apply(this,arguments),this._useParent||this.container.attr("id",this._getID(this.element)+"-"+this.name),this._opts.handleFocusNavigation&&e.FocusHandler&&e.FocusHandler.init(this.container),this._setShowHideOpts(),this._appendEle(this._opts.appendTo),this._listBody.removeClass("zh-scroll_y"),this.container[0].style.display="none"}},{key:"_fixMidHt",value:function(){}},{key:"_postEachRender",value:function(e,t){_get(_getPrototypeOf(o.prototype),"_postEachRender",this).apply(this,arguments);var a=t.attrModified,i=!t.rendered,l=this._opts.value;(i||a)&&((i||-1<["title","closeButton"].indexOf(a))&&t.close&&!t.close.mainElement&&this._updateCloseEle(),t.isCallout&&!this._pointer&&(this._pointer=this.container.find(".zdropdownlist__pointer"),this._setShowHideOpts()),t.attrModified=void 0),(i||this._btnAttrChanged)&&this._isBtns&&(this._btnAttrChanged=void 0,this._updateBtns()),this._isSingle&&l&&this._toArr(l).length&&this._savePrevSelection(this._selectedItems[0].id)}},{key:"_getClass",value:function(){var e=_get(_getPrototypeOf(o.prototype),"_getClass",this).apply(this,arguments),t=this._data;return e+=t.title?" zdropdownlist--withtitle":"",e+=t.close&&!t.title?" zdropdownlist--withclose":"",e}},{key:"_setVisibility",value:function(t){var a=this.inputField&&!this._showSearchField,i=this._status,l="noresults"===i&&!this._opts.search.showNoResultsMessage;if(a&&("minkeywordlength"===i||l))this.close(t);else if(!a&&l)this._hide(this._listBody);else{var n;(this.container.attr("data-loading")!==this._loading+""||this.container.attr("data-noresults")!==this._noResults+"")&&(n=!0),_get(_getPrototypeOf(o.prototype),"_setVisibility",this).apply(this,arguments),n&&this._isShown&&this._freshRequest&&e.Helpers.fixHeight(this.container,this._showHideProps)}}},{key:"_trigger",value:function(e,t){if("change"===e){var a=t&&t.type,i=this._opts,l=this._btnClicked,n=a&&-1<["keydown","mouseup"].indexOf(a),s=this._doneBtn?!!n&&"done"!==l:!l&&this._isSingle&&i.selectOnKeyNavigation&&n;if(this._internalChange||s)return!1}return _get(_getPrototypeOf(o.prototype),"_trigger",this).apply(this,arguments)}},{key:"_triggerUpdate",value:function(e,t){return(this._freshRequest||this._updateHtAndPos)&&this._isShown&&this._direction&&this._updatePos(null,e),this._trigger("update",e,t)}},{key:"_triggerBeforeUpdate",value:function(e,t){return this._trigger("beforeupdate",e,t)}},{key:"_itemClickHandler",value:function(e,t,a){_get(_getPrototypeOf(o.prototype),"_itemClickHandler",this).apply(this,arguments);var i;a.itemMappedData.moreresults?i=!0:this._isSingle&&!this._doneBtn&&"mouseup"===e.type&&(this._getStoredData(t).selectable&&this._saveCommitedItemData(t),i=!0),i&&this.close(e)}},{key:"_saveCommitedItemData",value:function(e){var a=this._curSelectedItem,o=e?e.is("."+this.CLASSES.item):a&&a!==this._prevSelectedItem;!o&&this._opts.focusItemOnItemMouseover&&(e=this.getFocussed(),e&&(o=!0)),o&&(e&&(a="#"+e.attr("id")),this._curSelectedItemData=this._getItemEventData(t(a)),this._curSelectedItem=a,this._isCommitted=!0)}},{key:"_selectItem",value:function(e){var t=_get(_getPrototypeOf(o.prototype),"_selectItem",this).apply(this,arguments);if(!1!==t){var a=this._selectedItems;if(this._isSingle)if(a.length){this._valCleared=!1;var i=a[0];this._curSelectedItem="#"+i.id,this._curSelectedItemData=this._getItemEventData(e.length?e:this._getById(e.id))}else this._valCleared&&(this._curSelectedItem=this._curSelectedItemData=this._prevSelectedItem=this._prevSelectedItemData=null);this._isBtns&&this._isShown&&this._updateBtnsOnItemSelect()}return t}},{key:"_keydownActions",value:function(a){var i=this._btnClicked,l=!!i||_get(_getPrototypeOf(o.prototype),"_keydownActions",this).apply(this,arguments);if(i)this._resetFocus(i,a);else{var n=e.keyCode,s=a.keyCode,r=this._opts,d=n.TAB===s&&!this._isBtns,c=this._isSingle,_=this._getStoredData(t(this.getFocussed())).selectable,u=n.ENTER===s&&r.selectOnEnterKey||n.SPACE===s&&!this.inputField,p=n.ESCAPE===s||d,m;n.ESCAPE===s&&(a.stopPropagation(),a.preventDefault()),(p||c&&r.keyNavigation&&u)&&(c&&!this._doneBtn&&(u||d&&r.selectOnTabPress)&&_?this._saveCommitedItemData():!p&&(m=!0),!m&&this.close(a))}return l}},{key:"_setAriaAttrs",value:function(e){this.container.attr({"aria-hidden":!!e,"aria-expanded":!e}),this._forElement.attr({"aria-expanded":!e})}},{key:"_setShowHideOpts",value:function(){var e=this,t=this._opts,a=this.CLASSES,o=this._animateOpenOrClose&&this._animateOpenOrClose.bind(this);this._showHideProps={cname:this.name,forElement:this._forElement,isCE:this.isCE,rtl:t.rtl,originalElement:this.element,bodyCls:a.body,headerCls:a.header,footerCls:a.footer,widthCls:"zdropdownlist__width",arrowElement:this._pointer,arrowCallback:this._arrowCallback.bind(this),direction:t.position,offset:t.margin,position:t.offset,appendTo:t.appendTo,hideMethodName:"close",hideEventName:"close",onShowWithAnimation:o,onHideWithAnimation:o,beforeFocus:function(){return!1}},["height","viewport","displayType","positionAlterable","animation"].forEach(function(a){return e._showHideProps[a]=t[a]});var i=parseFloat(t.minWidth||0),l=parseFloat(t.width||0);i>l?this._showHideProps.minWidth=i:this._showHideProps.width=l}},{key:"_arrowCallback",value:function(e,a){var o={top:"zh-top",bottom:"zh-bottom",left:"zh-left",right:"zh-right"}[a],i=this._pointer;t(i).length&&!i.hasClass(o)&&(i.removeClass(this._prevArrowCls||""),i.addClass(o),this._prevArrowCls=o),(this.inputField||this._data.title||this._data.close)&&this._updateClass("zdropdownlist--pointerwithbg",0>["top","bottom"].indexOf(a))}},{key:"_focusInHandler",value:function(e){_get(_getPrototypeOf(o.prototype),"_focusInHandler",this).apply(this,arguments);var a=this.inputField,i=e&&e.originalEvent,l;if(this._isBtns&&i&&!this._isItemsNavigation){var n=t(e.target);l=!this._btnClicked&&!n.hasClass("has-mfocus")&&n.is(".clear-zdropdownlist,.done-zdropdownlist,.reset-zdropdownlist")}!l&&a&&this._opts.searchFieldOptions.handleEvents&&document.activeElement!==a[0]&&a[0].focus()}},{key:"_storeForElement",value:function(e){this._opts.forElement=e,this._forElement=t(e),this._setShowHideOpts()}},{key:"_savePrevSelection",value:function(e){e&&(e="#"+e),this._prevSelectedItem=this._curSelectedItem||e,this._prevSelectedItemData=this._curSelectedItemData&&this._curSelectedItemData.itemData||e&&this._selectedItems[0].originalData}},{key:"_updateSelectedItem",value:function(a){var o=this._curSelectedItem,i=this._prevSelectedItemData,l=a&&a.originalEvent,n=this._opts,s=this._getPrevValId();this._isCommitted||this._opts.autoCommit?(this._savePrevSelection(),(n.selectOnKeyNavigation||n.focusItemOnItemMouseover&&l&&"keydown"===l.type&&l.keyCode===e.keyCode.TAB)&&this._dispatchEvent("change",a,_objectSpread({},this._curSelectedItemData,{previousValue:i?[i]:void 0,value:[this._prevSelectedItemData]}))):o&&o!==s&&(this._select(!1,t(o),null,a),this._unFocusItem(),i&&this._select(!0,null,i,a)),this._isCommitted=this._curSelectedItem=this._curSelectedItemData=void 0}},{key:"_getPrevValId",value:function(){var e=this._prevSelectedItemData;return e?"#"+this._getItemId(e):void 0}},{key:"_setScrollPos",value:function(e){var a=this._opts,o=this._isSingle,i=a.focusFirstItemOnOpen,l=this._prevSelectedItemData,n=a.focusSelectedItemOnOpen,s=t(this._getPrevValId()),r,d;n&&(o?d=s.length&&s.is(":visible")?s:void 0:(d=t(this._listBody.find("."+this.CLASSES.item+".is-selected")[0]),(!d.length||!d.is(":visible"))&&(d=void 0))),n&&d?o?this._select(!0,null,l,e,!0):r=d:i&&(r=this.getFirstValidItem()),r&&(r=t(r),this._select(!0,r,null,e,!0)),r&&!i||l||(this._lastScrollTop=0,this._setScrollTop())}},{key:"_focusLastFocussed",value:function(){if(!this._fromOpenMethod||this.params.query)return _get(_getPrototypeOf(o.prototype),"_focusLastFocussed",this).apply(this,arguments)}},{key:"_select",value:function(e,a,o,i,l){this._internalChange=!0,o&&(e=!0,a=t(this._getPrevValId())),l||this._navInstance[e?"selectItem":"deSelectItem"](a,i),e&&this._focusEle(a,i,!0),this._internalChange=!1}},{key:"_destroy",value:function(){var t=this._opts,a=this.container;Object.keys(t.animation).length&&e.clearAnimationData(a),t.handleFocusNavigation&&e.FocusHandler&&e.FocusHandler.destroy(a),this.element.removeData("zshowhide actualDirection arrowDirection arrowPosition availableHeight availableWidth componentName direction elementPosition pos prevDirection"),this.isCE&&this.element.removeClass(this._data.className).empty(),_get(_getPrototypeOf(o.prototype),"_destroy",this).apply(this,arguments)}},{key:"_search",value:function(e,t){this._focussed=!0,this._updateHtAndPos=!0;var a=t.event,i=this.inputField&&!this._showSearchField;if(_get(_getPrototypeOf(o.prototype),"_search",this).apply(this,arguments),!this._isShown&&(t.shouldOpen||i&&a&&a.target===this.inputField[0])){i&&(t.shouldOpen=!1);var l=this._status,n=t.shouldOpen||("noresults"===l?this._opts.search.showNoResultsMessage:"minkeywordlength"!==l);n&&this.open({fromSearch:!0},a)}this._updateHtAndPos=!1}},{key:"_callOpen",value:function(t){return e.Helpers.open(this.container,t||this._showHideProps)}},{key:"_setValues",value:function(e,t){var a=t&&!1===t.commit;a&&(this._internalChange=!0),_get(_getPrototypeOf(o.prototype),"_setValues",this).apply(this,arguments),this._isSingle&&this._selectedItems.length&&this._savePrevSelection(this._selectedItems[0].id),a&&(this._internalChange=!1)}},{key:"_reSearch",value:function(){this.params.previousQuery=this.params.query=void 0,this._isShown?_get(_getPrototypeOf(o.prototype),"_reSearch",this).call(this):this._shouldReSearch=!0}},{key:"_focusItemUsingNavInstance",value:function(e,t){var a=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];this._navInstance.focusItem(e,t,a)}},{key:"_openHandler",value:function(e){var t=this._dispatchEvent.bind(this);this._isShown=!0,this._setAriaAttrs(),t("beforefocus",e)&&this.setFocus(),t("open",e)}},{key:"_closeHandler",value:function(t){Object.keys(this._opts.animation).length&&this._display(!0,this.container),e.Helpers.removeScrollClass(this.element),this._setAriaAttrs(!0),this._dispatchEvent("close",t),this._isSingle&&this._curSelectedItem?this._updateSelectedItem(t):this._unFocusItem()}},{key:"_focusCallback",value:function(){this._focussed=!0,_get(_getPrototypeOf(o.prototype),"_focusCallback",this).apply(this,arguments)}},{key:"open",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=1<arguments.length?arguments[1]:void 0;if(!this._isShown){var o=this._opts,i=!0,l=o.searchField,n=void 0===t.minKeywordLength?o.search.minKeywordLength:t.minKeywordLength,s;if(void 0===t.searchQuery?l?s=this.inputField.val():this._shouldReSearch&&(s=this.params.query||""):s=t.searchQuery,n&&void 0!==s&&!this._shouldReSearch&&(i=this._opts.search.showNoResultsMessage||s.length>=n),i&&this._dispatchEvent("beforeopen",a)){this._fromOpenMethod=!0,t.forElement&&this._storeForElement(t.forElement),this._initialized||(this._initialized=!0,s=s||""),t.event=a,t.fromSearch||void 0===s||this.search(s,t),o.offset?this._callOpen():this._updatePos(!0,a),this._opts.handleFocusNavigation&&e.FocusHandler&&e.FocusHandler.refresh(this.container),t.fromSearch&&o.search.focusFirstResult||this._setScrollPos(a),this._isBtns&&this._handleBtnsOnOpen();var r=o.animation;r=Object.keys(r).length?r.open:null,r||this._openHandler(a),this._fromOpenMethod=this._shouldReSearch=!1}}}},{key:"close",value:function(t){var a=this._dispatchEvent.bind(this),o=this.container,i=this.inputField;if(this._isShown&&a("beforeclose",t)){e.Helpers.close(o,_objectSpread({},this._showHideProps,{event:t})),this._maxHt=this._direction=void 0,this._isShown=!1,!this._opts.searchField&&i&&i.val().length&&this.search("",{event:t}),this._doneBtn&&this._valueChanged&&!this._doneClicked&&(this._internalChange=!0,this._resetClickHandler(t,!0)),this._valueChanged=void 0;var l=this._opts.animation;l=Object.keys(l).length?l.close:null,l||this._closeHandler(t)}}},{key:"setFocus",value:function(e){this._trigger("beforefocus",e)&&(this.container.focus(),this._focusInHandler(e))}},{key:"getValue",value:function(){var e=this._prevSelectedItemData;return this._isSingle&&this._opts.selectOnKeyNavigation?e?[e]:void 0:this._opts.value}},{key:"deselect",value:function(){this._valCleared=this._isSingle,_get(_getPrototypeOf(o.prototype),"deselect",this).apply(this,arguments)}},{key:"deselectAll",value:function(){this._valCleared=this._isSingle,_get(_getPrototypeOf(o.prototype),"deselectAll",this).apply(this,arguments)}},{key:"search",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=2<arguments.length?arguments[2]:void 0;a&&(t.shouldOpen=a?!this._forElement||this._forElement.is(":visible"):void 0),_get(_getPrototypeOf(o.prototype),"search",this).call(this,e,t)}},{key:"_updateSearchFldPos",value:function(e){var t;!this.inputField||this._opts.searchField||this._data.title||this._isBtns||(t=-1<e.indexOf("top")),this.container[t?"addClass":"removeClass"]("zdropdownlist--searchbottom")}},{key:"_updatePos",value:function(e,t){var a=this,o=this._opts,i=o.position,l=o.positionAlterable,n=_objectSpread({},this._showHideProps,{event:t,mustBeShown:!e,positionAlterable:l,direction:i});l&&("auto"===i&&(n.direction=i="bottom-left",n.positionAlterable=n.positionAlterable||!0),n.callbacks={beforeComputingDir:{dimensionModifier:function(e,t,o,i){a._maxHt?t.height>=a._maxHt?a._maxHt=t.height:(i.positionAlterable=!1,i.direction=a._direction):a._maxHt=t.height}}});var s=this._callOpen(n).actualDirection;e&&(this._direction=s,this._updateSearchFldPos(s))}},{key:"updatePosition",value:function(){this._updatePos()}},{key:"_fieldKeydownHandler",value:function(t){var a=t.keyCode;if(this._lastKeyCode=a,this._shiftPressed=t.shiftKey,this._isShown||this._showSearchField)return _get(_getPrototypeOf(o.prototype),"_fieldKeydownHandler",this).apply(this,arguments);var i=e.keyCode;if(a===i.UP||a===i.DOWN){t.preventDefault();var l="search",n,s;this._opts.searchFieldOptions.listAllItemsOnDOWNPress?(l="open",n="",s=0):n=this.inputField.val();var r={event:t,minKeywordLength:s,updateField:!1};"open"===l?(r.searchQuery=n,this.open(r)):this.search(n,r,!0)}}},{key:"_inputKeyupHandler",value:function(t){var a=e.keyCode,i=t.keyCode,l=this._opts.searchFieldOptions;l.suggestOnFieldFocus&&i===a.TAB&&(i!==this._lastKeyCode||this._shiftPressed!==t.shiftKey)?this.searchWithDelay(void 0,{event:t,delay:1}):_get(_getPrototypeOf(o.prototype),"_inputKeyupHandler",this).apply(this,arguments),this._lastKeyCode=void 0,this._shiftPressed=!1}},{key:"_bindInputFieldEvents",value:function(){_get(_getPrototypeOf(o.prototype),"_bindInputFieldEvents",this).apply(this,arguments),this._opts.searchFieldOptions.handleEvents&&this._addEvents({inputMousedown:"mousedown"},this.inputField)}},{key:"_checkCurPos",value:function(){var e=this.inputField[0],t=this._opts.searchFieldOptions;return(t.filterBasedOnCurPos||t.suggestOnFieldFocus)&&e.selectionStart===e.selectionEnd}},{key:"_inputMousedownHandler",value:function(e){var t=this._opts.searchFieldOptions;this._filteredOnMouseDown=!1,this._checkCurPos()&&(this._filteredOnMouseDown=!0,t.filterBasedOnCurPos?this._searchBasedOnCurPos(e):this._search(void 0,{event:e}))}},{key:"_inputMouseupHandler",value:function(e){var t=this.inputField[0];this._filteredOnMouseDown||t.selectionStart!==t.selectionEnd||_get(_getPrototypeOf(o.prototype),"_inputMouseupHandler",this).call(this,e)}},{key:"_animateOpenOrClose",value:function(t,a){var o=this._opts.animation;if(!a.mustBeShown){var i=this._isShown,l=i?o.close:o.open;l.name||i||this._display(!1,this.container),e.animationHandler({action:i?"close":"open",animation:o,element:this.container,ctype:this.name,callback:i?this._closeHandler.bind(this):this._openHandler.bind(this)})}}},{key:"_setAttribute",value:function(e,t){var a=this._opts,i=this._data,l;this._userOptions[e]=t,a[e]=t,"forElement"===e?this._storeForElement(t):-1<["title","closeButton","closeIconClassName","closeSVGIconId"].indexOf(e)?-1<["title","closeButton"].indexOf(e)?(this._constructTitleBar(),i.attrModified=e,l=!0):a.closeButton&&(e="closeSVGIconId"===e?"SVGIconId":"iconClassName",this._setBtnValue(_defineProperty({},e,t),i.close)):-1<["clearButton","doneButton","resetButton","commandBar","resetButtonLabel","clearButtonLabel","doneButtonLabel"].indexOf(e)?(this._handleBtnAttrs(e,t),l=0>e.indexOf("Label")):"displayType"===e?(i.attrModified="displayType",this._validateOpts(),"box"===t&&(this._pointer=void 0),l=!0):(-1<["selectOnKeyNavigation","focusItemOnItemMouseover","multiple"].indexOf(e)&&("multiple"==e&&t&&(this._prevSelectedItem=this._prevSelectedItemData=this._curSelectedItem=this._curSelectedItemData=null),this._validateOpts()),_get(_getPrototypeOf(o.prototype),"_setAttribute",this).apply(this,arguments),l=this._domChanged,"value"==e&&this._isSingle&&(t?i.attrModified="value":this._valCleared=!0)),-1<["position","positionAlterable","offset","animation","margin","height","width","minWidth","viewport","appendTo","rtl"].indexOf(e)&&this._setShowHideOpts(),this._reInit&&(this._shouldReSearch=!0),this._domChanged=l}},{key:"name",get:function(){return"zdropdownlist"}},{key:"attrs",get:function(){return{position:"auto",selectOnTabPress:!1,forElement:null,viewport:null,displayType:"box",focusFirstItemOnOpen:!1,focusSelectedItemOnOpen:!0,title:"",closeButton:!1,closeIconClassName:"",closeSVGIconId:"",positionAlterable:!1,doneButton:!1,clearButton:!1,resetButton:!1,doneButtonLabel:null,clearButtonLabel:null,resetButtonLabel:null,handleFocusNavigation:null,selectOnKeyNavigation:null,focusItemOnItemMouseover:null,minWidth:null,focusSelectedItem:!1}}},{key:"propType",get:function(){return{selectOnKeyNavigation:"boolean",focusItemOnItemMouseover:"boolean"}}},{key:"props",get:function(){return{appendTo:null,offset:null,animation:{},margin:{},commandBar:null,messages:{doneButtonLabel:"Done",resetButtonLabel:"Reset",clearButtonLabel:"Clear",closeButtonLabel:"Close"},search:{showNoResultsMessage:!0,criteria:"startswith"},searchFieldOptions:{updateOnSelect:!1,autoComplete:!1,listAllItemsOnDOWNPress:!1,suggestOnFieldFocus:!1,filterBasedOnCurPos:!1}}}},{key:"EVENTS",get:function(){return["beforeopen","open","beforefocus","beforeclose","close","update","beforeupdate","done","reset","clear"]}},{key:"CLASSES",get:function(){return{container:"zdropdownlist",icon:"zdropdownlist--withicon",listwithloader:"zdropdownlist--loading",withicon:"zdropdownlist--withicon",withhint:"zdropdownlist--withdesc",withcheckbox:"zdropdownlist--withcheckbox",withcheckedicon:"zdropdownlist--withcheckedindication",withoutcheckeditem:"zdropdownlist--withoutcheckeditem",listwithcustom:"zdropdownlist--withcustomitem",withsearchfield:"zdropdownlist--withsearchfield",icononly:"zdropdownlist--icononly",icontext:"zdropdownlist--iconwithtext",listwithcheckboxRight:"zdropdownlist--checkboxright",listwithcheckediconRight:"zdropdownlist--checkedindicationright",listwithactionbtnsvisible:" zdropdownlist--actionbuttonvisible",listwithimage:"zdropdownlist--withimage",reorderable:"zdropdownlist--reorderable",text:"zdropdownlist__text",title:"zdropdownlist__title",hint:"zdropdownlist__description",body:"zdropdownlist__body",header:"zdropdownlist__header",footer:"zdropdownlist__footer",item:"zdropdownlist__item",itemgroup:"zdropdownlist__itemgroup",itemgrouplabel:"zdropdownlist__grouplabel",loader:"zdropdownlist__loader",fullloader:"zdropdownlist__fullloader",loadericon:"zdropdownlist__loadericon",actionbuttonsWrapper:"zdropdownlist__actions",actionbutton:"zdropdownlist__action",separator:"zdropdownlist__separator",checkediconWrapper:"zdropdownlist__checkedindication",checkedicon:"zdropdownlist__checkedicon",checkboxWrapper:"zdropdownlist__checkbox",checkbox:"zdropdownlist__inputcheckbox",checkboxlabel:"zdropdownlist__checkboxlabel",avatar:"zdropdownlist__avatar",icondiv:"zdropdownlist__image",itemicon:"zdropdownlist__icon",content:"zdropdownlist__content",textIconWrapper:"zdropdownlist__imagetext",moreresults:"zdropdownlist__moreresults",noresults:"zdropdownlist__noresults",noresultstext:"zdropdownlist__noresultstext",search:"zdropdownlist__search",searchcontainer:"zdropdownlist__searchiconcontainer",searchicon:"zdropdownlist__searchicon",searchfield:"zdropdownlist__searchfield",clearbuttonicon:"zdropdownlist__clearicon",clearbutton:"zdropdownlist__clearbutton",listwithicononly:"zdropdownlist--icononly",hoverable:"is-hoverable",disabled:"is-disabled",hover:"on-hover",focussed:"has-focus",selected:"is-selected",rtl:"zh-rtl",leftColumn:"zdropdownlist__commandbaractionsleft",rightColumn:"zdropdownlist__commandbaractionsright",centerColumn:"zdropdownlist__commandbaractionscenter"}}},{key:"SELECTORS",get:function(){return{OPTION:this.isCE?"z-dropdownlistitem":"option",OPTGROUP:this.isCE?"z-dropdownlistgroup":"optgroup",OPTIONSBODY:"z-dropdownlistbody",OPTIONSHEADER:"z-dropdownlistheader",OPTIONSFOOTER:"z-dropdownlistfooter",OPTIONSEPARATOR:"z-dropdownlistseparator"}}}]),o}(e.ZListBox);e.registerComponent("ZDropdownList",e.ZListBox,T),function(e){var t=e.zlistbox.Templates,a=e.zdropdownlist.Templates,o=e.Templates.Utilities;a.children=function(e){return ZT.html(tO90(),e.isCallout&&ZT.html(tO91()),(e.title||e.close)&&a.title(e),t.children(e),e.cBar&&ZT.html(tO92(),o.commandBarCol(e.cBar)))}}(ZComponents);var I=function(t){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,_getPrototypeOf(a).apply(this,arguments))}return _inherits(a,t),_createClass(a,[{key:"_init",value:function(e,t){t.showSearchField=t.multiple=!1,_get(_getPrototypeOf(a.prototype),"_init",this).call(this,e,t)}},{key:"_storeRef",value:function(){_get(_getPrototypeOf(a.prototype),"_storeRef",this).call(this),this._arrowTarget=this.container.find("i.zselectbox__arrowicon"),this._inputField=this.container.find("input")}},{key:"_postRender",value:function(){_get(_getPrototypeOf(a.prototype),"_postRender",this).call(this),this._inputField[0].id=this.listInstance._getID("searchbox"),this._addEvents({inputMouseUp:"mouseup"},this._inputField)}},{key:"_inputMouseUpHandler",value:function(e){this._skipHighlightingOnMouseUp||(this._highlightContent(),this._skipHighlightingOnMouseUp=!0),e.preventDefault()}},{key:"_preRender",value:function(){if(this._skipDataSetting)return this._data;var e=_get(_getPrototypeOf(a.prototype),"_preRender",this).apply(this,arguments);return e.rendered&&-1!==this._opts.selectedIndex&&this._iconShow(""),e}},{key:"_getListSettings",value:function(){var e=this,t=_get(_getPrototypeOf(a.prototype),"_getListSettings",this).call(this),o=t.searchFieldOptions;return o.showSearchField=o.multiple=!1,o.listAllItemsOnDOWNPress=!0,t.autoCommit=!0,t.searchField=this._inputField,this._autoComplete=this._opts.autoComplete&&this._opts.dropdownList.selectOnKeyNavigation,this._autoComplete&&(t.search.focusFirstResult=!0,t.search.criteria="startswith"),t.beforefocus=function(){e._setFocus()},t.focusFirstItemOnOpen=t.search.focusFirstResult,t}},{key:"_itemFocusHandler",value:function(e){var t=e.originalEvent;return t&&"input"===t.type&&this._autoComplete&&(this._skipRender=!0,this._setValue(e.detail.itemData,{event:e,commit:!1}),this._skipRender=!1),_get(_getPrototypeOf(a.prototype),"_itemFocusHandler",this).apply(this,arguments)}},{key:"_changeHandler",value:function(e){var t=e.originalEvent;return t&&"input"===t.type?void(this._active=!0):_get(_getPrototypeOf(a.prototype),"_changeHandler",this).apply(this,arguments)}},{key:"_beforeSearchHandler",value:function(t){var o=t.detail,i=t.originalEvent,l;i&&("keydown"===i.type?l=i.keyCode===e.keyCode.DOWN||i.keyCode===e.keyCode.UP:"mousedown"===i.type&&(l=this._arrowTarget[0]===i.target||this._arrowTarget.find(i.target).length)),(l||!i)&&(o.searchOptions.minKeywordLength=0,o.params.query=""),_get(_getPrototypeOf(a.prototype),"_beforeSearchHandler",this).apply(this,arguments)}},{key:"_noResultsHandler",value:function(){return this._noResults=!0,this._skipRender=!0,this._setValue([],{clearOtherValues:!0,commit:!1}),this._skipRender=!1,_get(_getPrototypeOf(a.prototype),"_noResultsHandler",this).apply(this,arguments)}},{key:"_updateHandler",value:function(e,t){this._noResults="noresults"===t.status,_get(_getPrototypeOf(a.prototype),"_updateHandler",this).apply(this,arguments)}},{key:"_onAttrChange",value:function(e){_get(_getPrototypeOf(a.prototype),"_onAttrChange",this).apply(this,arguments),e.isCustom&&(e.isCustom=!1,e.hasText=!0),e.attrs.tabindex=e.disabled?null:-1,e.attrs["aria-autocomplete"]="list"}},{key:"_acceptNewValues",value:function(e,t){var o=_get(_getPrototypeOf(a.prototype),"_acceptNewValues",this).call(this,e,t);o||this._setPrevValue(t)}},{key:"_newValueHandler",value:function(e){this._altered&&this._opts.acceptNewValues?this._setValue(this._inputField[0].value,{event:e}):this._setPrevValue(e),this._opened&&this._close(e)}},{key:"_setPrevValue",value:function(e){this._skipRender=!0,this._setValue(this._getPrev(),{event:e}),this._skipRender=!1,this._updateView()}},{key:"_onESCPress",value:function(e){this._setPrevValue(e),e.preventDefault()}},{key:"_keyDownHandler",value:function(t){if(!this._keydownEventHandled){t=t.originalEvent,this._lastKeydownEvent=t;var a=this._opts;if(!a.disabled){var o=e.keyCode;switch(t.keyCode){case o.ESCAPE:this._onESCPress(t);break;case o.ENTER:this._noResults&&this._newValueHandler(t);}}}this._keydownEventHandled=!1}},{key:"_listBeforeKeyDownHandler",value:function(e){this._keyDownHandler(e),_get(_getPrototypeOf(a.prototype),"_listBeforeKeyDownHandler",this).call(this,e),this._keydownEventHandled=!0}},{key:"_keyPressHandler",value:function(){}},{key:"_inputHandler",value:function(e,t){clearTimeout(this._renderTimer),_get(_getPrototypeOf(a.prototype),"_inputHandler",this).call(this,e,t),e=e.originalEvent,this._altered=this._active=!0;var o=this._inputField[0].value,i=this._opts.search.minKeywordLength;this._autoComplete&&o||this._iconShow("none"),this._autoComplete&&(!i||o.length>=i)&&this._autoCompleteFn(e),this._updateClrBtn()}},{key:"_updateClrBtn",value:function(){var e=this._data;e.clearButton&&(e.clearButton.mainElement[0].style.display=this._inputField[0].value&&!e.disabled?"":"none")}},{key:"_iconShow",value:function(e){this._data.hasIcon&&(this.container[0].querySelector(".zselectbox__icon").style.display=e)}},{key:"_afterBlur",value:function(e){this._isFocussed()||(_get(_getPrototypeOf(a.prototype),"_afterBlur",this).apply(this,arguments),this._newValueHandler(e),this._altered=this._focussed=this._active=!1,this._skipHighlightingOnMouseUp=!1,this.container.removeClass("has-focus has-mfocus has-kfocus"))}},{key:"_updateView",value:function(e,t){var o=this._data;t&&(this._skipDataSetting=!0,this._setIconTextData(t,o)),_get(_getPrototypeOf(a.prototype),"_updateView",this).apply(this,arguments),this._skipDataSetting=!1}},{key:"_beforeSelectHandler",value:function(){return _get(_getPrototypeOf(a.prototype),"_beforeSelectHandler",this).apply(this,arguments)}},{key:"_postEachRender",value:function(){var e=this._data;_get(_getPrototypeOf(a.prototype),"_postEachRender",this).apply(this,arguments),this._inputField[0].value=e.label,this._updateClrBtn(),this._highlightContent(),this._active=!1}},{key:"_getRenderText",value:function(e){return this._getLabel(e,!1)}},{key:"_focusHandler",value:function(){document.activeElement===this._inputField[0]||this._manualFocus||(this._manualFocus=!0,this._inputField.focus()),this._manualFocus=!1,this._focussed||(this._highlightContent(!0),this._skipHighlightingOnMouseUp=!1,this._focussed=!0),_get(_getPrototypeOf(a.prototype),"_focusHandler",this).call(this)}},{key:"_clrBtnMouseDownHandler",value:function(e){_get(_getPrototypeOf(a.prototype),"_clrBtnMouseDownHandler",this).apply(this,arguments),this._inputField.val(""),this._opened&&this.listInstance.searchWithDelay("",{event:e})}},{key:"_highlightContent",value:function(e){var t=this;clearTimeout(this._highlightTimer),this._skipHighlighting||(this._highlightTimer=setTimeout(function(){(e||t._isFocussed())&&(t._inputField.select(),t._skipHighlightingOnMouseUp=!0)}))}},{key:"_setFocusFn",value:function(){this._inputField.focus().focusin()}},{key:"_setAttribute",value:function(e,t){if("autoComplete"===e)this._opts[e]=t,this._reInit=!0;else if(/^(multiple|selectionLimit|showSearchField)$/.test(e))return;_get(_getPrototypeOf(a.prototype),"_setAttribute",this).call(this,e,t)}},{key:"_destroy",value:function(){_get(_getPrototypeOf(a.prototype),"_destroy",this).apply(this,arguments),clearTimeout(this._highlightTimer)}},{key:"_hideClrBtn",value:function(){var e=this._data;e.clearButton.mainElement[0].style.display=this._inputField[0].value&&!e.disabled?"":"none"}},{key:"_fetchAData",value:function(e,t){this._fetch(e,function(e){return t(e[0])})}},{key:"_autoCompleteFn",value:function(e){var t=this;if(!this._ajaxSource){var a;e.originalEvent&&(a=e.originalEvent.inputType);var o=this._inputField[0],i=o.value;i&&this._fetchAData({query:i},function(e){if(e){if("insertText"===a||"insertFromPaste"===a||!a){t._lastHoveredId=e.zitemid,t._skipHighlighting=!0,t._updateView(void 0,e),t._skipHighlighting=!1;var l=t._getProp(e,"label");o.setSelectionRange(i.length,l.length)}t._iconShow("")}else t._iconShow("none")})}}},{key:"_fetchAData",value:function(e,t){this.listInstance.fetchData(e,function(e){return t(e.results[0])})}},{key:"name",get:function(){return"zcombobox"}},{key:"attrs",get:function(){return{autoComplete:!1}}},{key:"props",get:function(){return{dropdownList:{selectOnKeyNavigation:!0}}}},{key:"CLASSES",get:function(){return{CONTAINER:"zselectbox zcombobox"}}},{key:"SELECTORS",get:function(){return{OPTIONSBODY:"z-comboboxbody",OPTIONSHEADER:"z-comboboxheader",OPTIONSFOOTER:"z-comboboxfooter"}}},{key:"ARIA_ROLES",get:function(){return{CONTAINER:"combobox"}}}]),a}(e.ZSelect);e.registerComponent("ZComboBox",e.ZSelect,I),function(e){var t=e.zcombobox.Templates,a=e.Templates.Utilities;t.container=function(){return ZT.html(tO93())},t.children=function(t){return ZT.html(tO94(),ZT.html(tO95(),t.icon&&a.icon(t.icon),ZT.html(tO96(),t.disabled,t.tabindex,t.label,t.placeholder)),t.clearButton&&e.createButton(t.clearButton),a.icon(t.arrow))}}(ZComponents);var x=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(e,t){this._id=this._getID(e),this._menuId=this._id+"-menu",(this.element[0].contenteditable||this.element.is("input, textarea"))&&(this._isRootElementEditable=!0),this.isCE||["disabled","placeholder"].forEach(function(a){t[a]=t[a]||e[0][a]})}},{key:"_render",value:function(){var e=this.element,t=this._opts,a=this._data;a.disabled=t.disabled,this._beforeRender(t,a)?_get(_getPrototypeOf(o.prototype),"_render",this).apply(this,arguments):(!a._rendered&&this._postRender(e),this._postEachRender(e),a._rendered=!0)}},{key:"_beforeRender",value:function(e,t){return t.inputClass="zsuggestfield-element "+(e.className||e.zclassName||""),!this._isRootElementEditable}},{key:"_initSource",value:function(){var t=this._getListSettings(),a=e.createDropdownList(t);this._menu=a,this._listInstance=a.data("zdropdownlist"),this._listInstance.componentInstance=this}},{key:"_postRender",value:function(e){this._input=this._isRootElementEditable?e:e.find("input"),this._initSource()}},{key:"_postEachRender",value:function(){var e=this._data,t=this._opts;if(this._domChanged||!e.rendered){var a={disabled:t.disabled||null,role:"search","aria-owns":this._menuId,"aria-haspopup":!0,placeholder:t.placeholder,autocomplete:"off"},o=a.disabled?" is-disabled":"",i,l;this._isRootElementEditable?(i=this.element,l=e.inputClass+o):(i=this.element.find("input"),e.className=o),i.attr(a),e.className=l}}},{key:"_bindEvents",value:function(){this._addEvents({blur:"blur"},this._input)}},{key:"_blurHandler",value:function(e){var t=this;clearTimeout(this._blurTimer);var a=this._opts.value;a!==this._oldVal&&(this._blurTimer=setTimeout(function(){t._input[0]!==document.activeElement&&(t._oldVal=a,t._triggerChange(e))}))}},{key:"_getListSettings",value:function(){var e=this._opts,a=e.dropdownList,o=e.search,i=e.autoComplete,l=!i&&o.focusFirstResult,n={id:this._menuId,rtl:e.rtl,search:_objectSpread({},o,{},{focusFirstResult:l}),focusFirstItemOnOpen:l,focusItemOnItemMouseover:!0,selectOnEnterKey:!0,moreResultsAction:o.moreResultsAction,messages:e.messages,searchFieldOptions:{autoComplete:i,updateOnSelect:!0,handleEvents:!0,filterBasedOnCurPos:e.filterBasedOnCurPos,suggestOnFieldFocus:e.suggestOnFieldFocus,preventUPDOWNKeysDefault:!0}};return n.searchField=n.forElement=this._input,n=this._getListCallbacks(n),["dataStructure","dataSource","dataMapping","cacheData","isResponseFiltered","lazyLoading","viewPerPage","filterByCSSSelector","sort","sortBy","sortOrder","customSorter","serverSearch","customSearch","headerItems","footerItems"].forEach(function(t){return n[t]=e[t]}),n.items=e.data,t.extend(n,a),n.position=this._getMenuPos(a.position),n}},{key:"_getListCallbacks",value:function(e){var t=this;return["Select","ItemFocus","BeforeOpen","Open","BeforeClose","Close","BeforeSearch","SearchSuccess","SearchError","MoreActionClick","Input","BeforeUpdate","Update","ImageError","NoResults","BeforeFocus"].forEach(function(a){e[a.toLowerCase()]=t["_on"+a].bind(t)}),e}},{key:"_onBeforeFocus",value:function(){return this._trigger.apply(this,["dropdownlistbeforefocus"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onItemFocus",value:function(e,t){var a=e.originalEvent;if(!a||"mouseenter"!==a.type){var o=this._getEventData(t.itemData);o.listItem=t.listItem,this._trigger("listitemfocus",a,o)}}},{key:"_onSelect",value:function(e){this._oldVal=this._opts.value=this._input.val(),this._input.focus(),this._setValue(e);var t=this._getEventData(e.detail.itemData);t.listItem=e.detail.listItem,this._trigger("listitemselect",e,t),this._triggerChange(e,t)}},{key:"_triggerChange",value:function(e,t){this._trigger("change",e,t||this._getEventData())}},{key:"_onInput",value:function(){this._actualData=void 0,this._opts.value=this._input.val()}},{key:"_getMappedData",value:function(e){var t=this;if("object"===_typeof(e)){var a={};return this._getDataKeys().forEach(function(o){return a[o]=t._mapJSONToData(e,t._opts.dataMapping[o])}),a}return e}},{key:"_getDataKeys",value:function(){return["image","text","value","groupLabel","iconClassName","informativeText","customValues"]}},{key:"_onBeforeOpen",value:function(e){return this._listInstance.deselectAll(),this._trigger("dropdownlistbeforeopen",e)}},{key:"_onOpen",value:function(e){return this._DDLOpened=!0,this._trigger("dropdownlistopen",e)}},{key:"_onBeforeUpdate",value:function(){return this._trigger.apply(this,["beforedropdownlistupdate"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onImageError",value:function(){return this._trigger.apply(this,["listitemimageerror"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onUpdate",value:function(){return this._trigger.apply(this,["dropdownlistupdate"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onNoResults",value:function(){return this._trigger.apply(this,["noresults"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onClose",value:function(e){return this._DDLOpened=!1,this._trigger("dropdownlistclose",e)}},{key:"_onBeforeClose",value:function(e){return this._trigger("dropdownlistbeforeclose",e)}},{key:"_onBeforeSearch",value:function(e){return this._trigger("beforesearch",e,{params:e.detail.params})}},{key:"_onSearchSuccess",value:function(){return this._trigger.apply(this,["searchsuccess"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onSearchError",value:function(){return this._trigger.apply(this,["searcherror"].concat(Array.prototype.slice.call(arguments)))}},{key:"_onMoreActionClick",value:function(e,t){var a=this._getEventData(t.itemData);return a.listItem=t.listItem,this._trigger("moreactionclick",e,a)}},{key:"_getEventData",value:function(e){return e=e||this._actualData,{data:e,mappedData:this._getMappedData(e)}}},{key:"_trigger",value:function(e,t,a){return a=this._getTriggerData(a),_get(_getPrototypeOf(o.prototype),"_dispatchEvent",this).call(this,e,t,a)}},{key:"_getTriggerData",value:function(e){return e=e||{},e.value=this._opts.value,e.dropdownList=this._menu&&this._menu[0],e}},{key:"_getMenuPos",value:function(e){return{top:"top-left",bottom:"bottom-left"}[e]||e}},{key:"openDropdownList",value:function(){this._listInstance.open()}},{key:"closeDropdownList",value:function(){this._listInstance.close()}},{key:"getValue",value:function(){return this._actualData}},{key:"_setValue",value:function(e){var t=e.detail;return t&&(t=((t||{}).value||[])[0],t&&(this._actualData=t)),this._actualData}},{key:"search",value:function(e){this.element.val(e),this._listInstance.search(e,{},!0)}},{key:"searchList",value:function(e,t){this._opts.disabled||(this._input.val(e),this._listInstance.search(e,t,!0))}},{key:"clearCache",value:function(){this._listInstance.clearCache()}},{key:"_destroy",value:function(){this._input.val("").off("."+this.name).removeClass("zsuggestfield-element"),clearTimeout(this._blurTimer),this._listInstance.destroy(),this._menu.remove()}},{key:"getDropdownList",value:function(){return this._listInstance.getElement()[0]}},{key:"fetchData",value:function(){var e;return(e=this._listInstance).fetchData.apply(e,arguments)}},{key:"_disable",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this._stopAttrUpdate=this._domChanged=!0,e&&this.closeDropdownList()}},{key:"_setAttribute",value:function(e,t){var a=this._opts;-1<["placeholder","className","zclassName"].indexOf(e)?(a[e]=t,this._stopAttrUpdate=this._domChanged=!0):-1<["autoComplete","cacheData","dataMapping","data","dataSource","dropdownList","isImageSourceSprited","isResponseFiltered","lazyLoading","viewPerPage","messages","rtl","search","customSearch","suggestOnFieldFocus","filterBasedOnCurPos","filterByCSSSelector","headerItems","footerItems","sort","sortBy","sortOrder","customSorter","serverSearch"].indexOf(e)?(a[e]=t,this._reInit=!0):"value"===e&&this._input.val(t)}},{key:"_buildData",value:function(){this._listInstance.setAttributes(t.extend(!0,{},this._listInstance._DEFAULTS,this._getListSettings()))}},{key:"name",get:function(){return"zsuggestfield"}},{key:"attrs",get:function(){return{value:"",autoComplete:!1,suggestOnFieldFocus:!1,lazyLoading:!0,viewPerPage:null,sort:!0,sortBy:null,sortOrder:null,serverSearch:null,filterByCSSSelector:!1,filterBasedOnCurPos:!1,disabled:!1,placeholder:null,zclassName:null,dataStructure:"flat",cacheData:!0}}},{key:"props",get:function(){return{customSorter:null,customSearch:null,data:[],dataSource:null,dataMapping:{},search:{minKeywordLength:0,maxKeywordLength:50,caseSensitive:!1,criteria:"contains",delay:100,by:null,highlightKeyword:!1,searchIncrementsInCache:!1,showNoResultsMessage:!1,moreResultsAction:!1,focusFirstResult:!0},dropdownList:{contentType:"text",loaderIconClassName:null,loaderSVGIconId:null,virtualization:!1,className:null,position:"auto",positionAlterable:!0,height:250,width:null,appendTo:null},messages:{noResults:"No results found",moreAction:"See more results",serverError:"Server request failed. Please try again later.",minKeywordLength:"Please enter #minKeywordLength# or more characters"},headerItems:[],footerItems:[]}}},{key:"EVENTS",get:function(){return["listitemselect","listitemfocus","dropdownlistbeforefocus","dropdownlistbeforeopen","dropdownlistopen","dropdownlistbeforeclose","dropdownlistclose","change","beforesearch","searchsuccess","searcherror","moreactionclick","beforedropdownlistupdate","dropdownlistimagefail","dropdownlistupdate","noresults"]}}]),o}(e.CoreComponent);e.registerComponent("ZSuggestField",x),function(e){var t=e.zsuggestfield.Templates;t.children=function(e){return ZT.html(tO97(),e.inputClass,e.disabled?"is-disabled":"")}}(ZComponents);var E=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(){_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments),this._dataMapping=this._opts.dataMapping,this._data.tokens=[],this._data.id=this._id,this._data.pasteStyle=e.Browser.isIE?"width:0;height:0;opacity:0":"position:absolute; top: -10000000px",this._prevValues=[],this._didOps=[],this._undidOps=[],this._uniqueIndex=0,this._updatePreDatas(),this._setValues(),this._tokensInfo={}}},{key:"_updatePreDatas",value:function(){var e="checkbox"===this._opts.dropdownList.itemType;this._isCheckboxType=e,this._ignoreChange=!1,this._closeOnSelect=!e&&this._opts.dropdownList.closeOnSelect,this._storePatternSettings()}},{key:"_storePatternSettings",value:function(){var e=this._displayPattern=this._opts.tokens.editModePattern.trim(),t="#value#",a="#id#",o=void 0,i=void 0,l=1,n=e.replace(/(\?|\*|\+|\$|\^|\.|\||\\|\(|\)|\[|\])/g,function(e){return"\\"+e});n=n.replace(new RegExp("(".concat(t,"|").concat(a,")"),"g"),function(e){return o||e!==t?!i&&e===a&&(i=l++):o=l++,"(#prefix#.*#suffix#)"}),n=n.replace(/#prefix#/g,"").replace(/#suffix#/g,""),this._patternOpts={parsePattern:n,idIndex:i,valueIndex:o}}},{key:"_setValues",value:function(){var e=this,t=this._opts.maxAllowedValues,a=this._opts.values;t&&(this._opts.values=a=a.slice(0,t)),a.forEach(function(t){return e._data.tokens.push(e._getTokenData(t))})}},{key:"_getEditInput",value:function(){var e=t("#"+this._id+"-edit-input");return e.length?e:void 0}},{key:"_postEachRender",value:function(e,a){if(!a.ignoreRender){var o=this._opts,i=this._tokensInfo.DOM=e.children(".ztokenfield__token");this._tokensInfo.DOMArr=i.toArray(),this._mainFocussedToken=this._lastSelectedToken=!1,this._resetSelectedTokens(),this._bindEditHandler();var l=this._editField=this._getEditInput(),n=this._domChanged,s=this._getSelected();if(l){l.focus();var r=this._tokenInEditMode;l.val(r.editText),this._CRUDEvent||l.select(),this._resetInputField(),this._listInstance.setAttribute("searchField",l)}else s.length?this._mainFocussedToken=s[s.length-1]:a.rendered&&(!this._focussedOut||this._CRUDEvent)&&this._focusInput({force:!0,event:this._data.orgEvent});this._showDrop&&(n=!0,void 0===a._queryForList?"after-cursor"===o.dropdownList.position&&this._positionMenu(!0):a._queryForList!==this._getQuery()&&this._search(a._queryForList,this._CRUDEvent)),n||!a.rendered?(this._data.className="ztokenfield "+(o.className||o.zclassName||"")+(o.rtl?" zh-rtl":"")+(o.disabled?" is-disabled":"")+(o.tokens.showRemoveButtonOnHover?"":" ztokenfield--closeshown"),a.attrs={"aria-disabled":o.disabled,id:this._id+"-container"},this._adjustHeight(),o.tokens.sortable?this._initSortable():this._destroySortable(),this._fixInput(),a.tokens.forEach(function(e){if(e.tokenId&&e.removable&&!e.removeButton.mainElement){var a=t("#"+e.tokenId);e.removeButton.mainElement=a.find(".ztokenfield__close")[0]}})):(this._CRUDEvent||this._CRUDOper)&&this._fixInput(),this._showDrop=this._CRUDEvent=!1}}},{key:"_destroySortable",value:function(){this._isSortableSet()&&e.sortable(this.container).destroy()}},{key:"_isSortableSet",value:function(){return this.container.data("zsortable")}},{key:"_postRender",value:function(){var e=this.container;this._cpyHelperField=t("#"+this._id+"-copy-helper"),this._input=e.find(".ztokenfield__textbox"),this._initSource()}},{key:"_getTriggerData",value:function(e){return e=e||{},e.params=this._listInstance.params,e.dropdownList=this._menu&&this._menu[0],e}},{key:"_getListSettings",value:function(){var e=_get(_getPrototypeOf(o.prototype),"_getListSettings",this).call(this),t=this._opts.dropdownList,a=e.searchFieldOptions;return"checkbox"===t.itemType&&(e.multiSelectInterfacePattern="checkbox",e.checkedIcon=!0),this._opts.autoComplete&&(e.focusSelectedItem=!1,e.selectOnKeyNavigation=!1),e.multiple=e.hideCheckbox=!0,a.updateOnSelect=!1,e.forElement=this["after-cursor"===t.position?"_input":"container"],e.beforesearchfieldupdate=this._onBeforeFieldUpdate.bind(this),e.searchfieldupdate=this._onInputFieldUpdate.bind(this),e}},{key:"_onInputFieldUpdate",value:function(){this._fixInput(),this._listInstance.updatePosition()}},{key:"_onInput",value:function(e,t){if(this._opts.delimiter){var a=this._input.val();if(this._isDelimiter(a[a.length-1]))return void e.preventDefault()}t.pasteAction&&e.preventDefault(),_get(_getPrototypeOf(o.prototype),"_onInput",this).apply(this,arguments)}},{key:"_onBeforeFieldUpdate",value:function(e){var t=e.detail;if(t.autoCompleted)return this._checkMaxLimit()}},{key:"_closeBtnClick",value:function(e,a){this._opts.disabled||(this._removeToken(t("#"+e),a),a.stopPropagation(),a.preventDefault(),this.closeDropdownList())}},{key:"_setRemoveProps",value:function(e){var t=this._opts.tokens;e.removeButton={className:"ztokenfield__close",customAttributes:{tabindex:-1},title:this._getI18NText("remove"),defaultSVGIconId:"zc__svg--close ztokenfield__svg",defaultIconClassName:"ztokenfield__icon",defaultClassName:"ztokenfield__close",templateRender:!0,iconClassName:t.removeSVGIconClassName,SVGIconId:t.removeSVGIconId,click:this._closeBtnClick.bind(this,e.tokenId)}}},{key:"_changeHandler",value:function(e){var t=this,a=this._opts.values,o=a.length,l=this._prevValues,n=l.length,s=this._dataMapping.id,r=o!==n;if(!r)for(var d=function(e){var o=t._mapJSONToData(a[e],s);if(!l.find(function(e){return o===t._mapJSONToData(e,s)}))return r=!0,"break"},c=0,_;c<o&&(_=d(c),"break"!==_);c++);r&&(this._trigger("change",e,{prevTokenList:l,currentTokenList:a}),this._prevValues=_toConsumableArray(a))}},{key:"_getObj",value:function(e,t,a){if(e=this._dataMapping[e],e){var o=e.split(".");o.forEach(function(e,i){i===o.length-1?void 0!==t&&(a[e]=t):a=a[e]=a[e]||{}})}}},{key:"_getListCallbacks",value:function(e){return e=_get(_getPrototypeOf(o.prototype),"_getListCallbacks",this).call(this,e),e.selectionLimit=this._opts.maxAllowedValues,e.value=this._opts.values,e.deselect=this._onDeselect.bind(this),e.beforeupdate=this._onBeforeUpdate.bind(this),e.update=this._onListUpdate.bind(this),e}},{key:"_getSelected",value:function(){return this._getTokenDOMs().filter(".is-selected")||t([])}},{key:"_enterKeyHandler",value:function(e){var a=this._opts;if(e.preventDefault(),!this._isCpyHelperField(t(e.target)))this._editField&&this._focusInput({event:e}),this._validateCurrentState(e);else if(a.tokens.editable){var o=this._getSelected();1===o.length&&this._editHandler(void 0,o[0])}}},{key:"_validateCurrentState",value:function(a){var o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];if(this._focussedOut=this._focussedOut||a.keyCode===e.keyCode.TAB&&"keydown"===a.type,this._focussedOut||!this._isCpyHelperField(t(a.target))){if(this._editField)this._reformToken(a);else if(o){var i=this._input.val().trim();i&&this._processInputText(a,i,this._data.tokens.length)}else return;this._closeOnSelect&&this.closeDropdownList()}}},{key:"_isDelimiter",value:function(e){var t=this._opts.delimiter;if(t)return t=Array.isArray(t)?t:[t],t.find(function(t){return e===t})}},{key:"_getFirstDelimiter",value:function(){var e=this._opts.delimiter;return e=Array.isArray(e)?e[0]:e,e}},{key:"_getDelimiterRegExp",value:function(){var e=this._opts.delimiter;return Array.isArray(e)&&(e=new RegExp(e.join("|"))),e}},{key:"_processInputText",value:function(e,t,a,o){var i=this,l=t.split(this._getDelimiterRegExp()),n=[];1<l.length&&(o=!1),l.forEach(function(t){if(t){i._opts.trimInputedValue&&(t=t.trim());var a=i._processNewValueToken(e,t,o);a&&n.push(a)}});var s=this._validateAndAddToken(n,e,a);(this._focussedOut||s.length)&&this._resetInputField()}},{key:"_processNewValueToken",value:function(e,t,a){var o=this,i=this._opts,l=i.newValuePattern,n=this._parsePattern(t),s={},r=t,d=this._listInstance._ajaxSource,c;if(n&&(s=_objectSpread({},a),r=n.id,["id","value","text","titleText"].forEach(function(e){return o._getObj(e,"text"===e?n.label:n.id,s)}),this._fromEdit&&(c=this._tokenInEditMode.id===r),c||(c=this._data.tokens.find(function(e){if(e.id===r)return s=_objectSpread({},e.actualData,{},s),s.removable=!0,!0})),c||d||(c=this._opts.data.find(function(e){if(o._mapJSONToData(e,o._dataMapping.id)===r)return s=_objectSpread({},e,{},s),s.removable=!0,!0})),c))return s;var _=!this._fromEdit||"paste"!==e.type||n;return i.acceptNewValues&&_&&(!l||l instanceof RegExp&&l.test(r))?(n||this._assignValue(t,s,e),s.newToken=!0,this._addToDS(s),s):i.dataValidation||this._fromEdit?this._getErrTokenData(t,e):void 0}},{key:"_focusOutHandler",value:function(e){this._clearAllSelection(),this._changeHandler(e),this._validateCurrentState(e),this._containerFocussed=this._focussedOut=!1,this._updateFocusClass()}},{key:"_clearAllSelection",value:function(){this._mainFocussedToken=this._lastSelectedToken=!1,this._deselectToken(this._getSelected())}},{key:"_getActiveInput",value:function(){return this._editField||this._input}},{key:"_isCpyHelperField",value:function(e){return e[0]===this._cpyHelperField[0]}},{key:"_getQuery",value:function(){return this._listInstance.params.query}},{key:"_arrowNavigation",value:function(e,t){var a=this._getTokens(),o=a.length;if(o){var i=this._lastSelectedToken||this._mainFocussedToken,l;if(i){var n=this._getAjToken(i.id,t);if(l=a[n],!l)return void(t||this._focusInput({event:e}))}else t&&(l=a[o-1]);this._onTokenClick(e,l,!0),e.preventDefault()}}},{key:"_getAjToken",value:function(e,t){var a=this._getTokenIndex(e),o;return o=t?a-1:a+1,o}},{key:"_isMenuShown",value:function(){return this._DDLOpened}},{key:"getValues",value:function(e){var t=this;return e.map(function(e){return t._getValue(e)})}},{key:"getValue",value:function(e){return this._getValue(e)}},{key:"_getValue",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._data.tokens,a=t.find(function(t){return t.id===e});return a&&a.actualData}},{key:"getAllValues",value:function(){return this._opts.values}},{key:"search",value:function(e){this._input[0].value=e,this._fixInput(),this._search(e)}},{key:"_keydownHandler",value:function(a){var o=this;this._delToken=!1,this._preventInputOnMaxReach(a);var i=e.keyCode,l=this._listInstance,n=t(a.target),s=this._isCpyHelperField(n),r="INPUT"!==n[0].tagName||s?void 0:t(n),d=r&&r.val().trim(),c=a.keyCode,_=this._isMenuShown(),u=this._input,p=u.val().trim(),m=n[0]===u[0],h=m&&0===p.length,g=this._editField,v=c===i.LEFT;if(v||c===i.RIGHT)d?this._search(d,a,null,this._opts.searchOnCurPos):this._arrowNavigation(a,v);else if(c===i.BACKSPACE||c===i.DELETE){if(this._delToken=!d,s)return void a.preventDefault();}else if(c===i.TAB)this._validateCurrentState(a);else if(c===i.ESCAPE)this.closeDropdownList(),g&&this._validateCurrentState(a);else if(!d&&this._isCtrl(a)){var y=90===c,f=89===c,k=65===c,b=88===c;if(y||f||k||b){if(this.closeDropdownList(),k)return void((s||h)&&(a.preventDefault(),this._selectToken(this._getTokens())));if(y||f){a.preventDefault();var C=function(e){return"create"===e?function(e){o._removeToken(e,a)}:function(e){o._validateAndAddToken(e.map(function(e){return e.data}),a)}};if(y){this._undoTask=!0;var D=this._didOps.pop();D&&C(D[0].action).call(this,D)}else if(f){this._redoTask=!0;var w=this._undidOps.pop();w&&C(w[0].action).call(this,w)}return void(this._undoTask=this._redoTask=!1)}if(b)return void(this._removeTimer=setTimeout(function(){o._removeToken(o._getSelected(),a)},2))}}if(r)if(!_)c===i.DOWN&&(l._ajaxSource||this._search(this._input.val(),a));else if(-1<[i.ENTER].indexOf(c)&&!this._menu.attr("data-noresults"))return void(this._closeOnSelect&&this.closeDropdownList());c===i.ENTER&&this._enterKeyHandler(a)}},{key:"_preventInputOnMaxReach",value:function(e){if(this._opts.maxAllowedValues&&this._opts.values.length>=this._opts.maxAllowedValues){var t="INPUT"===e.target.tagName&&this._isAlphaNumericKey(e);t&&e.preventDefault()}}},{key:"_isCtrl",value:function(e){return e&&(e.metaKey||e.ctrlKey)}},{key:"_updateLBSelections",value:function(){var e=[];this._data.tokens.forEach(function(t){e.push(t.actualData)}),this._listInstance.setValue(e)}},{key:"_onDelimiterKey",value:function(e){if(this._isMenuShown()&&!this._menu.attr("data-noresults")){var t=this._menu.find(".zdropdownlist__body > .zdropdownlist__item.has-focus");if(t.length)return void this._listInstance.setValue(t[0].itemData.originalData,{event:e})}this._validateCurrentState(e)}},{key:"_resetInputField",value:function(e){(e||this._input).val(""),this._fixInput()}},{key:"_inputHandler",value:function(e){this._isCpyHelperField(t(e.target))||this._fixInput()}},{key:"_keyUpHandler",value:function(a){var o=this._opts;if(!o.disabled){var i=t(a.target),l=this._delToken,n;if(l||!this._isCtrl(a)&&this._isAlphaNumericKey(a)){var s,r;if(this._isCpyHelperField(i))r=l,n=!0;else{var d=i.val();if(l&&(!d||!d.length))this._selectToken(i.prev(),!0,!0),r=!0,this._removeEditInput(),this.closeDropdownList();else{var c=this._isDelimiter(d[d.length-1]);s=!0,c&&this._onDelimiterKey(a,d)}}if(r){var _=this._getSelected();if(_.length){if(n){var u=_.filter(".is-readonly");if(!u.length){var p=t(_[0]).prev();p.length&&this._selectToken(p,!0,!0)}}this._removeToken(_,a)}this._isCheckboxType||this.closeDropdownList()}else s&&9===e.Browser.getIEVersion()&&this._fixInput()}}}},{key:"_mousedownHandler",value:function(e){var t=e.target,a;this._editField&&!a&&(a=t===this._editField[0],!a&&this._validateCurrentState(e)),this._input[0]!==t&&(a||this._getTokenFromEv(e))||this._search(this._input.val(),e),this._focussedOut=!1,e.target===this.container[0]&&e.preventDefault()}},{key:"_onBeforeOpen",value:function(e){this._isCheckboxType||(this._ignoreChange=!0,this._listInstance.deselectAll(),this._ignoreChange=!1);var t=this._input.val();return!!(t.length<this._opts.search.maxKeywordLength&&this._checkMaxLimit())&&this._trigger("dropdownlistbeforeopen",e)}},{key:"_rectifyInput",value:function(e){return e=e.replace(/[,]?\n+/gim,",").replace(/\t+/gim,","),e}},{key:"_pasteHandler",value:function(e){var t=this;this._checkMaxLimit()?(clearTimeout(this._pasteTimer),this._pasteTimer=setTimeout(function(){var a=e.target,o=t._rectifyInput(a.value),i={inputText:o};t._trigger("paste",e,i),a.value!==i.inputText&&(a.value=o=i.inputText),t._validateCurrentState(e),o=a.value,o&&t._search(o,e)},100)):e.preventDefault()}},{key:"_contextMenuHandler",value:function(){}},{key:"_inputFocusHandler",value:function(e){this._clearAllSelection(),this._opts.suggestOnFieldFocus&&0===this._opts.search.minKeywordLength&&this._search("",e)}},{key:"_inputBlurHandler",value:function(){}},{key:"_isSpecialKeys",value:function(e){return e.metaKey||e.ctrlKey||e.shiftKey}},{key:"_isRemovableToken",value:function(e){return!e.hasClass("is-readonly")}},{key:"_getTokenFromEv",value:function(e){var a=t(e.target).closest(".ztokenfield__token")[0];return a}},{key:"_isCtrlKey",value:function(t){return e.OS.isMac()?t.metaKey:t.ctrlKey}},{key:"_onTokenClick",value:function(e,a,o){if(a){this._updateScrollTop(a);var i=[a];this._skipCpyFieldUpdate=!0;var l=this._mainFocussedToken,n=this._lastSelectedToken;if(e.shiftKey){var s=this._getTokens();l||(l=a);var r=this._getTokenIndex(a.id),d=this._getTokenIndex(l.id);if(o){var c=this._getSelected();this._deselectToken(c.filter(".ztemp"))}else this._clearAllSelection();if(r!==d){if(r<d){var _=[r,d];d=_[0],r=_[1]}for(var u=d;u<=r;u++)i.push(s[u])}o?this._selectToken(t(i).filter(":not(.is-selected)").addClass("ztemp")):this._selectToken(i),n=a}else!o&&this._isCtrlKey(e)?this._isTokenSelected(a)?this._deselectToken(a):this._selectToken(t(i)):(this._clearAllSelection(),this._selectToken(t(i))),l=a,n=!1,this._getSelected().removeClass("ztemp");this._mainFocussedToken=l,this._lastSelectedToken=n,this._skipCpyFieldUpdate=!1,this._updateValToBeCopied(e),this.closeDropdownList()}}},{key:"_clickHandler",value:function(e){var t=this._getTokenFromEv(e);t?this._onTokenClick(e,t):"INPUT"!==e.target.tagName&&this._focusInput({event:e})}},{key:"_updateFocusClass",value:function(){this.container[this._containerFocussed?"addClass":"removeClass"]("has-focus")}},{key:"_bindEvents",value:function(){if(!this._opts.disabled){this._addEvents({keydown:"keydown",keyUp:"keyup",input:"input",mousedown:"mousedown",click:"click",paste:"paste",contextMenu:"contextmenu"});var e=this._tokenImageHandler.bind(this);this._tokenImageHandlerRef=e,this.container[0].addEventListener("error",e,!0),this._addEvents({inputFocus:"focus",inputBlur:"blur"},this._input),this._addEvents({containerBlur:"focusout",containerFocus:"focusin"},this.container)}}},{key:"_containerFocusHandler",value:function(e){var t=!this._containerFocussed;this._focussedOut=!1,this._containerFocussed=!0,this._updateFocusClass(),t&&this._trigger("focus",e)}},{key:"_containerBlurHandler",value:function(e){var t=this;this._focussedOut=!0,clearTimeout(this._blurTimer),document.activeElement!==this.container[0]&&(this._blurTimer=setTimeout(function(){t._focussedOut&&t._focusOutHandler(e)}))}},{key:"_getTokenDOMs",value:function(){return this._tokensInfo.DOM}},{key:"_getTokens",value:function(){return this._tokensInfo.DOMArr}},{key:"_bindEditHandler",value:function(){var e=this._getTokenDOMs();this._removeEvents("dblclick",e),this._opts.tokens.editable&&this._addEvents({edit:"dblclick"},e)}},{key:"_focusInput",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.force;if((t||document.activeElement!==this._input[0])&&this._trigger("beforeinputfocus",e.event)){this._focussed=this._containerFocussed=!0;var a=this.container[0].scrollTop;this._input.focus(),this._CRUDEvent&&(this.container[0].scrollTop=a),this._trigger("inputfocus")}}},{key:"_getToken",value:function(e){var a;if(e){var o=[];return e instanceof t&&e.length?o=e.filter(".ztokenfield__token").toArray():(e=Array.isArray(e)?e:[e],e.forEach(function(e){a="string"==typeof e?t("#"+e):e.tokenId?t("#"+e.tokenId):t(e),a.hasClass("ztokenfield__token")&&o.push(a[0])})),o.length&&o}}},{key:"_isTokenSelected",value:function(e){return t(e).hasClass("is-selected")}},{key:"_selectToken",value:function(e){var a=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],o=2<arguments.length?arguments[2]:void 0,i="is-selected";if(e=this._getToken(e),e){var l=t(e);a?(l.addClass(i),o&&(this._mainFocussedToken=e.pop())):l.removeClass(i+" ztemp"),this._updateValToBeCopied()}}},{key:"_deselectToken",value:function(e){this._selectToken(e,!1)}},{key:"_getTokenIndex",value:function(e){for(var t=this._data.tokens,a=0;a<t.length;a++)if(t[a].tokenId===e)return a;return-1}},{key:"_search",value:function(e,t,a,o){if(e.length<this._opts.search.maxKeywordLength&&this._checkMaxLimit()){var i=this._opts.search;i.delay="number"==typeof a?a:i.delay,i.event=t,i.searchOnCurPos=o,this._listInstance.search(e,i,!0)}}},{key:"_removeTokens",value:function(e,t){this._removeToken(this._getDuplicates(e),t)}},{key:"_tokenImageHandler",value:function(e){var a=e.target;if("IMG"===a.tagName){var o=t(this._getTokenFromEv(e)),i=this._getTokenIndex(o[0].id),l=this._data.tokens[i]||{},n=l.actualData,s=(n||{}).image,r={imageElement:a,token:o,tokenData:n};this._trigger("tokenimageerror",e,r);var d=r.tokenData;s!==d.image&&(l.ignoreRender=!0,l.image=d.image,this._data.tokens[i]=l,this._render())}}},{key:"_onSelect",value:function(e,t){if(t.fromUI){t=e.detail;var a=t.itemMappedData,o=t.item;if(a.selectable&&!a.moreresults){var i=t.itemData,l=this._isCheckboxType;if(this._lastSelected=o,this._trigger("listitemselect",e,{listItem:o,listItemData:a.originalData})){var n=this._editField,s;if(n){var r=this._tokenInEditMode;s=r.index,l||this._removeEditInput()}this._buildToken(i,e,void 0,s)}this._closeOnSelect||e.preventDefault()}this._closeOnSelect&&this.closeDropdownList(),this._editField||this._focusInput()}}},{key:"_getDuplicates",value:function(e){var a=this,o=this._data.tokens;e=Array.isArray(e)?e:[e];var i=[];return e.forEach(function(e){e="object"===_typeof(e)?a._mapJSONToData(e,a._dataMapping.id):e,o.forEach(function(a){a.invalidToken||a.id!==e||i.push(t("#"+a.tokenId)[0])})}),i.length&&i}},{key:"_beforeRender",value:function(){return!0}},{key:"_onListUpdate",value:function(){this._menu&&(this._menu.attr("tabIndex",-1),this._isCheckboxType&&this._updateCheckedState())}},{key:"_getMatchedData",value:function(e){var t=this,a=this._dataMapping.id,o=this._opts.data;if(o&&o.length){var i=this._mapJSONToData(e,a);return o.find(function(e){return t._mapJSONToData(e,a)===i})}}},{key:"_addToDS",value:function(e){this._opts.dropdownList.acceptNewValues&&this._opts.data instanceof Array&&this._opts.data.push(e)}},{key:"_buildToken",value:function(e,t,a,o){var i=this._opts,l="error"===e.type,n,s,r;l?r=this._getErrTokenData(e.errorValue,t,o):(a&&!l&&(n=this._getMatchedData(e),n?e=n:i.acceptNewValues||this._listInstance._ajaxSource?this._addToDS(e):s=this._messages.denyValue),!s&&(this._checkMaxLimit()?(r=e,e.index=o):s=this._messages.limitReach),s?this._trigger("tokenaddfail",t,{failureType:s}):this._validateAndAddToken(r,t))}},{key:"_getDataKeys",value:function(){var e=_get(_getPrototypeOf(o.prototype),"_getDataKeys",this).call(this);return e.concat(["id","titleText"])}},{key:"_checkMaxLimit",value:function(){var e=this._opts.maxAllowedValues;return!e||this._opts.values.length<e}},{key:"_getTokenData",value:function(e){var t=this._opts,a=this._getMappedData(e),o=this._id+"-token-"+this._uniqueIndex++,i=e.invalidToken||"error"===e.type;return a=_objectSpread({},a,{tokenId:o,invalidToken:i,errorValue:e.errorValue,removable:void 0===e.removable||e.removable,hidden:e.hidden,isSprite:!!t.dataMapping.iconClassName}),"custom"===t.tokens.contentType?a.customHTML=this._getCustomContent(e,t.tokens.template,!1,"text",!t.tokens.isDataEncoded):a.hasImage=!i&&"image-text"===t.tokens.contentType&&(!e.newToken||a.image||a.iconClassName),a.actualData=e,a.removable&&this._setRemoveProps(a),a}},{key:"_isValidToken",value:function(e){var t=this._opts,a=t.allowDuplicateValues;return"error"===e.type||a||!this._getDuplicates(e)}},{key:"_validateAndAddToken",value:function(e,t,a){var o=this;e=Array.isArray(e)?e:[e],this._taskCollector=[];var i=[];e.forEach(function(e){o._isValidToken(e)?i.push(e):(e=o._getErrTokenData(o._mapJSONToData(e,o._dataMapping.text),t,e.index),e&&i.push(e))});var l=0;return i.forEach(function(e){var i=void 0!==a?a+l:e.index;o._createToken(e,t,i)&&l++}),this._updateUndoRedoOp(t),i}},{key:"_createToken",value:function(e,a,o){var i=this._opts;if(this._checkMaxLimit()){var l=this._getTokenData(e),n={tokenData:l,fromEdit:this._fromEdit};if(this._trigger("beforetokenadd",a,n)){var s=this._data.tokens,r="number"==typeof o&&-1<o&&o<s.length;return r?(s.splice(o,0,l),i.values.splice(o,0,e)):(s.push(l),i.values.push(e)),this._CRUDEvent=a,this._CRUDOper=!0,this._data.orgEvent=a,this._render(),n.token=t("#"+l.tokenId),this._fromEdit||this._updateScrollTop(n.token),this._trigger("tokenadd",a,n),this._addTask(l,r?o:s.length-1),!0}}}},{key:"_onDeselect",value:function(e){this._ignoreChange||this._removeTokens(e.detail.itemData,e)}},{key:"_onBeforeUpdate",value:function(e,t){var a=this,i=this._opts,l=i.allowDuplicateValues||this._isCheckboxType;this._data.tokens.forEach(function(o){if(!o.editInput){var i=o.value;i&&(i=i.toString(),t.results=e.detail.results.filter(function(e){var t=a._mapJSONToData(e,a._dataMapping.value);if(t){if(i===t.toString()){var n=!o.removable;return(a._isCheckboxType||!n)&&(e.disabled=n,l)}return!0}}))}}),_get(_getPrototypeOf(o.prototype),"_onBeforeUpdate",this).call(this,e,t)}},{key:"_removeToken",value:function(a,o){var i=this;if(a&&(a=this._getToken(a),a&&a.length)){this._taskCollector=[];var l=0,n=0;a.forEach(function(a){a=t(a);var s=i._getTokenIndex(a[0].id),r=i._data.tokens,d=r[s],c={token:a[0],tokenData:{actualData:d.actualData,id:d.id,tokenId:d.tokenId,invalidToken:d.invalidToken,text:d.text,removable:d.removable}},_=i._isRemovableToken(a)&&i._trigger("beforetokenremove",o,c);if(_){if(n++,r.splice(s,1),i._opts.values.splice(s,1),i._skipCpyFieldUpdate=!0,i._isCheckboxType&&i._updateCheckedState(d.actualData),i._deselectToken(a),i._skipCpyFieldUpdate=!1,i._opts.tokens.animateOnRemove){a.width(a.width()).addClass("ztokenfield--transition"),setTimeout(function(){a.off(e._transitionEnd).on(e._transitionEnd,function(){a.css({opacity:"",width:""}).removeClass("ztokenfield--transition").off(e._transitionEnd),l++,l===n&&i._afterTokensRemoval(o),i._trigger("tokenremove",o,c)}).css({opacity:.01,width:0})},15)}else l++,i._trigger("tokenremove",o,c);i._addTask(d,s,"remove")}}),n===l&&this._afterTokensRemoval(o),this._updateUndoRedoOp(o)}}},{key:"_afterTokensRemoval",value:function(e){this._CRUDEvent=e,this._CRUDOper=!0,this._data.orgEvent=e,this._render(),this._updateValToBeCopied(e),this._updateLBSelections()}},{key:"_preRender",value:function(e){var t=this._editField;if(e._queryForList=void 0,this._CRUDEvent){this._showDrop=!0;var a=this._getActiveInput(),o=this._opts.search.retainKeyword;o=(this._opts.search.minKeywordLength&&this._isCheckboxType?!this._isNotNull(o)||o:o)&&!this._opts.autoComplete&&this._checkMaxLimit(),o||this._resetInputField(a);var i=a.val().trim();t&&this._updateEditTokenData(i),!this._closeOnSelect&&this._isMenuShown()?!o&&(e._queryForList=i):this._showDrop=!1}return this._data.rendered&&this._saveSelectedTokens(),e}},{key:"_saveSelectedTokens",value:function(){this._selectedTokenIds=this._getSelected().toArray().map(function(e){return e.id})}},{key:"_resetSelectedTokens",value:function(){var e=this;this._data.rendered&&this._getTokenDOMs().toArray().forEach(function(t){var a=-1!==e._selectedTokenIds.indexOf(t.id);e._selectToken(t,a)})}},{key:"_updateUndoRedoOp",value:function(){this._taskCollector.length&&(this._undoTask?this._undidOps.push(this._taskCollector):!this._redoTask&&this._didOps.push(this._taskCollector)),this._taskCollector=!1}},{key:"_addTask",value:function(e,t,a){var o={data:e.actualData,tokenId:e.tokenId};o.data.index=o.index=t,o.action=a||"create",this._taskCollector.splice(0,0,o)}},{key:"_getPatternedContent",value:function(e,t){if(e.invalidToken)return!t&&e.errorValue;var a=this._displayPattern;return a.replace(/#value#/g,this._mapJSONToData(e,this._dataMapping.text)).replace(/#id#/g,this._mapJSONToData(e,this._dataMapping.id))}},{key:"_parsePattern",value:function(e){var t=this._patternOpts,a=e.match(t.parsePattern);if(a){var o,i;return t.idIndex&&(o=a[t.idIndex]),t.valueIndex&&(i=a[t.valueIndex]),{id:o,label:i}}}},{key:"_updateValToBeCopied",value:function(e){var t=this;if(!this._skipCpyFieldUpdate){var a=this._getSelected().toArray(),o=[],i;a.length?(this._selected=[],a.forEach(function(e){t._selected.push(e.id);var a=e.actualData;o.push(t._getPatternedContent(a))}),this._lastSelectedToken&&-1<a.indexOf(this._lastSelectedToken)&&(i=this._lastSelectedToken),this._cpyHelperField.val(o.join(this._getFirstDelimiter())).select()):!this._editField&&!this._focussedOut&&this._focusInput({event:e}),this._lastSelectedToken=i}}},{key:"_adjustHeight",value:function(){var e=this.container.css("height");this._prevHeight&&e!==this._prevHeight&&this._isMenuShown()&&this._listInstance.updatePosition(),this._prevHeight=e}},{key:"_onBeforeSearch",value:function(e,t){var a=t.params;return a.previousQuery=void 0,this._repositioned=!0,_get(_getPrototypeOf(o.prototype),"_onBeforeSearch",this).apply(this,arguments)}},{key:"_fixInput",value:function(){var e=this._data.tokens.length?"":this._opts.placeholder;this._input[0].placeholder=e||"";var a=this._getActiveInput(),o=a===this._input?this._input.val()||e:a.val(),i=this.container.is(":hidden"),l=this._input,n=t("<span>").attr({class:"ztokenfield__textbox",style:"position:absolute; visibility:hidden; width:auto;"}).text(o),s=n;i&&!this.isCE&&(s=this.container.clone().width("auto").appendTo("body"),l=s.find("input")),n.insertAfter(l);var r=n.width()+30;a[0].style.width=r+"px",s.remove()}},{key:"_updateScrollTop",value:function(e){if(e=t(e),e&&e.length){var a=e.position().top,o=this.container[0].scrollTop;if(0>a)this.container.scrollTop(o+a);else{var i=e.outerHeight(),l=i+a+o,n=this.container.innerHeight()+o;l>n&&this.container.scrollTop(o+(l-n))}}}},{key:"_destroy",value:function(){this._opts.tokens.sortable&&this._destroySortable(),this.container[0].removeEventListener("error",this._tokenImageHandlerRef,!0),this._input.off("."+this.name),this._listInstance.destroy(),clearTimeout(this._blurTimer),clearTimeout(this._pasteTimer),clearTimeout(this._removeTimer),this._listInstance=this._input=this._cpyHelperField=void 0}},{key:"_duplicateElement",value:function(e){var a=t("<div>").css({position:"absolute",left:-9999,top:0,zIndex:-2e4});return["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap","height"].forEach(function(t){return a[0].style[t]=window.getComputedStyle(e[0])[t]}),a}},{key:"_positionMenu",value:function(e){if(this._menu&&this._menu.is(":visible")){if(e&&(this._listInstance.positionList(),this._repositioned=!0),this._repositioned){var t=this._input,a=this._positionInput(t);if(a){var o=this._menu[0].style,i=o.top,l=o.left,n=this._menu.data("direction");/^(top)/.test(n)?i=parseInt(i)+a.top:/^(bottom)/.test(n)&&(i=parseInt(i)-t.outerHeight()+a.top+a.height),l=parseInt(l)+a.left,this._menu.css({top:i,left:l})}}this._repositioned=!1}}},{key:"_positionInput",value:function(e){var t=e[0].value.slice(0,e[0].selectionStart),a,o,i,l,n;return a="<span style=\"position: relative; display: inline-block;vertical-align:middle;\">"+this._removeSpecialChar(t)+"</span>",a+="<span id='caret' style='position: relative; display: inline-block;vertical-align:middle;'>|</span>",a+="<span style='position: relative; display: inline-block;vertical-align:middle;height:100%'></span>",n=this._duplicateElement(e),i=n.html(a).insertAfter(e).find("#caret"),o=i.position(),l={left:o.left,top:o.top,height:i.height()},n.remove(),l}},{key:"_removeSpecialChar",value:function(t){return t=t.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),e.Browser.isFirefox&&(t=t.replace(/\s/g,"&nbsp;")),t}},{key:"_getErrTokenData",value:function(e,t,a){if(e=e.trim(),e){var o={invalidToken:!0,newToken:!0,errorValue:e,type:"error",index:a};return this._assignValue(e,o,t,a),this._input.val(""),o}}},{key:"_assignValue",value:function(e,t){var a=this;["id","text","titleText"].forEach(function(o){return a._getObj(o,e,t)})}},{key:"hasInvalidTokens",value:function(){var e=this._opts.values;if(this._opts.dataValidation)for(var t=0;t<e.length;t++)if("error"===e[t].type)return!0}},{key:"_editHandler",value:function(e,a){var o=this._opts.tokens;if(a=a||e.currentTarget,!this._opts.disabled&&o.editable&&this._isRemovableToken(t(a))){var i=this._data,l=this._getTokenIndex(a.id),n=a.actualData,s=this._tokenInEditMode=this._data.tokens[l],r;r=this._getPatternedContent(n),s.index=l,s.editText=r,this._opts.values.splice(l,1),i.tokens.splice(l,1,{editInput:!0}),this._render()}}},{key:"_updateEditTokenData",value:function(e){for(var t=this._data.tokens,a=this._tokenInEditMode,o=0;o<t.length;o++)if(t[o].editInput){a.index=o,a.editText=e;break}}},{key:"_reformToken",value:function(t){var a=this._editField;if(a){var o=t&&t.keyCode===e.keyCode.ESCAPE,i=a.val().trim(),l=this._tokenInEditMode,n=l.actualData,s=l.index;if(this._removeEditInput(),o||l.editText===i)return this._validateAndAddToken(n,t,s);if(!i)return;delete n.invalidToken,delete n.type;var r={textboxValue:i,itemData:n};this._dispatchEvent("tokenedit",t,r),this._fromEdit=!0,this._tokenInEditMode=l,this._processInputText(t,r.textboxValue,s,n),this._fromEdit=this._tokenInEditMode=!1}}},{key:"_removeEditInput",value:function(){this._listInstance.setAttribute("searchField",this._input),this._tokenInEditMode=this._editField=!1;for(var e=this._data.tokens,t=0;t<e.length;t++)if(e[t].editInput){e.splice(t,1),this._render();break}}},{key:"_getEditInputIndex",value:function(){for(var e=this._data.tokens,t=0;t<e;t++)if(e[t].editInput)return t;return-1}},{key:"removeTokens",value:function(e,t){this._removeTokens(e,t)}},{key:"removeToken",value:function(e,t){this._removeTokens(e,t)}},{key:"removeAllTokens",value:function(){this._removeToken(this._getTokens())}},{key:"addTokens",value:function(e){var t=this;e&&e instanceof Array&&(e.forEach(function(e){return t.addToken(e)}),this._updateLBSelections())}},{key:"addToken",value:function(e){e&&!(e instanceof Array)&&(this._buildToken(e,void 0,!0),this._updateLBSelections())}},{key:"setFocus",value:function(){this._focusInput({from:"method"})}},{key:"selectAll",value:function(){var e=this;this._listInstance.staticData&&this.fetchData(function(t){e.setAttribute("values",t.results)})}},{key:"_updateCheckedState",value:function(e){this._isCheckboxType&&(this._ignoreChange=!0,this._listInstance.deselect(e),this._ignoreChange=!1)}},{key:"_beforeItemChecked",value:function(e,t){!t&&e&&(t=e.detail);var a=this._opts,o=a.maxAllowedValues;!t.data.checked&&o&&o===a.values.length&&(e.preventDefault(),this._dispatchEvent("tokenaddfail",e,{failureType:this._messages.limitReach}))}},{key:"_setAttribute",value:function(e,t){var a=!1,i=this._opts;"values"===e?(this._data.tokens=[],i[e]=t,this._setValues(),this._updateLBSelections(),this._domChanged=!0):(i[e]=t,"dataMapping"===e||"rtl"===e?(this._dataMapping=i.dataMapping,a=!0):"placeholder"===e?this._fixInput():"tokens"===e?(this._updatePreDatas(),this._reInit=!0):"dropdownList"===e?(this._updatePreDatas(),a=!0):a=!0),a&&_get(_getPrototypeOf(o.prototype),"_setAttribute",this).apply(this,arguments)}},{key:"_disable",value:function(e){var t=this._opts,a=this.container,o="is-disabled";e?(a.off("."+this.name).addClass(o),this._input.off("."+this.name)):(a.removeClass(o),this._bindEvents()),this._input.attr("disabled",e),t.tokens.sortable&&this._initSortable()}},{key:"_initSortable",value:function(){var t=this;this._opts.tokens.sortable&&!this._opts.disabled?this._isSortableSet()?e.sortable(this.container).refresh():e.sortable(this.container,{ignoreAsHandle:".ztokenfield__close",region:"parent",items:"> .ztokenfield__token",drag:function(){return t.closeDropdownList()}}):this._destroySortable()}},{key:"name",get:function(){return"ztokenfield"}},{key:"attrs",get:function(){return{allowDuplicateValues:!1,dataValidation:!1,delimiter:",",acceptNewValues:!1,maxAllowedValues:null,trimInputedValue:!0}}},{key:"props",get:function(){return{newValuePattern:null,dropdownList:{itemType:"none",closeOnSelect:!0},search:{retainKeyword:null},tokens:{contentType:"text",template:null,isDataEncoded:null,sortable:!1,editable:!1,animateOnRemove:!1,showRemoveButtonOnHover:!1,editModePattern:"\"#value#\" <#id#>"},values:[],messages:{remove:"Remove",close:"Close"}}}},{key:"_messages",get:function(){return{limitReach:"Limit Exceeded",denyValue:"Deny new value"}}},{key:"EVENTS",get:function(){return["beforetokenadd","beforetokenremove","tokenadd","tokenremove","tokenedit","tokendrag","tokenaddfail","tokenimagefail","focus","beforeinputfocus","inputfocus"]}},{key:"_CONSTANTS",get:function(){return{minKeywordLength:20,maxResults:10}}}]),o}(e.ZSuggestField);e.registerComponent("ZTokenfield",e.ZSuggestField,E),function(e){var t=e.ztokenfield.Templates;t.container=function(e){return ZT.html(tO98(),e.children&&t.children(e))},t.children=function(e){var a=ZT.html(tO99(),e.tokens.map(function(a){return ZT.html(tO100(),a.editInput?ZT.html(tO101(),e.id):ZT.html(tO102(),a.removable?"":"is-readonly",a.invalidToken?" has-error":"",a.tokenId,a.actualData,a.style,t.tokenContent(a)))}),e.id,e.id,e.tabindex,e.disabled,e.pasteStyle,e.id);return a},t.tokenContent=function(t){var a=t.customHTML?ZT.html(tO103(),ZT.customHTML(t.customHTML||"")):ZT.html(tO104(),t.hasImage&&(t.isSprite?ZT.html(tO105(),t.iconClassName):ZT.html(tO106(),t.image)),ZT.html(tO107(),t.titleText,t.text),t.removeButton&&e.createButton(t.removeButton));return a}}(ZComponents);var O=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_setTimeZone",value:function(){this._timeZone=e.Date.timeZone=this._opts.timeZone||e.timeZone}},{key:"_getNewDate",value:function(){return this._timeZone?e.Date.changeTZOfDate(new Date,this._timeZone):new Date}},{key:"_setFormat",value:function(){this._dateFormat=this._opts.format}},{key:"_isBtnsExist",value:function(){return this._checkIfButtonsExist()||this._isColumnExists()}},{key:"_setOKCancelBtns",value:function(){var e=this._opts;e.OKButton=!e.immediateCommit,e.cancelButton=!e.immediateCommit&&!e.hideCancelButton}},{key:"_init",value:function(a,o,l){this._setTimeZone(),this._todayDate=this._getNewDate(),this._userOptions=t.extend({},o);var n=o.navigationBar,s=o.forElement,r=o.value,d=["minDate","maxDate","value"];if(this._validateFormat(),!this._invalidFormat){this._setFormat(),o.locale=o.locale||e.locale,n&&(this._yearNavigation=n.yearNavigationButtons),o.position&&(this._isPositionModified=o.position),this._setSwitcherType(n),void 0===this._yearNavigation&&/^(drilldown|none)$/.test(n.monthYearSwitcherType)&&(this._yearNavigation=!0),this._setOKCancelBtns(),(this._isBtns=this._isBtnsExist())&&this._setBtnProps(),this._getLocaleValues(),s&&(this._forElement=t(s)),this.element[0].setAttribute("tabindex",0),this._monthsPerView=o.monthsPerView,this._selectedDates=[],(o.disabledDates.length||o.specialDates.length||o.disabledTimeList&&o.disabledTimeList.length)&&this._convertStringToObject({disabledDates:o.disabledDates,specialDates:o.specialDates,disabledTimeList:o.disabledTimeList});for(var c=0,_=d.length;c<_;c++){var u=d[c],p=o[u],m=void 0;p&&(this._parseValue(u,p),o[u]instanceof Date&&!this._checkTime&&o[u].setHours(0,0,0,0),"value"===u&&(this._isNotNull(o.value)&&this._dateWithInRange(o.value)&&!this._getUniqueClass(o.value)&&"multiple"!==this._opts.selectionType?(this._currentSelected=new Date(+o.value),!this._viewDate&&(m=this._viewDate=this._currentSelected,this._changeMonth(!1,m,1)),this._valueUpdate=!0):o[u]=void 0)),"value"===u?!this._viewDate&&this._setHours():this["_"+u]=o[u]}this._validateOpts(),(o.minDate||o.maxDate)&&this._processLimits(),!r&&0===o.values.length&&(o.monthToBeShownOnOpen||o.yearToBeShownOnOpen)&&this._setViewOnOpen(),"multiple"===o.selectionType&&this._setValues(),o.value&&(this._currentSelected=new Date(+o.value)),this._data.month||(this._data.month=[]),this._elementId=this._getID(this.element),this._buildData(l);var h=this.element[0];return o.width&&(h.style.width=o.width+"px"),o.height&&(h.style.height=o.height+"px"),!0}}},{key:"_setSwitcherType",value:function(e){var t=e.monthYearSwitcherType;this._isDrilldown="drilldown"===t,this._isDropdown="dropdown"===t}},{key:"_getLocaleValues",value:function(){var t=this._opts,a=t.labels,o=e.localeInfo[t.locale];if(o)for(var l=["days","daysAbbreviated","monthsAbbreviated","months"],n=0,s=l.length;n<s;n++)a[l[n]]=o[l[n]]||a[l[n]];t.firstDayOfWeek=o?o.firstDayOfWeek||0:0}},{key:"_invokeOtherActions",value:function(){var e=this._opts,t=e.title;"inline"===e.type?(this._display(),this._isShown=!0):t&&t.length&&e.draggable&&this._initDraggable()}},{key:"_validateOpts",value:function(){var e=this._opts,t=e.position,a=e.navigationBar,o=e.displatype,i=this._yearNavigation;e.drilldownLevelOnOpen=e.drilldownLevelOnOpen||"dates",e.format=e.format||"dd/MM/yyyy",t=e.position="auto"===t?"callout"===o?"bottom":"bottom-left":t,(e.minDate||e.maxDate)&&this._checkLimits(),a.monthYearSwitcherType=-1<["dropdown","drilldown","none"].indexOf(a.monthYearSwitcherType)?a.monthYearSwitcherType:"none",-1===["top","bottom","right","left","top-left","top-right","bottom-left","bottom-right"].indexOf(t)&&(e.position="bottom"),a.monthSwitcher||a.yearSwitcher||(e.monthYearSwitcherType="none"),o=e.displayType,o=-1<["box","callout"].indexOf(o)?o:"box",this._data&&(this._data.displayType=o),a.yearNavigationButtons=void 0===i?!this._isDropdown:i,a.monthYearHeadingFormat=-1<["MMM yyyy","MMMM yyyy","yyyy MMM","yyyy MMMM"].indexOf(a.monthYearHeadingFormat)?a.monthYearHeadingFormat:"MMMM yyyy"}},{key:"_constructData",value:function(){var e=this._data,t=this._opts,a=t.navigationBar;t.title&&!e.title&&(e.title=this._getTitleData()),void 0===this._viewMode&&(this._viewMode=this._isDrilldown?this._getViewMode():0),e.dropdownCls=this._isDropdown&&a.monthNavigationButtons&&a.yearNavigationButtons,this._maxDate&&1<this._monthsPerView&&this._checkViewDateWithMax(this._viewDate);for(var o=0;o<this._monthsPerView;o++){var l=e.month[o]=e.month[o]||{},n=new Date(+this._viewDate);l.className="",l.weekTitle=t.weekHeading||this._getI18NText("weekHeading"),n=this._moveMonth(this._viewDate,o),this._fillDayOfWeek(l),this._fillDates(l,n,1<t.monthsPerView?o:void 0),l.monthsPerView=t.monthsPerView,l.displayWeekNumbers=t.displayWeekNumbers,this._constructNavBar(l,o,n),(0==o||o===this._monthsPerView-1)&&(l.viewDate=n)}var s="zdatetimepicker__month ";t.allowSelectionOfAdjacentMonthDates||(s+="zdatetimepicker--adjacentmonthdatereadonly"),this._setMonthVal("className",s),"dates"!==t.drilldownLevelOnOpen&&this._isDrilldown&&this._generateContent(this.element),!this._data.rendered&&this._isBtns&&this._createButtons()}},{key:"_isColumnExists",value:function(){var e=this._opts.commandBar;if(e){for(var t=["leftColumn","centerColumn","rightColumn"],a=0;a<t.length;a++)if(e[t[a]]){for(var o=e[t[a]].commands,l=0;l<o.length;l++)this._opts[o[l]+"Button"]=!0;return!0}return!1}}},{key:"_buildData",value:function(e){0===this._viewMode&&this.element.find(".zdatetimepicker--disabledcalendar").removeClass("zdatetimepicker--disabledcalendar"),this._constructData(),this._data._isRenderedAgain=!0,e&&this._render()}},{key:"_postRender",value:function(e,t){this._invokeOtherActions(),this._data.className+=" zdatetimepicker"+(1===t.monthsPerView?"":"--group ")+(t.dropdownCls?" zdatetimepicker--dropdownyearbutton ":""),t.appendTo&&this._appendEle(t.appendTo),e[0].setAttribute("id",this._elementId)}},{key:"_adjustCustomHTMLPos",value:function(e){var t=this._opts;(t.customHTMLAboveCalendar||t.customHTMLAboveNavigationBar||t.customHTMLBelowCalendar)&&this._handleCustomHTML(e)}},{key:"_preRender",value:function(e){return this._adjustCustomHTMLPos(!1),e}},{key:"_postEachRender",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._data,a=!this._data.rendered,o=a||t._isRenderedAgain,l=t.modifiedAttr,n=this._opts,s=this._isDropdown,r=n.navigationBar.monthNavigationButtons||n.navigationBar.yearNavigationButtons;if(o||l){if(a||-1<["navBar","monthsPerView"].indexOf(l))if(s){this._assignHeaders();var d=this._bindHeaderEvents.bind(this);d("year","select"),d("month","combobox"),this._checkOptions()}else this._isDrilldown&&(this._bindDrillDownClickEvent(),this._monthEventBinded=this._yearEventBinded=this._decadeEventBinded=void 0);if(a||-1<["navBar","monthsPerView","type"].indexOf(l)){var c=this._data.className,_=" zdatetimepicker"+(1===this._monthsPerView?"":" zdatetimepicker--group")+(t.dropdownCls?" zdatetimepicker--dropdownyearbutton":"")+("inline"===n.type?" zdatetimepicker--inline":"");if(_!==c&&(this._data.className=c?c+_:_),r){this._bindArrowEvents();for(var u=0;u<this._monthsPerView;u++)this._setArrowMainElement(t.month[u].navigationBar)}}if((a||-1<["commandBar","monthsPerView"].indexOf(l))&&this._isBtns&&this._updateCommandBar(e),o||"monthsPerView"===l||s){var p=e.find(".zdatetimepicker__month");"multiple"===n.selectionType?p.attr("aria-multiselectable",!0):p.removeAttr("aria-multiselectable")}(a||"displayType"===l)&&(this._pointer="callout"===this._opts.displayType?e.find(".zdatetimepicker__pointer"):void 0),n.title&&(a||"title"===l)&&(this._enableDrag&&this._initDraggable(),this._setCloseEle(),this._enableDrag=void 0)}if(this._adjustCustomHTMLPos(),this._doesExist(this._clear)&&this._setClearBtnCls(void 0,void 0,!0),this._setPosition&&this._isShown&&this._positionPicker(),r)for(var m=0;m<this._monthsPerView;m++)this._updateArrowState(t.month[m].viewDate,m);var h=this._viewMode;this._isDrilldown&&h&&(n.navigationBar.monthSwitcher||n.navigationBar.yearSwitcher)&&this._updateYearArrowState(h,3>h?2>h?this._viewDate.getFullYear():this._yearStart:this._decadeStart),this._data.modifiedAttr=this._data._isRenderedAgain=this._setPosition=void 0}},{key:"_hasClosest",value:function(e,a,o){var i=o?e.currentTarget:e.target;return t(i).closest(a).length}},{key:"_clearValues",value:function(e,t){var a=this._opts,o=a.immediateCommit,l=["zdatetimepicker__calendar","zdatetimepicker__drilldowncell"];o&&(this._valueUpdate=!1,a.value=void 0,a.values=[]),this._setHours(!0);for(var n=0,s;2>n;n++)s=this.element.find("."+l[n]).find(this._getSelector()),this._select(!1,s,!0),s.removeAttr("aria-disabled");this._setDateClass("is-disabled",!1,this.element.find(".zdatetimepicker__calendar").find(this._getSelector()),!0),this._selectedDates=[],this._queryString="",this._currentSelected=void 0,this._render(),(t||o&&!1!==t)&&this._dispatchEvent("change",e,this._getSelectedValue(),void 0,!!(e&&e.originalEvent))}},{key:"_cancelClickHandler",value:function(e){this._clearClickHandler?this._clearClickHandler(e,!0):this._clearValues(e),this._closePicker(e),this._dispatchEvent("cancel",e,this._getSelectedValue()),this._removeFocus(this._cancel)}},{key:"_bindEvents",value:function(){this._addEvents({mousedown:"mousedown",mouseover:"mouseover",keydown:"keydown"})}},{key:"_keydownHandler",value:function(t){t.keyCode===e.keyCode.ESCAPE&&this._closePicker(t)}},{key:"_mouseoverHandler",value:function(e){var a=["date","adjacentmonthdate"],o=t(e.target),l=t(e.relatedTarget),n;n=!l.hasClass("".concat("zdatetimepicker__","text"))&&!o.hasClass("".concat("zdatetimepicker__","text"));for(var s=0;s<a.length;s++)if(n&&this._hasClosest(e,".".concat("zdatetimepicker__")+a[s])){this._dispatchEvent("datemouseover",e,{cell:o,date:new Date(+o.attr("data-time"))});break}}},{key:"_validateFormat",value:function(){this._checkFormat(/h|H|m|t/g)}},{key:"_checkFormat",value:function(e){this._invalidFormat=e.test(this._opts.format)}},{key:"getElement",value:function(){return this.element}},{key:"_reInitPicker",value:function(){this._opts=t.extend(!0,{},this._DEFAULTS,this._userOptions),this._init(this.element,this._opts,!0)}},{key:"open",value:function(t){var a=this._opts;!this._isShown&&("inline"===a.type||a.forElement||a.offset)&&(!e.Date.areDatesEqual(this._todayDate,this._getNewDate())&&this._reInitPicker(),t&&this._setAttribute("forElement",t),this._showPicker())}},{key:"close",value:function(){this._manualClose=!0,this._closePicker(),this._manualClose=!1}},{key:"_getBtnsArr",value:function(){return["today","clear","cancel","OK"]}},{key:"_resetTime",value:function(e){if(e instanceof Date){var t=new Date(+e);return t.setHours(0,0,0,0),t}}},{key:"_triggerMonYrDecChange",value:function(e,t,a){return this._dispatchEvent(t+"change",e,{viewDate:this._viewDate,value:this._opts.value,selectedValue:void 0===a?this._viewDate.getFullYear():a})}},{key:"_arrowEventHandler",value:function(e){var t=e.currentTarget.id;if(-1<t.indexOf("month")){var a=parseInt(t.slice(-1)),o=0===a?"MonthArrow":1===a?"Year":"DecadeArrow";this["_handle"+o+"Click"](e)}else this._opts.navigationBar.yearNavigationButtons&&this._handleYearArrowClick(e)}},{key:"_checkIfButtonsExist",value:function(){var e=this._opts;return e.OKButton||e.todayButton||e.cancelButton||e.clearButton}},{key:"_isBig",value:function(t,a){var o=e.Date.isGreater(this["_"+t+"Date"],a);return"max"===t?!o:o}},{key:"_moveMonth",value:function(e,t){if(!e||isNaN(+e)||!t)return t?this._viewDate:e;var a=new Date(e.valueOf()),o=a.getDate(),i=a.getMonth(),l=0>t,n,s,r;for((l||1<=t)&&(n=i+t,a.setMonth(n),n=(n+12)%12),s=a.getMonth(),r=e.getFullYear()===a.getFullYear();l?s===i&&r:s!==n;)r=!0,a.setDate(--o),a.setMonth(n),s=a.getMonth();return a}},{key:"_showPicker",value:function(){var t=this.element,a=this._opts;if(this._dragEnd=!1,this._dispatchEvent("beforeopen",void 0,this._getObj())){"inline"!==a.type&&e.bindDocumentEvents&&a.closeOnBodyClick&&e.bindDocumentEvents({element:t,forElement:this._forElement,ctype:this.name,closeMethodName:"close",closeEvent:"close"}),t.finish?t.finish():t.stop(!0,!0);var o=!!Object.keys(a.animation).length&&a.animation.open;o&&this._setAnimation("open"),o&&o.name||this._display(),this._positionPicker(),o||this._openHandler()}}},{key:"_openHandler",value:function(){this._isShown=!0;var e=this.element,t=this._dispatchEvent.bind(this);e.attr({"aria-hidden":!1,"aria-expanded":!0}),t("beforefocus",{},e)&&(clearTimeout(this._focusTimeout),this._focusTimeout=setTimeout(function(){return e.focus()},100)),t("open",void 0,this._getObj())}},{key:"_positionPicker",value:function(){var t=this.element,a=t[0],o=this._opts,i=o.offset;if(t.width(o.width||""),"popup"===o.type)if(3===this._monthsPerView&&"flex"===e._display&&(t.css({top:0,left:0}),t.css("flex-direction","column"),t.width(t.width()),t.css("flex-direction","")),i)t.css(i);else if(o.forElement){var l=this._getPosition(),n=this._pointer?this._pointer[0]:null,s;if(l){s=l.direction,this._direction=s,"callout"!==o.displayType&&t.addClass("zdatetimepicker--"+s.replace("-","")),o.margin&&(l.elementPosition=this._retrieveMarginValues(l.elementPosition));var r=l.elementPosition;if(a.style.top=r.top+"px",a.style.left=r.left+"px",n){var d=l.arrowPosition;n.style.top="number"==typeof d.top?d.top+"px":"",n.style.left="number"==typeof d.left?d.left+"px":""}}}}},{key:"_retrieveMarginValues",value:function(e){for(var t=this._opts.margin,a=["top","left"],o=0,l;2>o;o++)l=e[a[o]],l+="number"==typeof t?t:t[a[o]]||0,e[a[o]]=0>l?e[a[o]]:l;return e}},{key:"_arrowCallback",value:function(e,t){var a=this.element;a.removeClass("zdatetimepicker--top zdatetimepicker--bottom zdatetimepicker--left zdatetimepicker--right zdatetimepicker--topleft zdatetimepicker--topright zdatetimepicker--bottomleft zdatetimepicker--bottomright"),a.addClass("zdatetimepicker--"+t),this._calloutDirection=t}},{key:"_getPosition",value:function(){var t=this._opts,a=e.Position,o=t.positionAlterable;if(a&&!this._dragEnd){var i=this;return a.get(this._forElement,this.element,{direction:this._direction||t.position,bufferSpace:6,rtl:t.rtl,positionAlterable:o,arrow:{element:this._pointer,callback:this._arrowCallback.bind(i),margin:{left:-1,top:-1}}})}}},{key:"_getSelector",value:function(){return".is-selected,.is-disabled:not(.zdisabled)"}},{key:"_isGreater",value:function(t,a){return e.Date.isGreater(t,a)&&!e.Date.areDatesEqual(t,a)}},{key:"_setHours",value:function(e){e||(this._viewDate=this._getNewDate()),this._viewDate.setHours(0,0,0,0)}},{key:"_updateValues",value:function(){if(this._valueUpdate){var e=this._opts,t=e.value,a=e.values,o=this._minTime,i=this._getNewDate();"multiple"===e.selectionType&&this._handleMultipleSelectOnClose();var l=this._selectedDates,n=l.length;i.setHours(o?o.getHours():0,o?o.getMinutes():0,0,0),this._viewDate=t?new Date(+t):a&&a.length&&n?new Date(+l[n-1]):i,(e.minDate||e.maxDate)&&this._checkLimits()}else this._resetValues()}},{key:"_resetValues",value:function(){var e=this._opts;this._valueUpdate=!1,e.value=this._currentSelected=this._selectedTime=void 0,e.values=this._selectedDates=[],this._setDateClass(["is-disabled","is-selected"],!1,this.element.find(".zdatetimepicker__calendar").find(this._getSelector()),!0),this.element.find(".zdatetimepicker__drilldowncell").find(this._getSelector()).removeClass("is-disabled","is-selected"),this._queryString="",this._setHours(),this._doesExist(this._clear)&&this._traverseBtns("clearButton","is-disabled",!0),this._render(),(this._minDate||this._maxDate)&&this._checkViewDate(new Date(+this._viewDate)),(e.monthToBeShownOnOpen||e.yearToBeShownOnOpen)&&this._setViewOnOpen()}},{key:"_getObj",value:function(){return{viewMode:this._viewMode,element:this.element}}},{key:"_closePickerHandler",value:function(e){if(this._dispatchEvent("beforeclose",e,this._getObj())){var t=this._opts.animation,a=!!Object.keys(t).length&&t.close;a?this._setAnimation("close",e):this._closeHandler()}}},{key:"_closeHandler",value:function(e){this._display(!0),this._isShown=!1,this.element.attr({"aria-hidden":!0,"aria-expanded":!1}),this._dispatchEvent("close",e,this._getObj())}},{key:"_changeMonth",value:function(e,t,a){var o=this._opts,i=o.selectedDateMonthViewIndex;1<this._monthsPerView&&i>=(a||0)&&(this._viewDate=this._moveMonth(t||o.value,-i),void 0===e&&(e=!0)),e&&this._buildData(!0)}},{key:"_refreshPicker",value:function(){var e=this._isDrilldown,t=this._viewDate,a=this._oldDate.getFullYear()===this._viewDate.getFullYear(),o;o=e&&this._getViewMode(),(o!==this._viewMode||this._oldDate.getMonth()!==t.getMonth()&&a||!a)&&(e&&this._setViewMode(o,!0),this._doNotBuildTime=!0,this._buildData(!0),e&&this._addDisabledCls()),e&&this._removeEffects()}},{key:"_closePicker",value:function(t){if(this._isShown){var a=this._viewDate,o=this._opts,i=o.value,l=this._closePickerHandler.bind(this);if(a){"multiple"===o.selectionType&&0===o.values.length&&o.immediateCommit&&(this._valueUpdate=!1);var n=this._currentSelected;n&&i&&!e.Date.areDatesEqual(n,i)&&this._select(!1,this._currentSelectedEle,!0,!0),this._oldDate=new Date(+a),this._currentSelected=i?new Date(+i):void 0,this._updateValues(),("inline"!==o.type||this._manualClose)&&l(t),this._refreshPicker(),void 0!==o.selectedDateMonthViewIndex&&o.value&&this._changeMonth(),o.value&&this._viewDate&&(this._doesExist(this._clear)&&this._traverseBtns("clearButton","is-disabled",!1),this._select(!0,this.element.find("[data-time=\""+ +this._resetTime(o.value)+"\"]"),!1,!0))}else l(t)}}},{key:"_getBoolVal",value:function(t,a){var o=this["_"+t+"Date"];if(o){o=new Date(+o),this._checkTime||o.setHours(0,0,0);var i=e.Date.areDatesEqual(a,o);return("min"===t?+a>+o:+a<+o)||i}return!0}},{key:"_dateWithInRange",value:function(e){return this._checkTime||e.setHours(0,0,0),this._getBoolVal("min",e)&&this._getBoolVal("max",e)}},{key:"_getDateElem",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.element;return t.find("[data-time='"+ +e+"']")}},{key:"_getFirstDate",value:function(){var e=this._data.month[0].dates[0],t;for(t=0;t<e.length&&!(""!==e[t].text&&-1<e[t]["class"].indexOf("zdatetimepicker__date"));t++);return e[t].time}},{key:"_mousedownHandler",value:function(e){var a=t(e.target),o=this._opts,l=this._viewMode,n=[".zdatetimepicker__date",".zdatetimepicker__adjacentmonthdate"],s=o.allowSelectionOfAdjacentMonthDates,r,d,c,_,u,p,m,h;if(a.is(".zdatetimepicker__text, .zdatetimepicker__secondaryinfo")&&(h=!a.closest(".zdatetimepicker__date, .zdatetimepicker__adjacentmonthdate").hasClass("is-disabled")),a.is(".zdatetimepicker__date:not(.".concat("is-disabled","), .zdatetimepicker__adjacentmonthdate:not(.").concat("is-disabled","), .zdatetimepicker__monthview:not(.").concat("is-disabled","), .zdatetimepicker__year:not(.").concat("is-disabled","), .zdatetimepicker__decade:not(.").concat("is-disabled",")"))||h){e.preventDefault();for(var g=0;2>g;g++)if(this._hasClosest(e,n[g])){a=a.closest(n[g]);break}d=this._translateAToE(a.text()),u=a.hasClass("zdatetimepicker__year"),_=a.hasClass("zdatetimepicker__monthview"),c=a.attr("data-time"),c&&(p=new Date(parseInt(c))),a.hasClass("zdatetimepicker__date")&&p?this._setDate(e,a,p):s&&a.hasClass("zdatetimepicker__adjacentmonthdate")&&p?(this._setDate(e,a,p),this._viewDate=new Date(+p),this._changeMonth(!0,p),-1<["single","multiple"].indexOf(o.selectionType)&&!a.hasClass("is-selected")&&this._select(!0,this._getDateElem(p),!0,!0)):_||u?(m=this._triggerMonYrDecChange(e,"before"+(_?"month":"year"),parseInt(_?a.attr("data-value"):d)),m&&(r=this._handleMousedownOnDrillDown(e,_,u,d)),this._renderDates=!1!==m):a.hasClass("zdatetimepicker__decade")&&(this._handleDecadeMousedown(e,l,d),r="decade"),m&&r&&this._triggerMonYrDecChange(e,r,parseInt(_?a.attr("data-value"):d))}}},{key:"_select",value:function(e,a,o,l){for(var n=e?"add":"remove",s=0,r=a.length,d;s<r;s++)d=t(a[s]),this._doesExist(d)&&(e?d.attr("aria-selected",!0):d.removeAttr("aria-selected"),d.hasClass("zdatetimepicker__date")||d.hasClass("zdatetimepicker__adjacentmonthdate")?this._setDateClass("is-selected",e,d,o):d.is(".zdatetimepicker__year,.zdatetimepicker__monthview")?this._setDrilldownClass(d):l=!0,l&&d[n+"Class"]("is-selected"))}},{key:"_getDateData",value:function(e){var t=this._data.month,a=this._getDateEleIndex(e),o;return t[a[0]]&&t[a[0]].dates[a[1]]&&(o=t[a[0]].dates[a[1]][a[2]]),o&&o.time===+e.attr("data-time")?o:void 0}},{key:"_getDateEleIndex",value:function(e){return[1===this._monthsPerView?0:e.closest(".zdatetimepicker__list").index(),e.closest("tr").index(),e.index()]}},{key:"_setDateClass",value:function(e,a,o,l){"object"!==_typeof(e)&&(e=[e]);for(var n=0,s=o.length;n<s;n++){var r=t(o[n]),d=this._getDateData(r);if(d){var c=d["class"]+" ";c=a?c+e.join(" "):c.replace(new RegExp(e.join("|"),"g"),""),d["class"]=c.trim()}}l||this._render()}},{key:"_setDate",value:function(t,a,o){var i=this._opts,l=i.immediateCommit,n=+o,s;l&&(this._valueUpdate=!1),this._limitReached=!1,this._doesExist(this._clear)&&(this._traverseBtns("clearButton","is-disabled",!1),this._disable(!1,this._clear)),"single"===i.selectionType?(this._select(!1,this.element.find(".is-selected")),this._currentSelected=new Date(n),this._viewDate=new Date(n),this._currentSelectedEle=a,!a.closest(".zdatetimepicker__adjacentmonthdate").length&&this._select(!0,a),l&&(i.value=new Date(n),this._OKClickHandler(t,!0)),s={valueString:e.Date.formatDate(i.value,i.format),value:i.value,selectedDate:this._viewDate}):s=this._setMultipleDate.apply(this,arguments),s&&this._dispatchEvent("dateselect",t,s)}},{key:"_fillDates",value:function(t,a,o){t.dates=[],t.weekNumbers=[];var l=this._opts,n=this.element,s=new Date(a||this._viewDate),r=s.getFullYear(),d=s.getMonth(),c=new Date(r,d),_=c.getDate(),u=c.getDay(),p=l.displayAdjacentMonthDates,m=l.firstDayOfWeek,h=this._monthsPerView,g;100>r&&c.setFullYear(r),c.setDate(_-(c.getDay()-m+7)%7);var v=n.closest("li.zdatetimepicker__list");if(o="number"==typeof o?o:void 0===o?v.length?v.index():-1:o,g=new Date(c),-1<[-1,1,2].indexOf(o)||0===o&&!p)g.setDate(g.getDate()+42);else if(1<h&&p&&0===o){var y=new Date(r,c.getMonth()+1,0).getDate(),f=new Date(r,d+1,0).getDate();g.setDate((u===m?0:y)+f+1)}g.setHours(0,0,0,0),c.setHours(0,0,0,0),g=g.valueOf();for(var k=[],b=c,i;b.valueOf()<g;b.setDate(b.getDate()+1)){var C=b.getDay(),D=b.getFullYear(),w=b.getMonth();b.setHours(0,0,0,0);var S=p&&(-1<[-1,0,2].indexOf(o)||1===o&&2===h)||w<=d&&D===r||D<r,T=new Date(D,w+1,0).getDate(),I=new Date(g),x=void 0;if(I.setDate(I.getDate()-1),x=w===d&&b.getDate()===T&&(!p||p&&1===o&&3===h)||e.Date.areDatesEqual(b,I)&&p,C===m&&S){var E=new Date(+b+864e5*((m-C-7)%7)),O=new Date(+E+864e5*((11-E.getDay())%7));i=new Date(+(i=new Date(O.getFullYear(),0,1))+864e5*((11-i.getDay())%7));var P=(O-i)/864e5/7+1;t.weekNumbers.push(this._translateEToA(P)),k.length&&this._pushDateArr(t,k),k=[]}if(!p||1===o&&o!==h-1||o===h-1)if(w<d&&D===r||D<r){k.push({class:"",text:""});continue}else if((w>d&&D===r||D>r)&&(-1===o||p&&(0===o||1===o&&o!==h-1)||!p))break;var M=this._getClasses(b,s),V={class:(M["class"]||M).trim(),time:+b,text:this._translateEToA(b.getDate()),title:M.title||null,infoText:M.infoText||null};this._dispatchEvent("beforedatecellrender",void 0,V),k.push(V),x&&this._pushDateArr(t,k)}}},{key:"_pushDateArr",value:function(e,t){e.dates.push(t)}},{key:"_setMonthVal",value:function(e,t,a){for(var o=0,l;o<this._monthsPerView;o++)l=this._data.month[o],l[e]=void 0===a?t:a?l[e]+t:l[e].replace(/zdatetimepicker--adjacentmonthdatereadonly/g,"")}},{key:"_constructNavBar",value:function(e,a,o){var i=this._opts.navigationBar,l=this._isDrilldown,n=i.monthNavigationButtons||i.yearNavigationButtons;e.navigationBar=t.extend(!0,{},e.navigationBar||i),n&&this._getNavBtnProps(e,a,e.navigationBar);var s=e.navigationBar;n||(s["class"]=""),s.cursorCls=0===a&&l&&(i.monthSwitcher||i.yearSwitcher)?"zh-cursorpointer":"",this._isDropdown&&0===a&&this._constructDropdown(s);var r=i.monthSwitcher,d=i.yearSwitcher,c=e.navigationBar,_=this._isDropdown,u=_&&0!==a;if(_&&!u&&(0!==a||r)||(c.month=this._translateEToA(this._getI18NText("months"+(-1<i.monthYearHeadingFormat.split(" ").indexOf("MMMM")?"":"Abbreviated"))[o.getMonth()])),_&&!u&&(0!==a||d)||(c.year=this._translateEToA(o.getFullYear())),"y"===i.monthYearHeadingFormat[0]&&(_&&0===a&&(c.yrFirst=c.monthSelect&&c.yearSelect),c.month&&c.year)){var p=c.month;c.month=c.year,c.year=p}this._setConditions(c)}},{key:"_setConditions",value:function(e){return e.isLMonthYear=e.lMonth||e.lYear,e.isRMonthYear=e.rMonth||e.rYear,e.isMonthYearNav=e.month||e.year,e}},{key:"_OKClickHandler",value:function(e,t,a){var o=this._opts,i=0===this._viewMode,l=this._currentSelected,n=this._OK,s="single"===o.selectionType,r=o.selectionLimit,d=this._selectedDates.length,c=this._selectedTime,_;if(this._valueUpdate=!!(l||d),s){var u=this._getNewDate();l&&(u=new Date(+l)),this._checkTime&&c&&u.setHours(c.getHours(),c.getMinutes(),0,0),o.value=l?u:void 0}else _=r&&r===d&&i||this._hasClosest(e,".OKButton-"+this.name),this._handleOkOnMultiple(o);this._dispatchEvent("change",e,this._getSelectedValue(),void 0,!!(e&&e.originalEvent)),_=s?t&&o.closeOnDateSelect&&i&&!a||!t:_,_&&this._closePicker(e),this._valueUpdate=o.value||o.values.length,n&&this._removeFocus(n)}},{key:"_getSelectedValue",value:function(){return"single"===this._opts.selectionType?this._getSingleValue(this._opts.value):this._getMultipleValues()}},{key:"_removeFocus",value:function(e){e.removeClass("has-focus has-mfocus")}},{key:"_isWeekend",value:function(e){return-1<(this._opts.weekendDays?this._opts.weekendDays.split(","):[]).indexOf(e.getDay().toString())}},{key:"_getClasses",value:function(t,a){var o=this._opts,l=e.Date.areDatesEqual.bind(e),n=this._selectedDates,s=n.length,r=this._currentSelected,d=t.getFullYear(),c=t.getMonth(),_="",u,p,m,h;a&&(u=a.getFullYear(),p=a.getMonth(),m=d===u,h=d>u),_+=a&&!h&&!m||m&&c<p||m&&c>p||h?" zdatetimepicker__adjacentmonthdate":" zdatetimepicker__date",l(t,this._getNewDate())&&(_+=" zdatetimepicker--today");var g=r&&l(t,r);if((g||o.value&&l(t,o.value)&&g)&&(_+=" is-selected"),s&&"multiple"===o.selectionType){for(var v=!1,y=0;y<s;y++)n[y]&&l(t,n[y])&&(_+=" is-selected",v=!0);v||o.selectionLimit!==s||(_+=" is-disabled")}return this._isWeekend(t)&&(_+=" zdatetimepicker--weekend"),this._dateWithInRange(t)||(_+=" is-disabled zdisabled"),this._getUniqueClass(t,_,!0)||_}},{key:"_getUniqueClass",value:function(e,t,a){var o=this,i=["disabledDaysOfWeek","disabledDates","disabledMonths","disabledYears"];return t&&(i=[].concat(_toConsumableArray(i),["specialDates","specialDaysOfWeek"])),i=i.map(function(e){return!!o._opts[e].length}),-1<i.indexOf(!0)?this._addUniqueClasses(e,t,!a):void 0}},{key:"_parseDateValue",value:function(t,a){return e.Date._parseDateValue(t,a,this._opts.otherInputFormats)||{}}},{key:"_fillDayOfWeek",value:function(e){e.days=[];for(var t=this._opts.firstDayOfWeek,a="",o=this._getI18NText("daysAbbreviated"),l=this._opts.weekendDays.split(","),n=t;n<t+7;n++)a="",(n%7===parseInt(l[0])||n%7===parseInt(l[1]))&&(a+=" zdatetimepicker--weekend"),e.days.push({value:this._translateEToA(o[n%7]),class:" zdatetimepicker__day "+a})}},{key:"_doesExist",value:function(e){return e&&e.length}},{key:"_parseValue",value:function(e,t,a){var o=this._opts,i=this._parseDateValue.bind(this),l,n;return a=a||o.format,"string"==typeof t?(-1<["TODAY","NOW"].indexOf(t)?(this["_"+e+"HasTime"]="NOW"===t&&"value"!==e,o[e]=this._getNewDate()):(n=i(t,a).date||void 0,n?(o[e]=n,this["_"+e+"HasTime"]=!0):(n=i(t,this._dateFormat).date||void 0,o[e]=n||void 0)),l=!0):t instanceof Date?(o[e]=t,this["_"+e+"HasTime"]=!0,l=!0):(this._oldValueOption&&(l=!0),o[e]=void 0),n=o[e],n&&!this._checkTime&&n.setHours(0,0,0,0),l}},{key:"_setValue",value:function(e,t){var a=this._opts,o=!0;return""!==e&&e?e&&(this._parseValue("value",e,a.format)&&a.value&&!this._checkTime&&a.value.setHours(0,0,0,0),this._isNotNull(a.value)&&this._dateWithInRange(a.value)&&!this._getUniqueClass(a.value)?(this._currentSelected=new Date(+a.value),this._viewDate=new Date(+a.value),this._valueUpdate=!0):(o=!1,a.value=this._oldValueOption)):(this._setHours(),(this._minDate||this._maxDate)&&this._checkViewDate(new Date(+this._viewDate)),this._clearValues(void 0,!1)),o&&(t&&this._buildData(!0),this._dispatchEvent("change",void 0,this._getSelectedValue())),o}},{key:"_checkViewDateWithMax",value:function(e){var t=new Date(+this._maxDate);for(e=new Date(+e),t.setMonth(t.getMonth()-(this._monthsPerView-1)),e.setDate(1),t.setDate(1);+e>+t;)e.setMonth(e.getMonth()-1);this._viewDate=e}},{key:"getValue",value:function(){return this._getSingleValue(this._opts.value)}},{key:"_getSingleValue",value:function(t){var a=this._opts,o=e.Date.formatDate(t,a.format);return{value:t,valueString:o,translatedValue:this._translateEToA(e.Date.formatDate(t,a.format,a.labels))}}},{key:"setValue",value:function(e){"single"===this._opts.selectionType&&this._setValue(e,!0)}},{key:"_setAttribute",value:function(e,a,o){var l=this,n=this._opts,s=!0,r=this._data,d=this.element;if(this._oldValue=n[e],this._oldValueOption=n.value,n[e]instanceof Array&&(this._oldOpts={},this._oldOpts[e]=n[e].slice()),n[e]=a,this._userOptions[e]=a,"format"===e)this._validateFormat(),this._invalidFormat?s=!1:(this._setFormat(),n.value&&this._setDate(void 0,this._getDateElem(+this._resetTime(n.value),o),n.value));else if("forElement"===e)this._forElement=a?t(a):void 0;else if(-1<["monthsPerView","locale","navigationBar","drilldownLevelOnOpen","value","weekendDays"].indexOf(e)){var c=!0;if("value"===e&&"single"===n.selectionType&&(c=this._setValue(n.value)),"monthsPerView"===e&&(r.modifiedAttr="monthsPerView",this._getBtnsArr().forEach(function(e){l["_"+e]=null}),0<a&&3>=a?(this._monthsPerView=a,this._isBtns&&this._createButtons()):c=!1),"drilldownLevelOnOpen"===e&&(this._viewMode=this._isDrilldown?this._getViewMode():0,this._data.modifiedAttr="drilldownLevel","dates"===a)){var _=this._oldValue.slice(0,-1);d.find(".zdatetimepicker__"+_+"drilldown")[0].style.display="none",d.find(".zdatetimepicker__days")[0].style.display="flex"}if("navigationBar"===e&&(this._isDrilldown?t(d.find(".zdatetimepicker__monthyearnav")[0]).off("click."+this.name):this._isDropdown&&this._destroyDropdown(),this._setSwitcherType(a),this._data.modifiedAttr="navBar",this._data.month.length))for(var u=0;u<this._monthsPerView;u++)this._data.month[u].navigationBar=null;this._reInit=c,s=c}else"position"===e?(this._isPositionModified=!0,this._validateOpts()):s=this._setAttrs.apply(this,arguments);return this._setPosition||(this._setPosition=-1<["monthsPerView","forElement","position","minDate","maxDate","displayType","customHTML","displayWeekNumbers","yearToBeShownOnOpen","monthToBeShownOnOpen","width","height","rtl"].indexOf(e)||-1<["commandBar","title"].indexOf(r.modifiedAttr)),this._domChanged=s,s}},{key:"_destroy",value:function(){var t=this._setUndefined.bind(this),a=this._opts;Object.keys(a.animation).length&&e.clearAnimationData(this.element),clearTimeout(this._focusTimeout),this._isDropdown&&this._destroyDropdown(),this._data.customHTML&&this._handleCustomHTML(!0),a.draggable&&this.element.data("zdraggable")&&e.draggable(this.element).destroy(),this.isCE&&this.element.removeClass(this._data.className).empty(),t(["focusTimeout","forElement"],""),t(["view","min","max"],"Date"),t(["","month","year","dec ade"],"navBar"),t(["month","year","decade"],"DrillDownElement"),t(["month","year"],"Header"),t(this._getBtnsArr(),""),t(["monthsPerView","currentSelected","monthYearNav","leftNav","rightNav","closeButton","footer"],"")}},{key:"_setAnimation",value:function(t){e.animationHandler({action:t,animation:this._opts.animation,element:this.element,ctype:this.name,callback:"close"===t?this._closeHandler.bind(this):this._openHandler.bind(this)})}},{key:"_setBtnProps",value:function(){for(var t=this._getBtnsArr(),a=this._opts,o=0,l;o<t.length;o++)l=t[o]+"ButtonLabel",this["_"+l]=a[l]||this._getI18NText(l);a.buttonsAlignment=e.buttonsAlignment||"right"}},{key:"_setBtnVal",value:function(){for(var e=this._getBtnsArr(),t=this._footer,a=0;a<e.length;a++){var o="_"+e[a],l=e[a]+"Click",n=t.find("."+e[a]+"Button-"+this.name);n.length&&(this[o]=n,this._handleFocus(this[o]),this._addEvents(_defineProperty({},l,"click"+("_today"===o?" keydown":"")),n))}this._OK&&(this._OKButton=!!this._OK.length)}},{key:"_createButtons",value:function(){this._data.cBar={},this._isColumnExists()?this._generateCustomCols():this._autoGenSingleColBtns();var e=this._traverseBtns("clearButton",void 0,void 0,!0);this._opts.clearButton&&e&&this._setClearBtnCls(e)}},{key:"_updateCommandBar",value:function(e){this._footer&&this._footer.length||(this._footer=e.find(".zdatetimepicker__commandbar")),this._isBtns&&this._setBtnVal(),this._traverseBtns()}},{key:"_traverseBtns",value:function(e,t,a,o){var n=1<this._monthsPerView,s=this._data.cBar;for(var r in s){var d=s[r];if(Array.isArray(d))for(var c=0,_=d.length;c<_;c++){var l=d[c],u=n?l.left||l.right||l.center||l:l;if(u)if(n&&u instanceof Array)for(var p=0,m=u.length,h;p<m;p++){if(h=u[p],o&&h.name&&h.name===e)return h;o||this._setBtnMainElement(e,t,a,h)}else{if(o&&u.name&&u.name===e)return u;o||this._setBtnMainElement(e,t,a,u)}}}}},{key:"_setBtnMainElement",value:function(e,t,a,o){var i=o.name?o.name.replace("Button",""):void 0;if(i){var l=this["_"+i];if(void 0!==a&&e===o.name){var n=o.className+" ",s=new RegExp(t,"g");o.className=a?n+t:n.replace(s,"")}else this._doesExist(l)&&(o.mainElement=this["_"+i][0])}}},{key:"_autoGenSingleColBtns",value:function(){var e=this._getCommandBarData.bind(this),t=this._opts,a=0,o=t.buttonsAlignment,l=t.todayButton,n=t.OKButton,s=this._getIndex.bind(this),r,d;if(3>this._monthsPerView){r=this._getBtnsArr().map(function(e){return e+"Button"});for(var c=0;c<r.length;c++)a+=+t[r[c]];if(1===a){d=s(0);var _=r[d];e("todayButton"===_?"center":"right",_)}else if(2===a){d=s(1);var u=r[d];l?(e("left","todayButton"),e("right",u)):n&&3!==d?t.clearButton?(e("left",u),e("right","OKButton")):e("right",[u,"OKButton"]):(e("left","clearButton"),e("right","cancelButton"))}else 3===a?(r=["today","OK","clear","cancel"],d=s(2,r),n&&(e("right","OKButton"),l&&e("right",r[d]+"Button",0)),l?e("left","todayButton"):(e("left","clearButton"),this._data.cBar.right.length&&e("right","cancelButton",0))):4===a&&(e("left","clearButton"),e("center","todayButton"),e("right",["cancelButton","OKButton"]))}else r=["clear","today","cancel","OK"],"right"!==o&&(r=r.reverse()),s(0,r,o)}},{key:"_getIndex",value:function(e,t,a){t=t||this._getBtnsArr();for(var o=t.map(function(e){return e+"Button"}),l=e;l<o.length;l++)if(this._opts[o[l]])if(a)this._getCommandBarData(a,o[l]);else return l}},{key:"_getCommandBarData",value:function(e,t,a,o){var i=this,l=this._data.cBar,n;n=l&&l.cols&&0!==l.cols.length;var s=n?o:l;if("number"==typeof a)s[e].splice(a,0,this._getbtnAttr(t));else{var r;t instanceof Array||(t=[t]),t=t.map(function(e){return i._getbtnAttr(e)}),s[e]||(s[e]=[]),(r=s[e]).push.apply(r,_toConsumableArray(t))}}},{key:"_getbtnAttr",value:function(t){var a=t.replace("Button",""),o=this["_"+t+"Label"];return e.ZButton.getBtnProps({customAttributes:{name:t,"aria-label":o},name:t,isLink:"today"===a,className:("today"===a?"zdatetimepicker__todaylink ":" ")+t+"-"+this.name,text:o,appearance:"OKButton"===t?"primary":"normal",size:"small",isCE:this.isCE,tabindex:0,templateRender:!0})}},{key:"_clearClickHandler",value:function(e,a){var o=this._clear,i=this._doesExist(o);(!e||t(e.target).closest(o).hasClass("is-disabled"))&&e||(i&&this._removeFocus(o),this._clearValues(e,!0!==a&&a),!a&&i&&this._dispatchEvent("clear",e,{valuesObject:[],values:[]}))}},{key:"_setClearBtnCls",value:function(e,t,a){e=e||this._traverseBtns("clearButton",void 0,void 0,!0),t=void 0===t?"single"===this._opts.selectionType?!this._currentSelected:this._selectedDates&&0===this._selectedDates.length:t;var o=this._clear;this._doesExist(o)&&(t?-1===e.className.indexOf("is-disabled")&&(e.className+=" is-disabled"):e.className.replace(/is-disabled/g,""),a&&this._disable(!!t,o))}},{key:"_todayClickHandler",value:function(t,a){var o=e.keyCode;if("click"===t.type||"keydown"===t.type&&-1<[o.ENTER,o.SPACE].indexOf(t.keyCode)){this._today.removeClass("has-focus has-kfocus");var i=new Date(+this._viewDate),l=this._opts,n=0===this._viewMode,s,r;if(r=this._getNewDate(),this._setHours(),s=this._viewDate,r.setHours(0,0,0,0),(!n||e.Date.areDatesEqual(s,i))&&n||(this._isDrilldown&&this._setViewMode(0,!0),this._buildData(!0)),a||this._dispatchEvent("todaybuttonclick",t,this._getSingleValue(s)),"navigate-and-select"===l.todayButtonAction){var d=this._getDateElem(r);d.hasClass("is-disabled")||(this._setDate(t,d,r),n&&l.closeOnDateSelect&&l.immediateCommit&&"single"===l.selectionType&&this._closePicker())}}}},{key:"_generateCustomCols",value:function(){var e=this._data.cBar,t=this._opts,a=1<this._monthsPerView,o=t.commandBar,l=0,n=["left","center","right"];this._itemsList=[],a&&(e.colClass="zdatetimepicker--threecolumn",e.cols=[]);for(var s=0,r;3>s;s++)if(r=o[n[s]+"Column"],a&&(e.cols[s]={}),r){var d=r.commands;a&&(e.cols[s].className=r.className);for(var c=0;c<d.length;c++){var _=d[c],u=!0;("OK"===_||"cancel"===_)&&(u=!t.immediateCommit,u&&(this._OKButton=!0)),u&&-1===this._itemsList.indexOf(_)&&(this._getCommandBarData(r.halign,_+"Button",void 0,a?e.cols[s]:void 0),this._itemsList[l++]=_)}}}},{key:"_insertHTML",value:function(e,a){var o=t(this._opts[e]);return this["_"+a]=o.parent(),o.length&&(o.show(),o.addClass("zdatetimepicker--custom")),o}},{key:"_insertHTMLAboveCalendar",value:function(){var e=this._insertHTML("customHTMLAboveCalendar","aboveCalendarParent");e.length&&e.insertBefore(this.element.find(".zdatetimepicker__month"))}},{key:"_insertHTMLAboveNavigationBar",value:function(){var e=this._insertHTML("customHTMLAboveNavigationBar","aboveNavbarParent");e.length&&(this._opts.title?e.insertAfter(this.element.find(".zdatetimepicker__titlebar")):e.prependTo(this.element))}},{key:"_insertHTMLBelowCalendar",value:function(){var e=this._insertHTML("customHTMLBelowCalendar","belowCalendarParent");e.length&&e.insertAfter(1===this._monthsPerView?this.element.find(".zdatetimepicker__monthcontainer").last():this.element.find(".zdatetimepicker__container"))}},{key:"_handleCustomHTML",value:function(e){for(var a=["BelowCalendar","AboveCalendar","AboveNavigationBar"],o=0,l;3>o;o++)l=this._opts["customHTML"+a[o]],l&&(void 0===e?this["_insertHTML"+a[o]]():(l=t(l),l.appendTo(t("body")),e&&l.hide()))}},{key:"_getViewMode",value:function(){var e=this._opts,t=this._valueUpdate,a=["dates","months","years","decades"].indexOf(e.drilldownLevelOnOpen);return t&&this.element.find(".zdatetimepicker--disabledcalendar").removeClass("zdatetimepicker--disabledcalendar"),t?0:-1<a?a:void 0}},{key:"_generateContent",value:function(e){if(this._isDrilldown){var t=["Months","Years","Decades"][this._viewMode-1];t&&this["_fill"+t](!0,e)}}},{key:"_drilldownClickHandler",value:function(e){var a=t(e.currentTarget),o=!1,i=this.element.find(".zdatetimepicker__days").length;if(this._hasClosest(e,".zdatetimepicker__monthcontainer",!0)){var l=a.closest(".zdatetimepicker__monthcontainer");a.hasClass("zdatetimepicker__monthyearnav")&&(l.hasClass("zdatetimepicker__monthdrilldown")&&this._opts.navigationBar.yearSwitcher?(this._fillYears(e),o=!0):l.hasClass("zdatetimepicker__yeardrilldown")&&(this._fillDecades(e),o=!0))}o||1!==this._monthsPerView&&(0!==a.closest("li.zdatetimepicker__list").index()||3!==i&&2!==i)||this._monthYearNavClickHandler(e),this._adjustCustomHTMLPos()}},{key:"_monthYearNavClickHandler",value:function(e,t){for(var a=["month","Months","year","Years"],o=this._opts.navigationBar,l=0,n;4>l;l+=2)if(n=this._viewMode===("month"===a[l]?0:o.monthSwitcher?1:0),n&&o[a[l]+"Switcher"]){e.stopPropagation(),this["_fill"+a[l+1]](e,t);break}}},{key:"_getDrilldownData",value:function(e,t){this._viewMode=t;var a=e.view,o=this._data.month[0],i=e.fn,l="dates"===this._opts.drilldownLevelOnOpen?this._width||this.element.find(".zdatetimepicker__calendar").outerWidth():null,n={view:a,cells:this["_"+i[0]](i[1],i[2],i[3]),style:"display:none;width:".concat(l,"px"),navigationBar:this._getDrilldownNavBar(e,t,a)};return o[a+"Drilldown"]=n,o[a+"Drilldown"]}},{key:"_setMainEle",value:function(e){var a=e.lMonthIcon,o=e.rMonthIcon;a.mainElement=t("#"+a.id).length?t("#"+a.id):null,o.mainElement=t("#"+o.id).length?t("#"+o.id):null}},{key:"_buildDrilldownView",value:function(e,t){var a=e.view,o=this._getDrilldownData.apply(this,arguments),i=this["_"+a+"EventBinded"],l=o.navigationBar;i||this._setMainEle(l),this._render(),i||(this["_"+a+"EventBinded"]=!0,"decade"!==a&&this._bindDrillDownClickEvent(a),this._bindDrilldownNavBarEvent(t),this._setMainEle(l),this["_"+a+"DrillDownElement"]=this.element.find(".zdatetimepicker__"+a+"drilldown"))}},{key:"_bindDrilldownNavBarEvent",value:function(e){for(var a=["-left-month-","-right-month-"],o=0;2>o;o++)this._addEvents({arrowEvent:"click"},t("#"+this._elementId+a[o]+e))}},{key:"_bindDrillDownClickEvent",value:function(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.element;a=e?a.find(".zdatetimepicker__"+e+"drilldown"):a,this._addEvents({drilldownClick:"click"},t(a.find(".zdatetimepicker__monthyearnav")[0]))}},{key:"_getDrilldownNavBar",value:function(e,a,o){var i=this._data.month[0][o+"Drilldown"]?this._data.month[0][o+"Drilldown"].navigationBar:null,l=this._opts.navigationBar,n=i?i.lMonthIcon:this._lMonthIcon,s=i?i.rMonthIcon:this._rMonthIcon,r="split"===this._opts.navigationBar.navigationButtonsDisplayPattern,d=["month","Year","Decade","Century"],c;return n&&s||(i=this._getMonthNavBtnProps(null,l)),n=t.extend(!0,{},n||i.lMonthIcon),s=t.extend(!0,{},s||i.rMonthIcon),c=this._getI18NText("prev"+d[a]),n=_objectSpread({},n,{id:this._elementId+"-left-month-"+a,customAttributes:{"aria-label":c,title:c}}),c=this._getI18NText("next"+d[a]),s=_objectSpread({},s,{id:this._elementId+"-right-month-"+a,customAttributes:{"aria-label":c,title:c}}),this._setConditions({year:this._translateEToA(e.year||this._viewDate.getFullYear()),monthYearSwitcherType:"drilldown",isSplit:r,lMonth:!0,rMonth:!0,cursorCls:"decade"!==o&&l.yearSwitcher?"zh-cursorpointer":"",class:r?"":" zdatetimepicker__navbaractionsonright",navBtnCls:"zdatetimepicker__navbutton",lMonthIcon:n,rMonthIcon:s})}},{key:"_updateYearArrowState",value:function(e,a){a="number"==typeof a?a:this._viewDate.getFullYear();var o=this._elementId,l;e&&(l=Math.pow(10,e-1));var n=this._maxDate&&a+l>i(this._maxDate.getFullYear()/l)*l||!1;t("#"+o+"-right-month-"+e).toggleClass("is-disabled",n);var s=1>=a||this._minDate&&a-l<i(this._minDate.getFullYear()/l)*l||!1;t("#"+o+"-left-month-"+e).toggleClass("is-disabled",s)}},{key:"_buildYearDecadeBody",value:function(e,t,a){for(var o=1,l=[],n=e;n<t;n+=a,o++)l.push({class:this["_get"+(10===a?"Decade":"Year")+"Classes"](n,o),value:1<=n?this._translateEToA(n):"",attr:1<=n?n:""}),12!==o&&0==o%4&&l.push({isTr:!0});return l}},{key:"_setViewMode",value:function(e,a,o){var i=this._prevViewMode,l=this.element,n=this._getClass(i),s;o=o||l;var r=t(o.find(".zdatetimepicker__calendar")[0]);0===i&&this._isShown&&r.is(":visible")&&(this._width=r.outerWidth()),s=0===i?t(r[0]).find("table"):o.find(".zdatetimepicker__"+n).find(".zdatetimepicker__drilldowncell"),s.removeClass("zeffects--zoomin"),a||s.addClass("zeffects--zoomout"),this._viewMode=e,1<this._monthsPerView&&l.find(".zdatetimepicker__list").nextAll().find(".zdatetimepicker__month,.zdatetimepicker__weeknumbers,.zdatetimepicker__navbar").addClass("zdatetimepicker--disabledcalendar"),clearTimeout(this._animationTimeout),a?this._animationHandler(o,a):this._animationTimeout=setTimeout(this._animationHandler.bind(this,o,a),300)}},{key:"_updateMonthClasses",value:function(){for(var e=this._data.month[0].monthDrilldown.cells,t=0,a=0,o=e.length;t<o;t++)e[t]["class"]&&-1<e[t]["class"].indexOf("zdatetimepicker__monthview")&&(e[t]["class"]=this._getMonthClasses(a),a++);this._render(),this._updateYearArrowState(1)}},{key:"_updateMonthDDNav",value:function(){this._data.month[0].monthDrilldown.navigationBar.year=this._translateEToA(this._viewDate.getFullYear())}},{key:"_getClass",value:function(e){var t;return 4>=e&&(t=["days","month","year","decade"][e],0===e),t+(0===e?"":"drilldown")}},{key:"_animationHandler",value:function(e,a){var o=this._viewMode,i=this._getClass(o),l=1===this._monthsPerView?e.children("div:not(.zdatetimepicker__commandbar):not(.zdatetimepicker__titlebar):not(.zdatetimepicker__pointer):not(.zdatetimepicker__timebar):not(.zdatetimepicker--custom)"):t(this.element.find(".zdatetimepicker__container").find(".zdatetimepicker__list")[0]).find(".zdatetimepicker").children(),n;e=this._display(!0,l).filter(".zdatetimepicker__"+i),n=0===o?t(e.find(".zdatetimepicker__calendar")[0]).find("table"):e.find(".zdatetimepicker__drilldowncell"),n.removeClass("zeffects--zoomout"),a||n.addClass("zeffects--zoomin"),this._display(void 0,e),this._positionPicker(),this._fireDrilldownEv(void 0,void 0,void 0,!0)}},{key:"_addDisabledCls",value:function(){"dates"!==this._opts.drilldownLevelOnOpen&&0!==this._viewMode&&this.element.find(".zdatetimepicker__list").nextAll().find(".zdatetimepicker__month,.zdatetimepicker__weeknumbers,.zdatetimepicker__navbar").addClass("zdatetimepicker--disabledcalendar")}},{key:"_removeEffects",value:function(){this.element.find(".zeffects--zoomin").removeClass("zeffects--zoomin"),this.element.find(".zeffects--zoomout").removeClass("zeffects--zoomout")}},{key:"_handleMousedownOnDrillDown",value:function(e,a,o,i){var l=this._opts,n=l.navigationBar,s=this._viewDate,r=t(e.target),d=this._viewMode;if(a&&s.setMonth(parseInt(r.attr("data-value"))),o&&s.setFullYear(parseInt(i)),n.updateDateOnMonthYearSwitch&&l.immediateCommit&&this._OKClickHandler(e,!0),0!==d){var c=d-1;o&&!n.monthSwitcher&&(c=0),this._prevViewMode=this._viewMode,this._setViewMode(c),d=this._viewMode,this._doNotBuildTime=!0,0===d&&this._buildData(!0),1===d&&(this._updateMonthDDNav(),this._updateMonthClasses())}return a?"month":"year"}},{key:"_fireDrilldownEv",value:function(e,t,a,o){this._prevViewMode=this._viewMode;var i=this._getObj();this._dispatchEvent((e?"before":o?"after":"")+"drilldown",t,_objectSpread({},i,{viewElement:a}))}},{key:"_setDrilldownClass",value:function(e){var t=this._data.month[0],a=e.is(".zdatetimepicker__year")?"year":"month",o=t[a+"Drilldown"].cells[e.index()];o["class"]=o["class"].replace(/is-selected/g,"")}},{key:"_fillYears",value:function(e){var t=this.element,a=this._viewMode,o;e&&void 0!==e.type&&(e.stopPropagation(),e.preventDefault(),o=e),this._monthDrillDownElement&&1===a||this._fillMonths(o),this._fireDrilldownEv(!0,o);var l=10*i(this._viewDate.getFullYear()/10),n=l+9;this._yearStart=l,this._monthDrillDownElement&&this._buildDrilldownView({view:"year",year:this._translateEToA(l+" - "+n),fn:["buildYearDecadeBody",l-1,n+2,1]},2,o),this._setViewMode(2,"boolean"==typeof e,t),this._fireDrilldownEv(!1,o,this._yearDrillDownElement)}},{key:"_getYearClasses",value:function(e,t){var a=this._opts,o=a.disabledYears,i=" zdatetimepicker__year  zdatetimepicker"+(1===t||12===t?"__drilldownnearlevelcell":"__monthyeargrid"),l=this._minDate,n=this._maxDate,s=this._currentSelected&&this._currentSelected.getFullYear()===e,r=a.value;return(r&&r.getFullYear()===e&&s||s)&&(i+=" is-selected"),"multiple"===a.selectionType&&(a.values.length||this._selectedDates.length)&&(i+=this._addSelectClass("FullYear",e)),this._getNewDate().getFullYear()===e&&(i+=" zdatetimepicker--currentcell"),(1>e||l&&e<l.getFullYear()||n&&e>n.getFullYear()||o&&-1<o.indexOf(e))&&(i+=" is-disabled zdisabled"),i}},{key:"_handleDecadeArrowClick",value:function(e){e.stopPropagation();var a=t(e.target),o=this._viewDate,l=e.currentTarget.getAttribute("id"),n=this._viewMode,s=2===n;if(!a.closest(".zdatetimepicker__navbutton").hasClass("is-disabled")){var r=s?"year":"decade",d=s?1:10,c,_,u,p,m;c=(-1<l.indexOf(this._elementId+"-right-month")?1:-1)*d,_=s?this._yearStart:this._decadeStart,_="number"==typeof _?_:o.getFullYear();var h=_+10*c;u="number"==typeof h?h:this._viewDate.getFullYear(),this._data.month[0][r+"Drilldown"].cells=null,p=i(u/(10*d))*(10*d),m=p+9*d,this._buildDrilldownView({view:r,year:this._translateEToA(p+" - "+m),fn:["buildYearDecadeBody",p-d,m+2*d,d],placeholder:s?"month":"year"},n,e),this._display(void 0,this["_"+r+"DrillDownElement"]),this["_"+(s?"year":"decade")+"Start"]=p,this._updateYearArrowState(n,p)}this._dispatchEvent((s?"decade":"century")+"change",e,{viewDate:this._viewDate,value:this._opts.value})}},{key:"_fillDecades",value:function(e){var t=this.element,a=this._yearDrillDownElement,o;void 0!==e.type&&(e.stopPropagation(),e.preventDefault(),o=e),a||this._fillYears(o),this._fireDrilldownEv(!0,o);var l=100*i(this._viewDate.getFullYear()/100),n=l+90;this._yearDrillDownElement&&this._buildDrilldownView({view:"decade",year:this._translateEToA(l+" - "+n),fn:["buildYearDecadeBody",l-10,n+20,10]},3,o),this._setViewMode(3,"boolean"==typeof e,t),this._decadeStart=l,this._fireDrilldownEv(!1,o,this._decadeDrillDownElement)}},{key:"_getDecadeClasses",value:function(e,t){var a=" zdatetimepicker__"+(1===t||12===t?"drilldownnearlevelcell":"monthyeargrid")+" zdatetimepicker__decade ",o=this._minDate,l=this._maxDate;return(10>e||o&&e<10*i(o.getFullYear()/10)||l&&e>10*i(l.getFullYear()/10))&&(a+=" is-disabled zdisabled"),a}},{key:"_handleDecadeMousedown",value:function(e,t,a){this._viewDate.setFullYear(parseInt(a)),0!==t&&(this._setViewMode(t-1),t=this._viewMode,2===t&&this._fillYears(e))}},{key:"_setViewdate",value:function(e,t,a){var o=this._viewDate;e?this._viewDate=this._moveMonth(o,t):a&&this._viewDate.setFullYear(o.getFullYear()+t)}},{key:"_setView",value:function(t,a){var o=this._opts[t+"ToBeShownOnOpen"];if(!a||this._isNotNull(o))if("number"==typeof o&&(a&&0<=o&&11>=o||!a))this._viewDate["set"+(a?"Month":"FullYear")](o);else if("string"==typeof o){var l=["LAST","THIS","NEXT"],n;for(n=0;3>n;n++)if(-1<o.indexOf(l[n]+"_")){var s="THIS"===l[n],r=s?e.Date.convertOffsetToValue(o.substring(9+ +a)):n-1;this._setViewdate(a,r,!!s||9===o.length)}}}},{key:"_setViewOnOpen",value:function(){var e=this._opts,t=this._setView.bind(this),a=e.monthToBeShownOnOpen,o=e.yearToBeShownOnOpen;a&&t("month",!0),o&&t("year"),(a||o)&&this._checkViewDate(new Date(+this._viewDate))}},{key:"_processLimits",value:function(){for(var e=["_min","_max"],t=0,a=e.length,o;t<a;t++)o=e[t],this[o+"DateHasTime"]&&(this[o+"Time"]=new Date(+this._opts[o.slice(1)+"Date"])),o+="Date",!this._checkTime&&this[o]&&this[o].setHours(0,0,0,0)}},{key:"_checkMax",value:function(e,t){var a=this["_"+t+"Date"];return"min"===t?this._isGreater(a,e):this._isGreater(e,a)}},{key:"_checkLimits",value:function(){var t=this._minDate,a=this._maxDate,o=this._opts,l=o.value,n=this._getNewDate(),s;n.setHours(0,0,0,0),t&&a&&e.Date.isGreater(t,a)&&!e.Date.areDatesEqual(t,a)&&(o.maxDate=this._maxDate=void 0);for(var r=["min","max"],d=0;2>d;d++){var c=r[d],_=this["_"+c+"Date"];if(_){var u=new Date(+t);u.setHours(0,0,0,0),l?this._checkMax(l,c)&&(this._currentSelected=o.value=void 0,s=!0):"multiple"===o.selectionType&&this._selectedDates.length&&(s=this._checkDates(c,u)),s&&this._dispatchEvent("change",void 0,this._getSelectedValue()),this._checkMax(this._viewDate,c)?this._viewDate=new Date(this._isBig(c,n)?+_:+n):"min"===c&&this._setViewDateIfNoVal(c)}}}},{key:"_checkViewDate",value:function(e){var t=this._maxDate,a=this._minDate,o;t&&this._isGreater(this._viewDate,t)&&(o="max"),a&&this._isGreater(a,this._viewDate)&&(o="min"),void 0===o?this._setViewDateIfNoVal():this._viewDate=new Date(this._isBig(o,e)?a?+a:"max"===o?+t:+e:+e)}},{key:"_setViewDateIfNoVal",value:function(){var e=this._opts,t=this._minDate,a=this._maxDate;!e.value&&!e.values.length&&t&&(!a||this._isGreater(a,t))&&this._isGreater(t,this._getNewDate())&&(this._viewDate=new Date(+t))}},{key:"_getTitleData",value:function(t){var a=this._opts,o=a.title,i=a.closeButton&&"inline"!==a.type,l={value:o&&a.isTitleHTMLEncoded?o:e.encodeHTML(o),closeButton:i,modifiedAttr:t?"title":null};return i?this._getCloseProps(l):l}},{key:"_getCloseProps",value:function(t){return t.closeSVGProps=e.ZButton.getBtnProps({className:"zdatetimepicker__close",defaultIconClassName:"zdatetimepicker__icon",iconClassName:this._opts.closeIconClassName,SVGIconId:this._opts.closeSVGIconId,defaultSVGIconId:"zc__svg--close",mainElement:this._closeButton?this._closeButton[0]:null,templateRender:!0}),t}},{key:"_setCloseEle",value:function(){var e=this.element,t=this._opts;!t.closeButton||"inline"===t.type||this._closeButton&&this._closeButton.length||(this._closeButton=e.find(".zdatetimepicker__close"),this._data.title.closeSVGProps.mainElement=this._closeButton[0],this._closeButton&&this._addEvents({closeClick:"click"},this._closeButton))}},{key:"_closeClickHandler",value:function(e){this._closePicker(e),this._removeFocus(this._closeButton)}},{key:"_handleMultipleSelectOnClose",value:function(){var e=this._opts,t=e.values,a=this._selectedDates,o=t.length,l=a.length,n=[],s=e.selectionLimit,r;if(l!==o){if(l>o)n=this._selectedDates.splice(o),this._selectedDates.length=o,this._setSelectClass(!1,n);else{this._selectedDates=[];for(var d=0;d<o;d++)this._selectedDates[d]=this._parseDateValue(t[d],e.format).date;this._setSelectClass(!0,this._selectedDates)}s!==o&&this._limitReached?(this._limitReached=!1,r=!1,this._queryString=""):s===o&&(this._queryString=":not(",this._getQueryString(),r=!0)}a=this._selectedDates;var c=this._clear;a&&a.length&&this._doesExist(c)&&(this._traverseBtns("clearButton","is-disabled",!1),this._disable(!1,c)),void 0!==r&&this._setDateClass("is-disabled",r,this.element.find(".zdatetimepicker__date,.zdatetimepicker__adjacentmonthdate").filter(this._queryString))}},{key:"_setSelectClass",value:function(e,t){for(var a=0;a<t.length;a++)this._select(e,this._getDateElem(this._resetTime(t[a])))}},{key:"_setValues",value:function(){for(var e=this._opts,t=e.values,a=t.length,o=0;o<a;o++){var l=void 0,n=t[o];"string"==typeof n?l="TODAY"===n?this._getNewDate():this._parseDateValue(t[o],e.format).date:n instanceof Date?l=n:t.splice(o,1);var s=(!e.selectionLimit||e.selectionLimit>o)&&this._dateWithInRange(l);if(s)this._valueUpdate=!0,l&&this._dateWithInRange(l)&&(l.setHours(0,0,0,0),this._selectedDates.push(l),o===a-1&&(this._viewDate=new Date(+l)));else{e.values.splice(o,a);break}}}},{key:"_handleOkOnMultiple",value:function(t){t.values=[];for(var a=this._selectedDates,o=a.length,l=0,n;l<o;l++)n=new Date(a[l]),this._checkTime&&n.setHours(this._selectedTime.getHours(),this._selectedTime.getMinutes(),0,0),t.values.push(e.Date.formatDate(n,t.format))}},{key:"_getMultipleValues",value:function(){return{values:this._opts.values,valuesObject:this._selectedDates,translatedValues:this._getTranslatedValues()}}},{key:"_getTranslatedValues",value:function(){for(var t=[],a=this._opts,o=this._selectedDates,l=0;l<o.length;l++)t.push(this._translateEToA(e.Date.formatDate(o[l],a.format,a.labels)));return t}},{key:"_getQueryString",value:function(){for(var e=this._selectedDates,t=0,a=e.length;t<a;t++)this._queryString+="[data-time='"+ +this._resetTime(e[t])+"']",this._queryString+=","+(t==a-1?" .zdisabled)":"")}},{key:"_addSelectClass",value:function(e,t,a){var o=this._selectedDates,l="",n,s;for(n=0,s=o.length;n<s;n++){var r="Month"!==e||a===o[n].getFullYear();r&&o[n]["get"+e]()===t&&(l+=" is-selected")}return l}},{key:"_setMultipleDate",value:function(e,a,o){var i=this._opts,l=this._clear,n=this._selectedDates,s=i.immediateCommit,r=n.length,d=this.element;if(!a.hasClass("is-selected"))this._select(!0,a),this._selectedTime&&o.setHours(this._selectedTime.getHours(),this._selectedTime.getMinutes(),0,0),n.push(new Date(+o)),r=n.length,"inline"!==i.type&&s&&(this._valueUpdate=!0,this._OKClickHandler(e,!0)),this._queryString="",r===i.selectionLimit&&(!this._queryString&&(this._queryString=":not(",this._getQueryString()),this._setDateClass("is-disabled",!0,d.find(".zdatetimepicker__date,.zdatetimepicker__adjacentmonthdate").filter(this._queryString)),this._limitReached=!0);else if(!e||e&&0===t(e.target).closest(".zdatetimepicker__todaylink").length){this._select(!1,a);var c=this._getDateIndex(o);-1!==c&&(r===i.selectionLimit&&(this._limitReached=!0,this._queryString=":not(",this._getQueryString(),this._queryString&&this._setDateClass("is-disabled",!1,d.find(".zdatetimepicker__date,.zdatetimepicker__adjacentmonthdate").filter(this._queryString)),this._disable(!1,d.find(".is-selected"))),n.splice(c,1),s&&i.values.splice(c,1)),0<r&&s&&(this._valueUpdate=!0,this._OKClickHandler(e,!0))}return this._doesExist(l)&&this._traverseBtns("clearButton","is-disabled",!n.length),this._disable(!n.length,l),{values:i.values,valuesObject:n}}},{key:"_getDateIndex",value:function(t){for(var a=this._selectedDates,o=0,l=a.length;o<l;o++)if(e.Date.areDatesEqual(t,a[o]))return o;return-1}},{key:"_checkDates",value:function(e,t){for(var a=this._selectedDates,o=this._opts,l=0,n,s;l<a.length;l++)s="max"===e?this._checkMax(a[l],e):this._isGreater(t,a[l]),s&&(n=!0,o.values.splice(l,1),this._selectedDates.splice(l,1),l--);return n}},{key:"getValues",value:function(){for(var t=[],a=this._opts,o=a.values,l=0,n=o.length;l<n;l++)t[l]=e.Date.formatDate(o[l],a.format);return{values:o,valuesString:t}}},{key:"setValues",value:function(t){var a=this._opts,o=this._oldDate;"multiple"===a.selectionType&&(a.values=t,this._setValues(),this._validateOpts(),(o&&!e.Date.areDatesEqual(o,this._viewDate)||!o)&&this._buildData(!0),this._dispatchEvent("change",void 0,this._getSelectedValue()))}},{key:"clearAll",value:function(){var e=this._opts;"multiple"===e.selectionType&&(e.values.length||this._selectedDates.length)&&(this._clearValues(void 0,!0),e.values=[],this._selectedDates=[])}},{key:"clear",value:function(t){var a=this._opts;if("multiple"===a.selectionType&&t){var o=this._selectedDates,i=a.values,l,n;if("string"==typeof t?n=!0:t instanceof Date&&(t.setHours(0,0,0,0),t=e.Date.formatDate(t,a.format),n=!0),n&&(l=i.indexOf(t)),-1<l){var s=this._getDateElem(this._resetTime(o[l]));s.removeClass("is-selected").removeAttr("aria-selected"),this._select(!1,s,!0),i.splice(l,1),o.splice(l,1),0===i.length&&(this._setHours(),this._doesExist(this._clear)&&this._traverseBtns("clearButton","is-disabled",!0)),this._buildData(!0),this._dispatchEvent("change",void 0,this._getSelectedValue())}}}},{key:"_initDraggable",value:function(){var t=this._dragHandler.bind(this);"inline"!==this._opts.type&&e.draggable(this.element,{handle:".zdatetimepicker__titlebar",ignore:".zdatetimepicker__close",container:"window",cursor:"default",start:t.bind(this,"start"),drag:t.bind(this,""),end:t.bind(this,"end")})}},{key:"_dragHandler",value:function(e,t,a){this._dispatchEvent("drag"+e,t,a),"end"===e&&(this._dragEnd=!0)}},{key:"_fillMonths",value:function(e){var t=this.element,a;e&&void 0!==e.type&&(a=e),this._fireDrilldownEv(!0,a),this._buildDrilldownView({view:"month",fn:["buildMonthNavBarBody"]},1,a),this._setViewMode(1,"boolean"==typeof e,t),this._fireDrilldownEv(!1,a,this._monthDrillDownElement)}},{key:"_buildMonthNavBarBody",value:function(){for(var e=[],t=-1<this._opts.navigationBar.monthFormatInSwitcher.indexOf("MMMM")?this._getI18NText("months"):this._getI18NText("monthsAbbreviated"),a=0;12>a;a++)e.push({class:this._getMonthClasses(a),value:this._translateEToA(t[a]),isTr:!1,attr:a+""}),12!=a+1&&0==(a+1)%4&&e.push({isTr:!0});return e}},{key:"_getMonthClasses",value:function(e){var t=this._checkDisabled.bind(this),a="zdatetimepicker__monthview zdatetimepicker__monthyeargrid",o=this._getNewDate(),i=this._viewDate,l=i.getFullYear(),n=this._minDate,s=this._currentSelected,r=this._maxDate,d=s&&s.getMonth()===e&&s.getFullYear()===l,c=this._opts,_=c.value;return(_&&_.getMonth()===e&&_.getFullYear()===l&&d||d)&&(a+=" is-selected"),"multiple"===c.selectionType&&(a+=this._addSelectClass("Month",e,l)),o.getMonth()===e&&o.getFullYear()===l&&(a+=" zdatetimepicker--currentcell"),(n&&(l===n.getFullYear()&&e<n.getMonth()||l<n.getFullYear())||r&&(l===r.getFullYear()&&e>r.getMonth()||l>r.getFullYear())||t("Years",l)||t("Months",e))&&(a+=" is-disabled zdisabled"),a}},{key:"_checkDisabled",value:function(e,t){var a=this._opts["disabled"+e];return a instanceof Array&&-1<a.indexOf(t)}},{key:"_handleYearClick",value:function(e,a,o){var i=t(e.target),l=this._elementId,n=this._opts.navigationBar.yearNavigationStep,s=e.currentTarget.getAttribute("id");if(!i.closest(".zdatetimepicker__navbutton").hasClass("is-disabled")){var r=n*(-1<s.indexOf(l+"-right-year")||-1<s.indexOf(l+"-right-month")&&0<this._viewMode?1:-1);o=o||this._viewDate,o.setFullYear(o.getFullYear()+r),this._viewDate=new Date(+o),this._updateMonthDDNav(),this._updateMonthClasses(a||this.element),this._triggerMonYrDecChange(e,"year",this._viewDate.getFullYear())}}},{key:"_generateDropdown",value:function(t,a){var o=a?["month","Month"]:["year","Year"],i=this._data.month[0].navigationBar,l=i[o[0]+"Select"];this._opts.navigationBar[o[0]+"Switcher"]&&(l.mainElement?"number"==typeof t&&e[a?"select":"combobox"](this["_"+o[0]+"Header"]).setAttributes({selectedValue:a?l.options[t].value:t}):this["_generate"+o[1]+"Dropdown"](i))}},{key:"_constructDropdown",value:function(e){e.yearSwitcher&&!e.yearSelect&&this._generateYearDropdown(e),e.monthSwitcher&&!e.monthSelect&&this._generateMonthDropdown(e),this._checkOptions()}},{key:"_stopSelectEvents",value:function(t){for(var a=e.ZSelect.prototype._EVENTS,o=0;o<a.length;o++)t.on("z"+a[o],function(e){return e.stopPropagation()})}},{key:"_assignHeaders",value:function(){this._assignElement("month"),this._assignElement("year")}},{key:"_assignElement",value:function(e){if(this._opts.navigationBar[e+"Switcher"]){var a=this["_"+e+"Header"];if(!a||a&&!a.length){var o=t("#"+this._elementId+"-"+e+"-header");o=o?o[0]:null,o&&(this["_"+e+"Header"]=t(o)),this._data.month[0].navigationBar[e+"Select"].mainElement=o}}}},{key:"_buildDropdownNavElement",value:function(e,t){(this._opts.disabledMonths||this._opts.disabledYears)&&this._validateDisabledMonthYear(),this._generateDropdown(e,!0),this._generateDropdown(t)}},{key:"_validateDisabledMonthYear",value:function(){for(var t=["months","month","Years","year"],a=0,o;a<t.length;a+=2){o=this._opts["disabled"+t[a]];var l=this["_"+t[a+1]+"Header"],n=this._viewDate["months"===t[a]?"getMonth":"getFullYear"]();if(l&&o)for(var s=0,r;s<o.length;s++)r="months"===t[a]?"select":"combobox",n!==o[s]&&e[r](l).setOptionAttributes(o[s],"disabled",!0)}}},{key:"_setDropdownVal",value:function(){var e=this._maxDate,t=this._minDate,a=this._data.month[0].navigationBar,o,l,n,s;e&&(n=e.getFullYear(),s=e.getMonth()),t&&(l=t.getMonth(),o=t.getFullYear());for(var r=["month","year"],d=0,c;2>d;d++)c="year"===r[d],this._opts.navigationBar[c?"yearSwitcher":"monthSwitcher"]&&this[c?"_setYearDropdownVal":"_setMonthDropdownVal"](o,l,n,s,a)}},{key:"_checkOptions",value:function(){(this._monthHeader||this._yearHeader)&&this._setDropdownVal()}},{key:"_bindHeaderEvents",value:function(e){e=t("#"+this._elementId+"-"+e+"-header"),e.length&&this.isCE&&this._stopSelectEvents(e)}},{key:"_destroyDropdown",value:function(){this._monthHeader&&e.select(this._monthHeader).destroy(),this._yearHeader&&e.combobox(this._yearHeader).destroy(),this._monthHeader=this._yearHeader=void 0}},{key:"_selectClickHandler",value:function(e,a,o){a=!a&&e?e.detail:a;var i=this._viewDate,l=i.getFullYear(),n;if(a.fromUI){var s=a.selectedValue;i.setDate(1),a.dropdownList&&(n=-1<t(a.dropdownList).attr("id").indexOf("month-header"),n?i.setMonth(this._getMonthVal(s)):i.setFullYear(+s||l)),(this._minDate||this._maxDate)&&this._checkLimitOnDropDown(),this._buildData(!0),this._checkOptions(s,o),(this._opts.disabledMonths||this._opts.disabledYears)&&this._validateDisabledMonthYear(),void 0!==n&&this._triggerMonYrDecChange(e,n?"month":"year",this._viewDate[n?"getMonth":"getFullYear"]())}}},{key:"_checkLimitOnDropDown",value:function(){for(var t=["min","max"],a=this._viewDate,o=this._minDate,l=this._yearHeader,n=0,s;2>n;n++)if(s=this["_"+t[n]+"Date"],s&&this._isBig(t[n],a)){if(a.setFullYear(s.getFullYear()),"min"===t[n])for(;this._isGreater(o,a);)a.getMonth()===o.getMonth()&&a.getFullYear()===o.getFullYear()?a.setDate(o.getDate()):a.setFullYear(a.getFullYear()+1);else for(;this._isGreater(a,this._maxDate);)a.setFullYear(a.getFullYear()-1);l&&e.combobox(l).setAttributes({selectedValue:a.getFullYear()})}}},{key:"_generateMonthDropdown",value:function(e){var t=this._opts,a=this._viewDate.getFullYear(),o=this._viewDate.getMonth(),l=t.minDate,n=t.maxDate,s=t.disabledMonths,r=[],d=this._getMonthVal(),c,_,u;l&&(_=l.getFullYear()===a),n&&(u=n.getFullYear()===a);for(var p=0;p<d.length;p++)o===p&&(c=d[p]),r[p]={value:d[p],selected:o===p,disabled:_&&l&&p<l.getMonth()||u&&n&&p>n.getMonth()||s&&-1<s.indexOf(p)&&o!==p,label:d[p]};var m=this._monthHeader;e.monthSelect={id:this._elementId+"-month-header",width:"107px",dropdownList:{width:99,height:330,className:"zdatetimepicker--menu"},mainElement:m?m[0]:null,isCE:this.isCE,selectedValue:c,rtl:t.rtl,templateRender:!0,options:r,allowDisabledOptionsForSelection:!0,optionclick:this._selectClickHandler.bind(this)}}},{key:"_getMonthVal",value:function(e){var t="months"+(-1<this._opts.navigationBar.monthYearHeadingFormat.split(" ").indexOf("MMMM")?"":"Abbreviated"),a=this._getI18NText(t);return e?a.indexOf(e):a}},{key:"_setMonthDropdownVal",value:function(t,a,o,l,n){var s=e.select(this._monthHeader),r=this._opts.disabledMonths,d=this._viewDate.getFullYear(),c=this._viewDate.getMonth();if(t||a||o||l||"minOrMax"===this._data.modifiedAttr){for(var _=[],u=[],p=n.monthSelect.options,m=0,h;12>m;m++)h=t===d&&m<a||o===d&&m>l||r&&-1<r.indexOf(m)&&c!==m,(h?_:u).push(p[m].value);s.setOptionAttributes(_,"disabled",!0),s.setOptionAttributes(u,"disabled",!1)}s.setAttributes({selectedValue:n.monthSelect.options[c].value})}},{key:"_generateYearDropdown",value:function(e){var t=this._yearDropdown,a=this._getYearDropdownOpts();e.yearSelect={id:this._elementId+"-year-header",acceptNewValues:!0,width:"82px",templateRender:!0,isCE:this.isCE,dropdownList:{width:99,height:330,className:"zdatetimepicker--menu"},selectedValue:a.selectedValue,mainElement:t?t[0]:null,options:a.yearJSON,rtl:this._opts.rtl,change:this._selectClickHandler.bind(this),allowDisabledOptionsForSelection:!0,search:{showNoResultsMessage:!1}}}},{key:"_getYearDropdownOpts",value:function(){var t=this._opts,a=t.navigationBar,o=this._DEFAULTS.navigationBar,l=this._viewDate,n=this._getNewDate().getFullYear(),s=l.getFullYear(),r=this._minDate,d=this._maxDate,c=t.value,_=a.dropdownStartYear,u=a.dropdownEndYear,p=t.disabledYears,m=e.Date.convertOffsetToValue.bind(e),h=c?c.getFullYear():void 0,g,v,y;if(v=_,y=u,_=m((+_?o.dropdownStartYear:_).substring(9)),v=+v||n+_,u=m((+u?o.dropdownEndYear:u).substring(9)),y=+y||n+u,y<v){var f=v;v=y,y=f}if(c&&(y=h+u,v=h+_),r){var k=v,b=r.getFullYear();b>k&&(v=b,y<b&&(y=b+u))}else c&&v>h&&(v=h,y=h+u);d&&(y=d.getFullYear(),v=y<=v?(r||d).getFullYear():v);for(var C=[],D=v;D<=y;D++)s===D&&(g=D),C.push({value:D,selected:s===D,disabled:d&&d.getFullYear()===D&&l.getMonth()>d.getMonth()||s!==D&&p&&-1<p.indexOf(D),label:D});return{selectedValue:g,yearJSON:C}}},{key:"_setYearDropdownVal",value:function(t,a,o,i){var l=e.combobox(this._yearHeader),n=this._viewDate;if("minOrMax"===this._data.modifiedAttr){var s=this._getYearDropdownOpts().yearJSON;l.setAttribute("options",s)}o&&l.setOptionAttributes(o,"disabled",n.getMonth()>i),t&&l.setOptionAttributes(t,"disabled",n.getMonth()<a),l.setAttributes({selectedValue:n.getFullYear()})}},{key:"_setAttrs",value:function(t,a,o){var l=this,n=this._data,s=this._opts,r=s.navigationBar,d=!0,c=this._isDropdown,_;if(o=o||this.element,-1>["minDate","maxDate"].indexOf(t)&&(s[t]=a,this._userOptions[t]=a),void 0===this._yearNavigation&&(this._yearNavigation=r.yearNavigationButtons=!c),"values"===t){var u=s.values;!u||u instanceof Array&&0===u.length?this.clearAll():this.setValues(u),d=!1}else if(-1<["minDate","maxDate"].indexOf(t)){this["_"+t+"HasTime"]=!1,this._parseValue(t,a),a?(this._userOptions[t]=s[t],this["_"+t]=new Date(s[t].getTime())):(this["_"+t]=null,this["_"+t+"HasTime"]=!1);var p=!s.value&&0===s.values.length;p&&this._setHours(),this._processLimits(),this._checkLimits(),p&&(s.monthToBeShownOnOpen&&this._setView("month",!0),s.yearToBeShownOnOpen&&this._setView("year")),this._isDropdown&&(n.modifiedAttr="minOrMax",this._checkOptions()),_=!0}else if(-1<["closeButton","closeSVGIconId","closeIconClassName","title"].indexOf(t))this._closeButton=void 0,n.title=this._getTitleData(),"title"===t&&(s.title?this._enableDrag=s.draggable:s.draggable&&this.element.data("zdraggable")&&e.draggable(this.element).destroy()),n.modifiedAttr="title";else if("displayType"===t)this._validateOpts(),"box"===a&&this._pointer&&!this._isPositionModified&&(s.position="bottom-left"),n.modifiedAttr="displayType";else if(-1<t.indexOf("customHTML"))this._handleCustomHTML(),d=!1;else if("displayWeekNumbers"===t)this._setMonthVal(t,a);else if("weekHeading"===t&&s.displayWeekNumbers)this._setMonthVal("weekTitle",a);else if("type"===t)n.modifiedAttr="type","popup"===s.type?(n.title.closeButton=s.closeButton,(s.forElement||s.offset)&&this._showPicker()):this._closeButton&&(n.title.closeButton=!1),"inline"===s.type&&(this._display(),this._isShown=!0);else if("selectionType"===t)this._resetValues(),_=!0;else if(-1<["todayButton","clearButton","hideCancelButton","immediateCommit","commandBar"].indexOf(t))this._setOKCancelBtns(),this._isBtns=this._isBtnsExist(),this._isBtns?(this._setBtnProps(),this._createButtons()):this._data.cBar=null,this._getBtnsArr().forEach(function(e){s[e+"Button"]||(l["_"+e]=null)}),n.modifiedAttr="commandBar";else if(-1<["todayButtonLabel","cancelButtonLabel","clearButtonLabel","OKButtonLabel"].indexOf(t)){var m=t.replace("Label",""),h=this._traverseBtns(m,void 0,void 0,!0),g=this["_"+m.replace("Button","")];h.text=h.customAttributes["aria-label"]=a,h.mainElement=g&&g.length?g[0]:void 0,"todayButton"===m?this._domChanged=!0:this._setBtnValue({text:a},h),this["_"+t]=a||this._getI18NText(t)}else if("draggable"===t)s.title&&s.draggable?(this._enableDrag=!0,n.modifiedAttr="title"):this.element.data("zdraggable")&&e.draggable(this.element).destroy();else if("monthToBeShownOnOpen"===t||"yearToBeShownOnOpen"===t){var v=-1<t.indexOf("month");this._setView(v?"month":"year",v),(this._minDate||this._maxDate)&&this._checkViewDate(this._viewDate),_=!0}else if(-1<["disabledDaysOfWeek","specialDaysOfWeek","specialDates","disabledDates"].indexOf(t)){-1<["disabledDates","specialDates"].indexOf(t)&&this._convertStringToObject(_defineProperty({},t,s[t]));var y=-1<t.indexOf("special");this._refreshClassNames(y?"zdatetimepicker--special":"is-disabled zdisabled",y?["specialDaysOfWeek","specialDates"]:["disabledDaysOfWeek","disabledDates"])}else if("disabledMonths"===t){if(-1<s.disabledMonths.indexOf(this._viewDate.getMonth()))o.find("td").addClass("is-disabled zdisabled").attr("aria-disabled",!0);else if(!c)this._monthDrillDownElement&&this._monthDrillDownElement.find("td").addClass("is-disabled").attr("aria-disabled",!0);else if(this._monthHeader){var f=e.select(this._monthHeader);f.setOptionAttributes(this._oldValue,"disabled",!1),f.setOptionAttributes(s.disabledMonths,"disabled",!0)}}else if("selectionLimit"===t&&"multiple"===s.selectionType){var k=this._selectedDates,b=this._opts.values,C=k.length;if(a===C||C>a){this._limitReached=!0,b.splice(a,b.length);for(var D=k.splice(a,k.length),w=0,S=D.length;w<S;w++)this._setDateClass("is-selected",!1,this._getDateElem(D[w]),!0);k.length?(this._queryString=":not(",this._getQueryString(),this._setDateClass("is-disabled",!0,this.element.find(".zdatetimepicker__date,.zdatetimepicker__adjacentmonthdate").filter(this._queryString),!0)):(this._queryString="",_=!0),this._dispatchEvent("change",void 0,this._getSelectedValue())}else _=!0}else if("disabledYears"===t){if(-1<s.disabledYears.indexOf(this._viewDate.getFullYear()))_=!0;else if(!c)this._yearDrillDownElement&&this._yearDrillDownElement.find("td").addClass("is-disabled").attr("aria-disabled",!0);else if(this._yearHeader){var T=e.combobox(this._yearHeader);T.setOptionAttributes(this._oldValue,"disabled",!1),T.setOptionAttributes(s.disabledYears,"disabled",!0)}}else if("displayAdjacentMonthDates"===t)_=!0,n.modifiedAttr="adjacentMonthDates";else if("selectedDateMonthViewIndex"===t&&s.value)this._viewDate=new Date(s.value.getTime()),this._changeMonth(!1),_=!0;else if("allowSelectionOfAdjacentMonthDates"===t)this._setMonthVal("className"," zdatetimepicker--adjacentmonthdatereadonly",!a),this._domChanged=!0,n.modifiedAttr="adjacentMonthDates";else if("width"===t)a&&this.element.width(a);else if("height"===t)a&&this.element.height(a);else if("className"===t)this.element.removeClass(this._oldValue),a&&this.element.addClass(a);else if("offset"===t)this.element.css(a),d=!1;else if("margin"===t&&this._isShown){var I={left:parseInt(this.element.css("left")),top:parseInt(this.element.css("top"))};I=this._retrieveMarginValues(I),this.element.css(I)}else if("zclassName"===t&&this.isCE)this._oldValue&&this.element.removeClass(this._oldValue),this.element.addClass(a);else if("rtl"===t&&(this._monthHeader||this._yearHeader)){var x={rtl:a};this._monthHeader&&e.select(this._monthHeader).setAttributes(x),this._yearHeader&&e.combobox(this._yearHeader).setAttributes(x)}else"timeZone"===t&&(this._setTimeZone(),_=!0);return this._reInit||(this._reInit=_),d}},{key:"_refreshClassNames",value:function(e,t){for(var a=this,o=-1<e.indexOf("disabled"),n=this._opts,s=e.split(" "),r=0,c;r<this._monthsPerView;r++){c=this._data.month[r].dates;for(var _=0,u=c.length,p;_<u;_++){p=c[_];for(var m=0,h=p.length;m<h;m++){var l=p[m],g=l["class"];l["class"]=g.replace(s[0],"").replace(s[1],""),l.title=l.infoText="";var v=void 0,y=new Date(parseInt(l.time)),f=!!o&&!a._dateWithInRange(y);l.text&&(f||(v=this._shouldAddClass(y,t))||this._shouldAddClass(y,t,"multiple"===n.selectionType&&this._limitReached))&&("object"===_typeof(v)&&(l["class"]+=v.className?" "+v.className:"",l.title=v.title||null,l.infoText=v.informativeText||n.specialDatesInformativeText||n.disabledDateInformativeText||null),l["class"]+=" "+e,!v&&!f&&(l["class"]=l["class"].replace("zdisabled",""),-1<l["class"].indexOf("is-selected")&&(l["class"]=l["class"].replace("is-disabled",""))))}}}}},{key:"_shouldAddClass",value:function(t,a,o){for(var l=e.Date.areDatesEqual.bind(e),n=0,s=a.length,r;n<s;n++)if(r=o?this._oldOpts[a[n]]:this._opts[a[n]],r){if(-1<r.indexOf(t.getDay()))return!0;for(var d=0,c=r.length;d<c;d++){var _=r[d],u=_.date;if("object"===_typeof(_)){if(u instanceof Date&&l(u,t))return!0;if(u){var p=new Date(+u.date);if(this._setYearAndMonth(p,t,_),l(p,t))return _}else if(_.startDate&&_.endDate){for(var m=["startDate","endDate"],h=0;2>h;h++)m[h]=new Date(+_[m[h]].date),this._setYearAndMonth(m[h],t,_);if((e.Date.isGreater(t,m[0])||l(m[0],t))&&e.Date.isGreater(m[1],t))return _}}}}}},{key:"_setYearAndMonth",value:function(e,t,a){a.repeatEveryYear&&e.setFullYear(t.getFullYear()),a.repeatEveryMonth&&e.setMonth(t.getMonth())}},{key:"_convertStringToObject",value:function(e){var t=this,a=function(a){var o=e[a],i=t._opts,l=t._dateFormat;t._isNotNull(o)&&("string"==typeof o?e[a]=i[a]=t._parseDateValue(o,l):o instanceof Array&&(e[a]=i[a]=o.map(function(e){if("object"===_typeof(e)&&!(e instanceof Date)){var o=e.date,i=t._checkDate.bind(t),n=t._parseVal.bind(t);return i(o,e)||i(o)||i(e.startDate)||i(e.endDate)?e:(o?e.date=n(o):e.startDate&&e.endDate&&(e.startDate=n(e.startDate),e.endDate=n(e.endDate)),e)}var s="disabledTimeList"===a,r=t._parseDateValue(e,s?t._timeFormat:l);return s?r.date.setSeconds(0,0):r.date.setHours(0,0,0,0),r})))};for(var o in e)a(o)}},{key:"_checkDate",value:function(e,t){return e=t?e:e?e.date:void 0,t=t||e,e&&e instanceof Date&&t.hasOwnProperty("isValid")}},{key:"_parseVal",value:function(e){return e=this._parseDateValue(e&&e.hasOwnProperty("isValid")&&e.isValid&&e.date||e,this._dateFormat),e.date.setHours(0,0,0,0),e}},{key:"_addUniqueClasses",value:function(e,t,a){var o=this._opts,i=t?t+" ":"",l=o.disabledMonths,n=o.disabledYears,s=!0,r;return r=this._shouldAddClass(e,["disabledDaysOfWeek","disabledDates"]),r||l&&-1<l.indexOf(e.getMonth())||n&&-1<n.indexOf(e.getFullYear())?i+="is-disabled zdisabled":r||a?s=!1:(r=this._shouldAddClass(e,["specialDaysOfWeek","specialDates"]),r&&(i+="zdatetimepicker--special")),s=r||s,s&&this._getCustomProps(s,i)}},{key:"_getCustomProps",value:function(e,t){var a=t+" ",o,i,l;if("object"===_typeof(e)){a+=e.className?" "+e.className:"",l=e.title||null;var n=this._opts.disabledDateInformativeText,s=this._opts.specialDatesInformativeText;(e&&e.informativeText||"boolean"==typeof e&&n||s)&&(-1<t.indexOf("is-disabled")&&n?o=n:-1<t.indexOf("zdatetimepicker--special")&&s?o=s:e&&e.informativeText&&(o=e.informativeText),o=o||void 0)}return i={class:a,infoText:o,title:l},i}},{key:"_bindArrowEvents",value:function(){for(var e=this._elementId,a=("#"+e+"-left-year,#"+e+"-right-year,#"+e+"-left-month-0,#"+e+"-right-month-0").split(","),o=0,l=a.length,n;o<l;o++)n=t(a[o]),n.length&&this._addEvents({arrowEvent:"click"},n)}},{key:"_getIconProps",value:function(t,a,o,i,l){return l=this._getI18NText(l),e.ZButton.getBtnProps({className:"zdatetimepicker__navbutton",isCE:this.isCE,customAttributes:{"aria-label":l,title:l},defaultIconClassName:"zdatetimepicker__icon",SVGIconId:t[o+"ButtonSVGIconId"],defaultSVGIconId:"#zc__svg--"+a+" zh-arrowicon",iconClassName:t[o+"ButtonIconClassName"],templateRender:!0,id:this._elementId+i})}},{key:"_getNavBtnProps",value:function(e,t,a){var o=this._opts.navigationBar,i=t===this._monthsPerView-1,l=o.monthNavigationButtons,n=o.yearNavigationButtons;a.isSplit="split"===o.navigationButtonsDisplayPattern,a["class"]=a.isSplit?"":" zdatetimepicker__navbaractionsonright",l&&this._getMonthNavBtnProps(a,o),n&&this._getYrNavBtnProps(a,o),a.isSplit?e.navigationBar=_objectSpread({},a,{lMonth:l&&!t,lYear:n&&!t,rMonth:l&&i,rYear:n&&i}):(a.lMonth=a.rMonth=l&&i,a.lYear=a.rYear=n&&i)}},{key:"_setArrowMainElement",value:function(e){var a=[];e.monthNavigationButtons&&(a=["-left-month-0","lMonthIcon","-right-month-0","rMonthIcon"]),e.yearNavigationButtons&&(a=[].concat(_toConsumableArray(a),["-left-year","lYearIcon","-right-year","rYearIcon"]));for(var o=0,l=a.length,n;o<l;o+=2)if(n=t("#"+this._elementId+a[o]),n.length){var s=e[a[o+1]];s.mainElement=n[0],n.attr(s.attrs)}}},{key:"_arrowClickHandler",value:function(e,t,a){var o=this._monthsPerView,l=this._opts.navigationBar,n=this._viewDate,s,r;r=new Date(+n);for(var d=this.element,c=1,_;c<=o;c++){if(_=1==c,t&&(1<e?s=this._moveMonth(r,_?e:1):s=this._moveMonth(n,_?e:c-1)),a&&(1<o?s=new Date(this._getFirstDate()):!s&&(s=new Date(n)),s.setFullYear(s.getFullYear()+e)),1<l.monthNavigationStep||1<l.yearNavigationStep)for(var u=["min","max"],p=void 0,m=0;2>m;m++)p=this._isBig(u[m],s),this["_"+u[m]+"Date"]&&p&&(s=new Date(+this["_"+u[m]+"Date"]));_&&s&&(n=this._viewDate=new Date(+s))}this._doNotBuildTime=!0,this._setPosition=!0,this._buildData(!0),this._isDropdown?(this._checkOptions(),this._buildDropdownNavElement(n.getMonth(),n.getFullYear())):a&&1===this._viewMode&&this._updateMonthClasses(d)}},{key:"_updateArrowState",value:function(e,a){var o=1<this._monthsPerView,i=this._disable.bind(this);e=e||this._viewDate;var l=this._elementId,n=this._minDate,s=this._maxDate,r=e.getFullYear(),d=e.getMonth(),c,_,u,p,m,h,g,v,y;n&&(_=n.getFullYear(),c=n.getMonth()),s&&(p=s.getFullYear(),u=s.getMonth());var f=1===r;m=f||c||_||u||p,h=f&&0===d||r<_||r===_&&d-1<c,g=r>p||r===p&&d+1>u,v=1===r||r-1<_||r-1===_&&d<c,y=r+1>p||r+1===p&&d>u;var k=m&&!o;(k||o&&0===a)&&(i(h,t("#"+l+"-left-month-0")),i(v,t("#"+l+"-left-year"))),(k||o&&a===this._monthsPerView-1)&&(i(g,t("#"+l+"-right-month-0")),i(y,t("#"+l+"-right-year"))),m||h&&f&&0===d||t("#"+l+"-left-month-0,#"+l+"-left-year,#"+l+"-right-month-0,#"+l+"-right-year").removeClass("is-disabled").removeAttr("aria-disabled disabled")}},{key:"_getYrNavBtnProps",value:function(e,t){e.lYearIcon||(e.lYearIcon=this._getIconProps(t,"fastbackward","previousYear","-left-year","prevYear")),e.rYearIcon||(e.rYearIcon=this._getIconProps(t,"fastforward","nextYear","-right-year","nextYear"))}},{key:"_handleYearArrowClick",value:function(e){var a=this._opts,o=t(e.target),i=e.currentTarget.getAttribute("id"),l=a.navigationBar.yearNavigationStep,n;o.closest(".zdatetimepicker__navbutton").hasClass("is-disabled")||(n=this._elementId+"-right-",this._arrowClickHandler(-1<i.indexOf(n+"year")||-1<i.indexOf(n+"month")&&0<this._viewMode?l:-l,void 0,!0)),this._triggerMonYrDecChange(e,"year",this._viewDate.getFullYear())}},{key:"_getMonthNavBtnProps",value:function(e,t){var a=this._getIconProps(t,"backward","previousMonth","-left-month-0","prevMonth"),o=this._getIconProps(t,"forward","nextMonth","-right-month-0","nextMonth");return e?void(!e.lMonthIcon&&(this._lMonthIcon=e.lMonthIcon=a),!e.rMonthIcon&&(this._rMonthIcon=e.rMonthIcon=o)):{lMonthIcon:a,rMonthIcon:o}}},{key:"_handleMonthArrowClick",value:function(e){var a=t(e.target),o=this._opts,i=e.currentTarget.getAttribute("id"),l=o.navigationBar.monthNavigationStep;a.closest(".zdatetimepicker__navbutton").hasClass("is-disabled")||(1<this._monthsPerView&&this._currentSelected&&(this._viewDate=new Date(+this._getFirstDate())),this._arrowClickHandler(l*(-1<i.indexOf(this._elementId+"-right-month")?1:-1),!0)),this._triggerMonYrDecChange(e,"month",this._viewDate.getMonth())}},{key:"_getQueryString",value:function(){for(var e=this._selectedDates,t=0,a=e.length;t<a;t++)this._queryString+="[data-time='"+ +this._resetTime(e[t])+"']",this._queryString+=","+(t==a-1?" .zdisabled)":"")}},{key:"name",get:function(){return"zdatepicker"}},{key:"attrs",get:function(){return{forElement:null,offset:null,title:null,position:"auto",format:"dd/MM/yyyy",displayType:"box",type:"popup",minDate:null,maxDate:null,displayWeekNumbers:!1,weekHeading:null,selectionType:"single",todayButtonLabel:null,clearButtonLabel:null,OKButtonLabel:null,closeSVGIconId:null,closeIconClass:null,cancelButtonLabel:null,selectionLimit:null,monthToBeShownOnOpen:null,yearToBeShownOnOpen:null,drilldownLevelOnOpen:null,isTitleHTMLEncoded:!1,selectedDateMonthViewIndex:null,todayButtonAction:"navigate-only",displayAdjacentMonthDates:!1,allowSelectionOfAdjacentMonthDates:!0,hideCancelButton:!1,monthsPerView:1,immediateCommit:!0,value:null,draggable:!1,height:null,width:null,weekendDays:"0,6",closeButton:!1,closeOnDateSelect:!0,closeOnBodyClick:!0,todayButton:!1,clearButton:!1,locale:null,positionAlterable:!0,timeZone:null}}},{key:"props",get:function(){return{closeIconClassName:null,commandBar:{},margin:{},animation:{},customHTMLAboveNavigationBar:null,customHTMLAboveCalendar:null,customHTMLBelowCalendar:null,navigationBar:{monthSwitcher:!0,yearSwitcher:!0,monthYearHeadingFormat:"MMM yyyy",monthYearSwitcherType:"drilldown",monthFormatInSwitcher:"MMM",navigationButtonsDisplayPattern:"split",togetherTypeNavigationButtonsPosition:"right",monthNavigationStep:1,yearNavigationStep:1,yearNavigationButtons:!0,monthNavigationButtons:!0,previousMonthButtonSVGIconId:null,dropdownStartYear:"THIS_YEAR-10",dropdownEndYear:"THIS_YEAR+10"},otherInputFormats:[],fixedTimeOptions:[],specialDates:[],disabledDates:[],disabledMonths:[],disabledYears:[],specialDaysOfWeek:[],disabledDaysOfWeek:[],disabledDateInformativeText:null,values:[],labels:{weekHeading:"Week",OKButtonLabel:"OK",cancelButtonLabel:"Cancel",todayButtonLabel:"Today",clearButtonLabel:"Clear",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysAbbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsAbbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],close:"Close",nextMonth:"Next Month",nextYear:"Next Year",prevMonth:"Previous Month",prevYear:"Previous Year",nextDecade:"Next Decade",prevDecade:"Previous Decade",nextCentury:"Next Century",prevCentury:"Previous Century"}}}},{key:"EVENTS",get:function(){return["beforefocus","beforeopen","open","beforeclose","close","dateselect","todaybuttonclick","change","cancel","clear","beforedrilldown","drilldown","afterdrilldown","datemouseover","monthchange","yearchange","decadechange","beforedatecellrender","dragstart","drag","dragend"]}},{key:"SELECTORS",get:function(){var e=this.isCE;return{option:e?"z-":"option",select:"".concat(e?"z-combobox":"select")}}}]),o}(e.CoreComponent);e.registerComponent("ZDatePicker",O),function(e){var t=e.zdatepicker.Templates,a=e.Templates.Utilities;t.children=function(o){return ZT.html(tO108(),"callout"===o.displayType&&ZT.html(tO109()),o.title&&t.title(o.title),1<o.monthsPerView?ZT.html(tO110(),e.iterateData(o.monthsPerView,function(e,a){return ZT.html(tO111(),t.month(o.month[a]),t.drilldownView(o.month[a]))})):ZT.html(tO112(),t.month(o.month[0]),t.drilldownView(o.month[0])),o.cBar&&!o.isCBar&&a.commandBar(o.cBar))},t.drilldownView=function(e){return ZT.html(tO113(),e.monthDrilldown&&t.drilldown(e.monthDrilldown),e.yearDrilldown&&t.drilldown(e.yearDrilldown),e.decadeDrilldown&&t.drilldown(e.decadeDrilldown))},t.month=function(e){return ZT.html(tO114(),e.style,t.navBar(e.navigationBar),e.displayWeekNumbers&&t.weekNumbers(e),e.className,e.days.map(function(e){return ZT.html(tO115(),e["class"],e.value)}),e.dates.map(function(e){return ZT.html(tO116(),e.map(function(e){return ZT.html(tO117(),e["class"],e.time,e.title,e.text,e.infoText&&ZT.html(tO118(),e.infoText))}))}))};var o=e.zbutton.Templates.container;t.navBar=function(t){return ZT.html(tO119(),t["class"],t.isLMonthYear&&t.isSplit?ZT.html(tO120(),t.lYear&&o(t.lYearIcon),t.lMonth&&o(t.lMonthIcon)):"",t.monthSelect&&!t.month&&(t.yrFirst?e.createComboBox(t.yearSelect):e.createSelect(t.monthSelect)),t.isMonthYearNav&&ZT.html(tO121(),t.cursorCls,t.month&&ZT.html(tO122(),t.month),t.year&&ZT.html(tO123(),t.year)),t.yearSelect&&!t.year&&(t.yrFirst?e.createSelect(t.monthSelect):e.createComboBox(t.yearSelect)),t.isRMonthYear?ZT.html(tO124(),!t.isSplit&&t.lYear&&o(t.lYearIcon),!t.isSplit&&t.lMonth&&o(t.lMonthIcon),t.rMonth&&o(t.rMonthIcon),t.rYear&&o(t.rYearIcon)):"")},t.drilldown=function(e){return ZT.html(tO125(),e.view,e.style,t.navBar(e.navigationBar),e.cells&&ZT.html(tO126(),e.cells.map(function(e){return e.isTr?ZT.html(tO127()):ZT.html(tO128(),e["class"],e.attr,e.value)})))},t.title=function(t){return ZT.html(tO129(),t.value&&ZT.html(tO130(),ZT.customHTML(t.value),t.closeButton&&e.zbutton.Templates.container(t.closeSVGProps)))},t.weekNumbers=function(e){return ZT.html(tO131(),e.weekTitle,e.weekNumbers.map(function(e){return ZT.html(tO132(),e)}))}}(ZComponents);var P=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(e,a){this._userOptions=t.extend({},a),this._isSeparate="separate"===this._opts.selectionType,this._assignValues(),this._setTemplate(),_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments)}},{key:"_assignValues",value:function(){var e=this,t=this._opts;["from","to"].forEach(function(a){if(a+="Value",e._parseValue(a,t[a]),e._opts.excludeWeekend&&t[a]&&e._isWeekend(t[a])&&(t[a]=null),t[a]){var o="fromValue"===a;if(e["_"+a]=e[o?"_lastFrom":"_lastTo"]=new Date(+t[a]),e["_"+a].setHours(0,0,0,0),o){var i=e._fromValue;e._viewDate=new Date(+i),e._isSeparate||(e._opts.value=new Date(+i),e._currentSelected=new Date(+i))}}else e["_"+a]=null}),t.fromValue||this._isSeparate||(this._opts.value=void 0,this._currentSelected=void 0)}},{key:"_setTemplate",value:function(){this._opts.templateName="zdate"+(this._isSeparate?"range":"")+"picker"}},{key:"_bindEvents",value:function(){_get(_getPrototypeOf(o.prototype),"_bindEvents",this).call(this),this._addOtherEvents()}},{key:"_addOtherEvents",value:function(){var e=this;this._isSeparate||["enter","leave"].forEach(function(t){return e.element.on("mouse"+t+"."+e.name,e.delegateList,e["_mouse"+("enter"===t?"over":t)+"Handler"].bind(e))})}},{key:"_postRender",value:function(e,t){_get(_getPrototypeOf(o.prototype),"_postRender",this).apply(this,arguments),t.excludeWeekend&&(this._data.className+=" zdatetimepicker__excludeweekend")}},{key:"_resetDates",value:function(){this._lastFrom=null,this._lastTo=null,this._unsetDates(!0),this._setUndefined(["fromValue","toValue"],""),this._setHours(),(this._minDate||this._maxDate)&&this._checkViewDate(this._viewDate),this._OK&&this._OK.removeClass("is-disabled")}},{key:"_assignViewDate",value:function(){(this._minDate||this._maxDate)&&this._checkViewDate(this._getNewDate()),this._isSeparate&&this._setSeparateDates()}},{key:"_checkValueValidity",value:function(){var e=this._opts.fromValue,t=this._opts.toValue;if(e&&!this._dateWithInRange(e)||t&&!this._dateWithInRange(t)||this._isGreater(e,t))return this._resetDates(),!0}},{key:"_validateOpts",value:function(e){var t=this._opts,a=t.fromValue,i=t.toValue;if(this._validateMinMaxDays&&this._validateMinMaxDays(),this._checkValueValidity(),e||_get(_getPrototypeOf(o.prototype),"_validateOpts",this).call(this),t.todayButtonAction="navigate-only",a=t.fromValue,i=t.toValue,a&&i){var l=+i-+a,n=l/86400000+1;-1<n&&(t.minDaysToSelect&&n<t.minDaysToSelect||t.maxDaysToSelect&&n>t.maxDaysToSelect)&&this._resetDates()}(!this._isNotSet&&(a&&!i||!a&&i)||this._isDisabledDate(a)||this._isDisabledDate(i))&&this._resetDates()}},{key:"_isDisabledDate",value:function(e){if(e){var t=this._getUniqueClass(e,"");return t&&-1<t["class"].indexOf("is-disabled")}return!1}},{key:"_unsetDates",value:function(e){var t=this._opts;e?(t.fromValue=this._lastFrom,t.toValue=this._lastTo):(t.fromValue=this._fromValue?new Date(+this._fromValue):null,t.toValue=this._toValue?new Date(+this._toValue):null),t.fromValue||(this._opts.value=void 0,this._currentSelected=void 0),this._lastFrom=t.fromValue,this._lastTo=t.toValue}},{key:"_updateOKClass",value:function(e){var t=this._fromValue,a=this._toValue;if(this._OK&&(!this._opts.immediateCommit||e)){var o;t&&a||!t&&!a?o=!1:(!a||!t)&&(o=!0),this._disable(o,this._OK)}}},{key:"_isMinOrMaxDaysPresent",value:function(){var e=this._opts;return"number"==typeof e.minDaysToSelect&&"number"==typeof e.maxDaysToSelect}},{key:"_mousedownHandler",value:function(e){var a=t(e.target),i=this._opts;if(!(!a.closest(this.delegateList).length||i.excludeWeekend&&a.closest(".zdatetimepicker--weekend").length)){var l="weeks"===i.rangeType,n=this._isSeparate,s=this._isDrilldown,r=!1,d;if(n&&(d=this._setData(e),this._setPartMode(d)),this._dateSelect=!0,0===this._viewMode&&s||!s){this._doesExist(this._clear)&&this._traverseBtns("clearButton","is-disabled",!1),a=a.closest(".zdatetimepicker__date"),a.length||(a=t(e.target).closest(".zdatetimepicker__adjacentmonthdate"),r=!0);var c=this._getDateVal(a);r&&(this._viewDate=new Date(+c),this._buildData(!0),a=this._getDateElem(c,n?this._getPartEle():void 0)),!n&&this._fromValue&&this._toValue&&(this._setUndefined(["fromValue","toValue","weekStart","weekEnd","lastHovered","currentSelected"],""),i.immediateCommit&&this._unsetDates(!0),this._clearDateClass(),l&&this._setWeekDates(this._getDateData(a).time)),this._lastHovered=a;var _=+c,u=!1;if(n)return this._separateMousedown(e,d,a,c),void this._dispatchEvent(d+"valueselect",e,this["get"+(d[0].toUpperCase()+d.slice(1))+"Value"]());if(l)this._weekStart&&this._weekEnd&&(this._fromValue=this._weekStart,this._toValue=this._weekEnd);else if(this._fromValue){var p=new Date(_);_>this._fromValue?this._toValue=p:(u=!0,this._toValue=new Date(+this._fromValue),this._fromValue=p)}else this._fromValue=c;i.value=new Date(+this._fromValue),this._updateOKClass();var m="both"!==i.selectionDirection||this._isMinOrMaxDaysPresent();l||m?this._updateObjects(void 0,m):this._setDateClass(this._toValue?" is-selected "+(u?" is-start "+(a.next().hasClass("is-disabled")?" zh-disabledahead":""):" is-end"+(1===this._getDateData(a).text||this._isEndFirst(this._toValue)?" is-end-first":"")):" is-selected",!0,a),a.is(".zdatetimepicker--today")&&this._setDateClass("zdatetimepicker--todayinrange",!1,a);var h=(!this._toValue||u)&&("backward"!==i.selectionDirection||this._toValue)?"From":"To";this._dispatchEvent(h.toLowerCase()+"valueselect",e,this["get"+h+"Value"]()),i.immediateCommit&&this._fromValue&&this._toValue&&this._OKClickHandler(e)}else _get(_getPrototypeOf(o.prototype),"_mousedownHandler",this).call(this,e);this._dateSelect=!1}}},{key:"_getInRangeCls",value:function(e){var t=this._getNewDate(),a=new Date(+e);return t.setHours(0,0,0,0),a.setHours(0,0,0,0)," zdatetimepicker--dateinrange"+(+t==+a&&this._todayHovered?" zdatetimepicker--todayinrange":"")}},{key:"_restoreValues",value:function(e){var t=this._opts.fromValue,a=this._opts.toValue;this._fromValue=new Date(+t),this._toValue=new Date(+a),e&&(this._opts.value=new Date(+t)),this._valueUpdate=!0,this._doesExist(this._clear)&&this._traverseBtns("clearButton","is-disabled",!1),this._removeOkDisabled()}},{key:"_removeOkDisabled",value:function(){this._OK&&this._OK.removeClass("is-disabled")}},{key:"_refreshPicker",value:function(e){if(this._isSeparate){this._part=e;var t=this["_"+("from"===e?"start":"end")+"Date"],a=new Date(+(this["_"+e+"Value"]?+this["_"+e+"Value"]:+t));this._oldDate=new Date(+t),this._viewDate=a,this._updateViewMode()}else this._oldDate=new Date(+this._oldViewDate);_get(_getPrototypeOf(o.prototype),"_refreshPicker",this).call(this),this._isSeparate&&(this._valueRemoval||this._oldDate.getFullYear()===this._viewDate.getFullYear()&&this._oldDate.getMonth()===this._viewDate.getMonth())&&this._buildData(void 0,e),this._valueRemoval=!1}},{key:"_closePicker",value:function(e){var t=this._fromValue,a=this._toValue,i=this._opts,l=i.fromValue,n=i.toValue,s=this._valueUpdate,r=this._setUndefined.bind(this);return this._isSeparate?(this._valueUpdate=!1,void this._separateCloseHandler(e)):void(this._oldViewDate=new Date(+this._viewDate),this._viewDate=new Date(+this._fromValue),l&&n?this._restoreValues(!0):t&&!a?(this._valueUpdate=!1,r(["fromValue"],""),this._removeOkDisabled()):!s&&(this._opts.value=null,this._resetDates(),this._assignViewDate()),this._updateObjects(),_get(_getPrototypeOf(o.prototype),"_closePicker",this).call(this),this._valueUpdate=!1)}},{key:"_isEndFirst",value:function(e){var t,a;return this._opts.excludeWeekend&&(t=new Date(+e),t.setDate(t.getDate()-1),a=this._isWeekend(t)),a}},{key:"_checkWeekend",value:function(e){return this._opts.excludeWeekend&&!this._isWeekend(e)||!this._opts.excludeWeekend}},{key:"_isNotAdjacent",value:function(e){return this._prevClass&&0>this._prevClass.indexOf("zdatetimepicker__adjacentmonthdate")&&0>e.indexOf("zdatetimepicker__adjacentmonthdate")}},{key:"_getClasses",value:function(e,a,i){var l=+e,n=_get(_getPrototypeOf(o.prototype),"_getClasses",this).call(this,e,a),s=this._opts,r=this._fromValue,d=this._toValue,c=!1,_=this._checkWeekend(e),u=this._lastHovered,p="object"===_typeof(n)?n["class"]:n,m=r&&!d||"weeks"===s.rangeType&&this._update,h,g;return g=u&&+t(u).attr("data-time"),"weeks"===s.rangeType&&this._update&&(h=g,h&&(this._setWeekDates(h),l>=+this._weekStart&&l<=+this._weekEnd&&_&&(c=!0,p+=" zdatetimepicker--weekselection"),l===+this._weekEnd&&(p+=" zh-lastselection"))),this._isSeparate?p+=this._addSeparateClasses(e,p):(r&&d||m)&&(p=this._setContinuousClasses(e,p,h,c,i,g)),"object"===_typeof(n)?n["class"]=p:n=p,this._prevClass=n["class"]||n,this._prevClass}},{key:"_OKClickHandler",value:function(e){this._unsetDates(),this._valueUpdate=!0;var t=this._opts.immediateCommit;(this._opts.closeOnDateSelect&&t||!t)&&this._closePicker(e),this._dispatchEvent("change",e,this._getSelectedValue(),void 0,!!(e&&e.originalEvent)),this._OK&&this._removeFocus(this._OK)}},{key:"_dispatchEvent",value:function(e){if(e!==this._event)return this._event=e,_get(_getPrototypeOf(o.prototype),"_dispatchEvent",this).apply(this,arguments)}},{key:"_getSelectedValue",value:function(){return t.extend(!0,{},this.getFromValue(),this.getToValue())}},{key:"_getDateVal",value:function(e){return e&&e.length?new Date(+e.attr("data-time")):void 0}},{key:"_setFromToValue",value:function(){this._assignValues(),this._validateOpts(),this._assignViewDate(),this._isSeparate&&(this._viewDate=new Date(+this["_"+("to"===this._part?"end":"start")+"Date"])),this._buildData(!0,void 0,!0),this._dispatchEvent("change",void 0,this._getSelectedValue())}},{key:"_getValueObj",value:function(t,a){var o=this._opts,i=e.Date.formatDate(t,o.format),l;return l={},_defineProperty(l,a+"Value",new Date(+t)),_defineProperty(l,"options",o),_defineProperty(l,a+"ValueString",i),_defineProperty(l,"element",this.element),_defineProperty(l,"translated"+a[0].toUpperCase()+a.slice(1)+"Value",this._translateEToA(e.Date.formatDate(t,o.format,o.labels))),l}},{key:"getFromValue",value:function(){var e=this._opts.fromValue;if(e)return this._getValueObj(e,"from")}},{key:"getToValue",value:function(){var e=this._opts.toValue;if(e)return this._getValueObj(e,"to")}},{key:"setFromValue",value:function(e){this._opts.fromValue=e,e&&this._opts.toValue&&this._setFromToValue()}},{key:"setToValue",value:function(e){this._opts.toValue=e,this._opts.fromValue&&e&&this._setFromToValue()}},{key:"clearSelection",value:function(){this._clearClickHandler(void 0,!0,!0),this._dispatchEvent("change",void 0,this._getSelectedValue())}},{key:"_destroy",value:function(){this._isSeparate&&this._isDropdown&&(this._destroyDropdown(),this._destroyedDD=!0),this._isSeparate=!1,this._prevClass=void 0,this._setUndefined(["fromValue","toValue"],""),_get(_getPrototypeOf(o.prototype),"_destroy",this).call(this)}},{key:"_getMonthClasses",value:function(e){var t=this._fromValue,a=this._toValue,i=this._viewDate,l=this._isSeparate,n=_get(_getPrototypeOf(o.prototype),"_getMonthClasses",this).call(this,e);return(!l&&t&&a||l)&&(this._checkPart("from")&&t.getMonth()===e&&t.getFullYear()===i.getFullYear()||this._checkPart("to")&&a.getMonth()===e&&i.getFullYear()===a.getFullYear())&&(n+=" is-selected"),this._isSeparate||"both"===this._opts.selectionDirection||(n=this._updateDirectionCls(n,e,"month")),n}},{key:"_getDrilldownData",value:function(e,t,a){if(this._isSeparate){this._setData(a);var i=e.view;this["_"+i+"EventBinded"]=this._data[this._part][i+"EventBinded"];var l=_get(_getPrototypeOf(o.prototype),"_getDrilldownData",this).apply(this,arguments);return this._data[this._part][i+"Drilldown"]=this._data.month[i+"Drilldown"],this._setPartMode(),l}return _get(_getPrototypeOf(o.prototype),"_getDrilldownData",this).apply(this,arguments)}},{key:"_setDrilldownClass",value:function(e){if(this._isSeparate){var t=this._data[this._part].month[0],a=e.is("zdatetimepicker__year")?"year":"month";t[a+"Drilldown"]&&t[a+"Drilldown"].cells[e.index()]["class"].replace(/is-selected/g,"")}else _get(_getPrototypeOf(o.prototype),"_setDrilldownClass",this).apply(this,arguments)}},{key:"_buildDrilldownView",value:function(e){if(_get(_getPrototypeOf(o.prototype),"_buildDrilldownView",this).apply(this,arguments),this._isSeparate){this._updateDrilldownEle();var t=e.view+"EventBinded";this._data[this._part][t]||(this._data[this._part][t]=!0)}}},{key:"_drilldownClickHandler",value:function(e){this._isSeparate&&(this._viewMode=this._toggleViewMode(e)),_get(_getPrototypeOf(o.prototype),"_drilldownClickHandler",this).call(this,e)}},{key:"_updateDrilldownEle",value:function(){if(0!==this._viewMode)for(var e=["month","year","decade"],t=this._getPartEle(),a=0,o=e.length,l;a<o;a++)l=t.find(".zdatetimepicker__"+e[a]+"drilldown"),l.length&&(this["_"+e[a]+"DrillDownElement"]=l)}},{key:"_setPartMode",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._part;this._isSeparate&&(this._data[e].viewMode=this._viewMode)}},{key:"_toggleViewMode",value:function(e){return t(e.target).closest(".zdatetimepicker__monthcontainer").index()}},{key:"_bindDrillDownClickEvent",value:function(e,t){this._isSeparate&&(t=this._getPartEle().find(".zdatetimepicker")),_get(_getPrototypeOf(o.prototype),"_bindDrillDownClickEvent",this).call(this,e,t)}},{key:"_setViewMode",value:function(e,t,a){this._isSeparate&&(a=this._getPartEle().find(".zdatetimepicker")),_get(_getPrototypeOf(o.prototype),"_setViewMode",this).call(this,e,t,a),this._setPartMode()}},{key:"_checkPart",value:function(e){var t=this._isSeparate;return(t&&this._part===e||!t)&&this["_"+e+"Value"]}},{key:"_getYearClasses",value:function(e){var t=this._fromValue,a=this._toValue,i=this._isSeparate,l=_get(_getPrototypeOf(o.prototype),"_getYearClasses",this).apply(this,arguments);return(!i&&t&&a||i)&&(this._checkPart("from")&&t.getFullYear()===e||this._checkPart("to")&&a&&a.getFullYear()===e)&&(l+=" is-selected"),i||"both"===this._opts.selectionDirection||(l=this._updateDirectionCls(l,e,"year")),l}},{key:"_handleDecadeMousedown",value:function(e,t,a){if(this._isSeparate){var i=this._getPartIndex(e),l="_"+(0===i?"start":"end")+"Date";this[l]=this[l].setFullYear(a)}_get(_getPrototypeOf(o.prototype),"_handleDecadeMousedown",this).apply(this,arguments)}},{key:"_clearDateClass",value:function(){for(var e=this._data.month,t=0,a;t<this._monthsPerView;t++){a=e[t].dates,this._index=t;for(var o=0,l;o<a.length;o++){l=a[o];for(var n=0,s=l.length;n<s;n++)l[n]["class"]=l[n]["class"].replace(/zdatetimepicker--dateinrange|zdatetimepicker--todayinrange|is-selected|zdatetimepicker--weekselection|is-disabled zspecial|zdatetimepicker--disabledreplica|is-start|is-start-last|zh-lastrange|is-end-first|is-end/g,"")}}}},{key:"_addEndClass",value:function(e,t,a){return e+=(a?" ":this._getInRangeCls(t))+" is-end",!a&&(1===t.getDate()&&this._isNotAdjacent(e)||this._isEndFirst(t))&&(e+=" is-end-first"),e}},{key:"_updateObjects",value:function(e,t){var a=this;this._update=!0;var o=this._opts,l=this._data.month,n=o.selectionDirection,s=this._fromValue,r=this._toValue;"days"===o.rangeType&&("both"!==n&&s&&this._setLimits(function(){return a["_"+("backward"===o.selectionDirection?"max":"min")+"Date"]=new Date(+s)}),"number"==typeof o.maxDaysToSelect&&(this._setLimits(function(){a._getInvalidRange(o.maxDaysToSelect,+a._viewDate),a._setLimitValues()}),this._isDropdown&&(this._data.modifiedAttr=t?"minOrMax":void 0,this._checkOptions(),this._data.modifiedAttr=void 0)));for(var d=0,c;d<this._monthsPerView;d++){c=l[d].dates,this._index=d;for(var _=0,u;_<c.length;_++){u=c[_];for(var p=0,m=u.length,h;p<m;p++)(h=u[p],""!==h.text)&&(h["class"]=this._getClasses(new Date(h.time),new Date(+this._data.month[d].dates[1][0].time),h),(s&&r||!s&&!r)&&("both"!==n||"number"==typeof o.maxDaysToSelect)&&(h["class"]=this._clearSpecialCls(h["class"])))}}e||this._render(),this._update=!1}},{key:"_setContinuousClasses",value:function(e,t,a,o,i,l){var n=this._isNotAdjacent(t),s=+e,r=this._opts,d=this._fromValue,c=this._toValue,_=+d,u=+c,p=_!=u,m=this._checkWeekend(e),h=this._lastHovered,g=s>_,v=d&&!c||"weeks"===r.rangeType&&this._update,y=r.firstDayOfWeek+6;if(a=c||l,v){var f=r.selectionDirection,k=0>t.indexOf("is-disabled");k&&("forward"===f&&s<_||"backward"===f&&g)&&(t+=" is-disabled zspecial"),l&&("number"==typeof r.minDaysToSelect&&this._getInvalidRange(r.minDaysToSelect,s,!0)&&(t+=" zdatetimepicker--disabledreplica"),k&&"number"==typeof r.maxDaysToSelect&&this._getInvalidRange(r.maxDaysToSelect,s)&&(t+=" is-disabled zspecial"))}if(0>t.indexOf("zdatetimepicker__adjacentmonthdate"))if(t=this._updateDisabledCls(s,o,t),s===_||s===u){if(t+=" is-selected",s===_){var b=!1;if(p&&(h&&+this._getDateVal(h)!==_||c)?t+=this._getInRangeCls(e):b=!0,a&&s>a||"backward"===r.selectionDirection&&!c)t=this._addEndClass(t,e,b);else{t+=" is-start";var C=new Date(s);C.setDate(C.getDate()+1),(e.getDay()===y||r.excludeWeekend&&this._isWeekend(C)||new Date(e.getFullYear(),e.getMonth()+1,0).getDate()===e.getDate()&&n)&&(t+=" is-start-last")}}else t=this._addEndClass(t,e);}else if(p&&(g&&s<u||a&&!c&&(s>=_&&s<=a||s<=_&&s>=a))){m&&0>t.indexOf("is-disabled")&&(t+=this._getInRangeCls(e));var D=new Date(s),w=new Date(s),S;D.setDate(D.getDate()+1),w.setDate(w.getDate()-1),S=new Date(e.getFullYear(),e.getMonth()+1,0),(+S===s||a&&s===+a&&g||e.getDay()===y||r.excludeWeekend&&n&&(this._isWeekend(D)&&+D!==u||this._isWeekend(w)&&D.getMonth()!==e.getMonth())||1===e.getDate()&&e.getDay()===y&&n)&&(t+=" zh-lastrange")}else t=this._updateDisabledCls(s,o,t,!0);return t}},{key:"_mouseoverHandler",value:function(e){if(!this._isSeparate&&0===this._viewMode){var a=t(e.target),o=this._opts,i="weeks"===o.rangeType,l=this._fromValue,n=this._toValue;if(a=a.closest(".zdatetimepicker__date:not(.is-disabled):not(.zdatetimepicker--disabledreplica),.zdatetimepicker__adjacentmonthdate:not(.is-disabled):not(.zdatetimepicker--disabledreplica)"),!a.length||!i&&(!l||l&&n))return;if(a.closest(".zdatetimepicker--today").length&&(this._todayHovered=!0),i||l&&!n){var s=this._getDateData(a).time;if(i){if(l&&n&&s>=+l&&s<=+n)return;this._lastHovered=a}clearTimeout(this._timeout),this._timeout=setTimeout(this._updateObjects(),0)}this._lastHovered=a}}},{key:"_mouseleaveHandler",value:function(e){t(e.relatedTarget).is(".zdatetimepicker__date")||(this._lastHovered=null);var a=t(e.target),o=a.closest(".zdatetimepicker--todayinrange");o.length&&(this._todayHovered=!1,o.removeClass("zdatetimepicker--todayinrange")),"weeks"===this._opts.rangeType&&this._clearWeekSelection()}},{key:"_setLimitValues",value:function(){var e=this._tempSDate,t=this._oldMinDate,a=this._tempEDate,o=this._oldMaxDate,i=!t||e&&+e>+t?e:t,l=!o||a&&+a<+o?a:o;this._minDate=i?new Date(+i):i,this._maxDate=l?new Date(+l):l}},{key:"_reassignLimits",value:function(){this._preserved&&(this._minDate=this._oldMinDate,this._maxDate=this._oldMaxDate,this._preserved=!1)}},{key:"_setLimits",value:function(e){var t=this._fromValue,a=this._toValue;this._isSeparate||t&&!a?(!this._preserved&&(this._preserved=!0,this._oldMaxDate=this._maxDate?new Date(+this._maxDate):null,this._oldMinDate=this._minDate?new Date(+this._minDate):null),e()):this._reassignLimits()}},{key:"_updateDisabledCls",value:function(e,t,a,o){var i=this,l=["disabledDaysOfWeek","disabledDates","disabledMonths","disabledYears"].map(function(e){return!!i._opts[e].length});if(-1<l.indexOf(!0)&&(this._fromValue||t)){var n=new Date(e);n.setDate(n.getDate()+1),this._isDisabledDate(n)&&(e===+this._fromValue?a+=" zh-disabledahead":"weeks"===this._opts.rangeType&&o?a+=" zh-lastselection":0>a.indexOf("zh-lastrange")&&(a+=" zh-lastrange"))}return a}},{key:"_clearSpecialCls",value:function(e){return-1<e.indexOf("zspecial")&&(e=e.replace(/is-disabled|zspecial/g,"")),e}},{key:"_setAttribute",value:function(e,t){var a=this._opts;a[e]=t;var i=!1,l=!1;this._isNotSet=!1;if(!(-1<["selectionDirection","rangeType","excludeWeekend","minDaysToSelect","maxDaysToSelect","fromLabel","toLabel","selectionType","fromValue","toValue"].indexOf(e)))!this._isSeparate&&-1<["disabledDaysOfWeek","specialDaysOfWeek","specialDates","disabledDates"].indexOf(e)?(_get(_getPrototypeOf(o.prototype),"_setAttribute",this).apply(this,arguments),this._updateObjects()):"navigationBar"===e?(this._id&&(this._elementId=this._id),this._emptyValues(!0),l=!0):"todayButtonAction"===e?a.todayButtonAction="navigate-only":l=!0;else if("fromValue"===e||"toValue"===e)this._isNotSet=!a.toValue||!a.fromValue,this._setFromToValue();else if(this._isSeparate&&("fromLabel"===e||"toLabel"===e)){var n=-1<e.indexOf("from")?"from":"to";this._data[n].month[0].label=t,i=!0}else if("selectionType"===e){var s=this._isSeparate="separate"===t;this._emptyValues(),this._monthsPerView=s?1:this._opts.monthsPerView,this["_"+(s?"remove":"add")+"OtherEvents"](),s&&(a.value=null),this._data.modifiedAttr="navBar",this._setTemplate(),this._reInit=!0}else"excludeWeekend"===e?this._updateClass("zdatetimepicker__excludeweekend",!t):("minDaysToSelect"===e||"maxDaysToSelect"===e)&&this._validateMinMaxDays();if(l&&_get(_getPrototypeOf(o.prototype),"_setAttribute",this).apply(this,arguments),-1<["minDate","maxDate"].indexOf(e)){var r=this._checkValueValidity();r&&this._dispatchEvent("change",void 0,this._getSelectedValue())}this._domChanged=this._domChanged||i}},{key:"_emptyValues",value:function(e){this._data.from=this._data.to=this._currentSelected=null,this._data.month=[],e||(this._monthHeader=this._yearHeader=void 0)}},{key:"_removeOtherEvents",value:function(){var e=this;["enter","leave"].forEach(function(t){return e.element.off("mouse"+t+"."+e.name,e.delegateList)})}},{key:"_separateMousedown",value:function(e,t,a,o){var i=this._opts,l="_"+t+"Value";this._part=t,this[l]&&this._select(!1,this._getDateElem(this[l],this._getPartEle(t)),!0),"to"===t&&a.hasClass("is-selected")?this._toValue=null:(this[l]=o,this._viewDate=new Date(+o)),this._buildData(!0,t,a),this._commitValues(e),this._dateSelect=!1}},{key:"_commitValues",value:function(e){this._fromValue&&this._toValue&&this._opts.immediateCommit&&this._OKClickHandler(e),this._updateOKClass()}},{key:"_constructData",value:function(){var e=this._isSeparate,t=this._data.rendered;e?t&&!this._reInit?this._constructPart(this._part):(!this._id&&(this._id=this._elementId),this._monthsPerView=1,this._constructPart("from"),this._constructPart("to"),this._elementId=this._id):_get(_getPrototypeOf(o.prototype),"_constructData",this).call(this)}},{key:"_constructPart",value:function(e){this._setData(e),this._part=e;var t=this._data[e];t?this._data.month=t.month:this._data.month[0]=null,this._updateViewMode(e),"number"==typeof this._viewMode&&0!==this._viewMode?this._generateContent():_get(_getPrototypeOf(o.prototype),"_constructData",this).call(this),this._storeData()}},{key:"_arrowEventHandler",value:function(e){this._setData(e),_get(_getPrototypeOf(o.prototype),"_arrowEventHandler",this).call(this,e)}},{key:"_bindArrowEvents",value:function(){var e;this._isSeparate&&(e=this._id,this._elementId=e+"zfrom",_get(_getPrototypeOf(o.prototype),"_bindArrowEvents",this).call(this),this._elementId=e+"zto"),_get(_getPrototypeOf(o.prototype),"_bindArrowEvents",this).call(this),e&&(this._elementId=e)}},{key:"_buildData",value:function(e,t,a){if(this._isSeparate&&this._data.rendered&&!this._reInit){t=t||this._part;var i="from"===t?"to":"from",l="boolean"==typeof a,n;if(l||(n=a),this[this._getSegment()]=new Date(+this._viewDate),n){var s=this._getDateEleIndex(n),r=this._data[t].month[0].dates[s[1]][s[2]];this["_"+t+"Value"]?r["class"]+=" is-selected":n.hasClass("is-selected")&&(r["class"]=r["class"].replace(/is-selected/g,""))}a&&this._constructPart(i),(!a||this._fromValue&&this._toValue||l&&a)&&this._constructPart(t),this._reInit||this._render()}else this._isSeparate&&this._assignViewDate(),_get(_getPrototypeOf(o.prototype),"_buildData",this).apply(this,arguments)}},{key:"_setSeparateDates",value:function(){this._startDate=new Date(+(this._fromValue||this._viewDate)),this._endDate=new Date(+(this._toValue||this._viewDate)),this._startDate.setHours(0,0,0,0),this._endDate.setHours(0,0,0,0)}},{key:"_updateLimits",value:function(e){var t=this,a=this._fromValue,o=this._toValue,i=this._opts.maxDaysToSelect;e&&a?this._setLimits(function(){var o=t._getSeparateRange(a,e);t._tempSDate=o[0],t._tempEDate=i?o[1]:null,t._setLimitValues()}):!e&&o?this._setLimits(function(){var a=t._getSeparateRange(o,e);t._tempSDate=i?a[1]:null,t._tempEDate=a[0],t._setLimitValues()}):this._reassignLimits()}},{key:"_addSeparateClasses",value:function(e,t){var a=+e,o="",i=this._fromValue,l=this._toValue,n="to"===this._part;return 0>t.indexOf("zdatetimepicker__adjacentmonthdate")&&(i&&!l?!n&&a===+i&&(o+=" is-selected"):i&&l&&(n?a===+l&&(o+=" is-selected"):a===+i&&(o+=" is-selected"))),o}},{key:"_setArrowLimits",value:function(e){this._updateLimits("to"===e),this._elementId=this._id+"z"+e,this._updateArrowState(this._data[e].viewDate)}},{key:"_updateArrows",value:function(e){this._setArrowLimits(e),this._setArrowLimits("to"===e?"from":"to")}},{key:"_setPart",value:function(e){if(this._isSeparate)return e.type&&"string"==typeof e.type&&(e=this._getPartIndex(e)),"number"==typeof e&&(e=0===e?"from":"to"),this._part=e,this._elementId=this._id+"z"+e,e}},{key:"_updateDropdownEle",value:function(e,a){var o=this._data.month[0],i=t("#"+this._elementId+"-"+e+"-header"),l=o&&o.navigationBar;i.length&&(o||a)&&(this["_"+e+"Header"]=i,l&&(o.navigationBar[e+"Select"].mainElement=i))}},{key:"_setData",value:function(e){if(this._isSeparate&&e&&"boolean"!=typeof e){e=this._setPart(e);var t="from"===e;return this._data.month=this._data[e]?this._data[e].month:[],this._updateLimits(!t),!this._skipReset&&this._fromValue&&!t&&+this._endDate<+this._fromValue&&(this._endDate=new Date(+this._minDate)),this._viewDate=new Date(+(t?this._startDate:this._endDate)),this._isDrilldown?this._updateDrilldownEle():(this._updateDropdownEle("month"),this._updateDropdownEle("year")),e}}},{key:"_fillDates",value:function(e,t,a){this._isSeparate&&(a=-1),_get(_getPrototypeOf(o.prototype),"_fillDates",this).call(this,e,t,a)}},{key:"_getDateData",value:function(){var e=this._data[this._part];return this._isSeparate&&e&&(this._data.month=e.month),_get(_getPrototypeOf(o.prototype),"_getDateData",this).apply(this,arguments)}},{key:"_getPartEle",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._part;return t(this.element.find(".zdatetimepicker__list")["from"===e?0:1])}},{key:"_updateViewMode",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._part;if(this._isSeparate){var t=this._data[e];this._viewMode=t&&"number"==typeof t.viewMode?t.viewMode:this._getViewMode()}}},{key:"_getPartIndex",value:function(e){return this._viewMode=this._toggleViewMode(e),t(e.target).closest(".zdatetimepicker__list").index()}},{key:"_setArrowMainElement",value:function(){this._isSeparate&&(this._elementId=this._id+"z"+this._part),_get(_getPrototypeOf(o.prototype),"_setArrowMainElement",this).apply(this,arguments)}},{key:"_getSegment",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._part;return"_"+("from"===e?"start":"end")+"Date"}},{key:"_updateRange",value:function(){this._isSeparate&&(this[this._getSegment()]=new Date(+this._viewDate))}},{key:"_callRender",value:function(e,t,a){this._setData(a),_get(_getPrototypeOf(o.prototype),"_postEachRender",this).call(this,e)}},{key:"_postEachRender",value:function(e,t){if(this._isSeparate){"selectionType"!==t.modifiedAttr&&t.rendered||(this._data.className+=" zdatetimepicker--group"),this._updateRange();var a=this._part,i=this._data.modifiedAttr;this._callRender(e,t,"from"===a?"to":"from"),this._data.modifiedAttr=i,this._callRender(e,t,a)}else _get(_getPrototypeOf(o.prototype),"_postEachRender",this).call(this,e,t)}},{key:"_storeData",value:function(){if(!this._data.rendered||this._reInit){var a=this._part;this[this._getSegment()]=new Date(+this._viewDate);var o=t.extend(!0,{},this._data.month[0]);o.label=e.encodeHTML(this._opts[a+"Label"]||this._getI18NText(a+"Label")),this._data[a]={month:[o]}}}},{key:"_resetSeparateType",value:function(){this._reassignLimits(),this._resetDates(),this._assignViewDate()}},{key:"_separateCloseHandler",value:function(e){this._opts.fromValue&&this._opts.toValue&&this._restoreValues();var t=this._fromValue,a=this._toValue;(!t||a)&&(t||!a)&&this._valueUpdate||(this._valueRemoval=!0,this._select(!1,this._getDateElem(t||a,this._getPartEle(t?"from":"to")),!0),this.element.find(".is-selected").removeClass("is-selected")),(!(t||a)||this._valueRemoval)&&this._resetSeparateType(),this._refreshPicker("from"),this._refreshPicker("to"),("inline"!==this._opts.type||this._manualClose)&&this._closePickerHandler(e)}},{key:"_getInvalidRange",value:function(e,t,a){--e;var o=+this._fromValue,i=this._getValidDate(-1,new Date(o),e),l=this._getValidDate(1,new Date(o),e),n;return a?n=t<=o&&t>+i||t>=o&&t<+l:(this._tempEDate=l,this._tempSDate=i,t&&(n=t<+i||t>+l)),n}},{key:"_validateMinMaxDays",value:function(){var e=this._opts;this._isMinOrMaxDaysPresent()&&e.minDaysToSelect>e.maxDaysToSelect&&(e.maxDaysToSelect=null)}},{key:"_getSeparateRange",value:function(e,t){for(var a=t?1:-1,o=["min","max"],l=[],n=0;n<o.length;n++){var s=this._opts[o[n]+"DaysToSelect"],r=new Date(+e);"number"==typeof s&&(--s,r=this._getValidDate(a,r,s,t)),l.push(r)}return l}},{key:"_getValidDate",value:function(e,t,a){var o=0;for(t=new Date(t.getTime());o!==a;)t.setDate(t.getDate()+e),this._checkWeekend(t)&&!this._getUniqueClass(t)&&o++;return t}},{key:"_updateDirectionCls",value:function(e,t,a){var o=this._fromValue,i="forward"===this._opts.selectionDirection,l;return o&&!this._toValue&&0>e.indexOf("is-disabled")?("month"===a?l=this._viewDate.getFullYear()===o.getFullYear()&&(i&&t<o.getMonth()||!i&&t>o.getMonth()):"year"==a&&(l=i&&t<o.getFullYear()||!i&&t>o.getFullYear()),l&&(e+=" is-disabled zspecial")):e=this._clearSpecialCls(e),e}},{key:"_setWeekDates",value:function(e){var t=new Date(e);t.setDate(t.getDate()-t.getDay()),this._weekStart=this._resetDateLimit(new Date(+t),1),this._weekEnd=this._resetDateLimit(new Date(t.getFullYear(),t.getMonth(),t.getDate()+6),-1)}},{key:"_resetDateLimit",value:function(e,t){for(var a=this._opts,o=this._opts.excludeWeekend,i=this._getDateElem(e);i.hasClass("is-disabled")||o&&this._isWeekend(e);)e.setDate(e.getDate()+t),i=this._getDateElem(e);return a.minDate&&this._isGreater(a.minDate,e)?e=new Date(+a.minDate):a.maxDate&&this._isGreater(e,a.maxDate)&&(e=new Date(+a.maxDate)),e}},{key:"_clearWeekSelection",value:function(){var e=this._fromValue,t=this._toValue;(e&&t||!e&&!t)&&this.element.find(".zdatetimepicker--weekselection").length&&(this._setUndefined(["weekStart","weekEnd"],""),this._updateObjects())}},{key:"_setClearBtnCls",value:function(e){_get(_getPrototypeOf(o.prototype),"_setClearBtnCls",this).call(this,e,!this._fromValue&&!this._toValue,!0)}},{key:"_clearClickHandler",value:function(e,t,a){var l=this._opts;if(this._isSeparate){for(var n=["from","to"],s=this._part,r=0,d;r<n.length;r++)d=this["_"+n[r]+"Value"],this._part=n[r],d&&this._select(!1,this._getDateElem(d,this._getPartEle(n[r])),!0);this._part=s,this._setData(this._part)}else this._clearDateClass();(l.immediateCommit||a)&&(this._lastFrom=null,this._lastTo=null,this._unsetDates(!0)),this._setUndefined(["fromValue","toValue"],""),a&&(this._viewDate=this._getNewDate(),this._checkViewDate(this._viewDate),this._buildData()),_get(_getPrototypeOf(o.prototype),"_clearClickHandler",this).apply(this,arguments),(this._isSeparate||"days"===l.rangeType&&"both"!==l.selectionDirection||this._isMinOrMaxDaysPresent())&&(this._reassignLimits(),this._buildData(!this._isSeparate,void 0,!0)),this._updateOKClass(!0)}},{key:"_selectClickHandler",value:function(e){this._setData(e),_get(_getPrototypeOf(o.prototype),"_selectClickHandler",this).apply(this,arguments)}},{key:"_destroyDropdown",value:function(){this._isSeparate&&!this._destroyedDD?(this._removeDropdown("from"),this._removeDropdown("to")):!this._destroyedDD&&_get(_getPrototypeOf(o.prototype),"_destroyDropdown",this).apply(this,arguments)}},{key:"_removeDropdown",value:function(e){e&&(this._setData(e),this._updateDropdownEle("month",!0),this._updateDropdownEle("year",!0)),_get(_getPrototypeOf(o.prototype),"_destroyDropdown",this).apply(this,arguments)}},{key:"_setmonthDropdownVal",value:function(t,a,i,l,n){if(_get(_getPrototypeOf(o.prototype),"_setmonthDropdownVal",this).apply(this,arguments),!a&&!t&&!i&&!l){var s=[];n.monthSelect.options.forEach(function(e){return s.push(e.value)}),s.length&&e.select(this._monthHeader).setOptionAttributes(s,"disabled",!1)}}},{key:"_setyearDropdownVal",value:function(t,a,o,i,l){var n=l.yearSelect.options,s=this._viewDate,r=[],d=[];n.forEach(function(e){e.disabled=t&&e.value<t||"number"==typeof a&&e.value===t&&s.getMonth()<a||o&&e.value>o||"number"==typeof i&&e.value===o&&s.getMonth()>i,(e.disabled?r:d).push(e.value)});var c=e.combobox(this._yearHeader);this._yearHeader&&(r.length&&c.setOptionAttributes(r,"disabled",!0),d.length&&c.setOptionAttributes(d,"disabled",!1),c.setAttribute("selectedValue",this._viewDate.getFullYear()))}},{key:"_todayClickHandler",value:function(e){this._isSeparate&&(this._setData("from"),_get(_getPrototypeOf(o.prototype),"_todayClickHandler",this).call(this,e),this._skipReset=!0,this._setData("to")),_get(_getPrototypeOf(o.prototype),"_todayClickHandler",this).call(this,e,this._isSeparate),this._skipReset=!1}},{key:"name",get:function(){return"zdaterangepicker"}},{key:"attrs",get:function(){return{fromValue:null,toValue:null,monthsPerView:2,selectionDirection:"both",excludeWeekend:!1,selectionType:"continuous",rangeType:"days",minDaysToSelect:null,maxDaysToSelect:null,fromLabel:null,toLabel:null}}},{key:"props",get:function(){return{labels:{fromLabel:"From",toLabel:"To"}}}},{key:"EVENTS",get:function(){return["fromvalueselect","tovalueselect"]}},{key:"delegateList",get:function(){return".zdatetimepicker__date:not(.is-disabled):not(.zdatetimepicker--disabledreplica), .zdatetimepicker__adjacentmonthdate:not(.is-disabled):not(.zdatetimepicker--disabledreplica), .zdatetimepicker__monthview:not(.is-disabled), .zdatetimepicker__year:not(.is-disabled), .zdatetimepicker__decade:not(.is-disabled)"}}]),o}(e.ZDatePicker);e.registerComponent("ZDateRangePicker",e.ZDatePicker,P),function(e){var t=e.zdaterangepicker.Templates,a=e.zdatepicker.Templates,o=e.Templates.Utilities;t.children=function(e){return ZT.html(tO133(),"callout"===e.displayType&&ZT.html(tO134()),e.title&&a.title(e.title),ZT.html(tO135(),t.dateLayout(e.from.month[0]),t.dateLayout(e.to.month[0])),e.cBar&&!e.isCBar&&o.commandBar(e.cBar))},t.dateLayout=function(e){return ZT.html(tO136(),e.label,a.month(e),a.drilldownView(e))}}(ZComponents),e.$document.on("keydown.zdateselect",function(t){var a=e.openedDateSelect;a&&t.keyCode===e.keyCode.ESCAPE&&a._dtsMenu.is(":visible")&&a.close()});var M=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_getConstValues",value:function(){return["YESTERDAY","TODAY","TOMORROW","LAST_MONTH","THIS_MONTH","NEXT_MONTH","LAST_YEAR","THIS_YEAR","NEXT_YEAR","LAST_7_DAYS","LAST_30_DAYS","LAST_15_DAYS","NEXT_7_DAYS","NEXT_30_DAYS","NEXT_15_DAYS","THIS_WEEK","NEXT_WEEK","LAST_WEEK","WEEK_TO_TODAY","MONTH_TO_TODAY","YEAR_TO_TODAY"]}},{key:"_setTimeZone",value:function(){this._timeZone=e.Date.timeZone=this._opts.timeZone||e.timeZone}},{key:"_getNewDate",value:function(){return this._timeZone?e.Date.changeTZOfDate(new Date,this._timeZone):new Date}},{key:"_init",value:function(t,a){this._setTimeZone(),this._useParent=!1;var o=this._data,i=this._opts,l=o.attrs={},n=i["date"+(this._checkTime?"Time":"")+"PickerOptions"],s=i["date"+(this._checkTime?"Time":"")+"RangePickerOptions"];this._isText="text"===i.selectedValueDisplayType;var r=i.labels,d=e.localeInfo[i.locale];["days","daysAbbreviated","monthsAbbreviated","months"].forEach(function(e){r[e]=d[e]||r[e]}),this._validateFormat(),this._invalidFormat||("function"==typeof this._setFormat&&this._setFormat(),this._setOkCancelBtns(),this._checkValues(i),this._checkValues(n),this._checkValues(s),this._isMinMaxGiven=i.minDate||i.maxDate||n.minDate||n.maxDate||s.minDate||s.maxDate,o.alwaysSetAttrs=!0,l.tabindex=t.attr("tabindex")||0,l.id=this._elementId=t.attr("id")?t.attr("id")+"-container":this._getID(t),l["aria-haspopup"]=!0,l.role="select",i.placeholder=a.placeholder||this._getI18NText("placeholder"),i.calendarIcon&&this._getCalendarIconProps(o,i),i.arrowIcon&&this._getArrowIconProps(i),i.clearButton&&this._getClrBtnProps(o,i),this._setPlaceholder(),this._buildData(),this._setSelectedData())}},{key:"_checkValues",value:function(e){var t=this;["fromValue","toValue","minDate","maxDate"].forEach(function(a){var o=e[a],l,n;o&&(l=t._parseDate(o),n=["YESTERDAY","TODAY","TOMORROW"].indexOf(o),l=l.isValid?l.date:void 0,!l&&(-1<n||-1<o.indexOf("NOW"))&&(l=t._getNewDate(),-1<n&&l.setDate(l.getDate()+n-1),!t._checkTime&&l.setHours(0,0,0,0)),e[a]=l||void 0)})}},{key:"_setOkCancelBtns",value:function(){var e=this._opts;e.immediateCommit||(e.OKButton=!0,e.cancelButton=!e.hideCancelButton)}},{key:"_validateFormat",value:function(){this._checkFormat(/h|H|m|t/g)}},{key:"_checkFormat",value:function(e){this._invalidFormat=e.test(this._opts.format)}},{key:"_buildData",value:function(){this._getMenuProps()}},{key:"_disable",value:function(e){_get(_getPrototypeOf(o.prototype),"_disable",this).call(this,e),this.element.attr("disabled",e)}},{key:"_postRender",value:function(e,a){this.isCE&&this.element.hide(),a.clearButton&&(this._clear=t("#"+this._elementId+"--clear"),this._bindClrBtnEv()),this._data.className+=" zselectbox zdatetimeselectbox--container";var o=this._dtsMenu=e.find(".zdatetimeselectbox");this._placeholderElem=e.find(".zdatetimeselectbox__label"),this._setPlaceholder(!1),o.appendTo(t(a.dropdownList.appendTo||"body")),a.disabled&&this._disable(a.disabled),this._pickerContainer=o.find(".zdatetimeselectbox__datetimecontainer"),a.width&&(e[0].style.width=a.width+"px"),a.height&&(e[0].style.height=a.height+"px"),this._valueId||(a.value?this.setValue(a.value):a.fromValue&&a.toValue&&this._setFromToValue())}},{key:"_setPickerVal",value:function(e){var a=this._getOptionObj(e,"valueType");a?this._setValue(t("#"+a.id)):(this._setSelectedData(),this._setPlaceholder())}},{key:"_getOptionObj",value:function(e,t){var a=["range","date"];return this._data.menu.optData.find(function(o){return t?o[t]===e:o.isPicker||o.type&&-1<a.indexOf(o.type)||o.valueType&&-1<a.indexOf(o.valueType)})}},{key:"_postEachRender",value:function(e,a){var o=!a.rendered,i=a.modifiedAttr,l=this._dtsMenu;if(this._listContainer&&this._listContainer.length||(this._listContainer=l.find(".zdatetimeselectbox__listboxdetails"),!this._pickerOpened&&this._display(!0,this._listContainer)),this._pickerContainer&&this._pickerContainer.length||(this._pickerContainer=l.find(".zdatetimeselectbox__datetimecontainer")),o||i){var n=this._data.className;a.calendarIcon?(n+=" zselectbox--icontext","right"===a.calendarIconAlignment?n+=" zselectbox--dateandtime zdatetimeselectbox--calendariconright":n=n.replace(/zselectbox--dateandtime|zdatetimeselectbox--calendariconright/g,"")):n=n.replace(/zselectbox--icontext/g,""),this._data.className=n,this._updateClass("zdatetimeselect--withcalendaricon|zdatetimeselect--withclrbtn|zdatetimeselect--witharrow",!0),this._data.className+=(a.calendarIcon?" zdatetimeselect--withcalendaricon":"")+(a.clearButton?" zdatetimeselect--withclrbtn":"")+(this._data.arrowIconProps?" zdatetimeselect--witharrow":""),"rtl"===i&&l.is(":visible")&&this._getPosition()}!this._valueId||a.disabled||a.readonly||(this._setValue(t("#"+this._valueId)),this._valueId=void 0)}},{key:"_setSelectedData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this._opts,a=t.value,o=t.fromValue,i=t.toValue,l=this._selectedData={label:e.label||this._data.placeholder,value:a,fromValue:o,toValue:i},n=this._getStringVal.bind(this);l.valueString=a?n(a):o&&i?n(o,i):void 0,l.fromValueString=o&&n(o),l.toValueString=i&&n(i);var s=l.valueString;return l.translatedValue=this._translateEToA(n(a||o,a?void 0:i,void 0,!0)),l.text=e.label||s,l.selectedValue=s,s}},{key:"_setPlaceholder",value:function(e){var t=this._data,a=this._opts,o=a.value,i=this._placeholderElem;e?o=e:o&&o instanceof Date?o=this._getStringVal(o,void 0,void 0,!0):a.fromValue&&a.toValue?o=this._getStringVal(a.fromValue,a.toValue,void 0,!0):!1===e&&(e=t.placeholder),t.placeholder=o=o?this._translateEToA(o):a.placeholder,i&&i.attr("title",o).text(o)}},{key:"_dispatchEvent",value:function(e,t,a){return _get(_getPrototypeOf(o.prototype),"_dispatchEvent",this).call(this,e,t,_objectSpread({menu:this._dtsMenu},a||{}))}},{key:"_getMenuProps",value:function(){var e=this._opts,t=this._data.menu={},a=this._SELECTORS.option,o=this.element.find(a),i=e.options,l=e.dropdownList.className;t.className="zdatetimeselectbox zdatetimepicker--group"+(l?" "+l:"")+(e.rtl?" zh-rtl":""),t.optData=[],t.prepend=t.append=!1,(e.selectedValue||e.value)&&0===this.element.find(a+"[selected]").length&&(this.element[0].selectedIndex=-1),o.length?this._getOptionData(o):i&&this._getOptData(i),this._setIsPickerVar(),t.containerClass="zdatetimeselectbox__listboxdetails",t[-1<["left","bottom-right","top-right"].indexOf(e.position)?"prepend":"append"]=!0,t.containerClass+=t.prepend?" zh-rightlist":""}},{key:"_getOptData",value:function(e,t,a){for(var o=[],l=0,n;l<e.length;l++)n=e[l],n.selected=n.selected||this._isSelected(n),n=this._setData(n,a),o.push(this._setOptData(n,t));return o}},{key:"_setOptData",value:function(e,t){var a=e.type||e.valueType;return e["class"]=(e["class"]?e["class"]+" ":"")+"zdatetimeselectbox__option"+(e.selected?" is-selected":"")+(e.disabled?" is-disabled":""),e.valueType&&-1<["date","range"].indexOf(a)&&(e["class"]+="date"===a?" zdatetimeselectbox--customdate":" zdatetimeselectbox--customrange",e.label+="..."),e.hidden?e.style=(e.style||"")+"display:none":!e.disabled&&e.selected&&(this._valueId=e.id),t||this._data.menu.optData.push(e),e}},{key:"_getPosition",value:function(){var t=this._opts,a=t.rtl,o=this._dtsMenu;o.css("right","");var i=e.Position.get(this.container,this._dtsMenu,{direction:t.position,rtl:a,positionAlterable:t.positionAlterable}).elementPosition,l=-1<["left","bottom-right","top-right"].indexOf(t.position)||a;o.css({left:"",right:"",top:i.top}),o.css(l?"right":"left",l?e.$window[0].innerWidth-(i.left+o.outerWidth(!0)):i.left)}},{key:"_setIsPickerVar",value:function(){this._isPicker||(this._isPicker=!!this._getOptionObj())}},{key:"_isSelected",value:function(e,t){var a=this._opts,o=a.value,i=e.value;return t=t||e,!this._valueId&&!!(o&&(i===o||"date"===t.valueType)||a.fromValue&&"range"===t.valueType||i&&i===a.selectedValue)}},{key:"_setData",value:function(a,o){var l=this._SELECTORS.option,n,s;if(!a.zdatapopulated){o?n=o.getAttribute(this._SELECTORS.itemId):(o=t("<"+l+"/>")[0],s=!0),n=(n||this._getID(o))+"-item";var r=a.label=a.label||o.textContent.trim(),d=a.type||a.valueType;-1<["date","range"].indexOf(d)&&!r?r=this._getI18NText("date"===d?"specificDate":"customRange"):a.value=a.value||o.value||r;for(var c=["label","hidden","disabled","selected"],_=0;4>_;_++)a[c[_]]=a[c[_]]||o[c[_]];a.style=o.getAttribute("style"),this._addedByComponent=this.isCE,o=t(o),this.isCE&&!this._opts.isLyteComponent&&e.option(o).saveParentIns(this.element),o.attr(a),o.removeAttr("valuetype"),a.valueType&&o.attr(this.isCE?"value-type":"data-value-type",a.valueType),o.text(r),o.attr("id",n.replace("-item","")),a["class"]=(o[0].getAttribute("class")||"")+(a["class"]||a.className||""),this._addedByComponent=!1,s&&o.appendTo(this.element),a.zdatapopulated=!0,a.id=n}return a}},{key:"_bindEvents",value:function(){this._addEvents({click:"mousedown",focus:"focusin focusout"}),this._addEvents({menuClick:"mousedown",menuBlur:"focusout"},this._dtsMenu),this._opts.clearButton&&this._addEvents({mouseEnter:"mouseenter"})}},{key:"_menuBlurHandler",value:function(e){this._focusHandler(e)}},{key:"_focusHandler",value:function(e){if(!this._opts.disabled){var t=!0;"focusout"===e.type&&(t=this._dtsMenu.is(":visible")),t&&this._dispatchEvent("focusout"===e.type?"blur":"focus",e,{})}}},{key:"_display",value:function(t,a){e.Browser.isIE&&9===e.Browser.getIEVersion()?a[0].style.display=t?"none":"inline-block":_get(_getPrototypeOf(o.prototype),"_display",this).apply(this,arguments)}},{key:"_setMenuAttr",value:function(e){this._display(e,this._dtsMenu),this.container.attr("aria-expanded",!e),this._updateClass("is-active",e||void 0)}},{key:"_clickHandler",value:function(e){this._opts.readonly||this._opts.disabled||(this._dtsMenu.is(":visible")?this.close(void 0,e):this._showMenu(e))}},{key:"_showMenu",value:function(t){this._dispatchEvent("beforedropdownlistopen",t,{})&&!this._opts.disabled&&(e.openedDateSelect=this,e.bindDocumentEvents({element:this.element,container:this._dtsMenu,forElement:this.container,ctype:this.name,closeMethodName:"_closeHandlerClose",closeEvent:"dropdownlistclose"}),this._setMenuAttr(!1),this._opts.slideAnimate&&this._animateMenu(!!this._lastSelected),this._pickerOpened&&this._isPicker&&this._openPicker(null,null,!0),void 0===this._scrollHt&&this._curLi&&(this._scrollHt=this._curLi[0].offsetTop),this._setDimensions(),this._dispatchEvent("dropdownlistopen",t,{}),this._getPosition(),this._opts.slideAnimate&&this._pickerOpened&&this._setWidth(this["_"+this._pickerOpened+"Picker"]))}},{key:"_closeHandlerClose",value:function(e){this.close(void 0,e)}},{key:"_animateMenu",value:function(e,t){this._listContainer[e?"addClass":"removeClass"]("zdts-transition").width("number"==typeof t?t:"")}},{key:"_setDimensions",value:function(){var e=this._opts.dropdownList,t=this._pickerOpened&&this["_"+this._pickerOpened+"Picker"],a=this._dtsMenu.find(".zdatetimeselectbox__listbox"),o=a.find(".zdatetimeselectbox__option:visible").length,i;a.css("height",""),this._pickerContainer.children().length&&t&&t.is(":visible")&&(i=t.outerHeight(!0)),e.height&&i&&(i=e.height<i?i:e.height),i=i||e.height||(10>o?33*o:310),a.css("height",i+(6<o?-10:0)),i=null,void 0!==this._scrollHt&&(a[0].scrollTop=this._scrollHt),e.width&&a.css("width",e.width)}},{key:"_menuClickHandler",value:function(e){if(!this._opts.readonly&&!this._opts.disabled){var a=t(e.target).closest(".zdatetimeselectbox__option");if(a.length&&!a.hasClass("is-disabled")){this._scrollHt=a[0].offsetTop;var o=this._setValue(a);this._checkForClose(e,o),this._dispatchEvent("optionselect",e,{item:a,option:this._currentSelected}),this._setDimensions()}}}},{key:"_checkForClose",value:function(e,t){var a=t.type||t.valueType,o=a&&-1<["range","date"].indexOf(a)||t.isPicker;(!o||t.type&&this._isComit(a))&&this._triggerChange(e),o||this.close(void 0,e)}},{key:"_isComit",value:function(e){return this["_"+e+"PickerInstance"]._opts.immediateCommit}},{key:"_triggerChange",value:function(e,t){var a=this._getOptForItem(this._curLi[0].id),o=this._lastSelected;a[0].selected=!0,(!o||a.attr("id")!==o.attr("id")||t)&&this._dispatchEvent("change",e,_objectSpread({oldValue:o,newValue:a},this._selectedData))}},{key:"_getOptForItem",value:function(e){return this.element.find("[id="+e.replace("-item","")+"]")}},{key:"_setValue",value:function(e,t){var a=this._prevLi=this._curLi;this._lastSelected=a&&a.length&&this._getOptForItem(a.attr("id")),this._selectOpt("last",!1),this._updateSelectClass(a,!1),this._curLi=e,this._currentSelected=e&&e.length&&this._getOptForItem(e.attr("id")),this._selectOpt("current",!0);var o=this._updateSelectClass(e,!0);return t||(this._setPlaceholder(this._getPlaceHolder(o)),this._setSelectedData(o&&o.valueType?void 0:o)),o}},{key:"_selectOpt",value:function(e,t){this._addedByComponent=this.isCE,e=this["_"+e+"Selected"],e&&e.attr("selected",t),this._addedByComponent=!1}},{key:"_updateSelectClass",value:function(e,t){if(e){e[(t?"add":"remove")+"Class"]("is-selected");var a=this._data.menu.optData[e.index()],o=a["class"];return a["class"]=t?o+(0>a["class"].indexOf("is-selected")?" is-selected":""):o.replace("is-selected",""),a}}},{key:"_parseDate",value:function(t,a){return e.Date._parseDateValue(t,a||this._opts.format,this._opts.otherInputFormats)||{date:void 0}}},{key:"_getPlaceHolder",value:function(e){var a=this._pickerOpened;if(e){var o=e.value,i=this._getNewDate(),l=this._getNewDate(),n=!1,s=this._parseDate(o),r=!0,d=e.type||e.valueType,c=i.getDate(),_=["YESTERDAY","TODAY","TOMORROW"].indexOf(o),u=["LAST_MONTH","THIS_MONTH","NEXT_MONTH"].indexOf(o),p=["LAST_YEAR","THIS_YEAR","NEXT_YEAR"].indexOf(o),m=-1<["range","date"].indexOf(d),h,g;if(a&&(!m||e.valueType!==a)&&(this._pickerOpenOrClose(!0),this._lastOpened=this._pickerOpened,this._pickerOpened=void 0),e.type&&"custom"===e.type)return this._updateValues(e.value,null,"custom"),this._isText?e.label:e.value;if(-1<_)i.setDate(c+_-1),l=new Date(+i),e.isPicker?e.type=d=d||"date":r=!1;else if(-1<["LAST_7_DAYS","LAST_30_DAYS","LAST_15_DAYS","NEXT_7_DAYS","NEXT_30_DAYS","NEXT_15_DAYS"].indexOf(o)){var v=-1<o.indexOf("NEXT");if(h=parseInt(o.split("_")[1])-1,l.setDate(c+h*+(v||-1)),!v){var y=i;i=l,l=y}}else"THIS_WEEK"===o?(i.setDate(i.getDate()-i.getDay()),l=this._getDate(i,6)):"NEXT_WEEK"===o?(i.setDate(i.getDate()+(7-i.getDay())),l=this._getDate(i,6)):"LAST_WEEK"===o?(l.setDate(l.getDate()-l.getDay()-1),i=this._getDate(l,-6)):-1<u?(i.setDate(1),l=new Date(i.setMonth(i.getMonth()+u-1)),l.setMonth(i.getMonth()+1),l.setDate(0)):-1<p?(i=new Date(i.getFullYear()+p-1,0,1),l=new Date(i.getFullYear(),12,0)):-1<["WEEK_TO_TODAY","MONTH_TO_TODAY","YEAR_TO_TODAY"].indexOf(o)?(i.setDate(-1<o.indexOf("WEEK")?i.getDate()-i.getDay():1),-1<o.indexOf("YEAR")&&i.setMonth(0)):"range"===e.valueType||"date"===e.valueType?g=!0:"string"==typeof e.value&&s.isValid||s.isValid?(g=!0,d=d||"date",e.isPicker&&(e.type=d||"date")):e.fromValue&&e.toValue&&(g=!0);if(!e.valueType&&e.isPicker&&(e.type=d=d||"range"),r=d?"range"===d:r,g){var k=this._handlePickerOptionClick(e,r);i=k.date1,l=k.date2,e.valueGiven=i||l}if(this._checkTime&&g||(l&&l.setHours(0,0,0,0),i&&i.setHours(0,0,0,0)),r&&this._isMinMaxGiven){var b=this._isValidDate(i,"Range",!(m||e.isPicker)),f=this._isValidDate(l,"Range",!(m||e.isPicker));b&&f||this._getValidRangeVal(i,l)}var t=i||l,C=[i,r?l||i:null];if(m||e.isPicker){var D=this._valueSet||this._valueId;if(t&&(!this["_"+d+"Picker"]&&!e.valueType||D||g)&&this._updateValues.apply(this,C.concat([r?"range":"date",e])),this._openPicker(e,d),e.valueType)return!!(D||g&&this._isComit(d)&&(i||l))&&void 0;d&&!this._isComit(d)&&this._valueId!==e.id&&(n=!0)}else this._prevWidth=0;var w=t?this._updateValues.apply(this,C.concat([r?"range":"date",e,n])):void 0;return void 0===w?!n&&(this._isText?e.label:this._getStringVal.apply(this,C.concat([void 0,!0]))):w}this._pickerOpenOrClose(!0),this._lastOpened=this._pickerOpened,this._pickerOpened=void 0}},{key:"_getDate",value:function(e,t){var a=new Date(+e);return a.setDate(a.getDate()+t),a}},{key:"_getStringVal",value:function(t,a,o,i){o=o||this._opts.format;var l=e.Date.formatDate.bind(e.Date),n=i&&this._opts.labels;return t&&l(t,o,n)+(a?" - "+l(a,o,n):"")}},{key:"_updateValues",value:function(e,t,a,o,i){var l=this._opts,n=t&&e,s="custom"===a;i||(l.value=n?void 0:s?e:e&&new Date(+e),l.fromValue=e&&!s?new Date(+e):void 0,l.toValue=n?t&&new Date(+t):e&&!s?new Date(+e):void 0),this._curFrom=e&&new Date(+e),this._curTo=n?new Date(+t):void 0,this._isPicker&&this._setPickerValues.apply(this,arguments)}},{key:"_resetValues",value:function(){this._opts.value=void 0,this._opts.fromValue=void 0,this._opts.toValue=void 0,this._setPlaceholder(this._opts.placeholder)}},{key:"open",value:function(){this._opts.disabled||this._opts.readonly||this._showMenu()}},{key:"close",value:function(t,a){this._dispatchEvent("beforedropdownlistclose",a,{})&&(this._setMenuAttr(!0),this._pickerOpened&&this._pickerOpenOrClose(!0),this._dispatchEvent("dropdownlistclose",a,{}),e.openedDateSelect=void 0)}},{key:"getValue",value:function(e){e=this._parseDate(e||this._opts.value).date;var t=this._getStringVal(e);if(e)return{value:e,valueString:t,translatedValue:this._translateEToA(t)}}},{key:"setValue",value:function(e){var a=this._opts,o=this._getOptionObj(e,"value");e&&(e=this._parseDate(e).date,this._valueSet=!0,a.value=e,a.fromValue=null,a.toValue=null,o?this._setValue(t("#"+o.id)):this._setPickerVal("date")),this._valueSet=!1}},{key:"getFromValue",value:function(){var e=this.getValue(this._opts.fromValue);return e&&{fromValue:e.value,fromValueString:e.valueString,translatedFromValue:e.translatedValue}}},{key:"getToValue",value:function(){var e=this.getValue(this._opts.toValue);return e&&{toValue:e.value,toValueString:e.valueString,translatedToValue:e.translatedValue}}},{key:"getSelectedOption",value:function(){return _objectSpread({item:this._curLi,option:this._currentSelected},this.getValue(),{},this.getFromValue(),{},this.getToValue(),{selectedValue:this._selectedData.selectedValue})}},{key:"_destroy",value:function(){this._isPicker&&this._destroyPicker(),this._dtsMenu.remove(),this._setUndefined(["dtsMenu","placeholderElem","pickerContainer","lastSelected","currentSelected","selectedData"],"")}},{key:"_getArrowIconProps",value:function(t){(!t.calendarIcon||t.calendarIcon&&"right"!==t.calendarIconAlignment)&&(this._data.arrowIconProps=e._getIconInfo(t.arrowIconClassName,t.arrowSVGIconId,"zc__svg--downarrow zselectbox__arrow","zselectbox__icon arrowicon",{templateRender:!0,isCE:this.isCE}))}},{key:"_getCalendarIconProps",value:function(t,a){t.calendarIconProps=e._getIconInfo(a.calendarIconClassName,a.calendarSVGIconId,"zc__svg--calendaricon zbutton__svg","zselectbox__icon calendaricon",{templateRender:!0,isCE:this.isCE}),t.isRight=t.isLeft=!1,"right"===a.calendarIconAlignment?(t.arrowIconProps=null,t.isRight=!0):t.isLeft=!0}},{key:"_getOptionData",value:function(t){for(var a=0;a<t.length;a++){var o=t[a],l=e._getOpts(o);o._created=!0,l.selected=l.selected||o.selected||this._isSelected(o,l),l=this._setData(l,o),this._setOptData(l)}}},{key:"_openPicker",value:function(e,t,a){this._prevWidth||this._saveWidth(),e&&!this["_"+t+"Picker"]&&this._initPicker(t),t&&this._pickerOpened!==t&&(this._pickerOpened=t,t!==this._lastOpened&&this._opts.slideAnimate&&this._animateMenu()),this._setDimensions();var o=this._pickerOpened;o&&(this._pickerOpenOrClose(null,!0),this._getPosition(),this._setWidth(this["_"+o+"Picker"],a))}},{key:"_pickerOpenOrClose",value:function(e,t){t||this._saveWidth(),this._listContainer&&this._display(e,this._listContainer),this._pickerOpened&&this["_"+this._pickerOpened+"PickerInstance"][e?"close":"open"](),this._setDimensions()}},{key:"_saveWidth",value:function(){this._prevWidth=this._listContainer.innerWidth()}},{key:"_setWidth",value:function(e,t){var a=this;if(!t&&this._opts.slideAnimate){var o=this._listContainer.innerWidth();t||this._animateMenu(!0,this._prevWidth),setTimeout(function(){a._listContainer.css({width:o})},30),this._prevWidth=null}}},{key:"_getPickerOpts",value:function(e,t){var a={};return["rtl","format","hideCancelButton","immediateCommit","locale","fromValue","toValue","minDate","maxDate","fromLabel","toLabel","timeZone"].forEach(function(t){a[t]=e[t]}),_objectSpread({},a,{isCE:this.isCE,OKButtonLabel:e.OKButtonLabel||this._getI18NText("OKButtonLabel"),cancelButtonLabel:e.cancelButtonLabel||this._getI18NText("cancelButtonLabel"),position:"right",type:"inline",value:t?e.value:void 0,cancel:this._cancelHandler.bind(this),className:t?"zdts-customdate":"zdts-customrange",appendTo:this._pickerContainer,change:this._changeHandler.bind(this)},this._bindPickerEvents(),{clear:this._clearHandler.bind(this),afterdrilldown:this._setDimensions.bind(this)})}},{key:"_initPicker",value:function(a){var o=this._opts,i="date"===a,l=this._getPickerOpts(o,i),n;l=t.extend(!0,{},l,o[(i?"date":"dateRange")+"PickerOptions"]),this["_"+(i?"date":"range")+"Picker"]=n=t(e["createDate"+(i?"":"Range")+"Picker"](l)),n.removeClass("zdatetimepicker zdatetimepicker--group"),this["_"+(i?"date":"range")+"PickerInstance"]=e["date"+(i?"":"range")+"picker"](n)}},{key:"_bindPickerEvents",value:function(){for(var e=this,t=["beforeopen","open","beforeclose","close"],a=this,o=["beforedatecellrender","beforefocus","open","beforeopen","beforeclose","close","dateselect","todaybuttonclick","drilldown","beforedrilldown","afterdrilldown","datemouseover","monthchange","yearchange","decadechange","fromvalueselect","tovalueselect","clear"],l={},n=function(n){l[o[n]]=function(i,l){e.isCE&&i.stopPropagation(),-1<t.indexOf(o[n])?e._dispatchEvent("picker"+o[n],i,l):(-1<["yearchange","monthchange"].indexOf(o[n])&&a._setDimensions(),e._dispatchEvent(o[n],i,l))}},s=0;s<o.length;s++)n(s);return l}},{key:"_clearHandler",value:function(e){this._isComit(-1<e.type.indexOf("rangepicker")?"range":"date")&&(this._shouldClose=!1),this._dispatchEvent("clear",e,{})}},{key:"_setPickerValues",value:function(e,t,a){if(this._datePicker){var o=this._datePickerInstance,i="date"!==a||!this._isSameDate({value:o.getAttribute("value")});i&&o.setAttribute("value","date"===a?e:void 0)}if(this._rangePicker){var l=this._rangePickerInstance,n="range"!==a||!this._isSameDate({fromValue:l.getAttribute("fromValue"),toValue:l.getAttribute("toValue")});n&&(l.setAttribute("toValue",null),l.setAttributes({fromValue:e,toValue:"range"===a?t:e}))}}},{key:"_changeHandler",value:function(e,a,o,i){if(e.originalEvent){if(void 0===this._shouldClose&&(this._shouldClose=!0),!i){var l;this.isCE?(e.stopPropagation(),a=e.detail,l=-1<a.container[0].tagName.indexOf("RANGE")?"range":"date"):l=-1<e.type.indexOf("range")?"range":"date";var n=a.fromValue,s=a.value,r=this._curLi&&this._getOptionObj(this._curLi.attr("id"),"id"),d=a.toValue,c=this._getOptionObj(l,"valueType"),_=this._isSameDate(a);if(this._updateValues(n||s,d,l,r),s||n&&d||this._resetValues(),_&&!this._isComit(l)&&r&&-1<this._getConstValues().indexOf(r.value))this._setSelectedData(r),this._setPlaceholder(this._isText?r.label:this._selectedData.valueString);else{var u=this._setSelectedData();this._setPlaceholder(u),this._selectedData.label=u,c&&this._curLi&&this._curLi.attr("id")!==c.id&&this._setValue(t("#"+c.id))}this._triggerChange(e,!0)}o||!this._shouldClose&&t(a.container).is(":visible")||this.close(),this._shouldClose=!0}}},{key:"_isSameDate",value:function(t){var a=e.Date.areDatesEqual.bind(this);return this._checkTime?t.value?+t.value==+this._curFrom:+t.fromValue==+this._curFrom&&+t.toValue==+this._curTo:t.value?a(t.value,this._curFrom):a(t.fromValue,this._curFrom)&&a(t.toValue,this._curTo)}},{key:"setFromValue",value:function(e){this._setFromToValue(e)}},{key:"setToValue",value:function(e){this._setFromToValue(null,e)}},{key:"_setFromToValue",value:function(t,a){var o=this._opts,i=!!t;t=this._parseDate(t||o.fromValue).date,a=this._parseDate(a||o.toValue).date,t&&a&&e.Date.isGreater(a,t)&&(this._valueSet=!0,o[(i?"from":"to")+"Value"]=i?t:a,o.value=null,this._setPickerVal("range"),this._valueSet=!1)}},{key:"_cancelHandler",value:function(e){this.close(),this._dispatchEvent("cancel",e,{})}},{key:"_getPickerLabel",value:function(e,t){var a=this._opts;return a.value||a.fromValue||a.toValue?!!t&&null:e.label.replace("...","")}},{key:"_handlePickerOptionClick",value:function(t,a){var o=this._parseDate.bind(this),i=this._opts,l=i.value,n=i.fromValue,s=i.toValue,r=o(t.value),d=n&&s&&(this._checkTime?+n==+s:e.Date.areDatesEqual(n,s)),c,_;if(!a)r.isValid?c=r.date:d?(c=n,_=void 0):c=l&&(-1<["TODAY","NOW"].indexOf(l)?this._getNewDate():o(i.value).date);else if(t.fromValue&&t.toValue){var u=t.fromValue,p=t.toValue;c="string"==typeof u?o(u).date:u,_="string"==typeof p?o(p).date:p}else r.isValid?c=r.date:(c=o(n).date,_=o(s).date);return{date1:c,date2:_}}},{key:"_destroyPicker",value:function(){this._datePicker&&this._datePickerInstance.destroy(),this._rangePicker&&this._rangePickerInstance.destroy(),this._datePicker=this._datePicker=this._datePickerInstance=this._rangePickerInstance=void 0}},{key:"deselectOption",value:function(){this._currentSelected&&(this._resetValues(),this._setValue(null),this._setPickerValues())}},{key:"addOption",value:function(e,a,o,i){var l=this._data.menu.optData.length;o="append"===a?0:o?t(o).index():l,a=("before"===a?0:"after"===a?+!o||1:l)+o,this.addOptionAt(e,a,i)}},{key:"_getItems",value:function(e){return e instanceof Array?e:[e]}},{key:"addOptionAt",value:function(e,t,a){var o={},l=0,n=this._data.menu.optData;o=a?this._getOptData(this._getItems(a),!0,e):this._getOptionData(this._getItems(e),!0);var s=function(){var e=n[l],t=o.filter(function(t){return t.id===e.id});t.length&&(o=o.filter(function(e){return e.id!==t[0].id}),n.splice(l,1,t[0]))};for(l=0;l<n.length;l++)s();var r=n.splice.apply(n,[0,t].concat(_toConsumableArray(o)));r.length&&(this._data.menu.optData=[].concat(_toConsumableArray(r),_toConsumableArray(n))),this._render(),this._setIsPickerVar()}},{key:"removeOption",value:function(e){e=this._getItems(e);for(var a=0,o=e.length,l;a<o;a++)l=e[a],0>l.indexOf("#")&&(l="#"+this._getOptionObj(l,"value").id),this.removeOptionAt(t(l).index())}},{key:"removeOptionAt",value:function(e){this._data.menu.optData.splice(e,1),this.element.find(this._SELECTORS.option)[e].remove(),this._render(),this._setDimensions(),this._setIsPickerVar()}},{key:"setOptionAttributes",value:function(e,t,a){if(e=this._getItems(e),"object"===_typeof(t)&&Object.keys(t).length)for(var o in t)this.setOptionAttributes(e,o,t[o]);else t&&this._setOptionAttribute(e,t,a);this._setIsPickerVar()}},{key:"_setOptionAttribute",value:function(e,a,o){for(var l=this,n=function(n){var i=e[n],s=l._data.menu.optData,r=t(i)[0].nodeType?s[t(i).index()]:s.find(function(e){return-1<e.label.indexOf(i.label)}),d=l._getOptForItem(r.id),c=r[a],_;i=t("#"+r.id),r[a]=o,"selected"===a?!o||r.disabled||r.hidden?_=!0:l._setValue(i):"hidden"===a?(l._display(o,i),_=i.hasClass("is-selected")):"disabled"===a?(o?0>r["class"].indexOf(" is-disabled")&&(r["class"]+=" is-disabled"):r["class"]=r["class"].replace(" is-disabled",""),i[o?"addClass":"removeClass"](" is-disabled"),o&&i.hasClass("is-selected")&&(_=!0)):"label"===a?(d[0].innerText=o,i[0].innerText=o):"className"===a?(r["class"]=o,i.removeClass(c).addClass(o)):"valueType"===a?(r.selected=l._isSelected(d,r),r.selected&&l._setValue(i)):void 0,_&&(l.deselectOption(),l._clear&&l._clear.addClass("zh-dnone"))},s=0;s<e.length;s++)n(s)}},{key:"_getClrBtnProps",value:function(e,t){var a=this._getI18NText("clear");e.clearButton={id:this._elementId+"--clear",iconClassName:t.clearButtonIconClassName,SVGIconId:t.clearButtonSVGIconId||"zc__svg--clear",className:"zselectbox__clearbutton",templateRender:!0,rtl:this.rtl,isCE:this.isCE,customAttributes:{tabindex:-1,"aria-label":a,title:a}}}},{key:"_bindClrBtnEv",value:function(){this._clear&&this._addEvents({clearClick:"mousedown"},this._clear)}},{key:"_clearClickHandler",value:function(e){this.deselectOption(),e.stopPropagation(),this._mouseEnterHandler(),this._scrollHt=0,this.close()}},{key:"_mouseEnterHandler",value:function(){var e=this._opts;this._clear[((e.value||e.fromValue||e.toValue)&&!e.disabled&&!e.readonly?"remove":"add")+"Class"]("zh-dnone")}},{key:"_isValidDate",value:function(t,a,o){var i=this._opts,l=!o&&i["date"+(this._checkTime?"Time":"")+(a||"")+"PickerOptions"],n=this._parseDate(l.minDate||i.minDate).date,s=this._parseDate(l.maxDate||i.maxDate).date;return n=!n||e.Date.isGreater(t,n),s=!s||e.Date.isGreater(s,t),n&&s?t:null}},{key:"_getValidRangeVal",value:function(e,t){for(var a=this._isValidDate(e,"Range"),o=this._isValidDate(t,"Range");(!a||!o)&&+e<=+t;)a||(e.setDate(e.getDate()+1),a=this._isValidDate(e,"Range")),o||(t.setDate(t.getDate()-1),o=this._isValidDate(t,"Range"));this._curFrom=+e<=+t?new Date(+e):void 0,this._curTo=+e<=+t?new Date(+t):void 0}},{key:"_setAttribute",value:function(a,o){var l=this._opts,n=this._data,s=l[a],r=this._selectedData,d=this._datePickerInstance,c=this._rangePickerInstance,_=this._dtsMenu,u=r.value||r.fromValue||r.toValue,p,m;if(l[a]=o,-1<["arrowSVGIconId","arrowIcon","arrowIconClassName"].indexOf(a))o?this._getArrowIconProps(l):n.arrowIconProps=null,n.modifiedAttr="arrowIcon",this._domChanged=!0;else if(-1<["calendarIcon","calendarIconAlignment","calendarIconClassName","calendarSVGIconId"].indexOf(a)){var h=!0;o&&l.calendarIcon?(this._getCalendarIconProps(n,l),"right"===l.calendarIconAlignment&&(n.arrowIconProps=null,h=!1)):n.calendarIconProps=n.isRight=n.isLeft=null,n.modifiedAttr="calendarIcon",h&&l.arrowIcon&&!n.arrowIconProps&&this._getArrowIconProps(l),this._domChanged=!0}else if("placeholder"===a&&!this._curLi)n.placeholder=o,this._setPlaceholder(!1);else if("format"===a){if(this._validateFormat(),!this._invalidFormat){for(var g=["value","fromValue","toValue"],v=0,y;v<g.length;v++)y=l[g[v]],y&&("string"==typeof y&&(y=this._parseDate(y,s),y=e.Date.formatDate(y,o),l[g[v]]=y),r[g[v]+"String"]=e.Date.formatDate(y,o));r.valueString=r.value?r.valueString:r.fromValueString+" - "+r.toValueString,r.translatedValue=this._translateEToA(r.valueString),p=!0}}else if("selectedValueDisplayType"===a)this._isText="text"===o,p=!0;else if("width"===a)this.container.width(o);else if("height"===a)this.container.height(o);else if("disabled"===a)this._disable(o);else if("datePickerOptions"===a&&d)d.setAttributes(o),this._isMinMaxGiven=l.minDate||l.maxDate||o.minDate||o.maxDate||c&&(c.getAttribute("minDate")||c.getAttribute("maxDate")),this._datePicker.removeClass("zdatetimepicker zdatetimepicker--group");else if("dateRangePickerOptions"===a&&c)c.setAttributes(o),this._isMinMaxGiven=l.minDate||l.maxDate||d&&(d.getAttribute("minDate")||d.getAttribute("maxDate"))||o.minDate||o.maxDate,this._rangePicker.removeClass("zdatetimepicker zdatetimepicker--group");else if("value"===a)this.setValue(o);else if(-1<["fromValue","toValue"].indexOf(a))this["set"+("fromValue"===a?"FromValue":"ToValue")](o);else if("dropdownList"===a)for(var f in o){var k=o[f];"className"==f?(s.className&&_.removeClass(s.className),_.addClass(k)):"appendTo"===f?_.appendTo(t(k)):["height","width"].indexOf(f)&&this._setDimensions()}else if(-1<["immediateCommit","hideCancelButton","OKButtonLabel","cancelButtonLabel"].indexOf(a))"immediateCommit"===a&&this._setOkCancelBtns(),this._domChanged=!0,m=!0;else if("options"===a)this._reInit=!0;else if("rtl"===a){var b=n.menu.className;n.menu.className=o?b+" zh-rtl":b.replace("zh-rtl",""),n.modifiedAttr="rtl",this._domChanged=m=!0}else"timeZone"===a&&(this._setTimeZone(),this._reInit=m=!0);return m&&(d&&d.setAttribute(a,o),c&&c.setAttribute(a,o)),u&&p&&this._curLi&&(r.label=r.valueString||n.placeholder,this._setPlaceholder(this._isText&&!this._checkTime?r.text:r.label)),this._domChanged}},{key:"name",get:function(){return"zdateselect"}},{key:"attrs",get:function(){return{calendarIcon:!1,clearButton:!1,clearButtonIconClassName:null,clearButtonSVGIconId:null,calendarSVGIconId:null,calendarIconClass:null,immediateCommit:!0,calendarIconAlignment:"left",placeholder:"",locale:"en-US",arrowIcon:!1,value:null,fromValue:null,toValue:null,format:"dd/MM/yyyy",arrowIconClass:null,slideAnimate:!0,arrowSVGIconId:null,position:"bottom-left",selectedValueDisplayType:"value",hideCancelButton:!1,OKButtonLabel:null,cancelButtonLabel:null,timeZone:null}}},{key:"props",get:function(){return{options:[],dropdownList:{},calendarIconClassName:null,arrowIconClassName:null,otherInputFormats:[],datePickerOptions:{monthsPerView:1},dateRangePickerOptions:{monthsPerView:2},labels:{OKButtonLabel:"OK",cancelButtonLabel:"Cancel",specificDate:"Specific date",customRange:"Custom range",placeholder:"Choose Date",clear:"Clear"}}}},{key:"EVENTS",get:function(){return["change","optionselect","beforedropdownlistopen","dropdownlistopen","beforedropdownlistclose","dropdownlistclose","pickerbeforeopen","pickeropen","pickerbeforeclose","pickerclose","pickerdateselect","todaybuttonclick","pickerchange","cancel","clear","beforedrilldown","drilldown","datemouseover","monthchange","yearchange","decadechange","beforedatecellrender"]}},{key:"SELECTORS",get:function(){var e=this.isCE;return{itemId:e?"zitemid":"data-zitemid",option:e?"z-option":"option",valueType:e?"value-type":"data-value-type"}}}]),o}(e.CoreComponent);e.registerComponent("ZDateSelect",M),function(e){var t=e.zdateselect.Templates,a=e.Templates.Utilities;t.container=function(e){return ZT.html(tO137(),e.children&&t.children(e))},t.children=function(o){return ZT.html(tO138(),o.isLeft&&a.icon(o.calendarIconProps),o.placeholder,o.clearButton&&e.createButton(o.clearButton),o.isRight&&a.icon(o.calendarIconProps),o.arrowIconProps&&a.icon(o.arrowIconProps),o.menu&&t.menu(o.menu))},t.menu=function(e){return ZT.html(tO139(),e.className,e.prepend&&t.pickerContainer(e),e.optData.map(function(e){return ZT.html(tO140(),e["class"],e.valueType,e.id,e.style,e.label)}),e.append&&t.pickerContainer(e))},t.pickerContainer=function(e){return ZT.html(tO141(),e.containerClass)}}(ZComponents);var V=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_setTimeZone",value:function(){this._timeZone=e.Date.timeZone=this._opts.timeZone||e.timeZone}},{key:"_getNewDate",value:function(){return this._timeZone?e.Date.changeTZOfDate(new Date,this._timeZone):new Date}},{key:"_postRender",value:function(){if(!this._invalidFormat){_get(_getPrototypeOf(o.prototype),"_postRender",this).apply(this,arguments);var t=this._opts,a=t.value,l=["value","min","max"],n=this._input;"ar"===t.locale&&n.addClass("zh-bidioverride"),a&&(this._viewDate=new Date(a.getTime()));for(var s=0,r;s<l.length;s++)r=l[s],t[r]&&n.attr("aria-value"+("value"===r?"now":r),e.Date.formatDate(t[r],t.format));this._updateElementValue()}}},{key:"_postEachRender",value:function(e,t){var a=this._data.modifiedAttr;t.isVertical||a&&!(-1<a.indexOf("spinButtons"))||(this._data.className+=" zdatetimefield"),_get(_getPrototypeOf(o.prototype),"_postEachRender",this).call(this),this._data.rendered||this._disableSpinBtns()}},{key:"_init",value:function(t,a){this._setTimeZone();var l=this._opts;this._format=l.format,this._setFormat(),_get(_getPrototypeOf(o.prototype),"_init",this).call(this,t,a),this._performValidations(),this._updateOldVal=!0,this._oldDateValue=new Date(this._viewDate.getTime()),this._isInit=void 0;var n=l.labels,s=e.localeInfo[l.locale];if(s)for(var r=["days","daysAbbreviated","monthsAbbreviated","months"],d=0,c=r.length;d<c;d++)n[r[d]]=s[r[d]]||n[r[d]]}},{key:"_disableSpinBtns",value:function(){var e=this._opts,t=this._buttonPane;"none"!==e.spinButtons&&(t.find(".zh-down")[(e.min&&+e.value==+e.min?"add":"remove")+"Class"]("is-disabled"),t.find(".zh-up")[(e.max&&+e.value==+e.max?"add":"remove")+"Class"]("is-disabled"))}},{key:"_setFormatVal",value:function(t,a,o){var l=this._format,n=this._opts,s=t.test(l),r=n.labels,d=n.locale,c=e.localeInfo[d];if(s){for(var _=["days","daysAbbreviated","months","monthsAbbreviated"],u=0;u<_.length;u++)r[_[u]]=c[_[u]];if(-1<a.indexOf("time"))for(var p=["AM","PM"],m=0;m<p.length;m++)r[p[m]]=c[p[m]]||this._DEFAULTS.labels[p[m]];var h=l.split("-");h[0]===a&&(l=l.replace(a,("datetime"===a?"dateTime":a)+"Format")),h=l.split("-");var g=c[h[0]];l=g[h[1]],n.format=c&&g&&l?l:o}}},{key:"_performValidations",value:function(e,t){var a=this._opts;this._validateStep(e),this._validateFormat(),this._validateOptions();var o=this._compareDates.bind(this);o(a.max,a.min)&&(a.max=void 0),o(a.max,a.value)&&(a.value=a.max),o(a.value,a.min)&&(a.value=a.min),this._setBoolValue(t,!0,"Modified"),this._checkForModification(a.value)}},{key:"_validateOptions",value:function(){for(var e=this._opts,t=["min","max","value"],a=0,o=t.length,l,n;a<o;a++)n=t[a],l=e[n],l&&(e[n]="string"==typeof l?this._getStringValue(l,e):l instanceof Date?l:void 0),"value"===n&&(this._viewDate=e[n]?new Date(e[n].getTime()):this._resetViewDate())}},{key:"_getStringValue",value:function(e,t){var a=t.format,o;if("TODAY"===e||"NOW"===e)o=this._getNewDate();else{var i=this._parseDateValue(e,a);i&&i.isValid&&(o=i.date)}return o&&(0>a.indexOf("h")&&0>a.indexOf("H")?o.setHours(0,0,0,0):0>a.indexOf("s")&&o.setSeconds(0,0)),o}},{key:"_resetViewDate",value:function(){var e=new Date(this._getNewDate().getFullYear(),0,1,0,0,0),t=this._compareDates.bind(this),a=this._opts,o=a.min,i=a.max;return o&&t(e,o)?new Date(+o):i&&t(i,e)?new Date(+i):e}},{key:"_selectText",value:function(e){var t=this._dateFormat;this._oldSegment=this._currentSegment;var a=t.lastIndexOf(e)+1,o=t.indexOf(e);0>o&&(o=0),this._currentSegment=e,"none"!==this._opts.spinButtons&&this._addDisabledClass(e),this._selectCaretPosition(this._input[0],o,a)}},{key:"_compareDates",value:function(e,t){if(e&&t)return e.getTime()<t.getTime()}},{key:"_parseDateValue",value:function(t,a){return e.Date._parseDateValue(t,a,this._opts.otherInputFormats)}},{key:"_selectCaretPosition",value:function(e,t,a){var o=void 0!==t;if(void 0===a&&(a=t),!(o&&e.disabled)){try{void 0!==e.selectionStart&&(o?(!this._isInit&&!this._bodyClick&&e.focus(),e.setSelectionRange(t,a)):t=[e.selectionStart,e.selectionEnd])}catch(t){throw t}return t}}},{key:"_bindEvents",value:function(){if(!this._invalidFormat){this._bindButtonEvents();var t=e.Browser.isIE&&9===e.Browser.getIEVersion(),a=e.Browser.isFirefox?"click":"mouseup";this._addEvents({containerMouseUp:a},this.container);var o=t?"keyup":"input",i=t?"blur":"focusout",l={focus:"focus",mouseup:a,keyUp:o,change:"change",keydown:"keydown",spinKeyup:"keyup",focusOut:i,paste:"paste"};l.mouseWheel="mousewheel DOMMouseScroll MozMousePixelScroll",this._addEvents(l,this._input),this._input.on("contextmenu."+this.name,function(e){return e.preventDefault()})}}},{key:"_bindButtonEvents",value:function(){("focus"===this._opts.clearButton||"focus"===this._opts.spinButtons)&&this._addEvents({mouseEnter:"mouseenter",mouseLeave:"mouseleave"},this.container)}},{key:"_checkFormat",value:function(e){this._invalidFormat=e.test(this._opts.format)}},{key:"_destroy",value:function(){var t=this._clearButton,a=this.name;e.$window.off("keyup.".concat(a," keydown.").concat(a)),this.container.find(".zh-up,.zh-down").off("mousedown.".concat(a," mouseup.").concat(a)),t&&t.off("mousedown.".concat(a," mouseup.").concat(a)),_get(_getPrototypeOf(o.prototype),"_destroy",this).call(this),this._buttonPane=this._keyUp=this._keyUpTime=this._isFastInput=void 0}},{key:"getValue",value:function(){return{dateObject:this._opts.value,dateString:this._opts.value?this._input[0].value:void 0}}},{key:"_checkForModification",value:function(e){for(var t=this._opts.format,a=0;a<t.length;a++)this._isPartModified(t[a],!!e)}},{key:"setValue",value:function(e){e?(this._validateValue("value",e),this._viewDate=this._checkMinMaxLimit(this._viewDate),this._checkForModification(this._viewDate),this._updateElementValue()):(this._clearActionHandler(),this._input[0].setSelectionRange(0,0)),this.container.hasClass("has-focus")||this._input.trigger("change")}},{key:"formatDate",value:function(t,a){return e.Date.formatDate(t,a||this._opts.format)}},{key:"parseDate",value:function(e,t){return this._parseDateValue(e,t||this._opts.format)}},{key:"_resetValues",value:function(e,t){if(!isNaN(t)&&-1<["y","H","m","s"].indexOf(e)){this._viewDate["set".concat({y:"FullYear",H:"Hours",m:"Minutes",s:"Seconds"}[e])](0)}}},{key:"_validateValue",value:function(t,a){var o=!0,i=this._opts,l=i.format;return"string"==typeof a?i[t]=this._getStringValue(a,i):a instanceof Date?i[t]=a:(o=!!this._oldValueOption,i[t]=void 0),a=i.value,0>l.indexOf("h")&&0>l.indexOf("H")&&a?a.setHours(0,0,0,0):a&&a.setHours(a.getHours(),a.getMinutes(),0>l.indexOf("s")?0:a.getSeconds(),0),"value"===t&&(a&&(this._viewDate=new Date(a.getTime())),this._hasPicker&&e[this._pickerMethods.instance](this._picker).setValue(a)),o}},{key:"_windowKeyupHandler",value:function(t){(t.keyCode===e.keyCode.TAB&&t.shiftKey||this._reverseShiftKey)&&!this._reverseFocusset?(this._reverseFocusset=this._focusout=!0,this._selectText(this._dateFormat.slice(-1))):(t.keyCode===e.keyCode.TAB||this._tabKey)&&!this._focusset&&(this._focusset=this._focusout=!0,e.OS.isLinux()&&this._input[0].setSelectionRange(0,0),this._mouseupHandler()),e.$window.off("keyup.".concat(this.name," keydown.").concat(this.name))}},{key:"_updateElementValue",value:function(){var e=this._getRegEx(),t=this._opts.format;this._retursFormat=!1;var a=t.replace(e,this._replaceMatchedText.bind(this));this._retursFormat=!0,this._dateFormat=t.replace(e,this._replaceMatchedText.bind(this)),this._oldValue=this._input[0].value=a,this._opts.value=this._getDateValue()?new Date(this._viewDate.getTime()):void 0}},{key:"_windowKeydownHandler",value:function(t){var a=e.keyCode.TAB,o=t.keyCode;this._reverseShiftKey=o===a&&t.shiftKey,this._tabKey=o===a}},{key:"_focusTimeoutHandler",value:function(){this._addEvents({windowKeydown:"keydown",windowKeyup:"keyup"},e.$window)}},{key:"_toggleBtnDisplay",value:function(e,t,a,o){var i=e,l=this._showOrHideBtn.bind(this);t&&((null===i||o)&&(i=this._checkForPartModification()),("mouseleave"===o||!o&&"focus"===this._opts.clearButton)&&!this.container.hasClass("has-focus")&&(i=!0),this._clearBtnShown=!i),i===e?l.apply(void 0,arguments):(t&&l(i,!0),a&&l(e))}},{key:"_showOrHideBtn",value:function(e,t,a){var i=(t?"zinputfield--withclrbtn":"")+(a||!t?(t?e?"|":" ":"")+"zinputfield--spinbtnonfocus":"");e?this._updateClass("",i):this._data.className+=" "+i,_get(_getPrototypeOf(o.prototype),"_toggleBtnDisplay",this).apply(this,arguments)}},{key:"_spinTimeoutHandler",value:function(e){this._changeHandler(e,"spin")}},{key:"_setBoolValue",value:function(e,t,a){for(var o=e.length;0<=--o;)this["_"+e[o]+(a||"")]=t}},{key:"_focusOutHandler",value:function(a){if(this._hasPicker){var o=t(a.relatedTarget);if(o&&o.is(".zselectbox"))return}var i=this._opts;this._setBoolValue(["focusset","longPress","reverseFocusset","reverseShiftKey","tabKey"],!1),this._focusout=!0,window.getSelection().removeAllRanges(),this._viewDate=this._checkMinMaxLimit(this._viewDate,void 0,void 0,!1),this.container.removeClass("has-focus"),this._disableSpinBtns(),this._updateElementValue(),e.Browser.isIE||e.Browser.isSafari||e.OS.isLinux||(this._input[0].selectionStart=0),this._checkForChange(a,"change"),this._checkButtonsOptn("focus"===i.clearButton,"focus"===i.spinButtons,"hide","add","focusOut"),this._changeHandler(a,"blur"),this._isCleared=!1}},{key:"_validateStep",value:function(e){for(var t=0,a=e.length;t<a;t++)0>=+this._opts[e[t]]&&(this._opts[e[t]]=1)}},{key:"_focusHandler",value:function(e){var t=this._opts;return!t.disabled&&void(this.container.addClass("has-focus"),this._input[0].setSelectionRange(0,0),this._focusTimeout=setTimeout(this._focusTimeoutHandler.bind(this),10),!t.readonly&&this._checkButtonsOptn("focus"===t.clearButton,"none"!==t.spinButtons),this._clearBtnShown=!1,clearTimeout(this._clearButtonTimeout),this._clearButtonTimeout=setTimeout(this._isClearVisible.bind(this),1e3),this._changeHandler(e,"focus"))}},{key:"_checkButtonsOptn",value:function(e,t,a,o,i){var l=this._clearButton;o=(o||"remove")+"Class",e&&("focusOut"!==i&&l&&this._toggleBtnDisplay(null,!0,null,i),a&&this._toggleBtnDisplay("hide"===a,!0)),t&&this._buttonPane&&(this._toggleBtnDisplay("hide"===a,!1),this._opts.calendarIcon&&this.container[o]("zdatetimefield--buttonsonhover"),l&&l[o]("zh-right"))}},{key:"_mouseEnterHandler",value:function(){var e=this._opts;document.activeElement===this._input[0]||e.readonly||e.disabled||this._checkButtonsOptn("focus"===e.clearButton,"focus"===e.spinButtons,null,null,"mouseenter")}},{key:"_addEffect",value:function(){this._input.addClass("zeffects--skew"),clearTimeout(this._effectTimeout),this._effectTimeout=setTimeout(this._effectTimeoutHandler.bind(this),1e3)}},{key:"_effectTimeoutHandler",value:function(){this._input.removeClass("zeffects--skew")}},{key:"_getSegment",value:function(){var e=this._input[0];this._segment=this._checkForSegment(e.selectionStart,e.selectionEnd-1)}},{key:"_getPlaceholder",value:function(e){switch(this._opts.placeholderType){case"date-format":return e;case"date-format-in-upper":return e.toUpperCase();case"date-format-in-lower":return e.toLowerCase();case"underscore":return Array(e.length+1).join("_ ");case"custom":return this._getCustomMatch(e);}}},{key:"_addDisabledClass",value:function(e){var t=this._opts,a=["down","up"],o=[-1,1];if(t.value)for(var l=0,n;l<a.length;l++)n=this._modifyPartValue(e,o[l],!0),this._getDisabledValue(t.min,t.max,o[l],n)||this.container.find(".zh-".concat(a[l])).removeClass("is-disabled")}},{key:"_getDisabledValue",value:function(e,t,a,o){var i=this._updateDisabledState.bind(this),l;return l=e&&-1===a?i(e,o,void 0,a):void 0,l||(l=t&&1===a?i(t,o,!0,a,l):void 0),l}},{key:"_checkPart",value:function(e){var t=this["_get"+(-1<this.name.indexOf("date")?"Date":"Time")+"Parts"]();return t[e]&&this["_".concat(t[e],"Modified")]}},{key:"_checkForPartModification",value:function(){for(var e=[],t=0,a=this._opts.format,o=!1,l=0;l<a.length;l++)e[t++]=this._checkPart(a[l]);for(;0<=--t;)if(e[t]){o=!0;break}return this._isClearVisible(),!o}},{key:"_parseValue",value:function(e,t){if(!t)return this._isPartModified(e,!1),!0;var a=new Date(this._viewDate.getTime());return this._parseSegment(e,t,a),this._viewDate=a,!0}},{key:"_updateDisabledState",value:function(e,t,a,o,i){var l=this.container.find(".zh-".concat(1===o?"up":"down")),n=t.getTime(),s,r;return e&&(!this._checkTime&&e.setHours(0,0,0,0),s=e.getTime()),r=a&&e?n>=s:n<=s,e&&r?(l.addClass("is-disabled"),!0):i}},{key:"_containerMouseUpHandler",value:function(e){var a=t(e.target);(a.closest(".zdatetimefield__icon").length||a.closest(".zdatetimefield__iconbutton").length)&&(e.preventDefault(),this._currentSegment?this._selectText(this._currentSegment):(this._selectCaretPosition(this._input[0],0,0),this._mouseupHandler()))}},{key:"_mouseLeaveHandler",value:function(){var e=this._opts,t=this._clearButton,a=this._buttonPane;document.activeElement!==this._input[0]&&("focus"===e.spinButtons&&(a&&this._toggleBtnDisplay(!0),t&&t.addClass("zh-right"),e.calendarIcon&&this.container.addClass("zdatetimefield--buttonsonhover")),"focus"===e.clearButton&&t&&this._toggleBtnDisplay(!0,!0,void 0,"mouseleave"))}},{key:"_spinKeyupHandler",value:function(t){this._keyUp=!0;var a=t.keyCode;a!==e.keyCode.LEFT&&a!==e.keyCode.RIGHT&&this._checkForChange(t,"spinend")}},{key:"_replaceMatchedText",value:function(e){var t=this._replaceText(e);if(t=void 0===t?e.slice(1,e.length-1):t,this._retursFormat){var a="",o=t.length;for(e=this._getMatch(e);o--;)a+=e[0];return a}return t}},{key:"_pasteTimeoutHandler",value:function(e,t){var a=this._parseDateValue(e,this._opts.format);a&&a.isValid&&(this._viewDate=a.date),this._checkForModification(a.isValid),this._updateElementValue(),this._selectCaretPosition(this._input[0],0,0),this._mouseupHandler(t),this._pasteAction=!1}},{key:"_mouseWheelHandler",value:function(e){var t=this._input,a=e.originalEvent;if(document.activeElement===t[0]){var o={preventDefault:function(){},type:"mousewheel"};if(this._keyUp||this._mousewheelTriggered||(this._keyUp=!0),this._mWheelTimer||(this._mWheelSpinStart=this._checkForChange(e,"spinstart")),this._mWheelSpinStart){this._mousewheelTriggered=!0;var i=this;clearTimeout(this._mWheelTimer),this._mWheelTimer=setTimeout(function(){i._checkForChange(e,"spinend"),i._mWheelTimer=i._mWheelSpinStart=void 0},250),e.preventDefault(),e.stopPropagation(),o.keyCode=(0===a.detail?0>a.wheelDelta:0<a.detail)?38:40,this._keydownHandler(o)}}}},{key:"_pasteHandler",value:function(e){this._pasteAction=!1;var t=e.originalEvent.clipboardData.getData("Text"),a=this._selectCaretPosition(this._input[0]),o;void 0!==a[0]&&void 0!==a[1]&&(o=a[1]-a[0]),o&&o===this._input[0].value.length?(this._pasteAction=!0,e.stopPropagation(),e.preventDefault(),this._input[0].value=t,clearTimeout(this._pasteTimeout),this._pasteTimeout=setTimeout(this._pasteTimeoutHandler.bind(this,t,e),500)):e.preventDefault()}},{key:"_modifyPartValue",value:function(e,t,a){var o=new Date(this._viewDate.getTime()),i=this._modifyValue(o,e,t,this._getDateValue());return a||(o=this._checkMinMaxLimit(o,i,t),this._isPartModified(e,!0),this._oldDateValue&&this._setOldDate(),this._viewDate=o,!this._oldDateValue&&this._setOldDate()),this._hasPicker&&(this._opts.pickerOptions.disabledDaysOfWeek||this._opts.pickerOptions.disabledDates)&&(this._oldDateValue&&this._setOldDate(),this._viewDate=this._checkForDisabledDates(this._viewDate,t),!this._oldDateValue&&this._setOldDate()),o}},{key:"_setOldDate",value:function(){if(this._updateOldVal){var t=this._oldDateValue,a=!!this._checkTime&&!e.Date.areTimesEqual(t,this._viewDate);t&&e.Date.areDatesEqual(t,this._viewDate)&&!a||(this._oldDateValue=new Date(+this._viewDate))}}},{key:"_mouseupHandler",value:function(e){this._isClearVisible();var t=this._selectCaretPosition(this._input[0]);t[0]===t[1]?this._selectText(this._checkForSegment(t[0],t[0]-1)):e&&"mouseup"===e.type&&window.getSelection().removeAllRanges()}},{key:"_checkForSegment",value:function(e,t){for(var a=this._allowedChars,o=this._dateFormat,l=o.length;e<l||0<=t;e++,t--){if(-1!==a.indexOf(o[e]))return o[e];if(0<=t&&-1!==a.indexOf(o[t]))return o[t]}}},{key:"_getStringDiff",value:function(e,t,a,o){this._isNewValue=!1;var l=o+e.length-a.length,n=[],s;e=e.substring(0,l),a=a.substring(0,o);var r=a.length,d=t[o-1];if(e===a&&0<o)return[[d,a[o-1]]];if(0===e.indexOf(a)&&(0===r||t[r-1]!==t[r])){var c="";for(s=r;s<e.length;s++)e[s]!==c&&0<=this._allowedChars.indexOf(t[s])&&(c=t[s],n.push([c,""])),this._resetToFirst(c);return n}var _=a[r-1];return /[ |/|.|-|;]/.test(_)||_===e[l]?[[t[o-1],_]]:(this._focusout&&(this._resetOnBlur(d),this._focusout=!1),this._isNewValue=!0,[[d,a[o-1]]])}},{key:"_checkForChange",value:function(e,t){var a=void 0===this._getDateValue(),o=this._viewDate,i=this._oldDateValue,l,n;if(a||1!==o.getDate()||0!==o.getMonth()||o.getFullYear()!==this._getNewDate().getFullYear()||0!==o.getHours()||0!==o.getMinutes()||0!==o.getSeconds()||(l=!0),-1<t.indexOf("spin")?"spin"===t?(clearTimeout(this._spinTimeout),this._spinTimeout=setTimeout(this._spinTimeoutHandler.bind(this,e),this._opts.spinEventTriggerDelay)):n=!0:(this._isCleared||!a&&(l||o&&i&&+i!=+o))&&(n=!0),n)return this._changeHandler(e,t)}},{key:"_changeHandler",value:function(e,t){return"change"===(t||e.type)&&this._setOldDate(),this._dispatchEvent(t||"change",e,this._getCurrentValue())}},{key:"_getCurrentValue",value:function(){return{value:this._opts.value?this._input[0].value:"",dateValue:this._opts.value}}},{key:"_keydownHandler",value:function(t){if(this._opts.disabled||this._opts.readonly)return!1;var a=e.keyCode,o=a.TAB,i=t.keyCode,l=t.shiftKey,n=this._selectCaretPosition.bind(this),s=this._input[0],r=this._dateFormat,d;if(i!==o||0===s.selectionStart&&l||s.selectionEnd===s.value.length&&!l||t.stopImmediatePropagation(),-1<[a.RIGHT,a.LEFT,o].indexOf(i)){i!==o&&t.preventDefault(),d=n(s),this._viewDate=this._checkMinMaxLimit(this._viewDate),this._isModified&&(this._updateElementValue(),n(s,d[0],d[1])),d[0]!==d[1]&&this._mouseupHandler();var c=i===a.LEFT?-1:1;i===o&&l&&(this._focusout=!0,c=-1),d=n(s);for(var _=-1==c?d[0]-1:d[1]+1,u=this._opts.format;0<=_&&_<r.length;){var p=r[_],m=u.lastIndexOf(p);if(0<=this._allowedChars.indexOf(p)){i===o&&(m!==u.length||m+1!==u.length)&&(t.preventDefault(),this._focusout=!0),this._reverseFocusset=-1===c,this._selectText(r[_]);break}_+=c}}if(i===a.UP||i===a.DOWN){t.preventDefault(),d=n(s);var h=r[d[0]];0<=this._allowedChars.indexOf(h)&&(this._modifyPartValue(h,i===a.UP?1:-1),this._updateElementValue(),this._clearButton&&this._toggleBtnDisplay(null,!0),this._selectText(h)),this._checkForChange(t,this._keyUp?"spinstart":"spin"),this._keyUp=!1}if(t.metaKey||t.ctrlKey){var g=n(s),v;void 0!==g[0]&&void 0!==g[1]&&(v=g[1]-g[0]),(88===i&&v!==s.value.length||90===i)&&t.preventDefault()}}},{key:"_checkMinMaxLimit",value:function(e,t,a,o){var i=this._opts.min,l=this._opts.max;return o=void 0===o||o,this._isModified=!1,l&&(e=this._validateValues(l,e,t,a,o,!0)),i&&(e=this._validateValues(i,e,t,a,o)),e}},{key:"_validateValues",value:function(e,t,a,o,i,l){if(e){var n=this._getNewDate().getTime(),s=this._opts,r,d,c,_,u;r=e.getTime(),d=t.getTime(),c=l?r<n:r>n,_=l?d>=r:d<=r,_||a&&!this[a]&&c&&!o?(u=s.value?"add":void 0,this._isModified=!0,t=new Date((o&&d!==r?this._viewDate:e).getTime())):u=_?void 0:"remove",u&&i&&"none"!==s.spinButtons&&this.container.find(".zh-".concat(l?"up":"down"))["".concat(u,"Class")]("is-disabled")}return t}},{key:"_keyUpHandler",value:function(t,a){var o=t.keyCode;if("input"===t.type||"keyup"===t.type&&(186<=o&&192>=o||219<=o&&222>=o||48<=o&&57>=o||65<=o&&90>=o||-1<[32,8,46].indexOf(o))){var l=this._getNewDate().getTime(),n=this._dateFormat;if(this._isFastInput=!!(this._keyUpTime&&500>l-this._keyUpTime),this._keyUpTime=l,document.activeElement!==this._input[0])return;var s=this._getStringDiff(this._oldValue,n,this._input[0].value,this._selectCaretPosition(this._input[0])[0]),r=s.length,d=r&&/[ |/|.|-|;]/.test(s[0][1]),c=1===r&&d,_;if(this._isNewValue&&-1<this._allowedChars.indexOf(s[0][0])&&this._currentSegment!==this._oldSegment&&this._resetValues(s[0][0],s[0][1]),c)this._viewDate=this._checkMinMaxLimit(this._viewDate);else for(_=0;_<r;_++){var u=this._translateAToE(s[_][0]),p=this._translateAToE(s[_][1]);this._parseValue(u,p)}if(this._pasteAction||this._updateElementValue(),d=r&&/[ |/|.|-|;]/.test(s[0][0]),r&&!d&&(this._selectText(s[0][0]),this._isNextSegment)){var m=n.lastIndexOf(s[0][0])+1;if(m<n.length){for(;-1===this._allowedChars.indexOf(n[m])&&m<n.length;)m+=1;this._isNextSegment=!1,this._viewDate=this._checkMinMaxLimit(this._viewDate),this._pasteAction||this._updateElementValue(),this._selectText(n[m])}}c?this._keydownHandler({keyCode:e.keyCode.RIGHT,preventDefault:function(){}}):!a&&this._checkForChange(t,"spin"),"none"!==this._opts.clearButton&&this._toggleBtnDisplay(null,!0)}}},{key:"_setAttribute",value:function(e,t){var a=this.name,i=this._opts,l=this._updateElementValue.bind(this),n=this._input,s="format"===e,r="value"===e,d=_get(_getPrototypeOf(o.prototype),"_setAttribute",this).bind(this),c=this._format,_,u;if(this._opts[e]=t,this._picker&&(u=this._getPicker()),s||r){if(r&&this._setValue(t),this._setBoolValue(["month","year","minutes","seconds","hours"],!0,"Modified"),s){if(this._format=t,this._setFormat(),this._validateFormat(),this._invalidFormat)return void(this._format=i.format=c);u&&u._setAttribute("format",i.format)}var p=i.value;this._checkForModification(p),this._viewDate=this._checkMinMaxLimit(p?new Date(p.getTime()):this._resetViewDate()),_=!0,l(),r&&!this.container.hasClass("has-focus")&&this._input.trigger("change"),r&&!t&&(this._isCleared=!0)}else if("min"===e||"max"===e){if(this._validateValue(e,t),this._performValidations(),this._viewDate=this._checkMinMaxLimit(this._viewDate),_=!0,u){var m=i[e],h=e+"Date";u.setAttribute(h,m),i.pickerOptions[h]=m}l()}else /increment|decrement|spinButtons/g.test(e)?("spinButtonsOrientation"===e&&this._updateClass("zinputfield--split","vertical"===t),d(e,t),t&&this._reConstructSpinButtons(t)):"placeholderType"===e?(i.placeholerType=-1===["date-format","underscore","date-format-in-upper","date-format-in-lower","custom"].indexOf(t)?"date-format":t,i.value||l()):"locale"===e?(this._setFormat(),l(),n[("ar"===t?"add":"remove")+"Class"]("zh-bidioverride")):"disabled"===e?(d(e,t),"none"!==i.clearButton&&(t?this._clearButton.off("mouseup.".concat(a," mousedown.").concat(a)):this._bindClearBtnEvents())):"rtl"===e?n[("ar"===i.locale?"add":"remove")+"Class"]("zh-bidioverride"):"timeZone"===e?(u&&u.setAttribute(e,t),this._setTimeZone(),this._reInit=!0):d(e,t);_&&(this._disableSpinBtns(),this._domChanged=!0)}},{key:"_setValue",value:function(t){var a=this._opts,o=this._input,i=this._validateValue("value",t);return t=a.value,this._performValidations(),i&&t&&(this._setOldDate(),this._viewDate=new Date(t.getTime()),o.attr("aria-valuenow",e.Date.formatDate(t,a.format))),t||o.removeAttr("aria-valuenow"),this._clearButton&&this._toggleBtnDisplay(null,!0),i}},{key:"_updateClearBtn",value:function(){_get(_getPrototypeOf(o.prototype),"_updateClearBtn",this).call(this),this._opts.value&&(this._clearBtnShown=!0,"focus"===this._opts.spinButtons&&this._clearButton.addClass("zh-right")),this._toggleBtnDisplay(null,!0)}},{key:"_bindClearBtnEvents",value:function(){this._addEvents({clearButtonClick:"mouseup",clearButtonMousedown:"mousedown"},this._clearButton)}},{key:"_clearButtonMousedownHandler",value:function(e){e.stopPropagation(),e.preventDefault(),clearInterval(this._mouseDownTimer),this._mouseDown=!1,this._getSegment()}},{key:"_clearActionHandler",value:function(){this._opts.value=null,this._isCleared=!0,this._immediateCommit&&(this._lastValue=void 0);var t=this._input;t[0].value="",document.activeElement!==t[0]&&t.focus(),this._keyUpHandler({type:"input",keyCode:e.keyCode.BACKSPACE,preventDefault:function(){}},!0),this._selectText(this._segment),this._mouseupHandler(),this._data.spinButtons&&this._buttonPane.find(".zh-up,.zh-down").removeClass("is-disabled")}},{key:"_isClearVisible",value:function(){this._clearBtnShown="none"!==this._opts.clearButton&&this._clearButton&&this._clearButton.is(":visible")}},{key:"_clearButtonClickHandler",value:function(e){return this._clearBtnShown?(e.preventDefault(),clearInterval(this._mouseDownTimer),this._mouseDown=!1,this._clearActionHandler(),!1):void this._mouseupHandler()}},{key:"_spinButtonsMousedownHandler",value:function(a){if(a.preventDefault(),!(this._opts.disabled||1<a.which||this._opts.readonly||t(a.target).closest(".zinputfield__spinbutton").hasClass("is-disabled"))){this._mouseDown=!0,this.container.addClass("has-focus"),this._checkForChange(a,"spinstart"),this._input[0].selectionStart===this._input[0].value.length&&this._input[0].selectionEnd===this._input[0].value.length&&(this._selectCaretPosition(this._input[0],0,0),this._mouseupHandler(a));var o=this._assignEventProps(a);this._keyUp=!0,this._keydownHandler(o),clearInterval(this._mouseDownTimer),this._mouseDownTimer=setInterval(this._repetitiveMouseDownHandler.bind(this,a),220),e.$document.off("mouseup.".concat(this.name)).on("mouseup.".concat(this.name),this._documentMouseUpHandler.bind(this))}}},{key:"_repetitiveMouseDownHandler",value:function(e){this._mouseDown?this._keydownHandler(this._assignEventProps(e)):clearInterval(this._mouseDownTimer)}},{key:"_assignEventProps",value:function(a){return{keyCode:t(a.target).closest(".zh-up").length?e.keyCode.UP:e.keyCode.DOWN,preventDefault:function(){}}}},{key:"_documentMouseUpHandler",value:function(){clearInterval(this._mouseDownTimer),e.$document.off("mouseup.".concat(this.name)),this._mouseDown=!1}},{key:"_updateSpinButtons",value:function(){var e=this._data;"focus"===this._opts.spinButtons&&(e.className+=" zdatetimefield--buttonsonhover"),_get(_getPrototypeOf(o.prototype),"_updateSpinButtons",this).call(this)}},{key:"_bindSpinButtonEvents",value:function(){this._addEvents({spinButtonsMouseup:"mouseup",spinButtonsMousedown:"mousedown"},this.container.find(".zh-up,.zh-down"))}},{key:"_spinButtonsMouseupHandler",value:function(e){this._mouseUp=!0,this._checkForChange(e,"spinend")}},{key:"_reConstructSpinButtons",value:function(e){var t=this._opts,a=this._data;a.spinButtons&&("focus"===e&&this._addEvents({mouseEnter:"mouseenter",mouseLeave:"mouseleave"},this.container),this.container.attr("role","spinbutton"),a.isVertical&&!t.calendarIcon&&this._updateClass(" zdatetimefield",!0),"always"===t.spinButtons&&this._updateClass("zdatetimefield--buttonsonhover",!0))}},{key:"name",get:function(){return"zdateinput"}},{key:"attrs",get:function(){return{placeholderType:"date-format",jumpOnComplete:!0,locale:"en-US",spinButtonsOrientation:"vertical",incrementOnWrapAround:!0,timeZone:null}}},{key:"props",get:function(){return{otherInputFormats:[]}}}]),o}(e.ZInputField);e.registerComponent("ZDateInput",e.ZInputField,V);var z=function(t){function a(){return _classCallCheck(this,a),_possibleConstructorReturn(this,_getPrototypeOf(a).apply(this,arguments))}return _inherits(a,t),_createClass(a,[{key:"_validateFormat",value:function(){this._checkFormat(/d|M|y/g)}},{key:"_init",value:function(){this._allowedChars="Hhmstz",_get(_getPrototypeOf(a.prototype),"_init",this).apply(this,arguments),this._opts.templateName="zinputfield",this._opts.incrementOnWrapAround=!1}},{key:"_setFormat",value:function(){this._setFormatVal(/^(time-short|time-long|time-medium)$/,"time","hh:mm tt")}},{key:"_getDateValue",value:function(){return this._hoursModified&&this._minutesModified&&this._secondsModified?new Date(this._viewDate.getTime()):void 0}},{key:"_getMatch",value:function(e){return e}},{key:"_getRegEx",value:function(){return /HH|H|hh|h|mm|m|ss|s|tt|zz{0,2}|"[^"]*"|'[^']*'/g}},{key:"_resetToFirst",value:function(e){this._resetTimeToFirst(e)}},{key:"_resetTimeToFirst",value:function(e){e&&-1<"Hms".indexOf(e)&&this._viewDate["set".concat({H:"Hours",m:"Minutes",s:"Seconds"}[e])](0)}},{key:"_resetOnBlur",value:function(e){this._resetTimeOnBlur(e)}},{key:"_resetTimeOnBlur",value:function(e){"m"===e&&this._viewDate.setMinutes(0)}},{key:"_parseSegment",value:function(e,t,a){return this._parseTime(e,t,a)}},{key:"_replaceTime",value:function(e){var t=this._viewDate,a=this._hoursModified,o=this._minutesModified,i=this._secondsModified,l=this._getPlaceholder.bind(this),n;if(-1<["h","hh","H","HH"].indexOf(e))n=a?t.getHours():l(e),a&&(-1<["h","hh"].indexOf(e)&&(n=n%12||12),n=-1<["h","H"].indexOf(e)?n.toString():(10>n?"0":"")+n);else if(-1<["m","mm","s","ss"].indexOf(e)){var s=-1<e.indexOf("m")?["Minutes",o]:["Seconds",i];n=s[1]?t["get".concat(s[0])]():l(e),s[1]&&(n=1===e.length?n.toString():(10>n?"0":"")+n)}else-1<["tt"].indexOf(e)?(n=a?12>t.getHours()?this._getI18NText("AM"):this._getI18NText("PM"):this._opts.placeholder.period,"underscore"!==this._opts.placeholderType&&(n=l(n))):-1<["z","zz","zzz"].indexOf(e)&&(n=t.toString().split(" ")[5]);return this._translateEToA(n)}},{key:"_replaceText",value:function(e){return this._replaceTime(e)}},{key:"_validateOptions",value:function(){var e=this;_get(_getPrototypeOf(a.prototype),"_validateOptions",this).call(this);var t=this._opts;["value","min","max"].forEach(function(a){t[a]&&(t[a]=e._changeToViewDate(t[a]))})}},{key:"_performValidations",value:function(){_get(_getPrototypeOf(a.prototype),"_performValidations",this).call(this,["hourStep","minuteStep","secondStep"],["hours","minutes","seconds"])}},{key:"_getCustomMatch",value:function(e){return this._getTimeMatch(e)}},{key:"_getTimeMatch",value:function(e){var t=this._getTimeParts()[e[0]];return t=-1<["h","hh","H","HH","m","mm","s","ss"].indexOf(e)?this._opts.placeholder[t.slice(0,-1)]:"",t||!this._hoursModified&&this._opts.placeholder.period||e}},{key:"_getTimeParts",value:function(){return{H:"hours",h:"hours",m:"minutes",s:"seconds"}}},{key:"_modifyValue",value:function(e,t,a,o){return this._modifyTime(e,t,a,o)}},{key:"_modifyTime",value:function(e,t,a,o){var i;if(-1<["h","H"].indexOf(t)){i="_hoursModified",a*=this._opts.hourStep;var l=e.getHours()+a;this._opts.incrementOnWrapAround&&o||(23<l&&(l%=24),0>l&&(l+=24)),(this._hoursModified||0>a)&&e.setHours(l)}else-1<["m","s"].indexOf(t)?i=this._minuteSecondUpdate(t,a,e,o):"t"===t&&e.setHours((e.getHours()+12)%24);return i}},{key:"_disableSpinBtns",value:function(){var e=this._opts,t=e.value,a=e.min,o=e.max,i=this._buttonPane;if("none"!==e.spinButtons&&t){var l=new Date(+t),n;this._modifyTime(l,this._currentSegment||"h",-1),n=a&&+l<+a||o&&+l>+o?"addClass":"removeClass",i.find(".zh-down")[n]("is-disabled"),l=new Date(+t),this._modifyTime(l,this._currentSegment||"h",1),n=a&&+l<+a||o&&+l>+o?"addClass":"removeClass",i.find(".zh-up")[n]("is-disabled")}}},{key:"_getDisabledValue",value:function(e,t,o,i){var l=_get(_getPrototypeOf(a.prototype),"_getDisabledValue",this).apply(this,arguments);return!l&&(e&&+i<+e||t&&+i>+t)&&(l=!0,this.container.find(".zh-".concat(1===o?"up":"down")).addClass("is-disabled")),l}},{key:"_updateDisabledState",value:function(e,t,a){var o=this.container.find(".zh-".concat(a?"up":"down")),i,l;return e=+e,t=+t,l=a?t>e:t<e,e&&l&&(o.addClass("is-disabled"),i=!0),i||o.removeClass("is-disabled"),i}},{key:"_parseTime",value:function(e,t,a){var o=this._opts.jumpOnComplete,i=this._viewDate,l=this._hoursModified,n,s;if("h"===e){if(s=(l?10*(a.getHours()%12):0)+parseInt(t),isNaN(s))return;if(n=s.toString(),!o&&12<s)s=this._isFastInput?parseInt(n[0]):parseInt(n.slice(-1));else if(o)for(;12<s;)s=parseInt(s.toString().slice(1));s=12<=i.getHours()?s+12:0==s%12?0:s,o&&l&&"1"!==t&&(this._isNextSegment=!0),23<s&&(s=12)}else if("H"===e){if(s=(this._isNewValue&&this._oldSegment!==this._currentSegment?0:l?10*a.getHours():0)+parseInt(t),isNaN(s))return;n=s.toString();var r=n.length;o&&(23<=s||2===r&&"0"!==n[1])&&(this._isNextSegment=!0),!o&&23<s&&this._isFastInput?2===r?s=i.getHours():3<=r&&(s=parseInt(s.toString().slice(1)),23<s&&(s=parseInt(s.toString()[0]))):23<s&&(s=o?parseInt(n[0]):parseInt(n.slice(-1)))}else if(-1<["m","s"].indexOf(e))this._parseMinuteSecond(e,t,a);else if("t"===e&&l){for(this._typedPeriodChar+=t.toLowerCase();0<this._typedPeriodChar.length;){var d=this._getI18NText("AM"),c=this._getI18NText("PM"),_=this._typedPeriodChar;if(0===d.toLowerCase().indexOf(_)&&12<=a.getHours()||0===c.toLowerCase().indexOf(_)&&12>a.getHours())return a.setHours((a.getHours()+12)%24),this._oldDateValue=new Date(i.getTime()),this._viewDate=a,!0;this._typedPeriodChar=_.substring(1,_.length)}return this._hoursModified=!0,!0}return-1<["H","h"].indexOf(e)&&a.setHours(s),-1===["m","s"].indexOf(e)&&(this._hoursModified=!0),a}},{key:"_parseMinuteSecond",value:function(e,t,a){var o="m"===e?"Minutes":"Seconds",i="_".concat(this._getTimeParts()[e],"Modified"),l=(this["".concat(i)]?10*a["get".concat(o)]():0)+parseInt(t),n=this._opts.jumpOnComplete;if(!isNaN(l)){var s=l.toString();n&&(59<=l||2===s.length&&"0"!==s[1])&&(this._isNextSegment=!0),!n&&59<l&&this._isFastInput?2===s.length?l=this._viewDate["get".concat(o)]():3<=s.length&&(59<l&&(l=parseInt(l.toString().slice(1))),59<l&&(l=parseInt(l.toString()[0]))):59<l&&(l=n?parseInt(s[0]):parseInt(s.slice(-1))),a["set".concat(o)](l),this[i]=!0}}},{key:"_minuteSecondUpdate",value:function(e,t,a,o){var i="_".concat(this._getTimeParts()[e],"Modified"),l="".concat(i.slice(1,7),"Step"),n="m"===e?"Minutes":"Seconds";t*=this._opts[l];var s=a["get".concat(n)]()+t;return this._opts.incrementOnWrapAround&&o||(59<s&&(s%=60),0>s&&(s+=60)),(this[i]||0>t)&&a["set".concat(n)](s),i}},{key:"_isPartModified",value:function(e,t){this._isTimeModified(e,t)}},{key:"_isTimeModified",value:function(e,t){var a=this._getTimeParts();this["_".concat(a[e],"Modified")]=t,-1<["h","H"].indexOf(e)&&!t&&(this._typedPeriodChar="")}},{key:"_changeToViewDate",value:function(t){if(t=e.Date.parseDate(t,this._format),t=t&&t.isValid?t.date:void 0,t){var a=this._viewDate;t.setDate(a.getDate()),t.setMonth(a.getMonth()),t.setFullYear(a.getFullYear())}return t}},{key:"setValue",value:function(e){e=this._changeToViewDate(e),_get(_getPrototypeOf(a.prototype),"setValue",this).call(this,e)}},{key:"_setAttribute",value:function(e,t){-1<["value","min","max"].indexOf(e)&&t&&(t=this._changeToViewDate(t)),_get(_getPrototypeOf(a.prototype),"_setAttribute",this).call(this,e,t)}},{key:"name",get:function(){return"ztimefield"}},{key:"attrs",get:function(){return{format:"hh:mm tt",hourStep:1,minuteStep:1,secondStep:1,placeholder:{hour:"hour",minute:"minute",second:"second",period:"AM/PM"},labels:{period:"AM/PM",AM:"AM",PM:"PM"}}}}]),a}(e.ZDateInput);e.registerComponent("ZTimeField",e.ZDateInput,z);var B=function(o){function i(){return _classCallCheck(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,o),_createClass(i,[{key:"_init",value:function(e,t){this._setTimeZone(),this._is12HourFormat=-1<t.format.indexOf("h"),t.viewDate=this._getNewDate(),t.viewDate.setHours(0,0,0,0),t.selectedTime=this._getDateVal(t.selectedTime),this._validateTimeOpts(),this._buildData()}},{key:"_setTimeZone",value:function(){this._timeZone=e.Date.timeZone=this._opts.timeZone||e.timeZone}},{key:"_getNewDate",value:function(){return this._timeZone?e.Date.changeTZOfDate(new Date,this._timeZone):new Date}},{key:"_validateLimits",value:function(t){for(var a=this._opts,o=["minTime","maxTime"],l=0,n;2>l;l++)n=o[l],a[n]&&(this["_"+n]=a[n]=this._parseTimeVal(n));var s=a.minTime,r=a.maxTime;s&&r&&e.Date.isGreater(s,r)&&(r=a.maxTime=void 0),r&&t&&e.Date.isGreater(t,r)&&a.selectedTime.setHours(r.getHours(),r.getMinutes(),0,0),s&&t&&e.Date.isGreater(s,t)&&a.selectedTime.setHours(s.getHours(),s.getMinutes(),0,0)}},{key:"_checkHourMinLimit",value:function(e,t,a){var o=this._opts.minTime,i=this._opts.maxTime;return o&&(a&&e<o.getHours()||e===o.getHours()&&t<o.getMinutes())||i&&(a&&e>i.getHours()||e===i.getHours()&&t>i.getMinutes())}},{key:"_checkPeriod",value:function(t,a,o){var i=t.getHours(),l=!!((o?12<=i:12>i)&&this._checkHourMinLimit(a,t.getMinutes(),!0));this._opts.disabledTimeList.length&&(l=this._checkIfDisabled(t,t.getMinutes(),l,a)),e.select(this._periodEle).setOptionAttributes(o?"AM":"PM","disabled",l)}},{key:"_disableTime",value:function(e,t,a){var o=!!this._checkHourMinLimit(e.getHours(),a||t);return this._opts.disabledTimeList.length&&(o=this._checkIfDisabled(e,t,o)),o}},{key:"_parseTimeVal",value:function(t){var a=e.Date.parseDate(this._opts[t],this._opts.format).date;return a.setSeconds(0,0),a}},{key:"_validateTimeOpts",value:function(){var e=this._opts,t=e.selectedTime,a=this._minTime,o;t&&(o=this._getNewDate(),o.setHours(t.getHours(),t.getMinutes(),0,0)),this._opts.selectedTime=o||(a?new Date(a.getTime()):this._opts.selectedTime),(e.minTime||e.maxTime)&&this._validateLimits(o)}},{key:"_postEachRender",value:function(e,t){var a=this._opts,o=t.modifiedAttr;"timeFieldType"!==o&&this._hourEle&&this._input&&this._singleSelect&&this._combinedEle||this._updateTimeInputs(),(this._timeElemRendered||this._valueReset)&&("multiple-select-box"===a.timeFieldType&&"singleSelect"!==o&&this._checkForTime(),this._updateSelectedTime(a.timeFieldType,this._timeElemRendered))}},{key:"_postRender",value:function(){this._data.className+=" ",this._updateTimeInputs()}},{key:"_updateTimeInputs",value:function(){var e=this._opts,t=this._opts.id,a=this.element,o=e.timeFieldType;"input"===o?this._input=a.find("#"+t+"-type-input"):"multiple-select-box"===o?"h-m-t"===e.timeMultipleSelectBoxType?(this._hourEle=a.find("#"+t+"-hour"),this._minuteEle=a.find("#"+t+"-minute"),this._is12HourFormat&&(this._periodEle=a.find("#"+t+"-period"))):(this._combinedEle=a.find("#"+t+"-time-combined"),this._is12HourFormat&&(this._periodEle=a.find("#"+t+"-combined-period"))):this._singleSelect=a.find("#"+t+"-single-time-select")}},{key:"_buildData",value:function(){this.buildTimePicker()}},{key:"_validateOpts",value:function(){for(var e=this._opts,t=t=["hourStep","minuteStep"],a=0,o;a<t.length;a++)o=+e[t[a]],e[t[a]]=0>=o?1:o}},{key:"buildTimePicker",value:function(){var e=this._opts,t=e.timeFieldType;"none"!==e.timeLabelType&&this._buildLabel(),"input"===t?this._buildInputElement():"none"!==t&&this._buildSelectElement(e),this._timeElemRendered=!0}},{key:"_buildLabel",value:function(){var e=this._opts,t=e.timeLabelType;"none"!==t&&(this._data.timeLabel={},-1<["icon","icon-text"].indexOf(t)&&this._getTimeIconProps(),-1<["text","icon-text"].indexOf(t)&&(this._data.timeLabel.text=e.timeLabel))}},{key:"_getTimeIconProps",value:function(){var t=this._opts,a={defaultIconClassName:"zdatetimepicker__timeicon",iconClassName:t.timeLabelIconClassName,SVGIconClassName:"zdatetimepicker__time",SVGIconId:t.timeLabelSVGIconId,defaultSVGIconId:"zc__svg--time",isCE:this.isCE};this._data.timeLabel.icon=e._getIconInfo(t.timeLabelIconClassName,t.timeLabelSVGIconId,"#zc__svg--time","zdatetimepicker__timeicon",a)}},{key:"_triggerChange",value:function(e){var t=this.getAttribute("value");this._opts.selectedTime=t,this._dispatchEvent("timechange",e,{selectedTime:t},void 0,!!e)}},{key:"_updateSelectedTime",value:function(t,a){"input"===t?(this._opts.selectedTime=e.timefield(this._input).getValue().dateObject,a&&(this._initialVal=new Date(+this._opts.selectedTime))):this._checkSelectedTime.apply(this,arguments)}},{key:"_getDateVal",value:function(t,a){return e.Date.parseDate(t,a||this._opts.format).date}},{key:"_destroy",value:function(){var t=this._opts.timeFieldType,a=this._input;"input"===t&&a&&a.length?(this.isCE?a.remove():e.timefield(a).destroy(),this._input=void 0):"none"!==t&&this._destorySelectElement(t)}},{key:"update",value:function(){this._checkForTime&&this._checkForTime()}},{key:"setTime",value:function(t){var a=this._opts.timeFieldType,o=this._opts.minTime,i=this._getNewDate();if(t?(t=this._getDateVal(t),t&&(i.setHours(t.getHours()),i.setMinutes(t.getMinutes()),i.setSeconds(0,0))):o?i=new Date(+o):i.setHours(0,0,0,0),this._opts.viewDate=new Date(+i),"input"===a)e.timefield(this._input).setAttribute("value",i||this._initialVal);else if("multiple-select-box"===a)this._setTimeOnMultipleSelect(!this._opts.valueUpdate,i);else{var l;t&&(l=this._getNewDate(),l.setHours(t.getHours(),t.getMinutes(),0,0),l=this._sortSingleSelectValues(l)),l&&e.select(this._singleSelect).setAttribute("selectedValue",(+l).toString()||this._getSingleSelectFirstVal())}this._triggerChange()}},{key:"clearTime",value:function(){var t=this._opts.timeFieldType;"input"===t?e.timefield(this._input).setAttribute("value",this._is12HourFormat?"12:00 AM":"00:00"):"multiple-select-box"===t?this._setTimeOnMultipleSelect(!0):e.select(this._singleSelect).setAttribute("selectedValue",this._getSingleSelectFirstVal()),this._triggerChange()}},{key:"refresh",value:function(){this._refresh=!0,this._opts.valueUpdate=!0,this._checkForTime&&this._checkForTime(),this._refresh=!1}},{key:"getAttribute",value:function(t){if("value"===t){var a=this._opts.timeFieldType,o,l;if("input"===a)o=e.timefield(this._input).getValue().dateObject;else if("multiple-select-box"!==a)"single-select-box"===a&&(l=e.select(this._singleSelect).getAttribute("selectedValue"),o=new Date(+l));else if("h-m-t"===this._opts.timeMultipleSelectBoxType)o=this._setSelectTimeForMultiple();else{l=e.select(this._combinedEle).getAttribute("selectedValue");var n="";this._is12HourFormat&&(n=e.select(this._periodEle).getAttribute("selectedValue")),l=l+" "+n,o=e.Date.parseDate(l,this._opts.format).date}return o}return _get(_getPrototypeOf(i.prototype),"getAttribute",this).apply(this,arguments)}},{key:"_setAttribute",value:function(t,a){var o=!0,l=this._opts;if(("timeFieldType"===t||"timeMultipleSelectBoxType"===t||"fixedTimeOptions"===t)&&(this._data.modifiedAttr="timeFieldType",o="fixedTimeOptions"!==t),"timeLabelType"===t)l[t]=a,"none"===a?this._data.timeLabel=null:this._buildLabel();else if(-1<["timeLabel","timeLabelIconClassName","timeLabelSVGIconId"].indexOf(t))l[t]=a,this._buildLabel();else if("rtl"===t){if(l[t]=a,"input"===l.timeFieldType)e.timefield(this._input).setAttribute("rtl",a);else for(var n=["_hourEle","_minuteEle","_periodEle","_singleSelect","_combinedEle"],s=0,r;s<n.length;s++)r=this[n[s]],r&&r.length&&e.select(r).setAttribute("rtl",a);}else if(-1<["minTime","maxTime","hourStep","minuteStep"].indexOf(t)){if("minTime"===t||"maxTime"===t){if("string"==typeof a){a=this._getDateVal(a);var d=this._getNewDate();d.setHours(a.getHours(),a.getMinutes(),0,0),a=new Date(+d)}if(this["_"+t]=this._opts[t]=a,"input"===l.timeFieldType)e.timefield(this._input).setAttribute(t.replace("Time",""),a);else if("single-select-box"===l.timeFieldType){var c=e.select(this._singleSelect),_=this._buildSingleSelect(!0);c.setAttributes("options",_.options),c.setValue(_.value),l.selectedTime&&"minTime"===t&&+l.selectedTime<+a&&c.setAttribute("value",_.options[0].value),this._reInit=!0}else{var u=l.selectedTime?+l.selectedTime<+a?a:l.selectedTime:a;"minTime"===t&&this._opts.viewDate.setHours(u.getHours(),u.getMinutes(),0,0),l[t]=a,this._checkForTime(void 0,!0)}}else"input"===l.timeFieldType?e.timefield(this._input).setAttribute(t.replace("Time",""),a):(this._destroy(),this._reInit=!0);l[t]=a}else"timeZone"===t?(l.timeZone=a,this._setTimeZone(),this._reInit=!0):"viewDate"!==t&&"valueUpdate"!==t||"format"===t?("format"===t&&(l[t]=a,this._is12HourFormat=-1<l.format.indexOf("h")),this._destroy(),this._reInit=!0,l[t]=a):l[t]=a;if(this._reInit){var p=this._data;p.isCombined=p.multiSelect=p.singleSelect=p.inputProps=p.hourProps=p.minuteProps=p.periodProps=p.combinedProps=p.combinedPeriodProps=null}this._domChanged=o}},{key:"_checkTimeOptions",value:function(t,a){var o=this;this._opts.valueUpdate=!0;var l=this._opts,n=this._data,s=this._getNewDate(),r=e.select(this._hourEle),d=e.select(this._minuteEle),c=n.hourProps.options,_=this._minTime,u=this._maxTime;a=a||this._opts.viewDate,s.setHours(a.getHours(),a.getMinutes(),0,0);var p=s.getHours();if(this._is12HourFormat){this._setMinuteVal(s);for(var m=[],h=r.getAttribute("selectedValue"),g=function(e){var t=e,a=parseInt(d.getAttribute("selectedValue")),i;12<=p?(i=!0,t=12===e?e:e+12):t=e%12;var n=!!o._checkHourMinLimit(t,a,!0);l.disabledTimeList.length&&(n=o._checkIfDisabled(s,s.getMinutes(),n,t)),n=i?23>=t&&n:n,c.find(function(t){return t.value===e}).disabled=n,n||m.push(e),n&&+h===e&&(h=!1)},v=1;12>=v;v+=l.hourStep)g(v);r.setAttribute("options",_toConsumableArray(c)),h=!1===h||""===h?m[0]:h,r.setAttribute("selectedValue",h);var y=p-12;this._checkPeriod(s,y,!0),y=p+12,this._checkPeriod(s,y),this.setTime(s)}else this._setMinuteVal(s),_&&r.setOptionAttributes(_.getHours(),"disabled",s.getMinutes()<_.getMinutes()),u&&r.setOptionAttributes(u.getHours(),"disabled",s.getMinutes()>u.getMinutes())}},{key:"_setMinuteVal",value:function(t){for(var a=this,o=this._opts.minuteStep,l=e.select(this._minuteEle),n=this._data.minuteProps.options,s=l.getAttribute("selectedValue"),r=[],d=function(e){var o=a._disableTime(t,e);o||r.push((10>e?"0":"")+e),n.find(function(t){return t.value===e}).disabled=o,+s===e&&o&&(s=!1)},c=0;59>=c;c+=o)d(c);var _={};_.options=_toConsumableArray(n),!1===s&&(_.selectedValue=n.find(function(e){return e.label===r[0]})),l.setAttributes(_),t.setMinutes(+s)}},{key:"_checkCombinedTimeOptions",value:function(t,a){var o=this._opts,l=e.Date,n=this._is12HourFormat,s=o.disabledTimeList.length,r=e.select(this._combinedEle),d,c,_,u,p,m,h;n&&(h=e.select(this._periodEle),u=h.getAttribute("selectedValue"),d="PM"===u);var g=this._minTime,v=this._maxTime,y,f;if(g&&(y=g.getHours()),v&&(f=v.getHours()),!a||this._isFromUI.apply(this,arguments)){c=this._data.combinedProps.options,_=r.getAttribute("selectedValue");for(var k=[],b=0,C=c.length,D;b<C;b++)D=c[b].value,m=this._getDateVal(D+" "+(u||"")),u&&(p=!!(g&&(d?12<y:12>y)&&l.isTimeGreater(g,m)||v&&(d?12<f:12>f)&&l.isTimeGreater(m,v)),s&&(p=this._checkIfDisabled(m,m.getMinutes(),p))),c[b].disabled=p,p||k.push(D),_===D&&p&&(_=!1);r.setAttribute("options",_toConsumableArray(c)),_=_||k[0],t||r.setAttribute("selectedValue",_),n&&(m=this._getDateVal(_+" "+u),m.setHours(m.getHours()+(d?-12:12)),m&&(p=!!(g&&l.isTimeGreater(g,m)||v&&l.isTimeGreater(m,v)),s&&(p=this._checkIfDisabled(m,m.getMinutes(),p,m.getHours())),h.setOptionAttributes(d?"AM":"PM","disabled",p)))}}},{key:"_buildhmT",value:function(){var e="",t=[],a=this._is12HourFormat,o=this._opts,l=o.selectedTime,n=this._data,s=this._minTime,r=a?this._opts.format.replace("tt",""):this._opts.format,d=this._maxTime,c,_;l&&(c=this._getHourVal(l.getHours()),_=l.getMinutes());for(var u=a?1:0,p=a?12:23;u<=p;u+=o.hourStep)for(var m=0;59>m;m+=o.minuteStep){e=(10>u?"0"+u:u)+":"+(10>m?"0"+m:m);var h=this._getDateVal(e,r);12<=u&&h.setHours(u-12);t.push({selected:u===c&&m===_,value:e,disabled:h&&(s&&+h<+s||d&&+h>+d),label:this._translateEToA(e)})}n.combinedProps=this._getElemProps("time-combined",t,"_combinedTime",65,200),a&&(n.combinedPeriodProps=this._getElemProps("combined-period",this._getPeriodProps(),"_combinedPeriod",50))}},{key:"_setCombinedTimeValues",value:function(){var t=e.select(this._combinedEle).getAttribute("selectedValue");if(this._isFromUI.apply(this,arguments)){if(this._is12HourFormat){var a=e.select(this._periodEle).getAttribute("selectedValue");t=t+" "+a}var o=this._getDateVal(t);this._opts.viewDate.setHours(o.getHours(),o.getMinutes(),0,0),this._opts.selectedTime=new Date(this._opts.viewDate.getTime()),"multiple"===this._opts.selectionType&&this._setTimeForMultiple(o),this._triggerChange.apply(this,arguments)}}},{key:"_combinedTimeClickHandler",value:function(e,t){this._checkCombinedTimeOptions&&this._checkCombinedTimeOptions(e,t),this._setCombinedTimeValues(e,t)}},{key:"_combinedPeriodClickHandler",value:function(){this._isFromUI.apply(this,arguments)&&this._combinedTimeClickHandler.apply(this,arguments)}},{key:"_isFromUI",value:function(e,t){return t=!t&&e?e.detail:t,t.fromUI}},{key:"_getPeriodProps",value:function(){var e=this._opts,t=e.minTime,a=e.selectedTime,o=a?a.getHours():void 0,i=t?t.getHours():void 0,l=e.maxTime?e.maxTime.getHours():void 0;return[{value:"AM",selected:11>(i||o),label:"AM",disabled:11<i},{value:"PM",selected:11<(i||o),label:"PM",disabled:!!(l&&11>l)}]}},{key:"_getElemProps",value:function(e,t,a,o,i){var l=this._opts;return{id:this._opts.id+"-"+e,templateRender:!0,rtl:l.rtl,options:t,isCE:this.isCE,dropdownList:{width:o||40,height:i||330,className:"zdatetimepicker--menu"},width:"auto",optionclick:a?this[a+"ClickHandler"].bind(this):this._timeSelectClickHandler.bind(this)}}},{key:"_checkForTime",value:function(e,t){var a=this._opts;(a.minTime||a.maxTime||a.disabledTimeList.length||this._refresh||t)&&"multiple-select-box"===a.timeFieldType&&("h-m-t"===a.timeMultipleSelectBoxType?this._checkTimeOptions(e):"hm-t"===a.timeMultipleSelectBoxType&&this._checkCombinedTimeOptions())}},{key:"_preventSelectEv",value:function(){var e=this;["_singleSelect","_hourEle","_minuteEle","_combinedEle","_periodEle"].forEach(function(t){var a=e[t];a&&a.length&&e._stopSelectEvents(a)})}},{key:"_stopSelectEvents",value:function(t){for(var a=e.ZSelect.prototype._EVENTS,o=0;o<a.length;o++)t.on("z"+a[o],function(e){return e.stopPropagation()})}},{key:"_getHourVal",value:function(e){return this._is12HourFormat&&(e=0===e||11<e&&!(e%12)?12:11<e?e%12:e),e}},{key:"_buildSelectElement",value:function(e){switch(e.timeFieldType){case"multiple-select-box":this._data.multiSelect=!0,"h-m-t"===e.timeMultipleSelectBoxType?this._buildhMT():"hm-t"===e.timeMultipleSelectBoxType&&(this._data.isCombined=!0,this._buildhmT());break;case"single-select-box":this._buildSingleSelect();}}},{key:"_destorySelectElement",value:function(t){var a=this._combinedEle,o=this._singleSelect;"multiple-select-box"===t?("h-m-t"===this._opts.timeMultipleSelectBoxType?this._destroyhMT():a&&a.length&&(this.isCE?(a.remove(),this._periodEle&&this._periodEle.remove()):(e.select(a).destroy(),this._periodEle&&e.select(this._periodEle).destroy()),this._combinedEle=void 0),this._periodEle=void 0):"single-select-box"==t&&o&&o.length&&(this.isCE?o.remove():e.select(o).destroy(),this._singleSelect=void 0)}},{key:"_checkSelectedTime",value:function(t){var a;if("multiple-select-box"===t)a=this._setSelectTimeForMultiple.apply(this,arguments);else{var o=new Date(+e.select(this._singleSelect).getAttribute("value"));a=this._opts.selectedTime=new Date(o)}this._valueSet||this._opts.viewDate.setHours(a.getHours(),a.getMinutes())}},{key:"_buildInputElement",value:function(){var e=this._opts,t=e.selectedTime,a=this._is12HourFormat;this._data.inputProps={rtl:e.rtl,templateRender:!0,locale:e.locale,format:a?"hh:mm tt":"HH:mm",value:t||(a?"12:00 AM":"00:00"),min:e.minTime,max:e.maxTime,hourStep:e.hourStep,minuteStep:e.minuteStep,id:this._opts.id+"-type-input",clearButton:"none",spinend:this._spinEndHandler.bind(this),isCE:this.isCE,width:100,change:this._timeFieldChangeHandler.bind(this),mainElement:this._input?this._input[0]:null}}},{key:"_spinEndHandler",value:function(e,t){t=!t&&e?e.detail:t;var a=t.dateValue;this._timeModified=!0,this._opts.selectedTime=a,void 0!==a&&this._opts.viewDate&&(this._opts.viewDate.setHours(a.getHours(),a.getMinutes(),0,0),this._triggerChange(e))}},{key:"_timeFieldChangeHandler",value:function(t,a){a=a||t&&t.detail,this.isCE&&t.stopPropagation(),this._dispatchEvent("timechange",t,{selectedTime:this.getAttribute("value"),value:e.timefield(this._input).getAttribute("value"),valueString:e.Date.formatDate(a.dateValue,this._opts.format)})}},{key:"_buildSingleSelect",value:function(t){var a=this._opts,o=a.fixedTimeOptions,l=o.length,n=[],s=a.disabledTimeList,r=this._minTime,d=this._maxTime,c=a.selectedTime,_;c&&(_=this._getNewDate(),_.setHours(c.getHours(),c.getMinutes(),0,0));var u=this._sortSingleSelectValues(_),p=e.Date,m=p.isTimeGreater.bind(p),h=p.areTimesEqual.bind(p),g;if(l)for(var v=0;v<l;v++){var y=this._getDateVal(o[v]),f=void 0,k=!1;y.setSeconds(0,0),f=(!r||m(y,r)||h(y,r))&&(!d||m(d,y)||h(y,d));for(var b=0,C;b<s.length;b++)if(C=s[b].date,+y==+C){k=!0;break}if(f){var D={selected:h(u,y),disabled:k,value:+y,label:this._translateEToA(o[v])};n.push(D),D.selected&&(g=D)}}return t?{options:n,value:g}:void(this._data.singleSelect=this._getElemProps("single-time-select",n,"_singleSelect",100,200))}},{key:"_sortSingleSelectValues",value:function(t){var o=this,a=this._opts.fixedTimeOptions;a.sort(function(e,t){return e=o._getDateVal(e),t=o._getDateVal(t),e-t});for(var l=0,n=a.length,s;l<n;l++)if(s=this._getDateVal(a[l]),t&&(e.Date.areTimesEqual(s,t)||+s>+t))return s}},{key:"_singleSelectClickHandler",value:function(e,t){t=!t&&e?e.detail:t;var a=this._opts.viewDate;if(t.fromUI){var o=new Date(+t.selectedValue);a.setHours(o.getHours(),o.getMinutes(),0,0),this._opts.selectedTime=new Date(+a),"multiple"===this._opts.selectionType&&this._setTimeForMultiple(a),this._triggerChange(e)}}},{key:"_getSingleSelectFirstVal",value:function(e){for(var t=this._data.singleSelect.options,a=0,o=t.length,l;a<o;a++)if(e&&(l=new Date(t[a].value),l.setFullYear(e.getFullYear()),l.setMonth(e.getMonth()),l.setDate(e.getDate())),!t[a].disabled&&(!e||+l==+e||+l>+e))return e?l:t[a].value}},{key:"_buildhMT",value:function(){var e=this._opts,t=e.selectedTime,a=this._is12HourFormat,o=this._opts.minTime,l=this._opts.maxTime,n=this._data,s=[],r=[],d,c,_,u,p,m,h;o&&(d=o.getHours(),_=o.getMinutes()),l&&(c=l.getHours()),m=t?this._getHourVal(t.getHours()):d?this._getHourVal(d):a?12:0;for(var g=a?1:0,v=a?12:23;g<=v;g+=e.hourStep)u=g===m,!a&&u&&(p=g),s.push({selected:u,disabled:!!d&&g<d||!!c&&g>c,value:g,label:this._translateEToA((10>g?"0":"")+g)});n.hourProps=this._getElemProps("hour",s),e.viewDate.setHours(t?t.getHours():o?d:0);var y=t?t.getMinutes():o?_:0;e.viewDate.setMinutes(y);for(var f=0;59>=f;f+=e.minuteStep)a||(h=f<_&&p===d),u=f-e.minuteStep<y&&f>=y,r.push({value:f,label:this._translateEToA((10>f?"0":"")+f),disabled:h,selected:u});n.minuteProps=this._getElemProps("minute",r),a&&(n.periodProps=this._getElemProps("period",this._getPeriodProps(),"_period",50))}},{key:"_destroyhMT",value:function(){var t=this;["_hourEle","_minuteEle","_periodEle"].forEach(function(a){var o=t[a];if(o&&o.length){var i=e.select(o);t.isCE?o.remove():i.destroy()}t[a]=void 0})}},{key:"_timeSelectClickHandler",value:function(a,o){var i=this._opts.viewDate,l;if(o=!o&&a?a.detail:o,o.fromUI){var n=+o.selectedValue;-1<t(o.dropdownList).attr("id").indexOf("hour")?(this._is12HourFormat&&(n=this._getHourValue(e.select(this._periodEle).getAttribute("selectedValue"),n)),i.setHours(n),l="hour"):(i.setMinutes(n),l="minute"),this._triggerEvent(a,o,l),this._checkForTime(!1),this._opts.selectedTime=new Date(+i),"multiple"===this._opts.selectionType&&this._setTimeForMultiple(i),this._triggerChange(a)}}},{key:"_periodClickHandler",value:function(t,a){a=!a&&t?t.detail:a;var o=a.selectedValue,i=this._opts.viewDate;if(a.fromUI){var l=+e.select(this._hourEle).getAttribute("selectedValue");l=this._getHourValue(o,l),this._selectedPeriod=o,i.setHours(l),this._triggerEvent(t,a,"period"),this._checkForTime(!1),this._opts.selectedTime=new Date(+i),this._triggerChange(t)}}},{key:"_getHourValue",value:function(e,t){var a="AM"===e;return 0==t%12?a?0:12:a?t:t+12}},{key:"_triggerEvent",value:function(t,a,o){var i=this._opts;this._dispatchEvent(o+"change",t,{value:i.selectedTime,valueString:e.Date.formatDate(i.selectedTime,i.format),selectedValue:parseInt(a.selectedValue)})}},{key:"_setSelectTimeForMultiple",value:function(t,a){var o=e.select.bind(e),i=this._is12HourFormat?o(this._periodEle).getValue():"",l,n;if("h-m-t"===this._opts.timeMultipleSelectBoxType){var s=o(this._hourEle).getValue(),r=o(this._minuteEle).getValue();a&&(this._initialHr=s,this._initialMinute=r),l=s+":"+r+" "+i,n=!0}else l=o(this._combinedEle).getValue()+" "+i,a&&(this._initialVal=l);var d=this._getDateVal(l);return this._opts.selectedTime=d,n&&a&&(this._initialVal=new Date(+d)),new Date(d)}},{key:"_setTimeOnMultipleSelect",value:function(t,a){var o=this._is12HourFormat,i=this._opts,l=i.minTime,n=a||t,s=this._getHourVal.bind(this),r;if("h-m-t"===i.timeMultipleSelectBoxType){var d=e.select(this._hourEle),c=e.select(this._minuteEle),_;r=this._isEmpty(d.getAttribute("selectedValue")),(r||n)&&(_=a&&!t?s(a.getHours()):l?s(l.getHours()):this._is12HourFormat?12:0,this._removeDisabled(d,_),this._setSelectedVal("hour",_,d)),r=this._isEmpty(c.getAttribute("selectedValue")),(r||n)&&(_=a&&!t?a.getMinutes():l?l.getMinutes():0,this._removeDisabled(c,_),this._opts.viewDate.setMinutes(_),this._setSelectedVal("minute",_,c),this._setMinuteVal(this._opts.viewDate))}else{var u;if(r=this._isEmpty(e.select(this._combinedEle).getAttribute("selectedValue")),r||n){var p=l?s(l.getHours())+":"+l.getMinutes():"12:00";u=(a&&!t?e.Date.formatDate(a,this._opts.format):p).split(" ")[0],e.select(this._combinedEle).setAttribute("selectedValue",u)}}var m=a&&!t?a.getHours():l?l.getHours():0;if("number"==typeof m&&(this._opts.viewDate.setHours(m),o)){var h=this._periodEle,g=e.select(h),v=g.getAttribute("selectedValue");r=this._isEmpty(v),(r||n)&&(this._removeDisabled(g,12<=m?"PM":"AM"),h&&g.setAttribute("selectedValue",12<=m?"PM":"AM"))}}},{key:"_setSelectedVal",value:function(e,t,o){var i=this._opts[e+"Step"];t=a(t/i)*i,this._removeDisabled(o,t),o.setAttribute("selectedValue",t)}},{key:"_removeDisabled",value:function(e,t){e.setOptionAttributes(t,"disabled",!1)}},{key:"_isEmpty",value:function(e){return null!==e&&void 0!==e&&0===e.length}},{key:"name",get:function(){return"ztimeinput"}},{key:"attrs",get:function(){return{timeFieldType:"input",minTime:null,maxTime:null,id:null,selectedTime:"12:00 AM",valueUpdate:!1,timeLabelType:"icon",timeLabel:"Time",timeMultipleSelectBoxType:"h-m-t",timeLabelIconClass:null,timeLabelSVGIconId:null,format:"hh:mm tt",hourStep:1,minuteStep:5}}},{key:"props",get:function(){return{fixedTimeOptions:[],disabledTimeList:[]}}},{key:"EVENTS",get:function(){return["hourchange","minutechange","periodchange","timechange"]}}]),i}(e.CoreComponent);e.registerComponent("ZTimeInput",B),function(e){var t=e.Templates.Utilities,a=e.ztimeinput.Templates,o=e.createSelect;a.children=function(a){return ZT.html(tO142(),a.timeLabel&&ZT.html(tO143(),a.timeLabel.icon&&t.icon(a.timeLabel.icon),a.timeLabel.text&&ZT.html(tO144(),a.timeLabel.text)),a.inputProps?e.createTimeField(a.inputProps):a.singleSelect?o(a.singleSelect):a.multiSelect&&ZT.html(tO145(),a.isCombined?ZT.html(tO146(),o(a.combinedProps),a.combinedPeriodProps&&o(a.combinedPeriodProps)):ZT.html(tO147(),a.hourProps&&o(a.hourProps),a.minuteProps&&o(a.minuteProps),a.periodProps&&o(a.periodProps))))}}(ZComponents);var H=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(e,t){this._checkTime=!0,this._initialFrom=t.fromValue,this._initialTo=t.toValue,_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments),this._assignTime(),this._buildTimeBar(),this._data.isCBar=!0,this._opts.closeOnDateSelect=!1}},{key:"_postRender",value:function(){_get(_getPrototypeOf(o.prototype),"_postRender",this).apply(this,arguments),this._data.className+=" zdatetimepicker--fromtocalendar zdatetimepicker--doublecalendar"}},{key:"_setFormat",value:function(){var e=this._opts.format,t=n(e.indexOf("h"),e.indexOf("H")),a=l(l(e.indexOf("d"),e.indexOf("M")),e.indexOf("y")),o,i;this._is12HourFormat=-1<e.indexOf("h"),t>a?(this._timeFormat=e.substring(t),e=e.replace(this._timeFormat,""),o=n(n(e.lastIndexOf("d"),e.lastIndexOf("M")),e.lastIndexOf("y")),i="_date"):(this._dateFormat=e.substring(a),e=e.replace(this._dateFormat,""),o=n(e.lastIndexOf("m"),e.lastIndexOf("t")),i="_time"),this[i+"Format"]=e.substring(0,o+1)}},{key:"_assignTime",value:function(){var t=this;["From","To"].forEach(function(a){var o=t["_initial"+a];if(o){var i=e.Date.parseDate(o,t._opts.format).date;t._opts[a.toLowerCase()+"Value"].setHours(i.getHours(),i.getMinutes())}})}},{key:"_setTemplate",value:function(){this._opts.templateName="zdatetimerangepicker"}},{key:"_validateFormat",value:function(){var e=this._opts.format;this._invalidFormat=!(-1<e.indexOf("d")&&(-1<e.indexOf("h")||-1<e.indexOf("H")))}},{key:"_postEachRender",value:function(){_get(_getPrototypeOf(o.prototype),"_postEachRender",this).apply(this,arguments);var a=this._isSeparate?this._id:this._elementId;(!this._fromInstance||this._reInit)&&(this._fromTimePicker=t("#"+a+"-timeinput1"),this._fromInstance=e.timeinput(this._fromTimePicker),this._toTimePicker=t("#"+a+"-timeinput2"),this._toInstance=e.timeinput(this._toTimePicker))}},{key:"_buildData",value:function(){_get(_getPrototypeOf(o.prototype),"_buildData",this).apply(this,arguments),this._doNotBuildTime||this._buildTimeBar(),this._doNotBuildTime=void 0}},{key:"_buildTimeBar",value:function(){var e={},t=this._opts;["timeFieldType","timeMultipleSelectBoxType","minTime","maxTime","hourStep","minuteStep","timeLabelType","fixedTimeOptions","disabledTimeList","rtl","timeZone"].forEach(function(a){return e[a]=t[a]}),e.isCE=this.isCE,e.templateRender=!0,e.format=this._timeFormat,this._data.isSeparate=this._isSeparate,this._data.timeBarCls="zdatetimepicker__timebar h-aligncenter zdatetimepicker--twocolumn",this._createTimeObj("from",e),this._createTimeObj("to",e)}},{key:"_createTimeObj",value:function(e,t){var a=this._opts[e+"Value"],o=e+"TimeLabel";this._data[e+"TimeProps"]=_objectSpread({},t,{id:(this._isSeparate?this._id:this._elementId)+"-timeinput"+("from"===e?"1":"2"),timeLabel:this._opts[o]||this._getI18NText(o),timechange:this._timeChangeHandler.bind(this),className:"zdatetimepicker__"+("from"===e?"start":"end")+"time"}),a&&(this._data[e+"TimeProps"].selectedTime=new Date(+a)),this._isSeparate&&(this._data[("from"===e?"max":"min")+"Time"]=new Date(+this._opts[("from"===e?"to":"from")+"Value"]))}},{key:"_restoreValues",value:function(){_get(_getPrototypeOf(o.prototype),"_restoreValues",this).apply(this,arguments),this._fromValue.setHours(0,0,0,0),this._toValue.setHours(0,0,0,0)}},{key:"_setDateValue",value:function(e){var t=this["_"+e+"Value"],a=this._opts[e+"Value"];a&&(t?(a.setDate(t.getDate()),a.setMonth(t.getMonth()),a.setFullYear(t.getFullYear())):this._opts[e+"Value"]=null)}},{key:"_updateValues",value:function(){_get(_getPrototypeOf(o.prototype),"_updateValues",this).apply(this,arguments),this._fromValue&&(this._viewDate=new Date(+this._fromValue))}},{key:"_unsetDates",value:function(e){var t=this._opts;if(e)t.fromValue=null,t.toValue=null,this._initialFrom=null,this._initialTo=null;else{var a=this._fromValue,o=this._toValue,i=t.toValue;t.fromValue?this._setDateValue("from"):a&&(t.fromValue=new Date(+a)),i?this._setDateValue("to"):o&&(t.toValue=new Date(+o))}t.fromValue||(this._opts.value=void 0,this._currentSelected=void 0)}},{key:"_closePicker",value:function(){_get(_getPrototypeOf(o.prototype),"_closePicker",this).apply(this,arguments),this._fromInstance.setAttribute("valueUpdate",!!this._opts.fromValue),this._toInstance.setAttribute("valueUpdate",!!this._opts.toValue),this._setValueOnTimeInput()}},{key:"_setValueOnTimeInput",value:function(){var e=this._getNewDate(),t=this._opts.fromValue,a=this._opts.toValue;this._fromInstance.setTime(t?new Date(e.setHours(t.getHours(),t.getMinutes(),0,0)):void 0),this._toInstance.setTime(a?new Date(e.setHours(a.getHours(),a.getMinutes(),0,0)):void 0)}},{key:"_OKClickHandler",value:function(e){this._valueUpdate=!0,this._unsetDates();var t=this._opts,a=t.fromValue,i=t.toValue,l=this._fromInstance.getAttribute("selectedTime"),n=this._toInstance.getAttribute("selectedTime");a&&a.setHours(l.getHours(),l.getMinutes()),i&&i.setHours(n.getHours(),n.getMinutes()),this._doNotDispatchSuperEvent=!0,_get(_getPrototypeOf(o.prototype),"_OKClickHandler",this).apply(this,arguments),this._doNotDispatchSuperEvent=!1,this._dispatchEvent("change",e,this._getSelectedValue(),void 0,!!(e&&e.originalEvent))}},{key:"_dispatchEvent",value:function(e){if(!this._doNotDispatchSuperEvent&&"change"===e||"change"!==e)return this._event="z"+e,_get(_getPrototypeOf(o.prototype),"_dispatchEvent",this).apply(this,arguments)}},{key:"_isEqual",value:function(t,a){return t&&a&&e.Date.areDatesEqual(t,a)}},{key:"_setMinMaxLimits",value:function(){var e=this._fromValue,t=this._toValue,a=this._fromInstance,o=this._toInstance;this._isEqual(e,t)?(o.setAttribute("minTime",a.getAttribute("selectedTime")),a.setAttribute("maxTime",o.getAttribute("selectedTime"))):(a.setAttribute("maxTime",null),o.setAttribute("minTime",null))}},{key:"_commitValues",value:function(e){if(this._fromValue&&this._toValue){var a=t(e.target).closest(".zdatetimepicker__list").index();this._setMinMaxLimits(this.element.find(".zdatetimepicker__"+(0===a?"start":"end")+"time"),this["_"+(0===a?"from":"to")+"Instance"].getAttribute("selectedTime"))}_get(_getPrototypeOf(o.prototype),"_commitValues",this).apply(this,arguments)}},{key:"_timeChangeHandler",value:function(e,t){var a=t||e.detail,o=this._opts;this._valueUpdate=o.immediateCommit,a.fromUI&&(this._fromInstance&&this._toInstance&&o.immediateCommit&&this._OKClickHandler(e&&e.originalEvent,!0),this._setMinMaxLimits(a.element,a.selectedTime))}},{key:"_getValueObj",value:function(t,a){var i=this,l=_get(_getPrototypeOf(o.prototype),"_getValueObj",this).call(this,t,a);return["DateString","TimeString"].forEach(function(o){var n;n=l[a+o]=e.Date.formatDate(t,"DateString"===o?i._dateFormat:i._timeFormat),l["translated"+a[0].toUpperCase()+a.slice(1)+o]=i._translateEToA(n)}),l}},{key:"_destroy",value:function(){this._fromInstance.destroy(),this._toInstance.destroy(),this._fromInstance=this._toInstance=void 0,_get(_getPrototypeOf(o.prototype),"_destroy",this).call(this)}},{key:"_setAttribute",value:function(e,t){var a=this._opts,i=this._fromInstance,l=this._toInstance;a[e]=t,"fromValue"===e||"toValue"===e?(this._initialFrom=a.fromValue,this._initialTo=a.toValue,("fromValue"===e?i:l).setAttribute("valueUpdate",!0),_get(_getPrototypeOf(o.prototype),"_setAttribute",this).apply(this,arguments),this._assignTime(),this._setValueOnTimeInput(),this._domChanged=!0):-1<["timeFieldType","timeLabelType","timeLabel","timeMultipleSelectBoxType","minTime","maxTime","hourStep","minuteStep","disabledTimeList","fixedTimeOptions"].indexOf(e)?(this._buildTimeBar(),i.setAttribute(e,t),l.setAttribute(e,t)):(_get(_getPrototypeOf(o.prototype),"_setAttribute",this).apply(this,arguments),this._assignTime(),this._buildTimeBar()),-1<["rtl","timeZone"].indexOf(e)&&(i&&i.setAttribute.apply(i,arguments),l&&l.setAttribute.apply(l,arguments))}},{key:"name",get:function(){return"zdatetimerangepicker"}},{key:"attrs",get:function(){return{format:"dd/MM/yyyy, hh:mm tt",fromTimeLabel:null,toTimeLabel:null,timeFieldType:"input",timeMultipleSelectBoxType:"h-m-t",timeLabelType:"icon",hourStep:1,minuteStep:5}}},{key:"props",get:function(){return{labels:{fromTimeLabel:"Time",toTimeLabel:"Time"}}}},{key:"SELECTORS",get:function(){return{field:this.isCE?"z-input":"input"}}}]),o}(e.ZDateRangePicker);e.registerComponent("ZDateTimeRangePicker",e.ZDateRangePicker,H),function(e){var t=e.zdatetimerangepicker.Templates,a=e.zdaterangepicker.Templates,o=e.zdatepicker.Templates,i=e.createTimeInput,l=e.Templates.Utilities;t.children=function(e){return ZT.html(tO148(),e.isSeparate?ZT.html(tO149(),a.children(e),t.timeBar(e)):ZT.html(tO150(),o.children(e),t.timeBar(e)),e.cBar&&l.commandBar(e.cBar))},t.timeBar=function(e){return ZT.html(tO151(),e.timeBarCls,i(e.fromTimeProps),i(e.toTimeProps))}}(ZComponents);var A=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(){this._checkTime=!0,_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments)}},{key:"_buildData",value:function(){_get(_getPrototypeOf(o.prototype),"_buildData",this).apply(this,arguments);var e=this._valueId;e&&!this._getOptionObj(e,"id").valueType&&this._buildTimePicker()}},{key:"_postEachRender",value:function(){var a=this,i=this._data.menu,l=i.fromTimeProps&&!this._timepicker,n=this._elementId;if(l&&(this._timepicker=this._dtsMenu.find(".zdatetimeselectbox__timecontainer"),this._fromInstance=e.timeinput(t("#"+n+"-timeinput1")),this._toInstance=e.timeinput(t("#"+n+"-timeinput2")),!this._opts.immediateCommit)){var s=i.cBar.cols[0].right;["OK","cancel"].forEach(function(e){var o=e+"-btn-"+n,i=t("#"+o);i.length&&(s.find(function(e){return e.id===o}).mainElement=i[0],a._addEvents(_defineProperty({},e+"Click","click"),i))})}_get(_getPrototypeOf(o.prototype),"_postEachRender",this).apply(this,arguments),l&&!this._data.rendered&&this._openTimePicker()}},{key:"_validateFormat",value:function(){var e=this._opts.format;this._validFormat=-1<e.indexOf("d")&&-1<e.indexOf("M")&&-1<e.indexOf("y")&&(-1<e.indexOf("h")||-1<e.indexOf("H"))}},{key:"_setFormat",value:function(){var e=this._opts.format,t=n(e.indexOf("h"),e.indexOf("H")),a=l(l(e.indexOf("d"),e.indexOf("M")),e.indexOf("y")),o,i;this._is12HourFormat=-1<e.indexOf("h"),t>a?(this._timeFormat=e.substring(t),e=e.replace(this._timeFormat,""),o=n(n(e.lastIndexOf("d"),e.lastIndexOf("M")),e.lastIndexOf("y")),i="_date"):(this._dateFormat=e.substring(a),e=e.replace(this._dateFormat,""),o=n(e.lastIndexOf("m"),e.lastIndexOf("t")),i="_time"),this[i+"Format"]=e.substring(0,o+1)}},{key:"_menuClickHandler",value:function(e){if(!this._opts.readonly&&!this._opts.disabled){var a=t(e.target).closest(".zdatetimeselectbox__option");a.length&&!a.hasClass("is-disabled")&&(this._resetTimePickers(),_get(_getPrototypeOf(o.prototype),"_menuClickHandler",this).call(this,e))}}},{key:"_getPlaceHolder",value:function(e){if(e){var t=e.valueType;"date"!==t||this._opts.fromValue||this._opts.toValue||!this._placeholderElem||this._placeholderElem.removeClass("h-resetlabel"),-1<["date","range"].indexOf(t)&&(this._listContainer.removeClass("zdatetimepicker--timeonly"),this._display(!0,this._dtsMenu.find(".zdatetimeselectbox__timecontainer")))}else this._openTimePicker(!0);return _get(_getPrototypeOf(o.prototype),"_getPlaceHolder",this).call(this,e)}},{key:"_updateValues",value:function(e,t,a,o){var i=this._opts,l=t&&e,n=i.immediateCommit,s=this._valueId,r=o.valueType,d=o.valueGiven&&(r||n);return(r||n||s||d)&&(i.value=l?void 0:e&&new Date(+e),e=i.fromValue=e&&new Date(+e),t=i.toValue=l?t&&new Date(+t):e?new Date(+e):void 0),this._curFrom=new Date(+e),this._curTo=new Date(+(t||e)),r||(i.value=void 0,!this._data.menu.fromTimeProps&&this._buildTimePicker(),this._curFrom&&this._curTo&&this._unSetLimits(void 0,this._curFrom,this._curTo),this._listContainer.addClass("zdatetimepicker--timeonly"),this._openTimePicker()),this._isPicker&&(r||n)&&this._setPickerValues(e,t,r||"range"),!!(n||s||this._valueSet)&&this._getStringVal(e,t,void 0,!0)}},{key:"_unSetLimits",value:function(e,t,a){var o=this._fromInstance,i=this._toInstance;t=new Date(+(t||this._opts.fromValue)),a=new Date(+(a||this._opts.toValue)),e=void 0===e?!this._isEqual(t,a):e,o&&i&&(o.setAttribute("maxTime",e?null:a),i.setAttribute("minTime",e?null:t),!e&&(o.setTime(t),i.setTime(a)))}},{key:"_checkForClose",value:function(e,t){!t.valueType&&this._opts.immediateCommit&&this._triggerChange(e)}},{key:"_getStringVal",value:function(e,t,a,i){var l=this._opts.rtl;return l&&(this._placeholderElem.addClass("zh-resetlabel"),a=this._timeFormat+" ,"+this._dateFormat),_get(_getPrototypeOf(o.prototype),"_getStringVal",this).call(this,l&&t?t:e,l?e:t,a,i)}},{key:"_resetTimePickers",value:function(e){var t=this._fromInstance,a=this._toInstance,o=this._opts.fromValue,i=this._opts.toValue;t&&a&&(e&&o&&i?(t.setTime(o),a.setTime(i),this._unSetLimits()):(t.setAttribute("maxTime",null),a.setAttribute("minTime",null),t.clearTime(),a.clearTime()))}},{key:"_OKClickHandler",value:function(e,t){var a=this._opts,o=this._curFrom,i=this._curTo,l=this._fromInstance.getAttribute("selectedTime"),n=this._toInstance.getAttribute("selectedTime");o=a.fromValue=new Date(+o),i=a.toValue=new Date(+i),this._setPickerValues(o,i,"range"),o.setHours(l.getHours(),l.getMinutes()),i.setHours(n.getHours(),n.getMinutes()),this._setPlaceholder(this._getStringVal(o,i)),this._setSelectedData(this._selectedData),this._isPicker&&this._setPickerValues(o,i),this._triggerChange(e),this._valueChanged=!1,t||this.close()}},{key:"_cancelClickHandler",value:function(e){this._valueChanged=!1,this._resetTimePickers(!0),_get(_getPrototypeOf(o.prototype),"_cancelHandler",this).call(this,e)}},{key:"_buildCBar",value:function(){var e=this._opts,t=e.OKButton,a=e.cancelButton,o=[],i=this._data.menu;(t||a)&&!e.immediateCommit?(i.cBar={},i.cBar.cols=[],a&&o.push(this._getbtnAttr("cancelButton")),t&&o.push(this._getbtnAttr("OKButton")),i.cBar.cols.push({right:o})):i.cBar=null}},{key:"_getbtnAttr",value:function(t){var a=t.replace("Button",""),o=t+"Label";return e.ZButton.getBtnProps({customAttributes:{name:t,"aria-label":o},initBtnComp:!0,id:a+"-btn-"+this._elementId,name:t,isCE:this.isCE,className:("today"===a?"zdatetimepicker__todaylink ":"")+t+"-"+this.name,text:this._opts[o]||this._getI18NText(o),appearance:"OKButton"===t?"primary":"normal",size:"small",templateRender:!0})}},{key:"_timeChangeHandler",value:function(e,t){var a=e.detail,o=this._opts,i=this._curFrom,l=this._curTo;(t||a).fromUI&&(this._valueChanged=!o.immediateCommit,this._fromInstance&&this._toInstance&&o.immediateCommit&&this._OKClickHandler(void 0,!0),this._isEqual(i,l)&&(a.element.hasClass("zdatetimepicker__starttime")?this._toInstance&&this._toInstance.setAttribute("minTime",a.selectedTime):this._fromInstance&&this._fromInstance.setAttribute("maxTime",a.selectedTime)))}},{key:"_isEqual",value:function(t,a){return t&&a&&e.Date.areDatesEqual(t,a)}},{key:"_buildTimePicker",value:function(){var e=this._data.menu,t=["timeFieldType","timeMultipleSelectBoxType","hourStep","minuteStep","timeLabelType","fixedTimeOptions","disabledTimeList","rtl","timeZone"],a={},o=this._opts;e.containerClass+=" zdatetimepicker--timeonly",e.timeClass="zdatetimeselectbox__timecontainer";for(var l=0,n=t.length;l<n;l++)a[t[l]]=o[t[l]];a.isCE=this.isCE,a.templateRender=!0,a.format=this._timeFormat,e.fromTimeProps=_objectSpread({},a,{},this._getTimeObj("from")),e.toTimeProps=_objectSpread({},a,{},this._getTimeObj("to")),e.timeBarClass="zdatetimepicker__timebar zdatetimepicker--twocolumn",this._buildCBar(e),this._data.rendered&&this._render()}},{key:"_getTimeObj",value:function(e){var t=this._opts,a="from"===e,o=this["_cur"+(a?"From":"To")],i=e+"TimeLabel",l=_objectSpread({id:this._elementId+"-timeinput"+(a?"1":"2"),timeLabel:t[i]||this._getI18NText(i),viewDate:new Date(t[e+"Value"]||this._getNewDate()),selectedTime:o,timechange:this._timeChangeHandler.bind(this),className:"zdatetimepicker__"+(a?"start":"end")+"time"},this._bindChangeEvents());return o=this["_cur"+(a?"To":"From")],o&&(l[a?"maxTime":"minTime"]=new Date(+o)),l}},{key:"_bindChangeEvents",value:function(){var e=this,t={};return["minutechange","hourchange","periodchange"].forEach(function(a){t[a]=function(t,o){e._dispatchEvent(a,t,o)}}),t}},{key:"_openTimePicker",value:function(e){var t=this._timepicker;t&&(this._setDimensions(),this._saveWidth(),this._lastOpened=null,this._listContainer.width(""),this._display(!!e,this._listContainer),this._display(!!e,t),this._setWidth(t))}},{key:"_destroy",value:function(){this._fromInstance&&this._fromInstance.destroy(),this._toInstance&&this._toInstance.destroy(),_get(_getPrototypeOf(o.prototype),"_destroy",this).call(this)}},{key:"close",value:function(){this._valueChanged&&this._resetTimePickers(!0),_get(_getPrototypeOf(o.prototype),"close",this).apply(this,arguments)}},{key:"getFromValue",value:function(){if(this._opts.fromValue){var t=new Date(this._opts.fromValue.getTime());return{fromValue:t,fromValueString:e.Date.formatDate(t,this._opts.format),options:this.options,element:this.element}}}},{key:"getToValue",value:function(){if(this._opts.toValue){var t=new Date(this._opts.toValue.getTime());return{toValue:t,toValueString:e.Date.formatDate(t,this._opts.format),options:this.options,element:this.element}}}},{key:"setFromValue",value:function(t){t&&this._rangePicker&&e.datetimerangepicker(this._rangePicker).setAttribute("fromValue",t)}},{key:"setToValue",value:function(t){t&&this._rangePicker&&e.datetimerangepicker(this._rangePicker).setAttribute("toValue",t)}},{key:"_initPicker",value:function(a){var o=this._opts,i="date"===a,l=_objectSpread({timeLabelType:o.timeLabelType,timeLabel:o.timeLabel,fixedTimeOptions:o.fixedTimeOptions,fromTimeLabel:o.fromTimeLabel,toTimeLabel:o.toTimeLabel,timeFieldType:o.timeFieldType,timeMultipleSelectBoxType:o.timeMultipleSelectBoxType},this._getPickerOpts(o,i)),n;l=t.extend(!0,{},l,o["dateTime"+(i?"":"Range")+"PickerOptions"]),n=this[(i?"_date":"_range")+"Picker"]=t(e["createDateTime"+(i?"":"Range")+"Picker"](l)),n.removeClass("zdatetimepicker zdatetimepicker--group"),this[(i?"_date":"_range")+"PickerInstance"]=e["datetime"+(i?"":"range")+"picker"](n)}},{key:"_changeHandler",value:function(e,t){_get(_getPrototypeOf(o.prototype),"_changeHandler",this).call(this,e,t,this._opts.immediateCommit,this._isSameDate(e.detail||t))}},{key:"_setAttribute",value:function(e,t){var a=!0,i;if(this._opts[e]=t,-1<["dateTimePickerOptions","dateTimeRangePickerOptions"].indexOf(e)){var l=this["_"+(e.indexOf("Range")?"range":"date")+"PickerInstance"];l&&l.setAttributes(t),i=!1}else if(/^(timeFieldType|timeLabelType|timeMultipleSelectBoxType|fixedTimeOptions|timeLabel|disabledTimeList|hourStep|minuteStep)$/.test(e))i=!0;else if("rtl"===e){var n=this._selectedData;this._placeholderElem.removeClass("zh-resetlabel"),n.fromValue&&n.toValue&&(this._setPlaceholder(this._getStringVal(n.fromValue,n.toValue)),this._placeholderElem[(t?"add":"remove")+"Class"]("h-resetlabel")),i=!0,_get(_getPrototypeOf(o.prototype),"_setAttribute",this).apply(this,arguments)}else-1<["fromTimeLabel","toTimeLabel"].indexOf(e)?this["_"+e.replace("TimeLabel","")+"Instance"].setAttribute("timeLabel",t):(a=_get(_getPrototypeOf(o.prototype),"_setAttribute",this).apply(this,arguments),-1<["immediateCommit","hideCancelButton"].indexOf(e)?this._buildCBar():"timeZone"===e&&(i=!0));i&&(this._fromInstance&&this._fromInstance.setAttribute(e,t),this._toInstance&&this._toInstance.setAttribute(e,t),this._opts.dateTimePickerOptions[e]=t,this._datePickerInstance&&this._datePickerInstance.setAttribute(e,t),this._opts.dateTimeRangePickerOptions[e]=t,this._rangePickerInstance&&this._rangePickerInstance.setAttribute(e,t)),this._domChanged=a}},{key:"name",get:function(){return"zdatetimeselect"}},{key:"attrs",get:function(){return{immediateCommit:!0,format:"dd/MM/yyyy, hh:mm tt",timeFieldType:"multiple-select-box",timeMultipleSelectBoxType:"h-m-t",timeLabelType:"icon",timeLabel:null,fromTimeLabel:null,toTimeLabel:null,disabledTimeList:[],fixedTimeOptions:[],hourStep:1,minuteStep:5}}},{key:"props",get:function(){return{dateTimePickerOptions:{},dateTimeRangePickerOptions:{},labels:{timeLabel:"Time",fromTimeLabel:"Time",toTimeLabel:"Time"}}}},{key:"EVENTS",get:function(){return["hourchange","minutechange"]}}]),o}(e.ZDateSelect);e.registerComponent("ZDateTimeSelect",e.ZDateSelect,A),function(e){var t=e.zdatetimeselect.Templates,a=e.Templates.Utilities,o=e.createTimeInput;t.container=function(e){return ZT.html(tO152(),e.children&&t.children(e))},t.children=function(o){return ZT.html(tO153(),o.isLeft&&a.icon(o.calendarIconProps),o.placeholder,o.clearButton&&e.createButton(o.clearButton),o.isRight&&a.icon(o.calendarIconProps),o.arrowIconProps&&a.icon(o.arrowIconProps),o.menu&&t.menu(o.menu))},t.menu=function(e){return ZT.html(tO154(),e.className,e.prepend&&t.pickerContainer(e),e.optData.map(function(e){return ZT.html(tO155(),e["class"],e.valueType,e.id,e.style,e.label)}),e.append&&t.pickerContainer(e))},t.pickerContainer=function(e){return ZT.html(tO156(),e.containerClass,e.timeClass&&ZT.html(tO157(),e.timeClass,e.timeBarClass&&ZT.html(tO158(),e.timeBarClass,o(e.fromTimeProps),o(e.toTimeProps)),e.cBar&&a.commandBar(e.cBar)))}}(ZComponents);var N=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(){return this._checkTime=!0,_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments),!0}},{key:"_validateFormat",value:function(){var e=this._opts.format;this._invalidFormat=!(-1<e.indexOf("d")&&(-1<e.indexOf("h")||-1<e.indexOf("H")))}},{key:"_getTimeSettings",value:function(){var e={},t=this._opts;["timeFieldType","timeMultipleSelectBoxType","minTime","maxTime","hourStep","minuteStep","timeLabelType","fixedTimeOptions","disabledTimeList","rtl","timeZone"].forEach(function(a){return e[a]=t[a]}),e.timeLabel=t.timeLabel||this._getI18NText("timeLabel"),e.isCE=this.isCE,e.templateRender=!0,e.format=this._timeFormat,e.viewDate=this._viewDate,e.id=this._elementId+"-timeinput",e.timechange=this._changeHandler.bind(this);var a=this;["period","hour","minute"].forEach(function(t){t+="change",e[t]=function(e){a._dispatchEvent(t,e,e.detail)}}),e.className=" zdatetimepicker__timebar zh-align"+(3===this._monthsPerView&&this._isBtnsExist()?"left"===t.buttonsAlignment?"right":"left":"center");var o=t.value||t.defaultTime;o&&(e.selectedTime=new Date(+o)),this._data.timeProps=e}},{key:"_changeHandler",value:function(t){var a=t.detail,o=a.selectedTime;a.fromUI&&(this._selectedTime=o,"multiple"===this._opts.selectionType&&this._setTimeForMultiple(o),this._triggerChange(t),this._dispatchEvent("timechange",t,_objectSpread({},this._getSelectedValue(),{selectedTime:o,selectedTimeString:e.Date.formatDate(o,this._timeFormat)})))}},{key:"_validateOpts",value:function(){_get(_getPrototypeOf(o.prototype),"_validateOpts",this).call(this);var e=this._opts;if(["hourStep","minuteStep"].forEach(function(t){e[t]=0<+e[t]?e[t]:1}),!(e.minTime||e.value||e.values.length)&&e.defaultTime){var t=this._getDateVal(e.defaultTime);e.defaultTime=t,this._viewDate.setHours(t.getHours(),t.getMinutes(),0,0)}else e.defaultTime=null}},{key:"_setFormat",value:function(){var e=this._opts.format,t=n(e.indexOf("h"),e.indexOf("H")),a=l(l(e.indexOf("d"),e.indexOf("M")),e.indexOf("y")),o,i;this._is12HourFormat=-1<e.indexOf("h"),t>a?(this._timeFormat=e.substring(t),e=e.replace(this._timeFormat,""),o=n(n(e.lastIndexOf("d"),e.lastIndexOf("M")),e.lastIndexOf("y")),i="_date"):(this._dateFormat=e.substring(a),e=e.replace(this._dateFormat,""),o=n(e.lastIndexOf("m"),e.lastIndexOf("t")),i="_time"),this[i+"Format"]=e.substring(0,o+1)}},{key:"_buildData",value:function(e){_get(_getPrototypeOf(o.prototype),"_buildData",this).call(this),this._doNotBuildTime||this._buildTimeElem(),this._data.isCBar=!0,e&&this._render(),this._doNotBuildTime=void 0}},{key:"_buildTimeElem",value:function(){var e,t;(this._minDateHasTime||this._maxDateHasTime)&&(e=this._checkToUnSetVal("_minTime"),t=this._checkToUnSetVal("_maxTime")),this._getTimeSettings(),(e||t)&&this._setMinMaxVal(e,t)}},{key:"_addTripleCls",value:function(){var e=this._data;3===this._monthsPerView&&Object.keys(e.cBar).length?0>e.className.indexOf("zdatetimepicker--triplecalendar")&&(e.className+=" zdatetimepicker--triplecalendar"):e.className=e.className.replace(/zdatetimepicker--triplecalendar/g,"")}},{key:"_postRender",value:function(){_get(_getPrototypeOf(o.prototype),"_postRender",this).apply(this,arguments),this._timeInstance=e.timeinput(t("#"+this._elementId+"-timeinput")),this._selectedTime=this._timeInstance.getAttribute("value")}},{key:"_postEachRender",value:function(e,t){var a=!t.rendered,i=t.modifiedAttr;(a||-1<["commandBar, monthsPerView"].indexOf(i))&&this._isBtnsExist()&&this._addTripleCls(),_get(_getPrototypeOf(o.prototype),"_postEachRender",this).apply(this,arguments)}},{key:"_setSelectedTime",value:function(){var e=this._minTime,t=this._selectedTime=e?new Date(+e):void 0;return this._timeInstance.setAttribute("viewDate",new Date(+t)),t}},{key:"_setValue",value:function(e){var t=_get(_getPrototypeOf(o.prototype),"_setValue",this).call(this,e,!1);this._setTimeValues(void 0,!0),this._doNotBuildTime=!0,t&&this._buildData(!0)}},{key:"_triggerChange",value:function(e){var t=this._opts;t.immediateCommit&&(this._currentSelected||this._selectedDates.length)&&this._OKClickHandler(e,!0,t.closeOnDateSelect)}},{key:"_OKClickHandler",value:function(){if(!this._selectedTime){var e=this._timeInstance.getAttribute("value");e||(e=new Date(this._minTime||this._getNewDate().setHours(0,0,0,0)),this._timeInstance.setTime(e)),this._viewDate.setHours(e.getHours(),e.getMinutes(),0,0),this._selectedTime=new Date(+e)}this._currentSelected||this._selectedDates.length||this._setSelectedTime(),_get(_getPrototypeOf(o.prototype),"_OKClickHandler",this).apply(this,arguments)}},{key:"_updateValues",value:function(){_get(_getPrototypeOf(o.prototype),"_updateValues",this).call(this);var e=this._opts,t=this._setTimeValues.bind(this);this._timeInstance.setAttribute("valueUpdate",this._valueUpdate),this._valueUpdate?this._valueUpdate&&!e.immediateCommit&&t():"multiple-select-box"===e.timeFieldType?(this._timeInstance.update(),t(!0,!0)):t()}},{key:"_clearValues",value:function(e,t){this._timeInstance.clearTime(),this._timeInstance.refresh(),_get(_getPrototypeOf(o.prototype),"_clearValues",this).call(this,e,t)}},{key:"_setDate",value:function(a,i,l){var n=this._opts;"single"===n.selectionType&&(this._viewDate=new Date(+l)),(this._minDateHasTime||this._maxDateHasTime)&&this._setBoundaryValuesForTimeInput(),this._selectedTime=e.timeinput(t("#"+this._elementId+"-timeinput")).getAttribute("selectedTime"),_get(_getPrototypeOf(o.prototype),"_setDate",this).call(this,a,i,"single"===n.selectionType?this._viewDate:l),0===this._selectedDates.length&&"multiple"===n.selectionType&&this._setTimeValues()}},{key:"_resetValues",value:function(){this._valueReset=!0,_get(_getPrototypeOf(o.prototype),"_resetValues",this).call(this,!0);var e,t;(this._minDateHasTime||this._maxDateHasTime)&&(e=this._checkToUnSetVal("_minTime"),t=this._checkToUnSetVal("_maxTime")),this._minTime&&this._viewDate.setHours(this._minTime.getHours(),this._minTime.getMinutes(),0,0),(e||t)&&this._setMinMaxVal(e)}},{key:"_setTimeValues",value:function(e,t,a){var o=this._opts,i=this._viewDate,l,n;!a&&(this._minDateHasTime||this._maxDateHasTime)&&(l=this._checkToUnSetVal("_minTime"),n=this._checkToUnSetVal("_maxTime"));var s=!1===t?void 0:"single"===o.selectionType||o.value?i:o.values.length?this._getDateVal(o.values[0],o.format):void 0,r;s&&!e&&(r=new Date(i.getTime()),r.setHours(i.getHours(),i.getMinutes(),0,0)),this._timeInstance.setAttribute("valueUpdate",this._valueUpdate),this._timeInstance.setTime(r),(l||n)&&this._setMinMaxVal(l,n)}},{key:"_getDateVal",value:function(t){return e.Date.parseDate(t,this._timeFormat).date}},{key:"_destroy",value:function(){var e=this._input;e&&e.length&&this.isCE&&e.remove(),this._timeInstance.destroy(),_get(_getPrototypeOf(o.prototype),"_destroy",this).call(this),this._timeInstance=void 0,this._footer=this._input=void 0}},{key:"_setAttribute",value:function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.element,i=this._opts,l=!0;if(0>["minTime","maxTime","timeFieldType"].indexOf(e)&&(i[e]=t),-1<["timeFieldType","timeLabelType","timeLabel","timeMultipleSelectBoxType","minTime","maxTime","hourStep","minuteStep","disabledTimeList","fixedTimeOptions"].indexOf(e)){var n=t instanceof Date;if(-1<["minTime","maxTime"].indexOf(e)&&(t?this["_"+e]=n?new Date(+t):this._getDateVal(t):this["_"+e]=null),this._opts[e]=t,this._buildTimeElem(),this.isCE){var s=this._timeInstance._opts[e];this._timeInstance._opts=this._data.timeProps,this._timeInstance._opts[e]=s}this._timeInstance.setAttribute(e,t)}else l=_get(_getPrototypeOf(o.prototype),"_setAttribute",this).call(this,e,t,a);-1<["monthsPerView","commandBar","immediateCommit"].indexOf(e)?this._isBtnsExist()&&this._addTripleCls():"format"===e?(this._validateFormat(),!this._invalidFormat&&this._timeInstance.setAttribute("format",t)):-1<["rtl","timeZone"].indexOf(e)&&this._timeInstance.setAttribute(e,t),this._domChanged=l}},{key:"_setBoundaryValuesForTimeInput",value:function(){var e=this._checkToUnSetVal("_minTime"),t=this._checkToUnSetVal("_maxTime"),a=this._checkLimitValues();this._viewDate.setHours(this._selectedTime.getHours(),this._selectedTime.getMinutes(),0,0),this._resetTimeVal(),a.setMin?(this._timeInstance.setAttribute("minTime",void 0),this._timeInstance.refresh()):a.setMax?(this._timeInstance.setAttribute("maxTime",void 0),this._timeInstance.refresh()):(this._timeInstance.setAttribute("minTime",this._minTime),this._timeInstance.setAttribute("maxTime",this._maxTime)),(e||t)&&this._setMinMaxVal(e,t)}},{key:"_resetTimeVal",value:function(){var e=this._resetToToday.bind(this),t=e(new Date(+this._viewDate)),a=e(this._minTime?new Date(+this._minTime):void 0),o=e(this._maxTime?new Date(+this._maxTime):void 0);a&&t&&+t<+a&&(t=new Date(+a)),o&&t&&+t>+o&&(t=new Date(+o)),this._viewDate.setHours(t.getHours(),t.getMinutes(),0,0),this._selectedTime=new Date(+this._viewDate),this._timeInstance.setAttribute("viewDate",this._viewDate)}},{key:"_resetToToday",value:function(e){if(e){var t=this._getNewDate();e.setDate(t.getDate()),e.setMonth(t.getMonth()),e.setFullYear(t.getFullYear())}return e}},{key:"_checkLimitValues",value:function(){var t=new Date(this._viewDate.getTime()),a=this._minDate,o=this._maxDate,i=e.Date.areDatesEqual.bind(e);return t.setHours(0,0,0,0),this._minDateHasTime||this._maxDateHasTime?{setMin:a&&!i(a,t),setMax:o&&!i(o,t)}:{}}},{key:"_checkToUnSetVal",value:function(e){var t=this[e],a="set"+("_minTime"===e?"Min":"Max"),o=t?new Date(t.getTime()):void 0,i=this._checkLimitValues();return i[a]&&t&&(this["_"+a]=!0,this[e]=void 0),o}},{key:"_setMinMaxVal",value:function(e,t){this._setMin&&e&&(this._minTime=new Date(e.getTime())),this._setMax&&t&&(this._maxTime=new Date(t.getTime())),this._setMin=this._setMax=void 0}},{key:"_setTimeForMultiple",value:function(e){var t=this._selectedDates;if("multiple"===this._opts.selectionType)for(var a=0;a<t.length;a++)t[a].setHours(e.getHours(),e.getMinutes(),0,0)}},{key:"_clearClickHandler",value:function(e,a){(!e||t(e.target).closest(this._clear).hasClass("is-disabled"))&&e||(_get(_getPrototypeOf(o.prototype),"_clearClickHandler",this).call(this,e,a),!a&&this._dispatchEvent("clear",e,{valuesObject:[],values:[],options:this._opts}))}},{key:"name",get:function(){return"zdatetimepicker"}},{key:"props",get:function(){return{timeLabelIconClassName:null,fixedTimeOptions:[],disabledTimeList:[],labels:{timeLabel:"Time"},closeOnDateSelect:!1}}},{key:"attrs",get:function(){return{timeMultipleSelectBoxType:"h-m-t",timeFieldType:"input",timeLabelType:"icon",timeLabel:null,timeLabelIconClass:null,timeLabelSVGIconId:null,hourStep:1,minTime:null,maxTime:null,format:"dd/MM/yyyy, hh:mm tt",minuteStep:5,className:"",defaultTime:null}}},{key:"EVENTS",get:function(){return["hourchange","minutechange","periodchange","timechange"]}}]),o}(e.ZDatePicker);e.registerComponent("ZDateTimePicker",e.ZDatePicker,N),function(e){var t=e.zdatetimepicker.Templates,a=e.zdatepicker.Templates,o=e.Templates.Utilities;t.children=function(t){return ZT.html(tO159(),a.children(t),e.createTimeInput(t.timeProps),t.cBar&&o.commandBar(t.cBar))}}(ZComponents);var F=function(a){function i(){return _classCallCheck(this,i),_possibleConstructorReturn(this,_getPrototypeOf(i).apply(this,arguments))}return _inherits(i,a),_createClass(i,[{key:"_init",value:function(){var e=this._opts,t=e.mainClass;e.id=this._getID(e),e.isToggle="zswitch"===t,e.appendTo=this.element[0],this._setContentType(),"INPUT"===e.appendTo.tagName&&(e.appendTo=this.element.parent()),e.checked=e.on=null===e.on?e.checked:e.on,null===e.checked?e.on=e.checked=this.element[0].checked:this.element[0].checked=e.checked,e.transition=-1!==navigator.userAgent.indexOf("Trident")||-1!==navigator.userAgent.indexOf("Edge")?"zswitch--notransition":"",this._leftText=this._getI18NText("on"),this._rightText=this._getI18NText("off"),e.isCE=this.isCE;var a=e.thumb,o=a.offStateClassName,i=a.onStateClassName;e.thumb&&(e.thumbClassName=e.checked?null===i?"":i:null===o?"":o),e.name&&(this._data.attrs={name:e.name}),this._forElement=this.element.next("[for='".concat(this.element[0].id,"']")),this._assignIcons(!1)}},{key:"_assignIcons",value:function(){var e=this._data,t=this._opts;e.hasOnIcon=e.hasOffIcon=e.hasThumbIcon=!1,t.isToggle&&this._mergeData(t.thumb,t.on?"on":"off",!0)&&(e.isThumb=!0),"icon"===t.contentType&&this._initIcon(),e.track=t.isToggle?t.track:this._buildTrack(t),this._firstRender=e.firstRender=!0}},{key:"_postRender",value:function(e){var t=this._opts,a=this,o=t.mainClass,i=this.container,l=this.name,n=t.disabled;t.isToggle||(this.element=e||i),this._data.className+=" ".concat(o," ")+o+(t.checked?"--on ":"--off ")+o+"--"+t.size.toLowerCase()+("vertical"===t.orientation?" "+o+"--vertical ":""),i.attr({"aria-checked":t.checked,"aria-pressed":t.checked,checked:t.checked,"aria-orientation":t.orientation,id:a._getID(i),role:"switch"}).on("contextmenu."+l,function(){return!1}),t.isToggle&&(this._thumb=i.find("."+o+"__thumb")),this._touchInit(),this._buildElements(),this._setSize(),n&&this._disable(n)}},{key:"_postEachRender",value:function(){this._buildElements(),this._resizeSwitch()}},{key:"_bindEvents",value:function(){var e=this,t=this._forElement;t.length&&t.on("click",function(){e._opts.checked?e.switchOff(!0):e.switchOn(!0)})}},{key:"_initIcon",value:function(){var e=this._opts,t=e.isToggle?e.track:this._buildTrack(e);this._mergeData(t,"on"),this._mergeData(t,"off")}},{key:"_mergeData",value:function(t,a,o){var i=e._getIconInfo(t["".concat(a,"StateIconClassName")],t["".concat(a,"StateSVGIconId")],void 0,"".concat(this._opts.mainClass,"__icon")),l=this._data;a=o?"thumb":a,l["".concat(a,"SVGIconId")]=i.SVGIconId,l["".concat(a,"iconClassName")]=i.iconClassName,l["".concat(a,"SVGIconClassName")]=i.SVGIconClassName,(i.SVGIconId||i.iconClassName||i.SVGIconClassName)&&(o?l.hasThumbIcon=!0:l.hasOnIcon=l.hasOffIcon=!0)}},{key:"_hasSVG",value:function(e){return!!(e.onStateSVGIconId||e.offStateSVGIconId)}},{key:"_buildElements",value:function(){var e=this._opts,t=this.container;this._switchWrapper=t.find(".".concat(e.mainClass,"__statescontainer")),this._left=t.find(".".concat(e.onState)),this._right=t.find(".".concat(e.offState)),this._switchActions()}},{key:"_thumbIcon",value:function(e){var t=this._opts,a=t.on?"on":"off",o=a+(this._hasSVG(t.thumb)?"StateSVGIconId":"StateIconClassName");this._createIcon(o,t.thumb[o],!0,!e)}},{key:"_buildTrack",value:function(e){return{onStateClass:e.onStateClass,offStateClass:e.offStateClass,onStateLabel:e.onStateLabel,offStateLabel:e.offStateLabel,onStateIconClassName:e.onStateIconClassName,offStateIconClassName:e.offStateIconClassName,onStateSVGIconId:e.onStateSVGIconId,offStateSVGIconId:e.offStateSVGIconId}}},{key:"_createIcon",value:function(e,t,a,o){if(t){var i=this._opts,l=this._data,n=-1===e.indexOf("off")?"on":"off",s=a?"thumb":"track";i[s][e]=t,l[s]=i[s],this._mergeData(i[s],n,a),i.isToggle||(i.track=this._buildTrack(i)),o&&(this._render(l),this._buildElements()),a&&(this._thumb=this.container.find(".".concat(i.mainClass,"__thumb")))}}},{key:"_setContentType",value:function(){var e=this._opts,t=this.clsname,a=e.isToggle?e.track:this._buildTrack(e);a[t.onicon]&&a[t.officon]||a[t.onsvg]&&a[t.offsvg]?e.contentType="icon":a[t.onlbl]&&a[t.offlbl]&&(e.contentType="text")}},{key:"_setSize",value:function(){var e=this._opts,t=this.container,a=this._thumb,o=this._switchWrapper,i=e.orientation,l=e.height,n=e.width;e.minHeight=l||parseInt(t.css("min-height")),e.minWidth=n||parseInt(t.css("min-width")),e.isToggle&&(e.thumbMinWidth=parseInt(a.css("width")),e.thumbMinHeight=parseInt(a.css("height")),this._maxWidth=parseInt(o.css("vertical"===i?"top":"left")),this._setPosition(i,e.checked),this._domChanged=!0),this._resizeSwitch(l,n)}},{key:"_handleState",value:function(){var e=this,t=this.name;this.container.off("mouseup."+t).on("mouseup."+t,function(){e._opts.checked?e.switchOff(!0):e.switchOn(!0)})}},{key:"_switchActions",value:function(){var t=this,e="."+this.name,a=this.container,o=this._opts;this._isEnabled=!o.disabled,a.off("keydown"+e).on("keydown"+e,function(a){32===a.which&&t._isEnabled&&(t.element[0].checked?t.switchOff(!0):t.switchOn(!0),a.preventDefault())}).off("mousedown"+e).on("mousedown"+e,function(o){t._isEnabled&&(t._handleState(o,t._thumb.outerHeight(),t._thumb.outerWidth()),a.attr("tabindex",0))}).off("mouseenter"+e).on("mouseenter"+e,function(){t._setTooltip()}),this._setPosition(o.orientation,o.checked)}},{key:"_setTooltip",value:function(){var e=(!0===this._opts.checked?this._left:this._right).find("span.zswitch__label"),t=0<e.length&&e[0].offsetWidth<e[0].scrollWidth;this.container[t?"attr":"removeAttr"]("title",e.text())}},{key:"_trigger",value:function(e){return this._dispatchEvent("change",null,{state:this._opts.checked},null,e)}},{key:"getState",value:function(){return this._opts.checked}},{key:"switch",value:function(){this.element[0].checked?this.switchOff():this.switchOn()}},{key:"switchOn",value:function(e){this._swtichOnOff(!0,!this.element[0].checked,e)}},{key:"switchOff",value:function(e){this._swtichOnOff(!1,!!this.element[0].checked,e)}},{key:"_swtichOnOff",value:function(e,t,a){if(this._isEnabled){var o=this._opts,i=o.mainClass,l=o.thumb,n=o.track,s=i+"--on "+n.onStateClassName,r=i+"--off "+n.offStateClassName,d=this._data;this.container.addClass(e?s:r).removeClass(e?r:s).attr({"aria-checked":e,"aria-pressed":e}),o.isThumb&&(d.thumbClassName=l[e?"onStateClassName":"offStateClassName"]),this._setPosition(o.orientation,e),d.checked=d.on=o.checked=o.on=this.element[0].checked=e,d.hasThumbIcon&&this._thumbIcon(!1),t&&this._trigger(a),this._setTooltip()}this._thumb.css({top:"",left:""})}},{key:"disable",value:function(){this._disable(!0)}},{key:"enable",value:function(){this._disable(!1)}},{key:"_disable",value:function(e){var t=this.container;e=!!(e||"disabled"===e),this._isEnabled=!e,e?t.attr({"aria-disabled":!0,disabled:!0}):t.removeAttr("aria-disabled disabled"),t[e?"addClass":"removeClass"]("is-disabled")}},{key:"resizeSwitch",value:function(e,t){var a=this._opts;a.minHeight=a.maxHeight=a.height=e,a.minWidth=a.maxWidth=a.width=t,this._resizeSwitch(e,t)}},{key:"_getStyles",value:function(e,t){var a=e.css(t);return void 0===a?0:parseInt(a,10)}},{key:"_getWidth",value:function(e){var t="border-".concat(e,"-width"),a=this.container.attr("id");return parseInt(getComputedStyle(document.getElementById(a),null).getPropertyValue(t),10)}},{key:"_getEle",value:function(e){return"text"===this._opts.contentType?e.html():e.clone()}},{key:"_resizeSwitch",value:function(e,a){var o=this._opts,i=this._left,l=this._right,n=this._getEle(i.children()),s=this._getEle(l.children()),r=t("<label style=\"font-size:12px;\">").html(n).appendTo(t("body")),d=r.clone().html(s).appendTo(t("body")),c=this._getWidth("left")+this._getWidth("right"),_=this._getWidth("top")+this._getWidth("bottom"),u=o.rtl?"padding-left":"padding-right",p=o.rtl?"padding-right":"padding-left",m=this._getStyles(i,"padding-"+(o.rtl?"bottom":"top")),h=r.width(),g=d.width(),v=o.thumbMinWidth,y=h>g?h:g,f=o.minWidth,k=o.minHeight,b=o.minHeight,C=o.thumbMinHeight,D=v+c,w=C+_,S;v=this._max(v,"thumbMinWidth","thumbMaxWidth"),v>=o.thumbMinWidth&&("horizontal"===o.orientation?(i.css({"padding-bottom":0,left:o.rtl?1*-v:"auto"}).css(u,D),l.css({"padding-top":0,left:o.rtl?"auto":1*-v}).css(p,D)):(i.css({"padding-bottom":w,left:0}).css(u,0),l.css({"padding-top":w,left:"auto"}).css(p,0))),"vertical"===o.orientation?(void 0!==e&&null!==e?(b=k=this._max(e,"minHeight","maxHeight"),this._maxWidth=k-C-_):b=this._max(b+C+m+_,"minHeight","maxHeight"),S="none"===o.contentType?0:this._getStyles(i.children(),"margin-top")+this._getStyles(i.children(),"margin-bottom"),this.container.width(o.minWidth).height(o.minHeight+(""===S?0:S)+_),this._maxWidth=o.minHeight-C+(""===S?0:S)+_,this._setPosition(o.orientation,o.checked)):(void 0!==a&&null!==a?(y=this._max(a,"minWidth","maxWidth"),this._maxWidth=y-v-c):(S=this._getStyles(i.children(),"margin-left")+this._getStyles(i.children(),"margin-right"),f=y+v+c+("text"===o.contentType?S+(18<y?.2*y:0):0),"none"!==o.contentType&&(f+=4),y=this._max(f,"minWidth","maxWidth")),this.container.width(y).height(b),this._maxWidth=y-v,this._setPosition(o.orientation,o.checked),this._setTooltip()),r.remove(),d.remove()}},{key:"_setPosition",value:function(e,t){"vertical"===e?this._switchWrapper.css({top:t?0:-this._maxWidth,left:0}):this._switchWrapper.css({left:this._swapValue(0,-this._maxWidth,t),top:0})}},{key:"_swapValue",value:function(e,t,a){return a&&this._opts.rtl||!a&&!this._opts.rtl?t:e}},{key:"_max",value:function(e,t,a){var o=this._opts;return e<o[t]?o[t]:e>o[a]?o[a]:e}},{key:"_changeDirection",value:function(e){var t=this._opts;this._left[0].removeAttribute("style"),this._right[0].removeAttribute("style"),this._data.rtl=t.rtl=e,this._updateClass("zh-rtl",e,this.container),this._render()}},{key:"_setAttribute",value:function(e,t){var a=this._opts;("checked"===e||"on"===e)&&this._isEnabled?t?this.switchOn():this.switchOff():"disabled"===e?this._disable(t):"className"==e&&this.container.addClass(t).removeClass(a[e]),"rtl"===e?this._changeDirection(t):!/^(disabled|className|orientation|size)$/.test(e)&&(this._domChanged=!0),("height"===e||"width"===e)&&this._resizeSwitch(a.height,a.width)}},{key:"_touchInit",value:function(){var e=this.container,t=this;e[0].addEventListener("touchstart",t._touchHandler,!0),e[0].addEventListener("touchmove",t._touchHandler,!0),e[0].addEventListener("touchend",t._touchHandler,!0),e[0].addEventListener("touchcancel",t._touchHandler,!0)}},{key:"_touchHandler",value:function(e){var t=e.changedTouches,a=t[0],o="";switch(e.type){case"touchstart":o="mousedown";break;case"touchmove":o="mousemove";break;case"touchend":o="mouseup";break;case"touchcancel":o="mouseup";break;default:return;}var i=document.createEvent("MouseEvent");i.initMouseEvent(o,!0,!0,window,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(i),e.preventDefault()}},{key:"_switchHandler",value:function(e,t,a){e=o(t);var i=this._opts,l=i.orientation;return!!(a/2>=e&&(!i.rtl||"vertical"===l)||a/2<=e&&i.rtl&&"horizontal"===l)}},{key:"_addTransition",value:function(){""!==this._opts.transition&&this._switchWrapper.addClass("zswitch--notransition")}},{key:"_handleState",value:function(t){var a=this,o=this._opts,i=t.clientX,l=this.container,n=this._thumb,s=!1,r=this.name,d=this._switchWrapper,c=parseInt(d.css("left")),_="left",u=c,p=o.mainClass,m=p+"--on ",h=p+"--off ",g=o.orientation,v,y;"vertical"===g&&(u=c=parseInt(d.css("top")),i=t.clientY,_="top"),this.container.on("mousemove."+r,function(e){d.removeClass("zswitch--notransition"),setTimeout(function(){s=!0},100),v=a._maxWidth;var t=parseInt(l.width())-n.outerWidth(!0),r=parseInt(l.height())-n.outerHeight(!0),p=o.track,f=t,k=e.clientX-i+c,b,C;"horizontal"!==g&&(f=r,k=e.clientY-i+c),0>=k&&k>=-v?(u=k,b=f+k,C=k):0>k?(b=0,C=-v):k>-v&&(b=f,C=0),n.css(_,b),d.css(_,C),a._switchHandler(y,u,v)?l.addClass(m+p.onStateClassName).removeClass(h+p.offStateClassName):l.addClass(h+p.offStateClassName).removeClass(m+p.onStateClassName)}).on("mouseup."+r,function(){a.container.off("mousemove."+r+" mouseup."+r+" selectstart."+r),s?a._switchHandler(y,u,v)?a.switchOn(!0):a.switchOff(!0):a.element[0].checked?a.switchOff(!0):a.switchOn(!0),a._addTransition()}).on("selectstart."+r,function(){return!1}).off("mouseleave."+r).on("mouseleave."+r,function(){a.container.off("mousemove."+r+" mouseup."+r+" selectstart."+r)}),e.$window.off("mouseup."+r).on("mouseup."+r,function(){s&&(a._switchHandler(y,u,v)?a.switchOn(!0):a.switchOff(!0),a._addTransition()),e.$window.off("mouseup."+r)})}},{key:"_setAttribute",value:function(e,t){var a=this._opts,o=this._data,i=a.mainClass,l=a[e];if(!/^(track|thumb|className)$/.test(e)){if(/^(checked|on)$/.test(e)&&!this._isEnabled)return!1;o[e]=a[e]=t}if("orientation"===e)return this._updateClass("".concat(i,"--vertical"),"vertical"!==t,this.container),this.container.attr("aria-orientation",t),this._setSize(),!1;if("size"===e)this.container.addClass(i+"--"+t).removeClass(i+"--"+l),this._thumb&&this._thumb.removeAttr("style"),this._setSize();else if(!/^(track|thumb)$/.test(e))/^(checked|on)$/.test(e)?this._isEnabled&&(t?this.switchOn():this.switchOff()):"disabled"===e?this._disable(t):"className"===e&&this.container.addClass(t).removeClass(l);else if("none"===t)this._resetOption(e),"track"===e?(a.contentType="none",this._initIcon()):(o.hasThumbIcon=!1,this._thumbIcon(!0));else{var n;for(var s in t)n=t[s],this._isNotNull(n)&&n!==l[s]&&this._changeContents(s,e,n,l,"thumb"===e)}"rtl"===e?this._changeDirection(t):!/^(disabled|className|orientation|size)$/.test(e)&&(this._domChanged=!0),("height"===e||"width"===e)&&this._resizeSwitch(a.height,a.width)}},{key:"_changeContents",value:function(e,t,a,o,i){var l=this._opts,n=this._data,s=void 0===t?l:l[t];if(-1!==e.indexOf("StateClassName")||"className"===e){var r=l.checked;if("className"===e||r&&"onStateClassName"===e||!r&&"offStateClassName"===e){var d=!0===i?this._thumb:this.container;d.addClass(a).removeClass(o[e])}s[e]=a}else if(-1!==e.indexOf("StateLabel")&&!i){l.contentType="text",n.hasOnIcon=n.hasOffIcon=!1;var c=void 0===t?l:l[t];c[e]=s[e]=a,this._resetOption(t,"icons"),this._resetOption(t,"svg"),this._createLabel(s)}else if(-1!==e.indexOf("StateIconClassName")||-1!==e.indexOf("StateSVGIconId")){var _=-1===e.indexOf("off")?this._left:this._right,u=!1;i?(l.isThumb=this._isNotNull(a),_=this._thumb,u=-1!==e.indexOf("onS")&&l.checked||-1!==e.indexOf("off")&&!l.checked):l.contentType="icon",this._updateIcons(_,t,e,a,i,u)}}},{key:"_updateIcons",value:function(e,t,a,o,i,l){var n=void 0===t?this._opts:this._opts[t],s=this._opts.contentType;("icon"===s||"icon-text"===s||i)&&(this._resetOption(t,"text"),n[a]=o,-1===a.indexOf("StateIconClassName")?this._resetOption(t,"icons"):this._resetOption(t,"svg"),o&&(i&&l||!i)&&this._createIcon(a,o,i))}},{key:"_createLabel",value:function(e){e.onStateLabel=e.onStateLabel||this._leftText,e.offStateLabel=e.offStateLabel||this._rightText;var t=this._data,a=this._opts,o=this._buildTrack(e);if(a.isToggle)t.track=a.track=o;else{var i=this._data.rendered;t=a=o,t.rendered=i}}},{key:"_resetOption",value:function(e,t){var a=void 0===e?this._opts:this._opts[e];"text"===t?a.onStateLabel=a.offStateLabel=null:"icons"===t?a.onStateIconClassName=a.offStateIconClassName=null:"svg"===t?a.onStateSVGIconId=a.offStateSVGIconId=null:a.onStateSVGIconId=a.offStateSVGIconId=a.onStateIconClassName=a.offStateIconClassName=a.onStateLabel=a.offStateLabel=null}},{key:"name",get:function(){return"ztoggleswitch"}},{key:"attrs",get:function(){return{rtl:!1,contentType:"none",orientation:"horizontal",size:"medium",on:!1,checked:!1,disabled:!1,minWidth:null,maxWidth:500,minHeight:null,maxHeight:300,thumbMinWidth:null,thumbMinHeight:null,thumbMaxHeight:100,thumbMaxWidth:100,height:null,width:null,isThumb:!1,onState:"zswitch__onstate",offState:"zswitch__offstate",mainClass:"zswitch"}}},{key:"props",get:function(){return{track:{color:null,offStateClassName:null,onStateColor:null,offStateColor:null,onStateClassName:null,onStateLabel:null,offStateLabel:null,onStateIconClassName:null,onStateSVGIconId:null,offStateIconClassName:null,offStateSVGIconId:null},thumb:{color:null,offStateClassName:null,onStateColor:null,onStateClassName:null,onStateIconClassName:null,onStateSVGIconId:null,offStateIconClassName:null,offStateSVGIconId:null},labels:{on:"On",off:"Off"}}}},{key:"EVENTS",get:function(){return["change"]}},{key:"clsname",get:function(){return{oncls:"onStateClassName",offcls:"offStateClassName",onicon:"onStateIconClassName",officon:"offStateIconClassName",onsvg:"onStateSVGIconId",offsvg:"offStateSVGIconId",onlbl:"onStateLabel",offlbl:"offStateLabel"}}}]),i}(e.CoreComponent);e.registerComponent("ZToggleSwitch",F),function(e){var t=e.ztoggleswitch.Templates;t.container=function(e){return ZT.html(tO160(),e.text,e.id,e.role,e.className,e.checked,e.children&&t.children(e))},t.children=function(e){return ZT.html(tO161(),e.thumbClassName,e.hasThumbIcon&&(e.iconType="thumb")&&t.icon(e),e.transition,e.track.onStateLabel&&ZT.html(tO162(),e.track.onStateLabel),e.hasOnIcon&&(e.iconType="on")&&t.icon(e),e.track.offStateLabel&&ZT.html(tO163(),e.track.offStateLabel),e.hasOffIcon&&(e.iconType="off")&&t.icon(e))},t.icon=function(e){return ZT.html(tO164(),e[e.iconType+"iconClassName"],ZT.customHTML(e[e.iconType+"SVGIconId"]&&"<svg class='".concat(e[e.iconType+"SVGIconClassName"],"'><use xlink:href='").concat(e[e.iconType+"SVGIconId"],"'></use></svg>")))}}(ZComponents);var L=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(){this._opts=e.ZMenuButton.init(this._opts),_get(_getPrototypeOf(o.prototype),"_init",this).apply(this,arguments)}},{key:"_updateIcon",value:function(){var t=this._opts;t.arrowIcon&&e.ZMenuButton.getIconInfo(t)}},{key:"_mousedownHandler",value:function(t){var a=this,o=3===t.which,i=this._opts,l=this._getID(this.element),n=i.disabled;if(!n&&e.menu&&window.setTimeout(function(){return a._showHideMenu(o,l)},i.delay||0),n||o)return t.stopImmediatePropagation(),!1}},{key:"_keydownHandler",value:function(a){var o=!1,i=!1,l=!1,n=a.keyCode,s=e.keyCode,r=this._activeMenu||t("#"+this._opts.menuId);if(n===s.ESCAPE||n===s.TAB?r.is(":visible")&&(r.find(".on-hover").hasClass("zmenu--submenu")?l=!0:(e.menu(r).hide(),n===s.ESCAPE&&a.stopPropagation())):(n===s.ENTER||n===s.SPACE)&&r?document.activeElement===this.element[0]&&(o=!0,r.find(".on-hover").length?l=!0:i=!0):(o=!0,r.is(":visible")?l=!0:(n===s.UP||n===s.DOWN)&&(i=!0)),l?e.menu(r).handleKeyCode(a):i&&this._showHideMenu(),o)return!1}},{key:"_clickHandler",value:function(e){this._dispatchEvent("click",e,{button:this.element})}},{key:"_bindEvents",value:function(){var t={mousedown:"mousedown",keydown:"keydown",click:"click"};"mouseover"===this._opts.openOn&&(t={mouseEnter:"mouseenter",mouseLeave:"mouseleave"}),this._addEvents(t),this._handleFocus(this._container),e.ShortCut&&e.ShortCut.register(this.element)}},{key:"_showHideMenu",value:function(a,o){var i=this._opts,l=t("#"+i.menuId);if(!a&&!l.is(":visible")){var n={menuHide:"zmenuhide."+o+" zhide."+o,menuShow:"zmenushow."+o+" zshow."+o+" zmenusubmenushow."+o+" zsubmenushow."+o,menuSubmenuHide:"zmenusubmenuhide."+o+" zsubmenuhide."+o};"mouseover"===i.openOn&&(n.menuMouseEnter="mouseenter",n.menuMouseLeave="mouseleave"),e.Browser.isFirefox||(n.menuFocus="zmenubeforefocus zbeforefocus zmenubeforesubmenufocus zbeforesubmenufocus"),this._addEvents(n,l),e.menu(l,{rtl:i.rtl}),e.menu(l).show({forElement:this._container.data("menuForElement")||this._container}),this._handleState(!0),this._addEvents({windowResize:"resize"},e.$window)}else"mouseover"!==this._opts.openOn&&(this._handleState(),e.menu(l).hide())}},{key:"_windowResizeHandler",value:function(){e.currentMenu&&e.menu(e.currentMenu).hide()}},{key:"_menuFocusHandler",value:function(){return!1}},{key:"_mouseLeaveHandler",value:function(a){var o=this,i=this._opts,l="#"+i.menuId;this._mouseEnterFired=!1,this._mouseLeaveTimeout=setTimeout(function(){o._durationLeft&&(o._durationLeft-=new Date().getTime()-o._closeAfterStartTime);var n=t(a.relatedTarget);n.parents(l).length||n.attr("id")===l||(o._handleState(),e.menu(t("#"+i.menuId)).hide())},50)}},{key:"_menuMouseEnterHandler",value:function(){this._resetLeaveTimer()}},{key:"_menuMouseLeaveHandler",value:function(e){this._mouseLeaveHandler(e)}},{key:"_mouseEnterHandler",value:function(e){this._mouseEnterFired=!0,this._resetLeaveTimer(),this._mousedownHandler(e)}},{key:"_resetLeaveTimer",value:function(){this._durationLeft&&(this._durationLeft-=new Date().getTime()-this._closeAfterStartTime),this._mouseLeaveTimeout&&clearTimeout(this._mouseLeaveTimeout)}},{key:"_menuHideHandler",value:function(t,a){var o=(t.detail||a||{}).menuitem,i=t.originalEvent;if(i){var l=o&&o.is(".is-fixed"),n="mouseup"===i.type;!l&&n&&(this.element.focus(),this.element.removeClass("has-kfocus")),(n||l)&&this.element.removeClass("has-focus")}this._handleState(),this._removeEvents("resize",e.$window);var s=this._getID(this.element);this._removeEvents("zmenuhide."+s+" zhide."+s,t.detail.element),this._removeEvents("zmenusubmenuhide."+s+" zsubmenuhide."+s,t.detail.element),this._activeMenu=void 0}},{key:"_menuSubmenuHideHandler",value:function(e){this._activeMenu=e.detail.element}},{key:"_menuShowHandler",value:function(e){var t=e.detail;this._activeMenu=t.menu||t.element}},{key:"_handleState",value:function(e){this._container[e?"addClass":"removeClass"](this._opts.activeClass),this.element.attr("aria-expanded",e)}},{key:"_destroy",value:function(){this.element.removeClass("zbutton--menu").removeAttr("aria-haspopup");var e=t("#"+this._opts.menuId),a=this._getID(this.element);this._removeEvents("zmenuhide."+a+" zhide."+a+" zmenubeforefocus zbeforefocus zmenubeforesubmenufocus zbeforesubmenufocus",e),this._removeEvents("zmenushow."+a+" zshow."+a+" zmenusubmenushow."+a+" zsubmenushow."+a+" zmenusubmenuhide."+a+" zsubmenuhide."+a,e),this._activeMenu=void 0,_get(_getPrototypeOf(o.prototype),"_destroy",this).call(this)}},{key:"_setAttribute",value:function(a,i){"menuId"===a&&this.element[0].setAttribute("aria-controls",i);var l=this._opts;if("arrowIconClassName"===a||"arrowIconClass"===a||"arrowSVGIconId"===a)l[a]=i,this._updateIcon(),this._domChanged=!0;else if("rtl"===a)e.menu(t("#".concat(l.menuId))).setAttribute("rtl",i);else return _get(_getPrototypeOf(o.prototype),"_setAttribute",this).call(this,a,i)}},{key:"name",get:function(){return"zmenubutton"}},{key:"attrs",get:function(){return{openOn:"click",menuId:null,delay:0,arrowIcon:!0,arrowIconClass:null,arrowSVGIconId:null,activeClass:"is-selected"}}},{key:"props",get:function(){return{arrowIconClassName:null}}}],[{key:"getIconInfo",value:function(t){var a=e._getIconInfo(t.arrowIconClassName||t.arrowIconClass,t.arrowSVGIconId,"zc__svg--downarrow zbutton__svg zbutton__menuarrow","zbutton__icon zh-floatright");return t.arrowIcon=!0,t.arrowIconInfo=a,t}},{key:"init",value:function(e){e.className+=" zbutton--menu";var t=e.customAttributes||{};return t["aria-haspopup"]=!0,t["aria-expanded"]=!1,t["aria-controls"]=e.menuId,e.customAttributes=t,e.arrowIcon?o.getIconInfo(e):e}}]),o}(e.ZButton);e.registerComponent("ZMenuButton",e.ZButton,L),function(e){var t=e.zmenubutton.Templates,a=e.Templates.Utilities.icon;t.container=function(e){return ZT.html(tO165(),e.text,e.id,e.role,e.type,e.className,e.children&&t.children(e))},t.children=function(e){return ZT.html(tO166(),e.icon&&ZT.html(tO167(),e.iconClassName,e.SVGIconId&&ZT.customHTML("<svg class=\"".concat(e.SVGIconClassName,"\"> <use xlink:href=\"").concat(e.SVGIconId,"\" ></use> </svg>"))),e.text&&ZT.html(tO168(),e.text),e.arrowIcon&&a(e.arrowIconInfo))}}(ZComponents);var R=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_init",value:function(t,a){a.isCE=this.isCE,a.disabled=a.disabled||this.element[0].disabled;var o=t[0],i=t.attr("id"),l;a.text=a.text||o.textContent,i&&(l=i+"DropDown"),a.primaryButton=e.ZButton.getBtnProps({text:a.text,isCE:a.isCE,className:"zbutton--action",appearance:a.appearance,disabled:a.disabled,templateRender:!0,iconClass:a.iconClass,iconClassName:a.iconClassName,size:a.size,SVGIconId:a.SVGIconId},t),a.menuButton=e.ZMenuButton.init({id:l,templateRender:!0,className:"zbutton zbutton--icononly",appearance:a.appearance,size:a.size,disabled:a.disabled||!1,delay:a.delay,arrowIcon:!0,arrowIconClass:a.arrowIconClass,arrowIconClassName:a.arrowIconClassName,isCE:a.isCE,menuId:a.menuId,arrowSVGIconId:a.arrowSVGIconId,customAttributes:a.splitbuttonAttributes}),t.removeAttr("data-menu-id")}},{key:"_postRender",value:function(){var e=this.element,a=this.container,o=this._opts,i=e.attr("title");i&&(e.removeAttr("title"),a.attr("title",i));var l=a.find(".zbutton--menu");o.isCE||a.attr("id",e.attr("id")+"Container"),this._data.className+=" zbutton--split  zbutton--split"+(o.appearance||"normal"),l.data("menuForElement",a),this.actionBtn=a.find(".zbutton--action").length?a.find(".zbutton--action"):t(a.find(".zbutton")[0]),this.menuButton=l}},{key:"_bindEvents",value:function(){var a=this,o=t("#"+this._opts.menuId),i=this.name,l=this.actionBtn,n=this.menuButton;this.container.on("click."+i,function(i){if(!l.hasClass("is-disabled")){var s=t(i.target).closest(".zbutton"),r=s[0]===n[0];!r&&e.menu&&e.menu(o).hide(),a._dispatchEvent("click",i,{isMenuButton:r,button:a.element,menuButton:n},a.isCE?a.container:a.element)}}),l.off("click.zbutton").off("mousedown."+i).on("mousedown."+i,function(e){if(l.hasClass("is-disabled"))return e.stopImmediatePropagation(),!1}),e.ShortCut&&(e.ShortCut.register(l),e.ShortCut.register(this.menuButton)),o.on("zmenushow."+i+" zshow."+i,function(e){var t=a.container[0];if(o.data("forElement")[0]===t){var s=window.getComputedStyle(t,null),r=e.detail.menu.attr("class"),d=a._opts.rtl;r.match("top")?(l.css("border-bottom-"+(d?"right":"left")+"-radius",s["borderBottom"+(d?"Right":"Left")+"Radius"]),n.css("border-bottom-"+(d?"left":"right")+"-radius",s["borderBottom"+(d?"Left":"Right")+"Radius"])):r.match("bottom")&&(l.css("border-top-"+(d?"right":"left")+"-radius",s["borderTop"+(d?"Right":"Left")+"Radius"]),n.css("border-top-"+(d?"left":"right")+"-radius",s["borderTop"+(d?"Left":"Right")+"Radius"])),o.off("zmenubeforeshow."+i+" zbeforeshow."+i),a.container.addClass(a._opts.activeClass)}}).on("zmenuhide."+i+" zhide."+i,function(){var e={"border-bottom-left-radius":"","border-top-left-radius":"","border-bottom-right-radius":"","border-top-right-radius":""};l.css(e),n.css(e),a.container.removeClass(a._opts.activeClass)}),this._opts.updateButtonOnMenuItemClick&&o.on("zmenubeforeshow."+i+" zbeforeshow."+i,function(){a._opts.updateButtonOnMenuItemClick&&a._hideMenuItem(!0)}).on("zmenuitemclick."+i+" zitemclick."+i,function(t){var i=t.detail,l=e.menu(i.menu)._opts,n=a._opts.iconClassName||a._opts.iconClass||a._opts.SVGIconId,s=e.button(a.actionBtn)._opts.text,r=n?s?"icon-text":"icon":"text";if(l.contentType===r){a._hideMenuItem(!1);var d=i.data;e.menu(o).hideMenuItems([i.menuitem]),n&&(d.SVGIconId?a._setAttribute("SVGIconId",d.SVGIconId):d.iconClassName&&a._setAttribute("iconClassName",d.iconClassName)),s&&a._setAttribute("text",d.label),a._dispatchEvent("change",t,{button:a.element,menuButton:a.menuButton},a.isCE?a.container:a.element)}})}},{key:"_hideMenuItem",value:function(a){var o=t("#"+this._opts.menuId),l=e.button(this.actionBtn)._opts.text,n=this._opts.SVGIconId&&-1===this._opts.SVGIconId.indexOf("#")?"#"+this._opts.SVGIconId:this._opts.SVGIconId,s=this._opts.iconClassName||this._opts.iconClass,r=o.find(".zmenu__item"),d=e.menu(o)._opts.contentType;l=l&&l.trim();for(var c=0;c<r.length;c++){var _=r[c].itemData,u=_.label||t(r[c]).text().trim(),p="text"!==_.contentType,m=!!(p&&n)&&n===_.SVGIconId,h=!!(p&&s&&_.iconClassName)&&_.iconClassName.replace("zmenu__icon","").trim()===s,g=m||h||!a,v=u&&l?u===l:!a;("icon-text"===d?g&&v:"icon"===d?g:v)&&e.menu(o)[a?"hideMenuItems":"showMenuItems"]([r[c]])}}},{key:"_setAttribute",value:function(t,a){if(("disabled"===t||"menuId"===t||"size"===t||"appearance"===t||"arrowIconClassName"===t||"arrowIconClass"===t||"arrowSVGIconId"===t||"rtl"===t)&&(e.menubutton(this.menuButton).setAttribute(t,a),"appearance"===t)){var o="primary"===a;this._updateClass(o?"":"zbutton--splitnormal",o?"zbutton--splitnormal":"")}return this._opts[t]=a,e.button(this.actionBtn).setAttribute(t,a)}},{key:"_destroy",value:function(){this.actionBtn.removeClass("zbutton zbutton--icononly is-selected is-disabled zbutton--"+this._opts.size+" zbutton--"+this._opts.appearance).removeAttr("role aria-label");var e=t("#"+this._opts.menuId);e.off("zmenubeforeshow.zsplitbutton zbeforeshow.zsplitbutton zmenushow.zsplitbutton zshow.zsplitbutton zmenuitemclick.zsplitbutton zitemclick.zsplitbutton zmenuhide.zsplitbutton zhide.zsplitbutton")}},{key:"name",get:function(){return"zsplitbutton"}},{key:"attrs",get:function(){return{appearance:"normal",size:"medium",text:null,icon:null,iconClass:null,SVGIconId:null,disabled:!1,arrowIcon:!0,arrowIconClass:null,arrowSVGIconId:null,menuId:null,updateButtonOnMenuItemClick:!0,activeClass:""}}},{key:"props",get:function(){return{iconClassName:null,arrowIconClassName:null,splitbuttonAttributes:{}}}},{key:"EVENTS",get:function(){return["click","change"]}}]),o}(e.CoreComponent);e.registerComponent("ZSplitButton",R),function(e){var t=e.zsplitbutton.Templates,a=e.zmenubutton.Templates.button,o=e.zbutton.Templates.button;t.container=function(e){return ZT.html(tO169(),e.text,e.id,e.className,e.children&&t.children(e))},t.children=function(t){return ZT.html(tO170(),e.createButton(t.primaryButton),e.createMenuButton(t.menuButton))}}(ZComponents);var U=function(a){function o(){return _classCallCheck(this,o),_possibleConstructorReturn(this,_getPrototypeOf(o).apply(this,arguments))}return _inherits(o,a),_createClass(o,[{key:"_create",value:function(){var t="."+this.name;this._eventSuffix=t+"-temp",this.element.on("mouseenter"+t+" mousemove"+t,this._targetEnter.bind(this)).on("mouseleave"+t,function(){e._inTooltipArea=!1}),this._scrollHandlerBinded=this._scrollHandler.bind(this)}},{key:"_scrollHandler",value:function(e){this._hide(void 0,e)}},{key:"_handleEvents",value:function(t){var a=this,o=this._eventSuffix;e.$document.off(o),window.removeEventListener("scroll",this._scrollHandlerBinded,!0),t&&(e.$document.on("keydown"+o+" mousedown"+o,function(e){a._hide(void 0,e)}),window.addEventListener("scroll",this._scrollHandlerBinded,!0))}},{key:"_targetEnter",value:function(a,o,i){var l=this,n;if(this.custom=!1,this.target&&(this.target.is(":hidden")||this.target.is("button[disabled], input[disabled], textarea[disabled], fieldset[disabled], select[disabled], keygen[disabled] , output[disabled], option[disabled]")))return void this._hide(void 0,a);if(a){if(!a.originalEvent)return;if(this.pageX=a.pageX,this.pageY=a.pageY,n=t(a.target).closest("[title],[data-title-content-id]"),this.target&&this.target.is(":hover")&&!this.target.find(n).length){if(!this._refreshed&&(this._lastTip||this._hiddenOnTimeOut))return;n=this.target}else if(!n.length||!n.attr("title")&&!this._opts.forElement&&!n.attr("data-title-for-element")||n.attr("data-title-content-id")||this._opts.selector&&!n.is(this._opts.selector))return;if(e._inTooltipArea){if(this.element.find(e._inTooltipArea.element[0]).length)return;e._inTooltipArea._hide(!0)}e._inTooltipArea=this}else if(o)this.custom=!0,n=t(o);else return;this._hiddenOnTimeOut=!1,this.target&&this._clearTitle(!0,this.target),this.target=n,this.targetOpt=this._getOptions(n,i),this.custom&&(this.targetOpt.showDelay=0),this._clearTitle(),this.target.off(this._eventSuffix).on("mouseleave"+this._eventSuffix,function(e){l._hiddenOnTimeOut=!1,l._hide(void 0,e)}),this._lastEvent=a,this._show(a)}},{key:"_hide",value:function(e,t){if(this.target&&this._trigger("beforehide",t)){var a=!this.target.is(":hover");a&&this._clearTitle(!0),this._clearShowTimer(),this._clearHideTimer(),this.container&&this._removeTip(e,a),this._handleEvents()}}},{key:"_show",value:function(e){var t=this,a=this.targetOpt,o=this.target;a.showDelay&&void 0===a.reshowDelay&&(this.targetOpt.reshowDelay=a.showDelay/5),this.targetOpt.hideOnTargetClick&&o.on("mousedown"+this._eventSuffix,function(e){t._trigger("beforehide",e)&&(t._clearShowTimer(),t._removeTip(!0))}),this._showTooltip(e)}},{key:"_clearShowTimer",value:function(){clearTimeout(this.showTimer)}},{key:"_clearHideTimer",value:function(){clearTimeout(this.hideTimer)}},{key:"_setTimer",value:function(e,t){var a=this,o=t.maxDisplayTime;o="number"==typeof o?+o:0,o&&(this._clearHideTimer(),this.hideTimer=setTimeout(function(){a._trigger("beforehide",void 0,{exceededMaxDisplayTime:!0})&&(a._hiddenOnTimeOut=!0,a._removeTip(!0))},o))}},{key:"_getTitleForEllipsisEle",value:function(e){var t=this.target;return"self"!==e.forElement&&(t=t.find(e.forElement)),!t.length||t[0].clientWidth>=t[0].scrollWidth?void 0:e.title||t.text()}},{key:"_showHandler",value:function(e,t){var a=this;if(this._trigger("beforeshow",e)){var o=this.targetOpt;if(!this.target.is(":visible"))return;if(o.forElement){var i=this._getTitleForEllipsisEle(o);if(!i)return;o.title=i}this._clearHideTimer(),/^(auto|top|bottom|right|left|top-left|top-right|bottom-left|bottom-right|at-cursor|follow-cursor)$/.test(o.position)||(o.position=this._DEFAULTS.position),this._isAtCursorPos()&&(void 0!==this.pageX&&void 0!==this.pageY||o.offset?o.displayType="box":o.position="top"),this._includeContent(),this._createTooltip(),this._setTimer(this.target,o),"follow-cursor"===o.position&&this.target.on("mousemove"+this._eventSuffix,function(e){a._positionElement(e),a._setTimer(a.target,o)}),this._positionElement(e),this._handleEvents(!0),this._animate(this.container,t,"show",function(){a._trigger("show",e)})}}},{key:"_showTooltip",value:function(e){var t=this.targetOpt,a=t.showDelay,o=t.animation;this.container&&(this.target.is(this._lastTip)?o=a=void 0:(a=t.reshowDelay,this._trigger("hide",e,this._lastTip))),this._lastTip=this.target,this._clearShowTimer(),a?this.showTimer=setTimeout(this._showHandler.bind(this,e,o),a):this._showHandler(e,o)}},{key:"_animate",value:function(a,o,i,l){var n=function(){a.css("display","hide"===i?"none":""),l&&l()};if(o&&e.animationHandler&&!t.isEmptyObject(o)){var s={element:a,action:i,callback:n,ctype:this.name,animation:o};e.animationHandler(s)}else n()}},{key:"_includeContent",value:function(){var t=this.targetOpt;if("object"===_typeof(t)){var a=t.title=t.title||t.content||"";a="string"==typeof t.innerHTML?this._populateTemplate(t.innerHTML,t):"string"==typeof t.contentId?document.getElementById(t.contentId).innerHTML:this._encodeContent(a),t.showShortcutKey&&e.ShortCut&&(a=this._appendShortCut(t,a)),this._setContent(t,a)}}},{key:"_setContent",value:function(e,t){this._opts.content=t}},{key:"_encodeContent",value:function(t){return this.targetOpt.isMessageHTMLEncoded?t:e.encodeHTML(t)}},{key:"_populateTemplate",value:function(e,t){var a=this;return"string"==typeof e?e.replace(/(#?#[^# ]+#?#)/g,function(e){var o=t[e.replace(/#/g,"")];return a._isNotNull(o)?a._encodeContent(o):e}):"function"==typeof e?e(t):void 0}},{key:"_isAtCursorPos",value:function(){return /^(at-cursor|follow-cursor)$/.test(this.targetOpt.position)}},{key:"_positionElement",value:function(e){var t=this._getPosition(e),a=t.direction.split("-")[0];this.container.removeClass("class").addClass("ztooltip ztooltip--"+a);var o=this.targetOpt.margin;(this._isAtCursorPos()||o&&"object"===_typeof(o))&&this._updateMargin(o,t,a),this.container.css(t.elementPosition),this._callout&&this._callout.css(t.arrowPosition)}},{key:"_getPosition",value:function(a){var o=this.targetOpt,i=this.target,l=o.position,n=o.positionAlterable;this.container.css({left:"auto",right:"auto"});var s=o.offset;return this._isAtCursorPos()||s?(s?(this.pageX=parseInt(s.left),this.pageY=parseInt(s.top)):l="bottom-left",i=a||{preventDefault:function(){}},i.pageX=this.pageX,i.pageY=this.pageY,n="flipallfit"):"auto"===o.position?(l="bottom",n="flipallfit"):void 0===n&&(n=!1),e.Position.get(i,this.container,{rtl:o.rtl,direction:l,eventObj:a,bufferSpace:this._callout?10:0,positionAlterable:n,arrowCallback:function(e,a){t(e).attr("class","ztooltip__pointer zh-"+a)},arrow:"callout"===o.displayType?{element:this._callout,direction:!0,minSpace:8}:void 0})}},{key:"_removeTipHandler",value:function(e){var t=this;if(this.container){if(!e&&this.targetOpt.pauseOnMouseOver&&this.container.is(":hover"))return;this._lastTip=null,this._animate(this.container,this.targetOpt.animation,"hide",function(){t._callout=null,t._trigger("hide")})}}},{key:"_removeTip",value:function(e,t){this._lastEvent=!1,this._clearHideTimer(),this.container&&(this.custom&&t&&this._clearTitle(!0,this.target),e||!this.targetOpt.hideDelay?this._removeTipHandler(e):this.hideTimer=setTimeout(this._removeTipHandler.bind(this),this.targetOpt.hideDelay))}},{key:"_getOptions",value:function(e,a){var o=e.attr("title"),i={title:o};if(this._opts.parseTitleForOptions&&o&&isNaN(o)&&-1!==o.indexOf("{"))try{i=JSON.parse(o)}catch(t){}else t.extend(i,this._getTargetAttrs(e));return t.extend(!0,{},this._opts,i,a||{})}},{key:"_createTooltip",value:function(){var e=this,a=this.targetOpt;this._opts.callout="callout"===a.displayType,this._callout=!1;var o=this._render(!!this.container);o&&(this.container?this.container.stop(!0,!0).hide():this.container=t(o).on("mouseleave"+this._eventSuffix,function(){e.target||e._removeTipHandler()})),this.container.css("pointer-events",a.pauseOnMouseOver?"auto":"").attr("class","ztooltip "+(a.className||"")+(a.rtl?" h-rtl":"")),this._opts.callout&&(this._callout=this.container.find(".ztooltip__pointer"))}},{key:"_render",value:function(a){return e._render(this._opts,this.name,null,this.container&&this.container[0],t("body")[0],{skipParent:a})}},{key:"_isUploadFileBtn",value:function(e){return"INPUT"===e.tagName&&"file"===e.type}},{key:"_clearTitle",value:function(e,a){if(a=a||this.target,a&&a.length)if(e){a.off(this._eventSuffix);for(var o=a.data("zdependentElements")||[],l=0;l<o.length;l++){var n=t(o[l]),s=n.attr("title");(void 0===s||!s&&this._isUploadFileBtn(n[0]))&&n.attr("title",n.data("ztitle")),n.removeData("ztitle")}a.removeData("zdependentElements");var r=a.data("ztitleId");r&&a.attr("data-title-content-id",r).removeData("ztitleId"),this.target=void 0}else{var d=a.parents("[title]").toArray();d.push(a);for(var c=0,_;c<d.length;c++)_=t(d[c]),_.data("ztitle",_.attr("title")),_.removeAttr("title"),this._isUploadFileBtn(_[0])&&(_[0].title="");a.data("zdependentElements",d);var u=a.attr("data-title-content-id");u&&a.data("ztitleId",u).removeAttr("data-title-content-id")}}},{key:"_trigger",value:function(e,t,a){return this._dispatchEvent(e,t,{target:a||this.target,tooltip:"show"===e?this.container:void 0})}},{key:"_destroy",value:function(){this.element.off("."+this.name),this._hide(!0)}},{key:"refresh",value:function(){this._lastEvent&&(this._refreshed=!0,this._targetEnter(this._lastEvent),this._refreshed=!1)}},{key:"setAttribute",value:function(e,a){return"object"===_typeof(a)&&this._opts[e]?void t.extend(this._opts[e],a):void(this._opts[e]=a)}},{key:"_appendShortCut",value:function(t,a){var o=this.target;o=o.is("label.zbutton")?o.prev("input"):o;var i=e._getOpts(o),l=e.ShortCut.getInfo(i.actionName,o,!1);return l&&(l=t.shortcutKeyCustomHTML?t.shortcutKeyCustomHTML.replace(/(#key#)/gi,l):" ("+l+")",a+=l),a}},{key:"_updateMargin",value:function(e,t,a){var o=e&&parseInt(e.top),i=e&&parseInt(e.left),n=this.targetOpt.rtl?-1:1,s=t.elementPosition;if(isNaN(o)&&(o=0),isNaN(i)&&(i=0),this._isAtCursorPos()){var r=t.availableHeight-this.container.outerHeight();s.left+=i*n,o||(o=l(16,r))}"top"===a?s.top-=o:"bottom"===a?s.top+=o:"right"===a?s.left+=i*n:"left"==a&&(s.left-=i*n)}},{key:"_getTargetAttrs",value:function(t){var a={},o=t[0].attributes,i=Object.keys(o);return i.forEach(function(t){var i=o[t];if(i){var l=i.nodeName,n=i.value;l.match(/^data-title-/)&&(l=l.replace(/^data-title-/,"").replace(/-([a-z])/g,function(e){return e[1].toUpperCase()}).replace(/(html)/gi,"HTML"),a[l]="true"===n||"false"===n?"true"===n:-1===n.indexOf("{")?n:e._getObject(n))}}),a}},{key:"show",value:function(e,a){return e=t(e||this.element),e.length&&(a=a||{},a.showDelay=0,this._targetEnter(void 0,e,a)),e}},{key:"hide",value:function(e){this._hide(e)}},{key:"name",get:function(){return"ztooltip"}},{key:"attrs",get:function(){return{isMessageHTMLEncoded:!1,selector:void 0,displayType:"box",position:"at-cursor",hideOnTargetClick:!0,margin:void 0,showDelay:500,hideDelay:300,maxDisplayTime:5e3,reshowDelay:void 0,showShortcutKey:!0,animation:{show:{name:"fade"},hide:{name:"fade"}},className:void 0,innerHTML:void 0,pauseOnMouseOver:!1,positionAlterable:void 0,parseTitleForOptions:!1,forElement:""}}},{key:"EVENTS",get:function(){return["beforeshow","show","beforehide","hide"]}}]),o}(e.CoreComponent);e.registerComponent("ZTooltip",U),function(e){var t=e.ztooltip.Templates;t.container=function(e){return ZT.html(tO171(),e.children&&t.children(e))},t.children=function(e){return ZT.html(tO172(),ZT.customHTML(e.content),e.callout&&ZT.html(tO173()))}}(ZComponents);var W=function(i){function l(){return _classCallCheck(this,l),_possibleConstructorReturn(this,_getPrototypeOf(l).apply(this,arguments))}return _inherits(l,i),_createClass(l,[{key:"_create",value:function(){this._init(),this._construct(),this._bindEvents()}},{key:"_init",value:function(){this._doc=e.$document[0]}},{key:"_construct",value:function(){var e=this.element;this.savedData={},e.addClass("zsortable"),this._manipulateHandles(),this._offsetPos=e.offset(),this._inited=!0}},{key:"_manipulateHandles",value:function(){this._refreshItems(),this._setHandleClassName(),this._refreshPositions()}},{key:"_handleMouseDown",value:function(e){var a=this,o=this._opts,i=this.name,l=o.sortStartDelay;l&&t(this._doc).on("mousemove.delay."+i,function(o){o.pageX!==e.pageX&&o.pageY!==e.pageY&&(clearTimeout(a._delay),t(a._doc).off("mousemove.delay."+i))}),this._delay=window.setTimeout(function(){var l=t(e.target);a._dispatchEvent("start",l,e),a._isMouseMoved=!1,a._ms&&a._handleMouseUp(e),a._mdEvent=e;var n=1===e.which,s=!!("string"==typeof o.ignoreAsHandle&&l[0].nodeName)&&l.closest(o.ignoreAsHandle).length,r=!o.handle||l.closest(o.handle).length;return!(n&&!s&&r&&a._captureMouseAction(e))||(!0===l.data(i+".prevClickEve")&&l.removeData(i+".prevClickEve"),t(a._doc).on("mousemove."+i,function(e){a._handleMouseMove(e)}).on("mouseup."+i,function(e){a._handleMouseUp(e)}),e.preventDefault(),!0)},l)}},{key:"_handleMouseMove",value:function(t){return(this._dispatchEvent("drag",t.target,t),this._isMouseMoved&&e.Browser.isIE&&(!document.documentMode||9>document.documentMode)&&!t.button)?this._handleMouseUp(t):((t.which||t.button)&&(this._isMouseMoved=!0),this._ms)?(this._onMouseDrag(t),t.preventDefault()):(this._opts.cancelOnEscKey&&e.$document.on("keydown."+this.name,this._keydownHandler.bind(this,t)),this._ms=!1!==this._handleMouseMoveStart(this._mdEvent,t),this[this._ms?"_onMouseDrag":"_handleMouseUp"](t),!this._ms)}},{key:"_keydownHandler",value:function(t,a){a.keyCode===e.keyCode.ESCAPE&&(this._handleMouseUp(this._mdEvent,!0),this._dispatchEvent("cancel",a.target,a)),e.$document.off("keydown."+this.name)}},{key:"_dispatchEvent",value:function(e,a,o){return _get(_getPrototypeOf(l.prototype),"_dispatchEvent",this).call(this,e,o,{value:a,draggedElement:this._draggedEle||t(o.target).closest(".zsortable__handle")})}},{key:"_handleMouseMoveStart",value:function(e){this.currentContainer=this,this._refreshPositions(),this._draggedEle=this._createDraggableElement(),this._saveDraggedEleSize(),this._saveMargins(),this._scrollParent=this._getScrollParent(this._draggedEle),this._scrollEleOffset=this._scrollParent[0]===document?{left:0,top:0}:this._scrollParent.offset(),this._offsetPos=this._selItem.offset(),this._offsetPos={top:this._offsetPos.top-this._margins.top,left:this._offsetPos.left-this._margins.left},this._draggedEle.css("position","absolute"),this._cssPos=this._draggedEle.css("position");var a=this,o=e.pageX,i=e.pageY;return t.extend(this._offsetPos,{click:{left:o-a._offsetPos.left,top:i-a._offsetPos.top},parent:a._getParentOffset(),relative:a._getRelativeOffset()}),this._elementPosition=this._fixPosition(e),this._eventPageX=o,this._eventPageY=i,this._formerDomElements={prev:this._selItem.prev()[0],parent:this._selItem.parent()[0]},this._createPlaceHolder(),this._opts.region&&this._setContainment(),this._draggedEle.addClass(this._opts.classNameOnSort+" zsortable__helper"),this._onMouseDrag(e),!0}},{key:"_setContainment",value:function(){var e=this._opts,a=e.region;"parent"===a&&(a=this._draggedEle[0].parentNode);var o="page"===a;if(o||"viewport"===a){var i=t(o?document:window);this._containment=[0-this._offsetPos.relative.left-this._offsetPos.parent.left,0-this._offsetPos.relative.top-this._offsetPos.parent.top,i.width()-this._draggedEleSize.width-this._margins.left,(i.height()||document.body.parentNode.scrollHeight)-this._draggedEleSize.height-this._margins.top]}else if("parent"!==a){var l=t(a)[0],s=t(l),r=t(a).offset(),d="hidden"!==t(l).css("overflow"),c=parseInt(s.css("borderLeftWidth")),_=parseInt(s.css("borderTopWidth"));this._containment=[r.left+c+parseInt(s.css("paddingLeft"))-this._margins.left,r.top+_+parseInt(s.css("paddingTop"))-this._margins.top,r.left+(d?n(l.scrollWidth,l.offsetWidth):l.offsetWidth)-c-parseInt(s.css("paddingRight"))-this._draggedEleSize.width-this._margins.left,r.top+(d?n(l.scrollHeight,l.offsetHeight):l.offsetHeight)-_-parseInt(s.css("paddingBottom"))-this._draggedEleSize.height-this._margins.top]}}},{key:"_onMouseDrag",value:function(e){var a=this._opts,l,s,r;this._position=this._fixPosition(e),this._changeToAbsolute=this._changePosition("absolute"),this._lastAbsolutePos||(this._lastAbsolutePos=this._changeToAbsolute);var d=this._opts.region,c=this._scrollEleOffset,_=this._scrollParent,u=!d||e.pageX>=this._containment[0]&&e.pageX<=this._containment[2],p=!d||e.pageY>=this._containment[1]&&e.pageY<=this._containment[3]+this._draggedEleSize.height,m=a.scrollSpeed;if(a.autoScrollRegion&&"viewport"!==a.region&&(u||p)){var h=!1,g,v;if(_[0]!==document&&"HTML"!==_[0].tagName)p&&(c.top+_[0].offsetHeight-e.pageY<a.scrollSensitivity?(h=!0,v=_[0].scrollTop+m+this._selItem.height()):e.pageY-c.top<a.scrollSensitivity&&(v=_[0].scrollTop-m),void 0!==v&&(!d||h&&_.offset().top-this._selItem.offset().top+v<=_[0].scrollHeight-_[0].offsetHeight||!h&&void 0!==this._containment[1]&&v>=this._containment[1]-_.offset().top)?(this._fullScroll=!1,_[0].scrollTop=v,this._refreshPositions(!0),this._offsetPos.top=this._selItem.offset().top,this._offsetPos.left=this._selItem.offset().left):!this._fullScroll&&void 0!==v&&(h&&!(this._selItem.offset().top+v)<=_[0].scrollHeight&&_[0].scrollTop!==_[0].scrollHeight-_[0].offsetHeight||!h&&v>=this._containment[1]&&0!==_[0].scrollTop)&&(_[0].scrollTop=h?_[0].scrollHeight-_[0].offsetHeight:0,this._fullScroll=!0)),u&&(c.left+_[0].offsetWidth-e.pageX<a.scrollSensitivity?(h=!0,g=_[0].scrollLeft+m):e.pageX-c.left<a.scrollSensitivity&&(g=_[0].scrollLeft-m),void 0!==g&&(!d||this._changeToAbsolute.left+g<this._containment[1])&&(_[0].scrollLeft=g));else{var y=t(document),f=this._prevX?n(o(this._prevY-e.pageY),o(this._prevX-e.pageX)):a.scrollSpeed;e.pageY-y.scrollTop()<a.scrollSensitivity?y.scrollTop(y.scrollTop()-f):t(window).height()-(e.pageY-y.scrollTop())<a.scrollSensitivity&&y.scrollTop(y.scrollTop()+f),e.pageX-y.scrollLeft()<a.scrollSensitivity?y.scrollLeft(y.scrollLeft()-f):t(window).width()-(e.pageX-y.scrollLeft())<a.scrollSensitivity&&y.scrollLeft(y.scrollLeft()+f),this._prevX=e.pageX,this._prevY=e.pageY}}this._changeToAbsolute=this._changePosition("absolute"),u&&("both"===a.axis||"y"!==a.axis)&&(this._draggedEle[0].style.left=this._position.left-a.cursorOffset.left+"px"),p&&("both"===a.axis||"x"!==a.axis)&&(this._draggedEle[0].style.top=this._position.top-a.cursorOffset.top+"px");for(var k=this.items.length-1;0<=k;k--)if((l=this.items[k],r=l.item[0],s=this._intersectsWithPointer(l),!!s)&&r!==this._selItem[0]&&this._placeHolder[1===s?"next":"prev"]()[0]!==r&&!this._placeHolder[0].contains(r)){this._direction=1===s?"down":"up",this._intersectsWithSides(l)&&"INPUT"!==l.item[0].nodeName&&this._reArrangeItems(e,l);break}return this._lastAbsolutePos=this._changeToAbsolute,this._checkContainerIntersection(e),!1}},{key:"_checkContainerIntersection",value:function(){for(var e=this.containers,t=e.length,a=t-1,l,n;0<=a;a--)e[a].element[0].contains(this._selItem[0])&&e[a].element[0].contains(this._placeHolder[0])||this._intersectsWith(this.containers[a].savedData)&&(l=e[a],n=a);if(l&&(!this.element[0].contains(l[0])||l.element[0]!==this.element[0])){for(var s=e[n],r=1e4,d=null,c=this._changeToAbsolute[s.floating?"left":"top"],_=this.items.length-1,u;0<=_;_--)s.element[0].contains(this.items[_].item[0])&&(u=s.floating?this.items[_].item.offset().left:this.items[_].item.offset().top,o(u-c)<r&&(r=o(u-c),d=this.items[_],this.direction=0<u-c?"down":"up"));this.currentContainer=s,this._reArrangeItems(event,d,!d&&s.element,!0)}}},{key:"_reArrangeItems",value:function(e,t,a,o){var i=this,l=this._placeHolder[0];if(a){var n=a[0];this._opts.prependToEmpty?n.insertBefore(l,n.firstChild):n.appendChild(l)}else{var s=t.item[0],r="down"===this._direction?s:s.nextSibling;s.parentNode.insertBefore(l,r)}this._counter=this._counter?++this._counter:1,setTimeout(function(){i._refreshPositions(!o)},0)}},{key:"_intersectsWithSides",value:function(e){var t=this._changeToAbsolute,a=this._isOverAxis(t.top+this._offsetPos.click.top,e.top+e.height/2,e.height),o=this._isOverAxis(t.left+this._offsetPos.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),l=this._getDragHorizontalDirection(),n=!1;if(!l&&!i)return!1;var s=this._containment,r;return this.floating&&l?(s&&(n=t.left<=s[0]||t.left>=s[2]),r=n||"right"===l&&o||"left"===l&&!o):(s&&(n=t.top<=s[1]||t.top>=s[3]),r=n||i&&("down"===i&&a||"up"===i&&!a)),r}},{key:"_intersectsWithPointer",value:function(e){var t="x"===this._opts.axis||this._isOverAxis(this._changeToAbsolute.top+this._offsetPos.click.top,e.top,e.height,"x"),a="y"===this._opts.axis||this._isOverAxis(this._changeToAbsolute.left+this._offsetPos.click.left,e.left,e.width,"y"),o=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();if(!(t&&a))return!1;var l=this.floating?i&&"right"===i||"down"===o?2:1:o&&("down"===o?2:1);return l}},{key:"_intersectsWith",value:function(e){var t={width:this._placeHolder.outerWidth(),height:this._placeHolder.outerHeight()},a=this._changeToAbsolute.left,o=a+t.width,i=this._changeToAbsolute.top,l=i+t.height,n=e.left,s=n+e.width,r=e.top,d=r+e.height,c=this._offsetPos.click.top,_=this._offsetPos.click.left;return t[this.floating?"width":"height"]>e[this.floating?"width":"height"]?i+c>r&&i+c<d&&a+_>n&&a+_<s:n<a+t.width/2&&o-t.width/2<s&&r<i+t.height/2&&l-t.height/2<d}},{key:"_isOverAxis",value:function(e,t,o,i){var l="x"===i,n=l?a(this._selItem.outerHeight()):0;return l&&n!==o?e+n>t&&e<t+o:e>=t&&e<t+o}},{key:"_getDragVerticalDirection",value:function(){var e=this._changeToAbsolute.top-this._lastAbsolutePos.top;return 0!=e&&(0<e?"down":"up")}},{key:"_getDragHorizontalDirection",value:function(){var e=this._changeToAbsolute.left-this._lastAbsolutePos.left;return 0!=e&&(0<e?"right":"left")}},{key:"_changePosition",value:function(e){var t="absolute"===e?1:-1,a="absolute"!==this._cssPos||this._scrollParent[0]!==this._doc&&this._scrollParent[0].contains(this._offsetParent[0])?this._scrollParent:this._offsetParent,o;("html"===a[0].tagName.toLowerCase()||"body"===a[0].tagName.toLowerCase())&&(o=!0);var i={top:this._position.top+this._offsetPos.relative.top*t+this._offsetPos.parent.top*t-("fixed"===this._cssPos?-this._scrollParent.scrollTop():o?0:a.scrollTop())*t,left:this._position.left+this._offsetPos.relative.left*t+this._offsetPos.parent.left*t-("fixed"===this._cssPos?-this._scrollParent.scrollLeft():o?0:a.scrollLeft())*t};return i}},{key:"_createPlaceHolder",value:function(){var e=this._selItem[0].nodeName.toLowerCase();this._placeHolder=t("<"+e+">",this._doc).addClass(this._selItem[0].className+" zsortable__placeholder"),this._placeHolder.addClass(this._opts.placeholderClassName),this._selItem.after(this._placeHolder),this._placeHolder.width(this._selItem.innerWidth()-parseInt(this._selItem.css("paddingLeft")||0,10)-parseInt(this._selItem.css("paddingRight")||0,10)),this._placeHolder.height(this._selItem.innerHeight()-parseInt(this._selItem.css("paddingTop")||0,10)-parseInt(this._selItem.css("paddingBottom")||0,10))}},{key:"_fixPosition",value:function(e){var t=e.pageX,a=e.pageY,i="absolute"!==this._cssPos||this._scrollParent[0]!==this._doc&&this._scrollParent[0].contains(this._offsetParent[0])?this._scrollParent:this._offsetParent,l;return this._containment&&(e.pageX-this._offsetPos.click.left<this._containment[0]&&(t=this._containment[0]+this._offsetPos.click.left),e.pageY-this._offsetPos.click.top<this._containment[1]&&(a=this._containment[1]+this._offsetPos.click.top),e.pageX-this._offsetPos.click.left>this._containment[2]&&(t=this._containment[2]+this._offsetPos.click.left),e.pageY-this._offsetPos.click.top>this._containment[3]&&(a=this._containment[3]+this._offsetPos.click.top)),("html"===i[0].tagName.toLowerCase()||"body"===i[0].tagName.toLowerCase())&&(l=!0),{top:a-this._offsetPos.click.top-this._offsetPos.relative.top-o(this._offsetPos.parent.top)+("fixed"===this._cssPos?-this._scrollParent.scrollTop():l?0:i.scrollTop()),left:t-this._offsetPos.click.left-this._offsetPos.relative.left-this._offsetPos.parent.left+("fixed"===this._cssPos?-this._scrollParent.scrollLeft():l?0:i.scrollLeft())}}},{key:"_getScrollParent",value:function(e,a){var o=e.css("position"),l=a?/(auto|scroll|hidden)/:/(auto|scroll)/,i=e.parents().filter(function(e,a){var i=t(a);return!("absolute"===o&&"static"===i.css("position"))&&l.test(i.css("overflow")+i.css("overflow-y")+i.css("overflow-x"))}).eq(0);return"fixed"!==o&&i.length?i:t(e[0].ownerDocument||document)}},{key:"_getParentOffset",value:function(){this._offsetParent=t(this._draggedEle[0].offsetParent);var a=this._offsetParent[0]===document?{left:0,top:0}:this._offsetParent.offset();return"absolute"===this._cssPos&&this._scrollParent[0]!==this._doc&&this._scrollParent[0].contains(this._offsetParent[0])&&(a.left+=this._scrollParent.scrollLeft(),a.top+=this._scrollParent.scrollTop()),(this._offsetParent[0]===this._doc.body||this._offsetParent[0].tagName&&"html"===this._offsetParent[0].tagName.toLowerCase()&&e.Browser.isIE)&&(a={top:0,left:0}),{top:a.top+(parseInt(this._offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this._offsetParent.css("borderLeftWidth"),10)||0)}}},{key:"_getRelativeOffset",value:function(){if("relative"===this._cssPos){var e=this._selItem.position();return{top:e.top-(parseInt(this._draggedEle.css("top"),10)||0)+this._scrollParent.scrollTop(),left:e.left-(parseInt(this._draggedEle.css("left"),10)||0)+this._scrollParent.scrollLeft()}}return{top:0,left:0}}},{key:"_saveMargins",value:function(){this._margins={left:parseInt(this._selItem.css("marginLeft"),10)||0,top:parseInt(this._selItem.css("marginTop"),10)||0}}},{key:"_createDraggableElement",value:function(){var t=this._selItem,a=this._selItem;return this._savedCSS={width:a[0].style.width,height:a[0].style.height,position:a.css("position"),top:a.css("top"),left:a.css("left")},t.width(a.width()-(e.Browser.isIE?parseInt(a.css("borderLeftWidth"))+parseInt(a.css("borderRightWidth")):0)).height(a.height()),t}},{key:"_saveDraggedEleSize",value:function(){this._draggedEleSize={width:this._draggedEle.outerWidth(),height:this._draggedEle.outerHeight()}}},{key:"_captureMouseAction",value:function(e){var a=null,o=this;if(this._isPrev=!1,this.reverting)return!1;if(this._opts.disabled)return!1;this._refreshItems();var i=t(e.target).parents().toArray();if(i.forEach(function(e){if(t.data(e,o.name+"-item")===o)return a=t(e),!1}),t.data(e.target,this.name+"-item")===o&&(a=t(e.target)),!a)return!1;this._selItem=a;var l=this._selItem.prev();return l.length?(this._adjacentElement=l,this._isPrev=!0):this._adjacentElement=this._selItem.next(),!0}},{key:"_handleMouseUp",value:function(e,a){var o=this.name;return clearTimeout(this._delay),t(this._doc).off("mousemove."+o).off("mouseup."+o),this._ms&&(this._ms=!1,this._prevX=this._prevY=void 0,e.target===this._mdEvent.target&&t.data(e.target,o+".prevClickEve",!0),this._dropDraggedElement(e,a)),!1}},{key:"_dropDraggedElement",value:function(e,t){e&&(!this._dispatchEvent("beforeend",e.target,e)&&(t=!0),this._placeElement(e,t))}},{key:"_placeElement",value:function(e,t){var a=this._selItem,o;if(this.reverting=!1,t?a["insert"+(this._isPrev?"After":"Before")](this._adjacentElement):!this._noFinalSort&&a.parent().length&&this._placeHolder.before(a),this._noFinalSort=null,this._draggedEle[0]===a[0]){for(o in this._savedCSS)("auto"===this._savedCSS[o]||"static"===this._savedCSS[o])&&(this._savedCSS[o]="");a.css(this._savedCSS).removeClass("zsortable__helper")}else a.show();this._draggedEle.removeClass(this._opts.classNameOnSort),this.dragging=!1,this._placeHolder[0].parentNode.removeChild(this._placeHolder[0]),this.fromOutside=!1,this._dispatchEvent("end",e.target,e),this._dispatchEvent("change",e.target,e)}},{key:"_bindEvents",value:function(){var e=this,a=this.name;this.element.on("mousedown."+a,function(t){e._handleMouseDown(t)}).on("click."+a,function(e){if(!0===t.data(e.target,a+".prevClickEve"))return t.removeData(e.target,a+".prevClickEve"),e.stopImmediatePropagation(),!1}).on("mouseup."+a,function(t){e._handleMouseUp(t)})}},{key:"_refreshItems",value:function(){this.items=[],this.containers=[this];var e=this._opts,a=[[t(e.items,this.element),this]],o,l,n;if(e.connectWith&&this._inited&&!e.restrictExternalItem)for(var s=t(e.connectWith),r=0,d;r<s.length;r++)d=t(s[r]).data("zsortable"),d&&d.element[0]!==this.element[0]&&(a.push([t(d._opts.items,d.element),d]),this.containers.push(d));for(var c=a.length-1;0<=c;c--){o=a[c][1],n=a[c][0];for(var _=0;_<n.length;_++)l=t(n[_]),l.data(this.name+"-item",o),this.items.push({item:l,width:0,height:0,left:0,top:0})}}},{key:"_setHandleClassName",value:function(){this.element.find(".zsortable__handle").removeClass("zsortable__handle");for(var e=this._opts.ignoreAsHandle.split(","),t=this.items,a=0,o,l;a<t.length;a++)l=t[a].item,o=e.indexOf(l[0].nodeName.toLowerCase()),-1===o&&l.addClass("zsortable__handle")}},{key:"_refreshPositions",value:function(e){var t=this.items;this.floating=!!t.length&&("x"===this._opts.axis||this._isFloating(t[0].item));for(var a=t.length-1,o,l,n;0<=a;a--)o=t[a],l=o.item,e||(o.width=l.outerWidth(),o.height=l.outerHeight()),n=l.offset(),o.left=n.left,o.top=n.top;for(var s=this.containers,r=s.length-1;0<=r;r--)n=s[r].element.offset(),s[r].savedData.left=n.left,s[r].savedData.top=n.top,s[r].savedData.width=s[r].element.outerWidth(),s[r].savedData.height=s[r].element.outerHeight();return this}},{key:"_isFloating",value:function(e){var t=e.css("float").toLowerCase(),a=e.css("display").toLowerCase();return"left"===t||"right"===t||"table-cell"===a||"inline"===a}},{key:"_unbindEvents",value:function(e){var a=this.name;this.element.off("mousedown."+a).off("click."+a),t(this._doc).off("mousemove."+a).off("mouseup."+a),e&&this.element.removeData(a)}},{key:"destroy",value:function(){this._unbindEvents(!0)}},{key:"disable",value:function(){this._unbindEvents()}},{key:"enable",value:function(){this._bindEvents()}},{key:"getItems",value:function(){return this.items}},{key:"refresh",value:function(){return this._manipulateHandles(),this}},{key:"_disable",value:function(){}},{key:"_setAttribute",value:function(e,t){this._opts[e]=t,"items"===e?this._manipulateHandles():"ignoreAsHandle"===e?this._setHandleClassName():("connectWith"==e||"restrictExternalItem"==e)&&this._refreshItems()}},{key:"name",get:function(){return"zsortable"}},{key:"attrs",get:function(){return{items:"> *",handle:void 0,ignoreAsHandle:"input,textarea,button,select,option",axis:"both",region:void 0,disabled:!1,classNameOnSort:"",cancelOnEscKey:!0,connectWith:void 0,autoScrollRegion:!0,placeholderClassName:"",sortStartDelay:0,cursorOffset:{left:0,top:0},restrictExternalItem:!1,scrollSensitivity:20,scrollSpeed:20,prependToEmpty:!1}}},{key:"EVENTS",get:function(){return["start","drag","change","beforeend","end","cancel"]}}]),l}(e.CoreComponent);e.registerComponent("ZSortable",W)}(ZComponents,ZComponents.DOMUtil);